"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[596],{52800:function(e,t,n){n.d(t,{_7:function(){return u},UJ:function(){return d},dO:function(){return p},UA:function(){return m},Jp:function(){return b},y7:function(){return y}});var r=n(95287),a=n(36163),o=n(9749),i=n(80480),c=n(15259),l=n(38603),s="http://www.w3.org/ns/solid/oidc#",u="".concat(s,"tos_uri"),d="".concat(s,"policy_uri"),p="".concat(s,"contacts"),m="".concat(s,"logo_uri"),f="https://mockappurl.com",g=(0,c.tS)((0,r.Lx)({url:"https://mockappurl.com#contacts"}),(function(e){return(0,a.go)(e,i.ay.name,"Example Contact")}),(function(e){return(0,a.go)(e,i.w_.hasTelephone,"555-5555")}),(function(e){return(0,a.go)(e,i.w_.hasEmail,"example@email.com")}),(function(e){return(0,a.qg)(e,i.w_.url,"https://examplewebsite.com")})),h=(0,r.lY)((0,o.HM)(),g);function b(){return(0,c.tS)((0,r.Lx)({url:f}),(function(e){return(0,a.go)(e,i.ay.name,"Mock App")}),(function(e){return(0,a.qg)(e,(0,l.BC)("WebId"),f)}),(function(e){return(0,a.qg)(e,i.E_.type,i.fK.SoftwareApplication)}),(function(e){return(0,a.qg)(e,u,"https://mockappurl.com/terms-of-service")}),(function(e){return(0,a.qg)(e,d,"https://mockappurl.com/privacy-policy")}),(function(e){return(0,a.qg)(e,p,"https://mockappurl.com#contacts")}))}function y(){return(0,r.lY)(h,b())}},14844:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(67294),a=n(35117),o=n(868),i=n(282),c=n(54303),l=n(86010);var s=(0,n(11719).Z)((function(e){return(0,a.Z)(function(e){return(0,c.createStyles)(e,["icons","button"],{infoTooltipContainer:{display:"flex"},infoButton:{padding:0,minWidth:"max-content"},infoIcon:{margin:e.spacing(.4),color:e.palette.info.main}})}(e))}));function u(e){var t=e.tooltipText,n=e.label,a=e.className,u=s(),d=(0,c.useBem)(s());return r.createElement("div",{className:(0,l.Z)(u.infoTooltipContainer,a)},n&&r.createElement("span",{"data-testid":"info-button-label"},n),r.createElement(o.ZP,{title:t,arrow:!0},r.createElement(i.Z,{classes:{root:u.infoButton}},r.createElement("i",{className:(0,l.Z)(d("icon-info"),d("icon"),u.infoIcon),"aria-label":"Info"}))))}u.defaultProps={className:null,label:null}},83596:function(e,t,n){n.d(t,{Z:function(){return xe}});var r=n(50029),a=n(87794),o=n.n(a),i=n(67294),c=n(40478),l=n(11163),s=n(29773),u=n(95287),d=n(35863),p=n(80480),m=n(11719),f=n(35117),g=n(22318),h=n(89659),b=n(54303),y=n(3084),v=n(87827),x=n(23934),w={consentRequest:{},setConsentRequest:function(){}},k=(0,i.createContext)(w);function E(e){var t=e.children,n=e.consentRequest,r=e.setConsentRequest;return i.createElement(k.Provider,{value:{consentRequest:n,setConsentRequest:r}},t)}E.defaultProps=w;var _=k,C=n(59499);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,C.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=n(27812),P=n(58770),N=n(51769),q=n(62822),D=n(50998),j=n(30553),I=n(14844),A=n(68504),R=n(9570),z=n(868),M=n(64436),F=n(6562),W=n(14179);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){(0,C.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J(e){return{"request-container":{flexGrow:1,flexDirection:"column",margin:e.spacing(1,0),alignItems:"center",display:"flex",gap:"1rem"},"request-container__content":{border:"solid 1px",borderColor:e.palette.grey[200],borderRadius:8,boxShadow:"0 4px 12px 1px rgba(208,208,208,0.22)",display:"block",padding:e.spacing(2.4),width:"100%",maxWidth:600,minHeight:50},"request-container__section":{padding:0,border:0,width:"100%",borderRadius:4,display:"flex",flexGrow:1,margin:0,flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},"request-container__section--box":{width:"100%",border:"solid 1px",borderColor:e.palette.grey[200],padding:e.spacing(.6,1.2,.6,1.2)},box__content:{width:"100%",display:"flex",justifyContent:"space-between",fontWeight:"normal",marginLeft:0,paddingLeft:"1rem",boxSizing:"border-box"},"request-container__section-header":{display:"flex"},"request-container__button--small":{fontSize:"0.8rem",textTransform:"capitalize",padding:e.spacing(.6),whiteSpace:"nowrap"},"request-container__button--full-width":{display:"flex",position:"relative",flexGrow:1,margin:"1rem",flexDirection:"column",alignItems:"center","&:before":{display:"block",content:'""',position:"absolute",width:"100%",height:1,bottom:"3rem",backgroundColor:e.palette.grey[300]}},"request-container__header-text":{display:"flex",flexDirection:"row",alignItems:"baseline",fontSize:"1.4rem",margin:0,width:"100%"},header__content:{flexGrow:1},"request-container__header-text--small":{fontSize:"0.8125rem",fontFamily:e.typography.body2.fontFamily},"request-container__header-text--center":{textAlign:"center"},"icon-small":T(T({},e.icons.iconColor(e.palette.info.main)),{},{fontSize:"1rem",marginRight:"0.5rem"}),"icon-small--dark":T({},e.icons.iconColor("#0D6796")),"icon-small--primary":{color:e.palette.primary.main,margin:0},"icon-small--primary-disabled":{color:e.palette.grey[700],margin:0},"icon-small--padded":{marginLeft:"0.5rem"},"dropdown-caret":{border:"none",background:"transparent",cursor:"pointer"},"full-width":{display:"block",width:"100%"},"full-width--padded-left":{paddingLeft:"1.5rem"},form__controls:(0,C.Z)({display:"flex",flexDirection:"column-reverse",justifyContent:"space-between"},e.breakpoints.up("sm"),{flexDirection:"row"}),heading__uppercase:{textTransform:"uppercase",marginBottom:e.spacing(1)},footer__links:{display:"flex",justifyContent:"space-between",marginTop:e.spacing(2)},avatar:{textAlign:"center",width:"30px",height:"30px",padding:e.spacing(1),borderRadius:"50%",marginRight:e.spacing(.4),fontSize:e.typography.h6.fontSize,color:e.palette.primary.main,backgroundColor:"#F1EDFF",display:"inline-block",position:"relative",left:0,top:0},"agent-name":{display:"flex",justifyContent:"center",wordBreak:"break-word"},purpose:{display:"flex",justifyContent:"flex-start",padding:"1rem",wordBreak:"break-word"},"date-container":{display:"flex",padding:e.spacing(.7,1.2),border:"1px solid ".concat(e.palette.grey.A100),borderRadius:10,height:"2.5rem",marginBottom:"1rem",marginTop:"0.5rem",position:"relative",maxWidth:300},"date-input":{fontSize:"1rem",width:"100%",font:"inherit",fontWeight:500,color:e.palette.primary.text},"date-button":{padding:0},"date-picker":{maxWidth:320,borderRadius:4,boxShadow:"0 4px 8px 0 ".concat(e.palette.grey[500]),overflow:"hidden",display:"flex",flexDirection:"column",position:"absolute",left:0,top:"calc(100% + 0.5rem)",zIndex:2,backgroundColor:e.palette.background.paper},"date-picker__container":{padding:"1rem",overflow:"hidden"},"list-item":{marginLeft:"2rem",paddingBottom:0,paddingTop:"1rem"},purposeLabel:{fontFamily:e.typography.body2.fontFamily,fontWeight:e.typography.body2.fontWeight},root:{padding:"0 0.5rem","&:hover":{backgroundColor:"transparent"}},icon:{borderRadius:8,width:"1.75rem",height:"1.75rem",boxShadow:"inset 0 0 0 1px ".concat(e.palette.text.primary,", inset 0 -1px 0 ").concat(e.palette.text.primary),backgroundColor:e.palette.background.paper,backgroundImage:"linear-gradient(180deg,hsla(0,0%,100%,.8),hsla(0,0%,100%,0))","$root.Mui-focusVisible &":{outline:"2px auto rgba(19,124,189,.6)",outlineOffset:2},"input:hover ~ &":{backgroundColor:"transparent"},"input:disabled ~ &":{boxShadow:"none",background:"rgba(206,217,224,.5)"}},checkedIcon:{backgroundColor:e.palette.primary.main,boxShadow:"none",backgroundImage:"linear-gradient(180deg,hsla(0,0%,100%,.1),hsla(0,0%,100%,0))","&:before":{display:"block",width:"1.75rem",height:"1.75rem",backgroundImage:"url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M12 5c-.28 0-.53.11-.71.29L7 9.59l-2.29-2.3a1.003 1.003 0 00-1.42 1.42l3 3c.18.18.43.29.71.29s.53-.11.71-.29l5-5A1.003 1.003 0 0012 5z' fill='%23fff'/%3E%3C/svg%3E\")",content:'""'},"input:hover ~ &":{backgroundColor:e.palette.primary.main}},"purposes-container":{padding:"2rem 0",wordBreak:"break-word"}}}var Y=n(15259),L=n(11977),G=n(28e3),V=n(21015),U=n(12221),H=n(86856),K=(0,m.Z)((function(e){return(0,f.Z)(J(e))})),$=function(e,t){var n=null===e||void 0===e?void 0:e.map((function(e,n){var r=[];return t.forEach((function(t){JSON.stringify(e.accessModes)===JSON.stringify(t.accessModes)&&e.index===t.index&&e.resourceIri===t.resourceIri&&!1===t.checked&&r.push(n)})),r.includes(n)?null:e})),r=null===n||void 0===n?void 0:n.filter((function(e){return!!e&&!0===e.checked})),a=t.filter((function(e){return e.checked}));return(0,Y.zA)(r?[].concat((0,O.Z)(r),(0,O.Z)(a)):(0,O.Z)(a))},X=function(e){var t,n=e.resourceIri,r=e.isChecked,a=e.handleOnChange,o=e.index,c=(0,b.useBem)(K());return i.createElement(j.Z,{key:o,value:n,control:i.createElement(R.Z,{checked:null!==(t=r[o])&&void 0!==t&&t,onChange:function(){return a(o)},color:"primary"}),label:i.createElement(g.Z,{variant:"body2"},i.createElement(s.PJ,{name:"file",className:c("icon-small","dark")}),i.createElement(z.ZP,{title:n,arrow:!0},i.createElement("span",null,(0,G.Yj)(n)))),labelPlacement:"start",className:c("box__content")})},Q=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0;return(0,Y.sr)(e)?i.createElement(te,{key:t,resourceIri:e,isChecked:n,handleOnChange:function(){return r(t)},index:t,overrideCheck:a,setSelectedAccess:o,modesObject:c}):i.createElement(X,{key:t,resourceIri:e,isChecked:n,handleOnChange:function(){return r(t)},index:t,setSelectedAccess:o,modesObject:c})},ee=function(e){var t=e.resourceIri,n=e.overrideCheck,r=e.modesObject,a=e.setSelectedAccess,o=(0,U.Z)(t),c=o.data,l=o.isValidating,s=(0,i.useState)([]),u=s[0],d=s[1],p=(0,i.useState)(new Array((u||[]).length).fill(!1)),m=p[0],f=p[1];(0,i.useEffect)((function(){if(!(!t||c&&(0,Y.sr)(t)&&(0,A.LH)(c.dataset)!==t)){var e=c&&(0,H.W)(c);d(e)}}),[c,t]),(0,i.useEffect)((function(){f(new Array((u||[]).length).fill(!1))}),[u]);(0,i.useEffect)((function(){!function(){var e=m.map((function(){return n}));f(e)}()}),[n]),(0,i.useEffect)((function(){var e=m.map((function(e,n){return{checked:e,accessModes:r,resourceIri:t,index:n}}));a((function(t){return $(t,e)}))}),[r,m,a,t]);var g=function(e){var t=m.map((function(t,n){return n===e?!t:t}));f(t)};return!u||l?i.createElement(V.Z,null):i.createElement(i.Fragment,null,null===u||void 0===u?void 0:u.map((function(e,t){return Q(e,t,m,g,n,a,r,u.length)})))};ee.defaultProps={overrideCheck:!1};var te=function(e){var t,n=e.resourceIri,r=e.isChecked,a=e.handleOnChange,o=e.index,c=e.overrideCheck,l=e.setSelectedAccess,u=e.modesObject,d=e.length,p=(0,b.useBem)(K()),m=(0,i.useState)(!1),f=m[0],h=m[1],y=(0,i.useState)(c),v=y[0],x=y[1],w=(0,U.Z)(n),k=w.data,E=w.isValidating,_=(0,i.useState)(null),C=_[0],S=_[1];return(0,i.useEffect)((function(){if(!(!n||k&&(0,Y.sr)(n)&&(0,A.LH)(k.dataset)!==n)){var e=k&&(0,H.W)(k);S(e||[])}}),[k,n]),(0,i.useEffect)((function(){x(c)}),[c,r]),!C||E?i.createElement(V.Z,null):i.createElement(i.Fragment,null,i.createElement(j.Z,{key:o,value:n,control:i.createElement(R.Z,{checked:null!==(t=r[o])&&void 0!==t&&t,onChange:function(){a(o),x(!v)},inputProps:{"data-testid":"consent-access-switch"},color:"primary"}),label:i.createElement(g.Z,{variant:"body2"},i.createElement(s.PJ,{name:"folder",className:p("icon-small","dark")}),i.createElement(z.ZP,{title:n,arrow:!0},i.createElement("span",null,(0,G.Yj)(n))),(d>0||C.length>0)&&i.createElement("button",{"data-testid":"expand-section",type:"button",className:p("dropdown-caret"),onClick:function(){return h(!f)}},i.createElement(s.PJ,{name:f?"caret-up":"caret-down",className:p("icon-small--padded")}))),labelPlacement:"start",className:p("box__content")}),f&&i.createElement("div",{className:p("full-width","padded-left")},i.createElement(ee,{resourceIri:n,overrideCheck:r[o],setSelectedAccess:l,modesObject:u})))};function ne(e){var t=e.agentName,n=e.sectionDetails,r=e.setSelectedAccess,a=n&&(0,L.Pt)(n),o=n&&(0,L.Ph)(n),c=(0,b.useBem)(K()),l=(0,i.useState)([]),u=l[0],d=l[1],p=(0,i.useState)(!1),m=p[0],f=p[1],h=(0,i.useMemo)((function(){return o?{read:o.some((function(e){return e.includes("Read")})),write:o.some((function(e){return e.includes("Write")})),append:o.some((function(e){return e.includes("Append")})),control:o.some((function(e){return e.includes("Control")}))}:{}}),[o]);(0,i.useEffect)((function(){a&&a.length&&d(new Array(a.length).fill(!1))}),[a]),(0,i.useEffect)((function(){u&&f(u.filter((function(e){return!0===e})).length===u.length)}),[u]),(0,i.useEffect)((function(){if(u){var e=u.map((function(e,t){return{checked:e,accessModes:h,resourceIri:a[t],index:t}}));r((function(t){return $(t,e)}))}}),[a,h,u,r]);var y=function(e){var t=u.map((function(t,n){return n===e?!t:t}));d(t)};return n&&a&&null!==u&&void 0!==u?i.createElement(i.Fragment,null,i.createElement(M.Z,{component:"fieldset",className:c("request-container__section")},i.createElement("legend",{className:c("request-container__header-text","small")},i.createElement(s.PJ,{name:(0,W.yz)(h,"iconName"),className:c("icon-small")}),i.createElement("span",{className:c("header__content")},"".concat(t," ").concat((0,W.yz)(h,"titleConsent"))),i.createElement(s.zx,{"data-testid":"request-select-all",variant:"secondary",type:"button",onClick:function(){var e=u.map((function(){return!m}));d(e)},className:c("request-container__button","small")},i.createElement(g.Z,{component:"span",variant:"caption"},m?"Deny all":"Select all"))),i.createElement(F.Z,{"aria-label":"position",row:!0,className:c("request-container__section","box")},a&&a.map((function(e,t){return Q(e,t,u,y,!1,r,h)}))))):i.createElement(V.Z,null)}te.defaultProps={overrideCheck:!1,length:null};var re=n(42298),ae=n(99874),oe=n(15575),ie=n(17812),ce=(0,m.Z)((function(e){return(0,f.Z)(J(e))}));function le(e){var t=e.selectedDate,n=e.setSelectedDate,r=e.datepickerOpen,a=e.setDatepickerOpen,o=e.handleDateChange,c=e.setDateForever,l=ce(),u=(0,b.useBem)(l),d=(0,i.useContext)(_).consentRequest,p=(0,L.ul)(d),m=(0,i.useRef)();return(0,s.O3)(m,(function(){return a(!1)})),(0,i.useEffect)((function(){p&&n(p)}),[p,n]),i.createElement("div",{ref:m,className:u("date-container")},i.createElement(oe.Z,{classes:{root:u("date-input")},placeholder:"Consent expiry date",value:t?(0,re.Z)(t,"MMMM' 'd', 'Y"):"Forever",inputProps:{"data-testid":"date-input-field","aria-label":"Consent expiry date",readOnly:"readonly"}}),i.createElement(ie.Z,{"data-testid":"date-picker-calendar-button",classes:{root:u("date-button")},type:"button",disabled:!0,"aria-label":"Set expiry date",onClick:function(){return a(!r)}},i.createElement(s.PJ,{name:"calendar",className:u("icon-small--primary-disabled")})),r&&i.createElement("div",{className:u("date-picker")},i.createElement(ae.M,{disableToolbar:!0,orientation:"portrait",variant:"static",disablePast:!0,disabled:!0,format:"MM/dd/yyyy",margin:"normal",value:t,onChange:o}),i.createElement(s.zx,{type:"button",variant:"small",onClick:function(){return c()},className:u("request-container__button","full-width"),"data-testid":"forever-button"},"Forever")))}le.defaultProps={selectedDate:null};var se=n(7513),ue=n(20829),de=n(86010),pe=n(80797);var me=(0,m.Z)((function(e){return(0,f.Z)(function(e){return{root:{padding:"0 0.5rem","&:hover":{backgroundColor:"transparent"}},icon:{borderRadius:8,width:"1.75rem",height:"1.75rem",boxShadow:"inset 0 0 0 1px ".concat(e.palette.text.primary,", inset 0 -1px 0 ").concat(e.palette.text.primary),backgroundColor:e.palette.background.paper,backgroundImage:"linear-gradient(180deg,hsla(0,0%,100%,.8),hsla(0,0%,100%,0))","$root.Mui-focusVisible &":{outline:"2px auto rgba(19,124,189,.6)",outlineOffset:2},"input:hover ~ &":{backgroundColor:"transparent"},"input:disabled ~ &":{boxShadow:"none",background:"rgba(206,217,224,.5)"}},checkedIcon:{backgroundColor:e.palette.primary.main,boxShadow:"none",backgroundImage:"linear-gradient(180deg,hsla(0,0%,100%,.1),hsla(0,0%,100%,0))","&:before":{display:"block",width:"1.75rem",height:"1.75rem",backgroundImage:"url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M12 5c-.28 0-.53.11-.71.29L7 9.59l-2.29-2.3a1.003 1.003 0 00-1.42 1.42l3 3c.18.18.43.29.71.29s.53-.11.71-.29l5-5A1.003 1.003 0 0012 5z' fill='%23fff'/%3E%3C/svg%3E\")",content:'""'},"input:hover ~ &":{backgroundColor:e.palette.primary.main}},"purposes-container":{padding:"2rem 0"}}}(e))}));function fe(e){var t=e.handleSelectPurpose,n=e.url,r=e.description,a=e.disabled,o=(0,i.useState)(!1),c=o[0],l=o[1],s=me();return i.createElement(pe.Z,{className:s.root,disabled:a,disableRipple:!0,checked:c,checkedIcon:i.createElement("span",{className:(0,de.Z)(s.icon,s.checkedIcon)}),icon:i.createElement("span",{className:s.icon}),value:n,name:r,color:"primary",onChange:function(e){t(e),l(e.target.checked)},inputProps:{"data-testid":"purpose-checkbox-input",checked:c}})}fe.defaultProps={disabled:!1};var ge=(0,m.Z)((function(e){return(0,f.Z)(J(e))})),he="consent-request-no-access-dialog";function be(e){var t=e.agentDetails,n=e.agentWebId,a=ge(),u=(0,b.useBem)(a),d=(0,l.useRouter)(),p=(0,c.useSession)().session,m=d.query.redirectUrl,f=(0,i.useContext)(_).consentRequest,h=(0,i.useState)([]),y=h[0],v=h[1],x=(0,L.FT)(f),w=(0,i.useState)([]),k=w[0],E=w[1],C=y.map((function(e){return e.resourceIri})),S=(t||null).agentName,Z=(0,i.useContext)(se.ZP),A=Z.confirmed,R=Z.open,z=Z.setContent,M=Z.setOpen,F=Z.setTitle,W=Z.closeDialog,B=Z.setConfirmText,T=Z.setOmitCancelButton,J=(0,i.useState)(!1),Y=J[0],G=J[1],V=(0,L.a3)(f),U=(0,L.ul)(f),H=(0,i.useState)(new Date),K=(H[0],H[1]),$=(0,i.useState)(!1),X=$[0],Q=$[1],ee="".concat(S||n," will not have access to anything in your Pod."),te="At least one purpose needs to be selected to approve access for ".concat(S),re=(0,L.M2)(f),ae=function(){var e=(0,r.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!y.length||!k.length){e.next=8;break}return e.next=4,(0,P.VY)(p.info.webId,f,{requestor:re,access:y.accessModes,resources:C},{fetch:p.fetch});case 4:if(!(n=e.sent)){e.next=8;break}return e.next=8,d.push("".concat(m,"?signedVcUrl=").concat((0,L.MK)(n)));case 8:k.length?y.length||(G(!0),T(!1),M(he),F("Your haven't selected any access"),B("Continue with no access"),z(ee)):(G(!0),M(he),F("Select a purpose"),B("Ok"),T(!0),z(te));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){var e=function(){var e=(0,r.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,N.$)(p.info.webId,f);case 2:if(!(t=e.sent)){e.next=6;break}return e.next=6,d.push("".concat(m,"?signedVcUrl=").concat((0,L.MK)(t)));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Y&&null===A&&R===he||(Y&&A&&R===he&&(e(),W()),null!==A&&(W(),G(!1)))}),[Y,A,W,R,f,y,k,C,m,p,d]);(0,i.useEffect)((function(){U&&K(new Date(U))}),[U]),(0,i.useEffect)((function(){x&&(Array.isArray(x)&&1===x.length&&E(x[0]),Array.isArray(x)||E(x))}),[x]);var oe=function(e){e.target.checked?E((function(t){return[].concat((0,O.Z)(t),[e.target.value])})):E((function(t){return t.filter((function(t){return t!==e.target.value}))}))};return i.createElement(i.Fragment,null,i.createElement("form",{className:u("request-container__content","main"),onSubmit:ae},i.createElement(g.Z,{component:"h2",align:"center",variant:"h1"},i.createElement("span",{className:u("agent-name")},"Allow ",S||n," access?")),Array.isArray(x)&&1===x.length?i.createElement("span",{className:u("purpose")},x[0].description||x[0],i.createElement(I.Z,{tooltipText:x[0].url||x[0]||"Purpose"})):i.createElement("div",{className:u("purposes-container")},Array.isArray(x)?i.createElement(i.Fragment,null,"Select the purposes you wish to allow:",i.createElement(q.Z,null,null===x||void 0===x?void 0:x.map((function(e){return i.createElement(D.Z,{key:e,className:u("list-item")},i.createElement(j.Z,{classes:{label:a.purposeLabel},label:e,control:i.createElement(fe,{classes:a,url:e,description:e,handleSelectPurpose:oe})}))})))):x),i.createElement("span",{className:u("request-container__header-text","small")},"".concat(S||n," will have access until")),i.createElement(le,{selectedDate:null,setSelectedDate:K,datepickerOpen:X,setDatepickerOpen:Q,handleDateChange:function(e){K(e),Q(!1)},setDateForever:function(){K(null),Q(!1)}}),V&&V.map((function(e,t){return i.createElement(ne,{key:"consent-request-section-".concat(t),agentName:S||n,sectionDetails:e,selectedAccess:y,setSelectedAccess:v})})),i.createElement("div",{className:u("form__controls")},i.createElement(s.zx,{"data-testid":"consent-request-deny-button",variant:"secondary",type:"button",className:u("request-container__button"),onClick:function(){G(!0),T(!1),F("Deny all access?"),B("Deny All Access"),z(ee),M(he)}},"Deny all access"),i.createElement(s.zx,{"data-testid":"consent-request-submit-button",type:"submit",className:u("request-container__button")},"Confirm Access"))),i.createElement(ue.ZP,null))}be.defaultProps={agentDetails:{}};var ye=n(52800),ve=(0,m.Z)((function(e){return(0,f.Z)(function(e){return{"request-container":{flexGrow:1,flexDirection:"column",margin:e.spacing(1,0),alignItems:"center",display:"flex",gap:"1rem"},"request-container__content":{border:"solid 1px",borderColor:e.palette.grey[200],borderRadius:8,boxShadow:"0 4px 12px 1px rgba(208,208,208,0.22)",display:"block",padding:e.spacing(2.4),width:"100%",maxWidth:600,minHeight:50},"request-container__section":{padding:0,border:0,width:"100%",borderRadius:4,display:"flex",flexGrow:1,margin:0,flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},"request-container__section--box":{width:"100%",border:"solid 1px",borderColor:e.palette.grey[200],padding:e.spacing(.6,1.2,.6,1.2)},box__content:{width:"100%",display:"flex",justifyContent:"space-between",fontWeight:"normal"},"request-container__section-header":{display:"flex"},"request-container__button--small":{fontSize:"0.8rem",textTransform:"capitalize",padding:e.spacing(.6)},"request-container__header-text":{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"baseline",fontSize:"1.4rem",margin:0,width:"100%"},"request-container__header-text--small":{fontSize:"0.8125rem",fontFamily:e.typography.body2.fontFamily},"request-container__header-text--center":{textAlign:"center"},"icon-small":Z(Z({},e.icons.iconColor(e.palette.info.main)),{},{fontSize:"1rem",marginRight:"0.5rem"}),"icon-small--primary":{color:e.palette.primary.main},form__controls:{display:"flex",justifyContent:"space-between"},heading__uppercase:{textTransform:"uppercase",marginBottom:e.spacing(1)},footer__links:(0,C.Z)({display:"flex",justifyContent:"space-between",marginTop:e.spacing(2),flexDirection:"column",alignContent:"center",alignItems:"flex-start",margin:"1rem auto",maxWidth:"max-content"},e.breakpoints.up("sm"),{flexDirection:"row",alignItems:"baseline",margin:"1rem auto",maxWidth:"100%"}),footer__link:{display:"block",height:"2rem"},avatar:{textAlign:"center",width:"30px",height:"30px",padding:e.spacing(1),borderRadius:"50%",marginRight:e.spacing(.4),fontSize:e.typography.h6.fontSize,color:e.palette.primary.main,backgroundColor:"#F1EDFF",display:"inline-block",position:"relative",left:0,top:0},"app-name":{display:"flex",justifyContent:"center",alignItems:"baseline"}}}(e))}));function xe(){(0,x.KW)();var e=(0,c.useSession)().session.fetch,t=(0,l.useRouter)().query.requestVc,n=(0,b.useBem)(ve()),a=(0,i.useState)(null),m=a[0],f=a[1],w=(0,L.M2)(m),k=(0,i.useState)({}),_=k[0],C=k[1],S=_||null,Z=S.agentName,O=S.agentUrl,P=S.agentPolicy,N=S.agentTOS;return(0,i.useEffect)((function(){if(t){var e=JSON.parse(atob(t));f(e)}}),[t,e]),(0,i.useEffect)((function(){m&&(0,r.Z)(o().mark((function t(){var n,r,a,i,c;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,G.bk)(w,e);case 2:n=t.sent,r=n.dataset,a=r&&(0,u.YY)(r,w),i=a&&(0,d.Gr)(a,ye.dO),c=i?(0,u.YY)(r,i):null,C({agentName:a&&(0,d.oX)(a,p.ay.name),agentUrl:c?(0,d.Gr)(c,p.w_.url):null,agentTOS:a&&(0,d.Gr)(a,ye._7),agentPolicy:a&&(0,d.Gr)(a,ye.UJ)});case 8:case"end":return t.stop()}}),t)})))()}),[w,e,m]),m?i.createElement(E,{consentRequest:m,setConsentRequest:f},i.createElement(v.M,{utils:y.Z},i.createElement(s.W2,{className:n("request-container")},i.createElement(be,{agentDetails:_,agentWebId:w}),i.createElement("div",{className:n("request-container__content")},i.createElement(g.Z,{component:"h3",align:"center",variant:"h3",className:n("heading__uppercase")},"About this application"),i.createElement("div",{className:n("app-name")},i.createElement(s.PJ,{className:n("avatar"),name:"project-diagram"}),i.createElement(g.Z,{align:"center",variant:"body2"},i.createElement("span",{className:n("footer__link")},i.createElement(h.Z,{href:w,variant:"body2"},Z||w)))),i.createElement(g.Z,{className:n("footer__links")},O&&i.createElement("span",{className:n("footer__link")},i.createElement(h.Z,{href:O,variant:"body2"},i.createElement(s.PJ,{name:"globe",className:n("icon-small","primary")}),"Website")),P&&i.createElement("span",{className:n("footer__link")},i.createElement(h.Z,{href:P,variant:"body2"},i.createElement(s.PJ,{name:"webid",className:n("icon-small","primary")}),"Privacy Policy")),N&&i.createElement("span",{className:n("footer__link")},i.createElement(h.Z,{href:N,variant:"body2"},i.createElement(s.PJ,{name:"doc",className:n("icon-small","primary")}),"Terms of Service"))))))):i.createElement(V.Z,null)}},12221:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(50029),a=n(87794),o=n.n(a),i=n(35345),c=n(40478),l=n(70936),s=n(86856);function u(e){var t=(0,c.useSession)(),n=t.sessionRequestInProgress,a=(0,l.Nk)(e);function u(e){return d.apply(this,arguments)}function d(){return(d=(0,r.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.Z)(a,{fetch:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,i.ZP)(["container",a,n],(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a&&!n){e.next=2;break}return e.abrupt("return",null);case 2:return e.abrupt("return",u(t.fetch));case 3:case"end":return e.stop()}}),e)}))),{revalidateOnFocus:!1,refreshInterval:0,errorRetryInterval:2e3})}},11977:function(e,t,n){n.d(t,{FT:function(){return r},Wt:function(){return a},ul:function(){return o},a3:function(){return i},Pt:function(){return c},Ph:function(){return l},M2:function(){return s},MK:function(){return u}});function r(e){var t,n,r;return e?Array.isArray(null===e||void 0===e||null===(t=e.credentialSubject)||void 0===t?void 0:t.hasConsent)?null===e||void 0===e||null===(n=e.credentialSubject)||void 0===n?void 0:n.hasConsent[0].forPurpose:null===e||void 0===e||null===(r=e.credentialSubject)||void 0===r?void 0:r.hasConsent.forPurpose:null}function a(e){return null===e||void 0===e?void 0:e.issuanceDate}function o(e){return null===e||void 0===e?void 0:e.expirationDate}function i(e){var t,n,r;return Array.isArray(null===e||void 0===e||null===(t=e.credentialSubject)||void 0===t?void 0:t.hasConsent)?null===e||void 0===e||null===(n=e.credentialSubject)||void 0===n?void 0:n.hasConsent:[null===e||void 0===e||null===(r=e.credentialSubject)||void 0===r?void 0:r.hasConsent]}function c(e){return e.forPersonalData}function l(e){return e.mode}function s(e){var t;return null===e||void 0===e||null===(t=e.credentialSubject)||void 0===t?void 0:t.id}function u(e){return null===e||void 0===e?void 0:e.id}},86856:function(e,t,n){n.d(t,{Z:function(){return u},W:function(){return p}});var r=n(50029),a=n(87794),o=n.n(a),i=n(9749),c=n(95287),l=n(35863),s=n(80480);function u(e,t){return d.apply(this,arguments)}function d(){return(d=(0,r.Z)(o().mark((function e(t,n){var r,a,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.fetch,e.next=3,(0,i.OE)(t,{fetch:r});case 3:return a=e.sent,l=(0,c.YY)(a,t),e.abrupt("return",{dataset:a,thing:l});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){var t=e.thing;return t?(0,l.Yd)(t,s.Vm.contains):[]}}}]);
//# sourceMappingURL=596-9b223b8dd092b7e0.js.map