{"version":3,"file":"static/chunks/pages/index-4d4aebecfd76dd60.js","mappings":"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","sources":["webpack://_N_E/./src/hooks/usePodIrisFromWebId/index.js","webpack://_N_E/./src/hooks/usePreviousPage/index.js","webpack://_N_E/./components/pages/index/index.jsx","webpack://_N_E/./pages/index.jsx","webpack://_N_E/./src/effects/auth/index.js","webpack://_N_E/./src/navigator/index.js","webpack://_N_E/"],"sourcesContent":["/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport { useSession } from \"@inrupt/solid-ui-react\";\nimport useSWR from \"swr\";\nimport { getSolidDataset, getThing, getUrlAll } from \"@inrupt/solid-client\";\nimport { space } from \"rdf-namespaces\";\n\nasync function fetchPodIrisFromWebId(webId, fetch) {\n  // Temporary fix until we can switch to getPodUrlAll in @inrupt/solid-client@1.20.0\n  if (!webId) {\n    return [];\n  }\n\n  const profileDoc = await getSolidDataset(webId, { fetch });\n  const profile = getThing(profileDoc, webId);\n  return getUrlAll(profile, space.storage);\n}\n\nexport const FETCH_POD_IRIS_FROM_WEB_ID = \"fetchPodIrisFromWebId\";\nexport default function usePodIrisFromWebId(webId) {\n  const {\n    session: { fetch },\n  } = useSession();\n  return useSWR([webId, FETCH_POD_IRIS_FROM_WEB_ID], () =>\n    fetchPodIrisFromWebId(webId, fetch)\n  );\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport { useEffect, useState } from \"react\";\n\nexport const PREVIOUS_PAGE = \"previousPage\";\n\nexport default function usePreviousPage() {\n  const [previousPage, setPreviousPage] = useState(null);\n\n  useEffect(() => {\n    if (!localStorage) return;\n    const url = localStorage.getItem(PREVIOUS_PAGE);\n    setPreviousPage(url || null);\n    localStorage.removeItem(PREVIOUS_PAGE);\n  }, []);\n\n  return previousPage;\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport { useEffect } from \"react\";\nimport { useRouter } from \"next/router\";\n\nimport { useSession } from \"@inrupt/solid-ui-react\";\nimport { useRedirectIfLoggedOut } from \"../../../src/effects/auth\";\n\nimport { resourceHref } from \"../../../src/navigator\";\nimport usePodIrisFromWebId from \"../../../src/hooks/usePodIrisFromWebId\";\nimport usePreviousPage from \"../../../src/hooks/usePreviousPage\";\n\nexport default function Home() {\n  const router = useRouter();\n  const previousPage = usePreviousPage();\n  useRedirectIfLoggedOut();\n\n  const { session } = useSession();\n  const { data: podIris = [] } = usePodIrisFromWebId(session.info.webId);\n\n  useEffect(() => {\n    if (previousPage && previousPage !== \"/\") {\n      router.push(previousPage).catch((e) => {\n        throw e;\n      });\n    }\n\n    if (podIris.length > 0) {\n      router.replace(\"/resource/[iri]\", resourceHref(podIris[0])).catch((e) => {\n        throw e;\n      });\n    }\n  }, [podIris, router, previousPage]);\n\n  return null;\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport React from \"react\";\n\nimport IndexPage from \"../components/pages/index\";\n\nexport default function Index() {\n  return <IndexPage />;\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport { useEffect } from \"react\";\nimport Router, { useRouter } from \"next/router\";\nimport { useSession } from \"@inrupt/solid-ui-react\";\n\nexport const SESSION_STATES = {\n  LOGGED_IN: \"LOGGED_IN\",\n  LOGGED_OUT: \"LOGGED_OUT\",\n};\n\nexport async function redirectBasedOnSessionState(\n  sessionIsLoggedIn,\n  sessionRequestInProgress,\n  redirectIfSessionState,\n  location\n) {\n  if (sessionRequestInProgress) {\n    return;\n  }\n\n  if (\n    sessionIsLoggedIn &&\n    redirectIfSessionState === SESSION_STATES.LOGGED_IN\n  ) {\n    await Router.push(location);\n  }\n\n  if (\n    !sessionIsLoggedIn &&\n    redirectIfSessionState === SESSION_STATES.LOGGED_OUT\n  ) {\n    await Router.push(location);\n  }\n}\n\nexport function useRedirectIfLoggedOut(location = \"/login\") {\n  const { session, sessionRequestInProgress } = useSession();\n\n  useEffect(() => {\n    if (session.info.isLoggedIn) return;\n    redirectBasedOnSessionState(\n      session.info.isLoggedIn,\n      sessionRequestInProgress,\n      SESSION_STATES.LOGGED_OUT,\n      location\n    );\n  });\n}\n\nexport function useRedirectIfLoggedIn(location = \"/\") {\n  const { session, sessionRequestInProgress } = useSession();\n  const router = useRouter();\n  useEffect(() => {\n    if (\n      (session.info.isLoggedIn && !router.asPath.includes(\"login\")) ||\n      sessionRequestInProgress\n    )\n      return;\n    redirectBasedOnSessionState(\n      session.info.isLoggedIn,\n      sessionRequestInProgress,\n      SESSION_STATES.LOGGED_IN,\n      location\n    );\n  }, [session, router, location, sessionRequestInProgress]);\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nexport function resourceHref(iri) {\n  return `/resource/${encodeURIComponent(iri)}`;\n}\n\nexport const urlForResourceAction = (action, resourceIri, containerIri) => ({\n  pathname: containerIri ? resourceHref(containerIri) : \"/resource/[iri]\",\n  ...(action\n    ? {\n        query: {\n          action,\n          resourceIri,\n        },\n      }\n    : {}),\n});\n\nexport function resourceContextRedirect(\n  action,\n  resourceIri,\n  containerIri,\n  router\n) {\n  return router.replace(\n    urlForResourceAction(action, resourceIri, undefined),\n    urlForResourceAction(action, resourceIri, containerIri)\n  );\n}\n","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/\",\n      function () {\n        return require(\"private-next-pages/index.jsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/\"])\n      });\n    }\n  "],"names":["webId","fetch","getSolidDataset","profileDoc","profile","getThing","getUrlAll","space","usePodIrisFromWebId","useSession","session","useSWR","fetchPodIrisFromWebId","PREVIOUS_PAGE","Home","router","useRouter","previousPage","useState","setPreviousPage","useEffect","localStorage","url","getItem","removeItem","usePreviousPage","useRedirectIfLoggedOut","info","data","podIris","push","e","length","replace","resourceHref","Index","SESSION_STATES","redirectBasedOnSessionState","sessionIsLoggedIn","sessionRequestInProgress","redirectIfSessionState","location","Router","isLoggedIn","useRedirectIfLoggedIn","asPath","includes","iri","encodeURIComponent","urlForResourceAction","action","resourceIri","containerIri","pathname","query","resourceContextRedirect","undefined","window","__NEXT_P"],"sourceRoot":""}