(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[509],{95322:function(e,t,n){"use strict";n.d(t,{ZP:function(){return m}});var r=n(50029),a=n(87794),o=n.n(a),i=n(67294),s=n(63431),c=n(29773),l=n(40478),u=n(15259),d={contacts:{OWN_WEBID_ERROR_MESSAGE:"You cannot add yourself as a contact."},permissions:{OWN_WEBID_ERROR_MESSAGE:"You cannot overwrite your own permissions."}};function p(e,t){return e.filter((function(e){return e.webId===t})).length}function m(e){var t=e.type,n=e.buttonText,a=e.children,m=e.dirtyForm,f=e.onChange,g=e.onSubmit,h=e.permissions,b=e.agentId,v=(0,s.Me)(),y=(0,l.useSession)().session,E=(0,i.useState)(m),x=E[0],w=E[1],Z=!b&&(m||x),C=(0,i.useState)(null),S=C[0],k=C[1],I=(0,i.useState)(!1),P=I[0],N=I[1],O=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0;return function(){var c=(0,r.Z)(o().mark((function r(c){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(c.preventDefault(),!(0,u.No)(t,e)){r.next=4;break}return n(!0),r.abrupt("return");case 4:if(!p(a,e)){r.next=7;break}return i(e),r.abrupt("return");case 7:return r.next=9,s(e);case 9:case"end":return r.stop()}}),r)})));return function(e){return c.apply(this,arguments)}}()}(b,y,N,h,k,g),A=function(e,t,n){return function(r){e(r.target.value),t(!1),n(null)}}(f,N,k),D=function(e){return function(){return e(!0)}}(w);return i.createElement(c.l0,{onSubmit:O},i.createElement(c.__,null,"WebID"),Z&&i.createElement(c.v0,{variant:"invalid"},"Please provide a valid WebID"),P&&i.createElement(c.v0,{variant:"invalid"},d[t].OWN_WEBID_ERROR_MESSAGE),S&&i.createElement(c.v0,{variant:"invalid"},"The WebID ".concat(S," is already in your permissions.")),i.createElement(c.Jc,{id:v,onChange:A,value:b,type:"url",pattern:"https:\\/\\/\\S+",title:"Must be a valid URL that starts with https:// and does not contain spaces",onBlur:D,required:Z,variant:S||P?"invalid":null}),a,i.createElement(c.zx,{type:"submit","data-testid":"add-agent-button"},n))}m.defaultProps={buttonText:"Add",children:null,dirtyForm:!1,onChange:function(){},onSubmit:function(){},permissions:[],agentId:"",type:"permissions"}},87440:function(e,t,n){"use strict";n.d(t,{ZP:function(){return y}});var r=n(36864),a=n(4730),o=n(50029),i=n(87794),s=n.n(i),c=n(67294),l=n(86010),u=n(11719),d=n(10150),p=n(54303),m=n(46903),f=n(7513),g=function(e){return p.button.styles(e)},h=n(55612),b=["confirmationTitle","confirmationContent","dialogId","onDelete","successMessage","resourceName"],v=(0,u.Z)((function(e){return(0,d.Z)(g(e))}));function y(e){var t=e.confirmationTitle,n=e.confirmationContent,i=e.dialogId,u=e.onDelete,d=e.successMessage,g=e.resourceName,y=(0,a.Z)(e,b),E=(0,p.useBem)(v()),x=(0,c.useContext)(m.ZP),w=x.setAlertOpen,Z=x.setMessage,C=x.setSeverity,S=(0,c.useState)(!1),k=S[0],I=S[1],P=(0,c.useContext)(f.ZP),N=P.confirmed,O=P.open,A=P.setContent,D=P.setOpen,T=P.setTitle,W=P.closeDialog;var j=function(e){var t=e.onDelete,n=e.onDeleteError,r=e.setAlertOpen,a=e.setMessage,i=e.setSeverity,c=e.successMessage;return(0,o.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:i("success"),a(c),r(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),n(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))}({onDelete:u,onDeleteError:function(e){C("error"),(0,h.ky)(e,409)?Z("".concat(g," has files in it and cannot be deleted.")):Z(e.toString()),w(!0)},setAlertOpen:w,setMessage:Z,setSeverity:C,successMessage:d});return(0,c.useEffect)((function(){O===i&&(k&&null===N||(T(t),A(n),I(!0),k&&N&&j(),k&&null!==N&&(W(),I(!1))))}),[j,O,i,t,n,I,N,k,A,T,W]),c.createElement("button",(0,r.Z)({type:"button",className:(0,l.Z)(E("button")),"data-testid":"delete-button"},y,{onClick:function(){return D(i)}}))}y.defaultProps={resourceName:"this resource"}},14844:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(67294),a=n(35117),o=n(868),i=n(282),s=n(54303),c=n(86010);var l=(0,n(11719).Z)((function(e){return(0,a.Z)(function(e){return(0,s.createStyles)(e,["icons","button"],{infoTooltipContainer:{display:"flex"},infoButton:{padding:0,minWidth:"max-content"},infoIcon:{margin:e.spacing(.4),color:e.palette.info.main}})}(e))}));function u(e){var t=e.tooltipText,n=e.label,a=e.className,u=l(),d=(0,s.useBem)(l());return r.createElement("div",{className:(0,c.Z)(u.infoTooltipContainer,a)},n&&r.createElement("span",{"data-testid":"info-button-label"},n),r.createElement(o.ZP,{title:t,arrow:!0},r.createElement(i.Z,{classes:{root:u.infoButton}},r.createElement("i",{className:(0,c.Z)(d("icon-info"),d("icon"),u.infoIcon),"aria-label":"Info"}))))}u.defaultProps={className:null,label:null}},92249:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return la}});var r=n(67294),a=n(11163),o=n(84549),i=n(23934),s=n(68504),c=n(40478),l=n(2824),u=n(28e3),d=n(21015),p=n(29773),m=n(11719),f=n(10150),g=n(54303),h=n(59499),b=function(e){var t;return(0,g.createStyles)(e,["pageHeader"],{"files-container-header":(t={},(0,h.Z)(t,e.breakpoints.up("sm"),{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingRight:0,borderBottom:"1px solid ".concat(e.palette.grey.A100)}),(0,h.Z)(t,"display","flex"),(0,h.Z)(t,"flexDirection","column"),(0,h.Z)(t,"alignItems","flex-start"),(0,h.Z)(t,"paddingLeft",0),(0,h.Z)(t,"& h1",{paddingLeft:e.spacing(2.4)}),t)})},v=n(16835),y=n(86010),E=n(52387),x=n(62822),w=n(50998),Z=n(46869),C=n(95757),S=n(868),k=n(58365),I=n(50029),P=n(87794),N=n.n(P),O=function(e,t){var n;return(0,g.createStyles)(e,[],{popoverNavigator:(n={borderRadius:e.spacing(0,0,1,1),padding:e.spacing(2,2,2),maxWidth:t},(0,h.Z)(n,e.breakpoints.up("sm"),{minWidth:450,width:t}),(0,h.Z)(n,e.breakpoints.down("xs"),{width:"100vw",left:"0 !important"}),n)})},A=n(99146),D=n(70936),T="pod-navigate-button";function W(e){var t=e.anchor,n=e.setDisplayNavigator,o=e.popoverWidth,i=(0,m.Z)((function(e){return(0,f.Z)(O(e,o))}))(),l=r.useState(null),u=(0,v.Z)(l,2),d=u[0],g=u[1],h=(0,r.useState)(""),b=h[0],y=h[1],x=(0,a.useRouter)(),w=(0,r.useState)(!1),Z=w[0],C=w[1],S=(0,r.useState)(!1),k=S[0],P=S[1],W=!b&&(Z||k),j=(0,c.useSession)().fetch,L=Boolean(d),R=L?"pod-navigator":void 0,B=function(e,t){return function(){e(null),t(!1)}}(g,n),F=function(e,t,n,r,a,o,i){return function(){var c=(0,I.Z)(N().mark((function c(l){var u,d;return N().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(l.preventDefault(),n(!0),""!==a){c.next=4;break}return c.abrupt("return");case 4:return c.prev=4,c.next=7,(0,s.yJ)(a,{fetch:i});case 7:u=c.sent,c.next=13;break;case 10:c.prev=10,c.t0=c.catch(4),u=null;case 13:return d=u&&(0,s.ln)(u)||(0,D.it)(a),c.next=16,o.push("/resource/[iri]",(0,A.LM)(d));case 16:e(),n(!1),r(!1),t("");case 20:case"end":return c.stop()}}),c,null,[[4,10]])})));return function(e){return c.apply(this,arguments)}}()}(B,y,C,P,b,x,j);return(0,r.useEffect)((function(){g(t)}),[t]),r.createElement(E.ZP,{id:R,classes:{paper:i.popoverNavigator},open:L,anchorEl:d,onClose:B,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},r.createElement(p.l0,{onSubmit:F},r.createElement(p.BZ,{id:"PodNavigator",label:"Go to Pod",invalidMessage:W&&"Please enter valid URL",variant:"with-button"},r.createElement(p.Jc,{id:"PodNavigator","data-testid":"pod-navigate-input",value:b,onChange:function(e){return y(e.target.value)},placeholder:"Enter Pod URI",type:"url",pattern:"https://.*",title:"Must start with https://",required:W}),r.createElement(p.zx,{variant:"with-input",type:"submit","data-testid":T,id:T},"Go"))))}var j=n(69795),L=function(e,t,n){var r=n<42.8?45:40;return(0,g.createStyles)(e,["button"],{indicator:(0,h.Z)({display:"flex",backgroundColor:e.palette.background.default,minHeight:"60px",maxHeight:"max-content",width:"100vw"},e.breakpoints.up("sm"),{maxWidth:"50vw",minWidth:"128px",width:"max-content",height:"60px"}),indicatorLabel:{fontSize:e.typography.subtitle2.fontSize,fontWeight:e.typography.fontWeightBold,color:e.palette.primary.main,textTransform:"uppercase"},indicatorLabelYour:{display:"none"},"indicatorLabelYour--isOwnPod":(0,h.Z)({display:"inline"},e.breakpoints.up("md"),{display:"inline"}),indicatorChevron:{paddingLeft:"0.5em",color:e.palette.primary.main},indicatorPrompt:(0,h.Z)({padding:e.spacing(.6,2.4),cursor:"pointer",width:"100%",height:"100%",alignItems:"flex-start",justifyContent:"space-around",backgroundColor:"transparent",flexDirection:"column",display:"inline-flex",color:e.palette.text.secondary,border:"none",borderTop:"1px solid ".concat(e.palette.grey.A100),borderBottom:"1px solid ".concat(e.palette.grey.A100),textTransform:"none",fontSize:e.typography.subtitle2.fontSize,fontWeight:e.typography.fontWeightRegular},e.breakpoints.up("sm"),{border:"none",borderLeft:"1px solid ".concat(e.palette.grey.A100),alignItems:"flex-end",padding:e.spacing(.6,4,.6,r/10)}),indicatorName:(0,h.Z)({boxSizing:"border-box",overflowWrap:"break-word",maxWidth:"100%",textAlign:"left",fontSize:e.typography.htmlFontSize},e.breakpoints.up("sm"),{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}),popoverMenu:(0,h.Z)({maxWidth:"max(".concat(t,"px, 170px)"),minWidth:"128px",width:"max(".concat(t,"px, 170px)"),borderRadius:e.spacing(0,0,1,1)},e.breakpoints.down("xs"),{left:"0 !important",width:"100vw",maxWidth:"100vw",minWidth:"100vw"}),list:{padding:0},menuItem:{padding:e.spacing(1)},itemIcon:{padding:e.spacing(0,.8),textAlign:"center",minWidth:"max-content !important",width:"34px"},itemText:{padding:0},"bookmark-menu-item":{padding:0}})},R=n(1124),B=n(44770);function F(){var e=(0,a.useRouter)(),t=(0,r.useState)(),n=t[0],o=t[1],i=(0,r.useState)(!1),s=i[0],c=i[1],l=(0,r.useState)(),u=l[0],d=l[1],h=(0,r.useState)(!1),b=h[0],I=h[1],P=(0,m.Z)((function(e){return(0,f.Z)(L(e,n,u))})),N=r.useState(null),O=(0,v.Z)(N,2),A=O[0],D=O[1],T=(0,r.useState)(null),F=T[0],z=T[1],_=(0,g.useBem)(P()),M=e.query.iri,U=!M,Y=Boolean(A),H=Y?"pod-indicator-menu":void 0,q=function(e){return function(t){return e(t.currentTarget)}}(D),V=function(e){return function(){return e(null)}}(D),G=(0,r.createRef)(),J=(0,r.createRef)(),K=(0,B.Z)().data,X=(0,R.fI)(K,M);(0,r.useEffect)((function(){var e=G.current.offsetWidth||0;o(e)}),[G]),(0,r.useEffect)((function(){if(J.current){var e=J.current.offsetWidth||0;d(e)}}),[J]);return r.createElement("div",{"data-testid":"pod-indicator",className:_("indicator"),ref:G},U?r.createElement(k.Z,{width:100,style:{display:"inline-block"}}):r.createElement("button",{"data-testid":"pod-indicator-prompt",id:"pod-indicator-prompt",type:"button","aria-describedby":H,onClick:q,className:_("indicatorPrompt"),title:M},r.createElement("span",{className:_("indicatorLabel")},r.createElement("span",{className:_("indicatorLabelYour",{isOwnPod:X})},"Your\xa0"),"Pod",r.createElement(p.PJ,{name:Y?"caret-up":"caret-down",className:_("indicatorChevron")})),r.createElement("span",{className:_("indicatorName",{isOwnPod:X}),ref:J},M)),s?r.createElement(W,{anchor:F,setDisplayNavigator:c,popoverWidth:n}):r.createElement(E.ZP,{id:H,classes:{paper:_("popoverMenu")},open:Y,anchorEl:A,onClose:V,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},r.createElement(x.Z,{classes:{root:_("list")}},r.createElement(j.Z,{iri:M,menuItem:!0,addText:"Bookmark Pod",removeText:"Remove Pod Bookmark",profileName:M}),r.createElement(w.Z,{button:!0,key:"change-pod",onClick:function(){z(A),c(!0),V()},classes:{root:_("menuItem")}},r.createElement(Z.Z,{classes:{root:_("itemIcon")}},r.createElement("i",{className:(0,y.Z)(_("icon-move"),_("icon")),"aria-label":"Change pod"})),r.createElement(C.Z,{disableTypography:!0,primary:"Change Pod"})),r.createElement(S.ZP,{PopperProps:{disablePortal:!0},open:b,disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,title:"Copied"},r.createElement(w.Z,{button:!0,key:"copy-text",onClick:function(){navigator.clipboard.writeText(M),I(!0),setTimeout((function(){I(!1),V()}),800)},classes:{root:_("menuItem")},"data-testid":"pod-indicator-copy-link"},r.createElement(Z.Z,{classes:{root:_("itemIcon")}},r.createElement(p.PJ,{name:"copy",className:(0,y.Z)(_("icon"))})),r.createElement(C.Z,{disableTypography:!0,primary:"Copy Link"}))))))}var z=(0,m.Z)((function(e){return(0,f.Z)(b(e))}));function _(){var e=(0,c.useSession)().session,t=(0,g.useBem)(z()),n=e.info.isLoggedIn?r.createElement(F,null):null;return r.createElement(p.mr,{title:"Files",className:t("files-container-header"),actions:n?[n]:null})}var M=n(35117),U=n(55517),Y=n(27959),H=n(50743),q=n(61201),V=n(22318),G=n(64566);function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){(0,h.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var X={accordionDetails:{display:"block",paddingBottom:"5rem"},centeredSection:{paddingLeft:"1rem",paddingRight:"1rem"},headerSection:{paddingLeft:"1rem",paddingRight:"1rem",display:"flex",alignItems:"flex-start","& button":{marginLeft:"auto"}},raw:{height:"100%",width:"100%",maxHeight:"200px",overflow:"auto"},formListItem:{display:"block"},detailText:{fontSize:"0.75rem"},typeValue:{marginLeft:"auto"},agentInput:{width:"100%",marginBottom:"1rem"}};var $=n(36864),Q=n(4730),ee=n(87407),te=n(46903),ne=n(82708),re=n(87440),ae=["name","resourceIri","onDelete","onDeleteCurrentContainer"];function oe(e){var t=e.name,n=e.resourceIri,o=e.onDelete,i=e.onDeleteCurrentContainer,l=(0,Q.Z)(e,ae),d=(0,c.useSession)().fetch,p=(0,a.useRouter)(),m=(0,r.useContext)(te.ZP).alertError,f=(0,ne.Z)(n),g=f.data,h=f.error,b=(0,ee.Z)(n);h&&m(h.message);var v=function(e,t,n,r,a,o){return(0,I.Z)(N().mark((function i(){var c;return N().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,u.fg)(e,t,o);case 2:c=(0,s.ln)(e),(0,s.Nm)(e)&&c===a.query.iri?r(c):n();case 4:case"end":return i.stop()}}),i)})))}(g,b,o,i,p,d);return r.createElement(re.ZP,(0,$.Z)({confirmationTitle:"Confirm Delete",confirmationContent:"Are you sure you wish to delete ".concat(t,"?"),dialogId:"delete-resource-".concat(n),onDelete:v,resourceName:t,successMessage:"".concat(t," was successfully deleted.")},l),"Delete")}var ie=n(15259),se=["iri"];function ce(e,t){return function(){var n=(0,D.en)(e).pathname.replace(/\//g,"");t(e).then((function(e){return e.blob()})).then((function(e){return function(e,t){var n=document.createElement("a");n.style.display="none",n.href=window.URL.createObjectURL(t),n.setAttribute("download",e),document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(n.href),document.body.removeChild(n)}(n,e)})).catch((function(e){return e}))}}function le(e){var t=e.iri,n=(0,Q.Z)(e,se),a=(0,c.useSession)().fetch;return(0,ie.sr)(t)?null:r.createElement("button",(0,$.Z)({},n,{onClick:ce(t,a),type:"button"}))}le.defaultProps={className:null};var ue=n(95477),de=n(41120),pe=n(282),me=n(67265),fe=n(8936),ge=n(51115),he=n(25281),be=n(30553),ve=n(80797),ye={fontSize:"0.75rem"},Ee=function(e){return{container:{display:"block",position:"relative"},listItem:{paddingBottom:0,paddingTop:0},selectionClosed:{display:"none"},selectionOpen:{display:"block"},summary:{listStyle:"none",display:"flex",flexWrap:"nowrap",alignItems:"center",justifyContent:"space-between",textTransform:"inherit",fontSize:e.typography.body.fontSize,maxWidth:"95%",padding:e.spacing(1.5,2)},label:ye,checkbox:{padding:0}}},xe=(0,de.Z)((function(e){return(0,M.Z)(Ee(e))}));function we(e){var t=e.value,n=e.label,a=e.disabled,o=e.onChange,i=xe(),s=n.toLowerCase();return r.createElement(w.Z,{className:i.listItem},r.createElement(be.Z,{classes:{label:i.label},"data-testid":"permission-label-"+s,label:n,control:r.createElement(ve.Z,{classes:{root:i.checkbox},checked:t,name:s,onChange:o,disabled:a,inputProps:{"data-testid":"permission-checkbox-"+s}})}))}we.defaultProps={disabled:!1,onChange:function(){}};var Ze=we,Ce=n(69873);function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(n),!0).forEach((function(t){(0,h.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ie=(0,de.Z)((function(e){return(0,M.Z)(Ee(e))}));function Pe(e){return e?r.createElement(he.Z,null):r.createElement(ge.Z,null)}function Ne(e){var t,n,o=e.acl,i=e.children,s=e.disabled,l=e.onChange,u=e.webId,d=e.isMenu,p=Ie(),m=(0,c.useSession)().session,f=(0,B.Z)().data,g=(0,a.useRouter)().query.iri,b=(0,R.fI)(f,g),v=(0,r.useState)(o),y=v[0],E=v[1],w=(0,r.useState)(!1),Z=w[0],C=w[1],S=null!==s&&void 0!==s?s:m.info.webId===u&&b,k=function(e,t,n){return function(r){return function(){var a=!e[r],o=ke(ke({},e),{},(0,h.Z)({},r,a));t(o),n(o)}}}(y,E,l);return r.createElement("div",{className:p.container},d?null:r.createElement(pe.Z,{"data-testid":"permissions-dropdown-button",className:p.summary,onClick:(t=Z,n=C,function(){return n(!t)}),endIcon:Pe(Z)},r.createElement("span",null,(0,Ce.V_)(y))),r.createElement("section",{className:Z||d?p.selectionOpen:p.selectionClosed},r.createElement(x.Z,null,r.createElement(Ze,{value:y.read,classes:p,label:Ce.c9.READ.alias,onChange:k(Ce.c9.READ.key),disabled:S}),r.createElement(Ze,{value:y.write,classes:p,label:Ce.c9.WRITE.alias,disabled:S,onChange:k(Ce.c9.WRITE.key)}),r.createElement(Ze,{value:y.append,classes:p,label:Ce.c9.APPEND.alias,disabled:S,onChange:k(Ce.c9.APPEND.key)}),r.createElement(Ze,{value:y.control,classes:p,label:Ce.c9.CONTROL.alias,disabled:S,onChange:k(Ce.c9.CONTROL.key)})),i))}Ne.defaultProps={acl:{read:!1,write:!1,append:!1,control:!1},isMenu:!1,children:null,disabled:null,webId:null,onChange:function(){}};var Oe=n(7513),Ae=n(20829),De=n(26605),Te={accessControl:null,accessControlType:null},We=(0,r.createContext)(Te);function je(e){var t=e.children,n=e.accessControl,a=e.accessControlType;return r.createElement(We.Provider,{value:{accessControl:n,accessControlType:a}},t)}je.defaultProps={accessControl:null,accessControlType:null};var Le=We,Re=(0,m.Z)((function(e){return(0,M.Z)(function(e){return{avatar:{marginRight:"1rem"},detailText:{fontSize:"0.75rem",textAlign:"left",flexGrow:1},"alert-container":{maxWidth:"100%",backgroundColor:"#FFF4E5",padding:e.spacing(.7,1.4)},action:{padding:0,paddingRight:e.spacing(.5)},alertBox:{width:"100%",overflowWrap:"break-word",padding:0},alertMessage:{overflowWrap:"break-word",fontSize:"14px"},"avatar-container":{display:"flex",maxWidth:"100%",padding:0,"& p":(0,h.Z)({overflowWrap:"break-word",marginRight:e.spacing(.7,1.6,1.4,.7)},e.breakpoints.up("sm"),{overflowWrap:"anywhere"})},"bold-button":{fontWeight:"bold",alignSelf:"right"},spinner:{margin:e.spacing(2)},separator:{boxSizing:"border-box",border:"1px solid ".concat("#E1CAAA"),margin:0,marginBottom:e.spacing(.8),height:"1px"}}}(e))})),Be="agent-web-id",Fe="permissions-form-submit-button";function ze(e){var t,n=e.onLoading,a=e.permission,o=a.acl,i=a.webId,l=(0,De.Z)(i),u=l.data,d=l.error,m=Re(),f=(0,c.useSession)(),h=f.fetch,b=f.session.info.webId,v=(0,g.useBem)(Re()),y=(0,r.useState)(o),E=y[0],x=y[1],w=(0,r.useState)(o),Z=w[0],C=w[1],S=(0,r.useContext)(c.DatasetContext).solidDataset,P=(0,r.useContext)(Le).accessControl,O=(0,r.useState)(!1),A=O[0],D=O[1],T=(0,r.useContext)(Oe.ZP),W=T.open,j=T.confirmed,L=T.setContent,B=T.setOpen,F=(0,r.useContext)(te.ZP),z=F.setMessage,_=F.setSeverity,M=F.setAlertOpen,U=(t=(0,s.LH)(S),"change-agent-access-".concat(t)),Y=function(e,t,n,r,a,o,i,s){return function(){var c=(0,I.Z)(N().mark((function c(l){var u,d;return N().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(t(!0),n(l),e){c.next=4;break}return c.abrupt("return");case 4:return c.next=6,e.savePermissionsForAgent(r,l);case 6:if(u=c.sent,!(d=u.error)){c.next=10;break}throw d;case 10:a(null),o("success"),i("Permissions have been updated!"),s(!0),t(!1);case 15:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()}(P,n,x,i,C,_,z,M);(0,r.useEffect)((function(){W===U&&j&&b===i&&Y(Z)}),[b,j,Y,Z,i,U,W]);var H=function(e,t,n,r,a,o,i){return function(){var s=(0,I.Z)(N().mark((function s(c){return N().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(c.preventDefault(),e!==t){s.next=6;break}i("You are about to change your own permissions. Are you sure?"),n(r),s.next=8;break;case 6:return s.next=8,a(o);case 8:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()}(b,i,B,U,Y,Z,L),q=function(){var e=(0,I.Z)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,R.In)(i,h);case 3:u=e.sent,D(!1),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),d=e.t0,D(!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();if(d){return r.createElement("div",{className:v("alert-container")},r.createElement(fe.Z,{classes:{root:m.alertBox,message:m.alertMessage,action:m.action},severity:"warning",action:A?r.createElement(ue.Z,{"data-testid":"try-again-spinner",size:20,className:v("spinner"),color:"inherit"}):r.createElement(pe.Z,{"data-testid":"try-again-button",className:v("bold-button"),color:"inherit",size:"small",onClick:function(){D(!0),setTimeout(q,750)}},"Try again")},"Unable to load this profile"),r.createElement("div",{className:m.separator}),r.createElement("div",{className:v("avatar-container")},r.createElement(me.Z,{className:m.avatar,alt:i,src:null}),r.createElement(V.Z,{"data-testid":Be,className:m.detailText},i),r.createElement(p.l0,{onSubmit:H},r.createElement(Ne,{key:i,webId:i,acl:E,onChange:C},r.createElement(p.zx,{onClick:H,type:"submit",variant:"secondary","data-testid":Fe},"Save")))),r.createElement(Ae.ZP,null))}if(!u)return r.createElement(r.Fragment,null,r.createElement(k.Z,{className:m.avatar,variant:"circle",width:40,height:40}),r.createElement("div",{className:m.detailText},r.createElement(k.Z,{variant:"text",width:100})));var G=u.avatar,J=(0,R.fK)(u);return r.createElement(r.Fragment,null,r.createElement(me.Z,{className:m.avatar,alt:J,src:G}),r.createElement(V.Z,{"data-testid":Be,className:m.detailText},J),r.createElement(p.l0,{onSubmit:H},r.createElement(Ne,{key:i,webId:i,acl:E,onChange:C},r.createElement(p.zx,{onClick:H,type:"submit",variant:"secondary","data-testid":Fe},"Save"))),r.createElement(Ae.ZP,null))}function _e(e){var t=(0,r.useState)(null),n=t[0],a=t[1];return(0,r.useEffect)((function(){e?e.getPermissions().then((function(e){a(e.reverse())})):a(null)}),[e]),{permissions:n}}ze.defaultProps={onLoading:function(){}};var Me=(0,m.Z)((function(e){return(0,f.Z)({listItem:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",paddingRight:0,paddingLeft:0}})}));function Ue(e){var t=e.onLoading,n=Me(),a=(0,r.useState)(!1),o=a[0],i=a[1],s=_e((0,r.useContext)(Le).accessControl).permissions;if(!s)return r.createElement(ue.Z,{color:"primary"});if(0===s.length)return r.createElement("div",null,"No access granted to individuals yet");var c=o?s:s.slice(0,3);return r.createElement(r.Fragment,null,r.createElement(x.Z,null,c.map((function(e){return r.createElement(w.Z,{key:e.webId,className:n.listItem},r.createElement(ze,{permission:e,onLoading:t}))}))),o||s.length<3?null:r.createElement(p.zx,{"data-testid":"agent-access-list-show-all",onClick:function(){return i(!0)},variant:"small"},"Show all"))}Ue.defaultProps={onLoading:function(){}};var Ye=Ue,He=n(95322),qe=function(e){return{paper:{padding:e.spacing(2)}}},Ve=["onLoading"],Ge=(0,de.Z)((function(e){return(0,M.Z)(qe(e))}));function Je(e){var t=e.onLoading,n=(0,Q.Z)(e,Ve),a=(0,r.useState)(null),o=a[0],i=a[1],s=(0,r.useState)((0,Ce.zA)(!0)),c=s[0],l=s[1],u=Ge(),d=(0,r.useState)(!1),m=d[0],f=d[1],g=(0,r.useContext)(Le).accessControl,h=(0,r.useState)(""),b=h[0],v=h[1],y=(0,r.useState)(!1),x=y[0],w=y[1],Z=_e(g).permissions,C=function(e){return function(t){e(t)}}(v),S=function(e){return function(t){e(t.currentTarget)}}(i),k=function(e,t,n,r,a){return function(){e(null),t((0,Ce.zA)(!0)),n(!1),r(!1),a(!1)}}(i,l,f,t,w),P=function(e,t,n,r,a,o){return function(){var i=(0,I.Z)(N().mark((function i(s){var c,l;return N().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(o(!0),s&&!(0,Ce.qf)(n)){i.next=3;break}return i.abrupt("return");case 3:return t(!0),r(!0),i.next=7,e.savePermissionsForAgent(s,n);case 7:if(c=i.sent,!(l=c.error)){i.next=11;break}throw l;case 11:a(),o(!1);case 13:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}()}(g,t,c,f,k,w),O=Boolean(o),A=O?"AddPermissionWithWebId":void 0,D=x&&(0,Ce.qf)(c);return r.createElement(r.Fragment,null,r.createElement(p.zx,(0,$.Z)({variant:"small",iconAfter:"caret-right","aria-describedby":A},n,{onClick:S,"data-testid":"permissions-add-user-with-webid-button"}),"Add with WebId"),r.createElement(E.ZP,{id:A,classes:u,open:O,anchorEl:o,getContentAnchorEl:null,onClose:k,anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"}},r.createElement(He.ZP,{type:"permissions",dirtyForm:x,onChange:C,onSubmit:P,value:b,permissions:Z},r.createElement(p.BZ,null,r.createElement(p.__,null,"Assign permissions"),r.createElement(Ne,{isMenu:!0,acl:c,onChange:l,disabled:m}),D?r.createElement(p.v0,{variant:"invalid"},"Please assign at least one permission"):null))))}Je.defaultProps={onLoading:function(){}};var Ke=(0,de.Z)((function(e){return(0,M.Z)({details:{display:"block"}})}));function Xe(e){var t=e.startLoading,n=Ke(),a=(0,r.useState)(t),o=a[0],i=a[1];return o?r.createElement(ue.Z,{color:"primary"}):r.createElement(r.Fragment,null,r.createElement(p.PC,null,r.createElement(p.F9,null,r.createElement(Je,{onLoading:i}))),r.createElement(Y.Z,{defaultExpanded:!0},r.createElement(H.Z,{expandIcon:r.createElement(G.Z,null)},"Individual permissions"),r.createElement(q.Z,{className:n.details},r.createElement(Ye,{onLoading:i}))))}Xe.defaultProps={startLoading:!1};var $e=n(79521),Qe=n(35878),et=n(70766);function tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(n),!0).forEach((function(t){(0,h.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var rt=n(95287),at=n(27812),ot=n(72045),it=n(80480),st=n(35863),ct=n(36163),lt=n(9749),ut=n(38603),dt=n(59245),pt=n(46611),mt=n(59893);function ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var gt="Person",ht="index.ttl",bt=(0,ut.BC)("nameEmailIndex"),vt={container:gt,indexFile:"people.ttl",indexFilePredicate:bt,contactTypeUrl:it.w_.Individual,isOfType:function(e){return!!(0,st.Gr)(e,(0,ut.BC)("inAddressBook"))}};function yt(e,t){return Et.apply(this,arguments)}function Et(){return(Et=(0,I.Z)(N().mark((function e(t,n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,dt.uE)(t,[vt],n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xt(e,t){var n=(0,rt.YY)(e,t),r=(0,st.Gr)(n,it.w_.url);if(r){var a=(0,rt.YY)(e,r);return a&&(0,st.Gr)(a,it.w_.value)}return(0,st.Gr)(n,it.ay.openid)}function wt(e,t){var n=e.containerUrl,r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ft(Object(n),!0).forEach((function(t){(0,h.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({emails:[],addresses:[],telephones:[]},t),a=(0,ot.Z)(),o=(0,D.Vo)(n,gt,a,ht),i=function(e,t){var n=(0,ie.tS)((0,rt.Lx)(),(function(e){return(0,ct.qg)(e,it.E_.type,(0,ut.BC)("WebId"))}),(function(t){return(0,ct.qg)(t,it.w_.value,e)}));return{webIdNode:n,webIdNodeUrl:(0,rt.j5)(n,t)}}(t.webId,o),s=i.webIdNode,c=i.webIdNodeUrl,l=(0,ut.d2)(t,c),u=r.emails.map((0,ut.gf)("email")),d=r.addresses.map((0,ut.gf)("address")),p=r.telephones.map((0,ut.gf)("telephone")),m=ie.WV.apply(void 0,[{name:"this"}].concat([function(e){return(0,ct.qg)(e,it.E_.type,it.w_.Individual)}].concat((0,at.Z)(l)),(0,at.Z)(u.map((function(e){var t=e.name;return function(e){return(0,ct.qg)(e,it.w_.hasEmail,[o,t].join("#"))}}))),(0,at.Z)(d.map((function(e){var t=e.name;return function(e){return(0,ct.qg)(e,it.w_.hasAddress,[o,t].join("#"))}}))),(0,at.Z)(p.map((function(e){var t=e.name;return function(e){return(0,ct.qg)(e,it.w_.hasTelephone,[o,t].join("#"))}}))))),f=ie.tS.apply(void 0,[(0,lt.HM)(),function(e){return(0,rt.lY)(e,m)},function(e){return(0,rt.lY)(e,s)}].concat((0,at.Z)(u.concat(d).concat(p).map((function(e){var t=e.thing;return function(e){return(0,rt.lY)(e,t)}})))));return{iri:o,dataset:f}}function Zt(e,t,n){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,I.Z)(N().mark((function e(t,n,r){var a,o,i,c,l,u,d,p,m;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,rt.j5)(t.thing),o=wt(t,n),i=o.iri,c=o.dataset,e.next=5,(0,lt.ek)(i,c,{fetch:r});case 5:if(l=e.sent,u=(0,ie.WV)({url:"".concat((0,s.LH)(l),"#this")},(function(e){return(0,ct.go)(e,it.ay.name,n.fn||n.name)}),(function(e){return(0,ct.qg)(e,(0,ut.BC)("inAddressBook"),a)})),d=t,p=(0,mt.uT)(t,vt)){e.next=14;break}return e.next=12,(0,mt.Dl)(t,vt,r);case 12:d=e.sent,p=(0,mt.uT)(d,vt);case 14:return e.next=16,(0,pt.l)(p,r,(function(e){return(0,rt.lY)(e,u)}));case 16:return m=e.sent,e.abrupt("return",{addressBook:d,person:{dataset:l,thing:u},personIndex:m});case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function St(e,t,n){return kt.apply(this,arguments)}function kt(){return kt=(0,I.Z)(N().mark((function e(t,n,r){var a,o,i;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yt(t,r);case 2:return a=e.sent,e.next=5,Nt(a,r);case 5:return o=e.sent,i=o.filter((function(e){return e.webId===n})),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)}))),kt.apply(this,arguments)}function It(e,t){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,I.Z)(N().mark((function e(t,n){var r,a,o,i,s,c;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,u.RX)(t,n);case 3:return r=e.sent,a=r.response,o=a.dataset,i=a.iri,s=xt(o,i),e.next=9,(0,R.In)(s,n);case 9:return c=e.sent,e.abrupt("return",c);case 13:return e.prev=13,e.t0=e.catch(0),e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function Nt(e,t){return Ot.apply(this,arguments)}function Ot(){return Ot=(0,I.Z)(N().mark((function e(t,n){var r;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map((function(e){var t=e.thing;return It((0,rt.j5)(t),n)})));case 2:return r=e.sent,e.abrupt("return",r.filter((function(e){return e})));case 4:case"end":return e.stop()}}),e)}))),Ot.apply(this,arguments)}function At(e,t){return Dt.apply(this,arguments)}function Dt(){return Dt=(0,I.Z)(N().mark((function e(t,n){var r,a;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,R.In)(t,n);case 3:r=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),a=e.t0;case 9:return e.abrupt("return",{profile:r,profileError:a});case 10:case"end":return e.stop()}}),e,null,[[0,6]])}))),Dt.apply(this,arguments)}var Tt=["src","icon","variant"],Wt=(0,m.Z)((function(e){return(0,M.Z)(function(e){return(0,g.createStyles)(e,["icons","button"],{avatar__icon:{color:"white"},"avatar__icon--public":{fontSize:"0.875rem",display:"flex",width:"1.875rem",height:"1.875rem",alignItems:"center",justifyContent:"center",color:"#2196F3",backgroundColor:"#E8F4FD",borderRadius:"50%"},"avatar__icon--authenticated":{fontSize:"0.875rem",display:"flex",width:"1.875rem",height:"1.875rem",alignItems:"center",justifyContent:"center",color:"#4CAF50",backgroundColor:"#EDF7ED",borderRadius:"50%"}})}(e))}));function jt(e){var t=e.src,n=e.icon,a=e.variant,o=(0,Q.Z)(e,Tt),i=(0,g.useBem)(Wt());return t?r.createElement(me.Z,(0,$.Z)({src:t},o)):r.createElement(me.Z,o,r.createElement(p.PJ,{name:n,className:i("avatar__icon",a)}))}jt.defaultProps={icon:"user",src:null,variant:null};var Lt=n(45697),Rt=n.n(Lt),Bt=(Rt().shape({type:Rt().string,acl:Rt().shape({read:Rt().bool,write:Rt().bool,append:Rt().bool,control:Rt().bool}),webId:Rt().string.isRequired,alias:Rt().string,inherited:Rt().bool,vc:Rt().shape({"@context":Rt().arrayOf(Rt().string),credentialSubject:Rt().shape({hasConsent:Rt().shape({mode:Rt().arrayOf(Rt().string),hasStatus:Rt().string,forPersonalData:Rt().arrayOf(Rt().string),forPurpose:Rt().arrayOf(Rt().string),isProvidedTo:Rt().string}),id:Rt().string,inbox:Rt().string}),id:Rt().string,issuanceDate:Rt().string,expirationDate:Rt().string,issuer:Rt().string,proof:Rt().shape({created:Rt().string,domain:Rt().string,proofPurpose:Rt().string,proofValue:Rt().string,type:Rt().string,verificationMethod:Rt().string}),type:Rt().arrayOf(Rt().string)})}),Rt().shape({avatar:Rt().string,name:Rt().string,nickname:Rt().string,webId:Rt().string,types:Rt().arrayOf(Rt().string)}),Rt().shape({data:Rt().any,error:Rt().object,isValidating:Rt().bool.isRequired,mutate:Rt().func.isRequired}),(0,r.createContext)({data:null,error:null,isValidating:!0,mutate:function(){}})),Ft=Bt;function zt(e){var t=e.children,n=e.swr;return r.createElement(Bt.Provider,{value:n},t)}var _t=(0,m.Z)((function(e){return(0,M.Z)(function(e){return(0,g.createStyles)(e,[],{listItemText:{fontWeight:e.typography.body1.fontWeight}})}(e))})),Mt="remove-agent";function Ut(e){var t=e.resourceIri,n=e.permission,a=n.webId,o=n.alias,i=e.profile,s=e.setLoading,c=e.setLocalAccess,l=(0,r.useContext)(Le).accessControl,d=(0,r.useContext)(Ft).mutate,p=(0,u.Yj)(t),m=_t(),f=(0,r.useState)(!1),g=f[0],h=f[1],b=(0,r.useState)(!1),v=b[0],y=b[1],E=function(e){var t=e.setLoading,n=e.accessControl,r=e.setLocalAccess,a=e.mutateResourceInfo;return function(){var e=(0,I.Z)(N().mark((function e(o,i){var s,c;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(!0),et.fL===o&&n.setRulePublic(i,!1),Qe.Ux===o&&n.setRuleAuthenticated(i,!1),e.next=5,n.removeAgentFromPolicy(o,i);case 5:return s=e.sent,c=s.response,e.next=9,a(c,!1);case 9:t(!1),r(null);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}({setLoading:s,accessControl:l,setLocalAccess:c,mutateResourceInfo:d}),x=(0,r.useContext)(Oe.ZP),Z=x.confirmed,S=x.open,k=x.setConfirmed,P=x.setOpen,O=x.title,A=x.setTitle,D=x.setConfirmText,T=x.closeDialog;return(0,r.useEffect)((function(){y(!0),g&&(k(!0),E(a,o)),S===Mt&&(v&&null===Z||(v&&Z&&E(a,o),v&&null!==Z&&(T(),y(!1)),D(null)))}),[v,Z,O,a,o,g,k,y,D,E,S,T]),r.createElement(w.Z,{"data-testid":"remove-button",button:!0,onClick:function(){D("Remove"),et.fL!==a&&Qe.Ux!==a||h(!0);var e="Remove ".concat((null===i||void 0===i?void 0:i.name)||a,"'s access from ").concat(p);A(e),P(Mt)}},r.createElement(C.Z,{disableTypography:!0,classes:{primary:m.listItemText}},"Remove"),r.createElement(Ae.ZP,null))}Ut.defaultProps={setLoading:function(){},setLocalAccess:function(){},profile:null};var Yt=function(e){return(0,g.createStyles)(e,["back-to-nav","input"],{"revoke-button":{color:e.palette.error.main,textDecoration:"underline",background:"none",border:"none",cursor:"pointer",textAlign:"left",fontSize:"1rem"}})},Ht=(0,m.Z)((function(e){return(0,M.Z)(Yt(e))}));function qt(e){var t=e.setOpenModal,n=Ht();return r.createElement(w.Z,{"data-testid":"view-details-button",button:!0,onClick:function(){return t(!0)}},r.createElement(C.Z,{disableTypography:!0,classes:{primary:n.listItemText}},"View Details"))}var Vt=n(69143),Gt=n(42298),Jt=n(41749),Kt=n(14179),Xt=n(14844),$t=n(11977);function Qt(e){var t,n,r;return Array.isArray(null===e||void 0===e||null===(t=e.credentialSubject)||void 0===t?void 0:t.providedConsent.mode)?null===e||void 0===e||null===(n=e.credentialSubject)||void 0===n?void 0:n.providedConsent:[null===e||void 0===e||null===(r=e.credentialSubject)||void 0===r?void 0:r.providedConsent]}function en(e){var t,n;return null===e||void 0===e||null===(t=e.credentialSubject)||void 0===t||null===(n=t.providedConsent)||void 0===n?void 0:n.isProvidedTo}function tn(e){var t=e.agentWebId,n=e.className,a=e.link,o=(0,c.useThing)().thing,i=o&&(0,st.oX)(o,it.ay.name);return r.createElement(r.Fragment,null,a?r.createElement("a",{target:"_blank",href:t,rel:"noopener noreferrer","data-testid":"agent-name-link"},r.createElement("h3",{className:n},i||t)):r.createElement("span",{className:n}," ",i||t," "))}tn.defaultProps={className:null,link:!1};var nn=(0,m.Z)((function(e){return(0,M.Z)(function(e){return{"access-details--wrapper":{display:"flex",flexDirection:"column",wordBreak:"break-word",margin:"1rem"},"access-details--title":{padding:0,margin:0,fontFamily:e.typography.h2.fontFamily,position:"relative"},"access-details--resource-info":{flexGrow:1,"& > *":{paddingLeft:"2rem"},"& p":{fontSize:"0.8125rem",margin:0,wordWrap:"break-word"}},"access-details--icon":{fontSize:"1.5rem",display:"flex",alignItems:"center",background:"linear-gradient(to right, #0D6796, #33B2D3)","-webkit-background-clip":"text",color:"transparent",marginRight:"1rem"},avatar:{marginRight:"1rem"},"access-details--avatar-container":{display:"flex",justifyContent:"center",alignSelf:"center"},"access-details--agent-name":{color:"#000",textDecorationColor:"#000",fontSize:"20px",fontWeight:"700",textDecoration:"underline"},"access-details--section":{minWidth:"100%",display:"flex",flexDirection:"column"},"access-details--section-header":{fontFamily:e.typography.h3.fontFamily,alignSelf:"end",marginBottom:0},"access-details--edit-icon":{color:"#7B4DFF",paddingRight:".5rem"},"access-details--section-icon":{color:"#4CAF50",fontSize:"1rem",alignItems:"flex-start"},listItemIcon:{minWidth:"fit-content",paddingRight:"0.5rem",display:"flex",alignSelf:"flex-start",paddingTop:"0.2rem"},listItemTitleText:{fontFamily:e.typography.body.fontFamily,fontSize:e.typography.body1.fontSize},listItemSecondaryText:{fontFamily:e.typography.body.fontFamily,fontSize:"0.8125rem"},"access-details--separator":{backgroundColor:e.palette.grey.A100,border:"none",height:"1px",width:"100%"},listItemText:{marginTop:0},purpose:{display:"flex",justifyContent:"flex-start"},"access-details--action-container":{justifyContent:"space-between",width:"100%",marginTop:"1rem"},"access-details--revoke-text":{textTransform:"none",color:e.palette.error.main,padding:"1rem 0",border:"none",background:"transparent",textDecoration:"underline",fontSize:"1rem",cursor:"pointer",textAlign:"left",justifySelf:"flex-end","&:hover":{backgroundColor:"transparent"}}}}(e))}));function rn(e){var t,n,a=e.resourceIri,o=e.permission,i=e.handleCloseModal,s=e.openModal,l=nn(),d=(0,g.useBem)(l),m=o.vc,f=o.webId,h=function(e){return function(){return r.createElement(me.Z,{className:e("avatar"),alt:"Contact photo placeholder"})}}(d),b=null===m||void 0===m||null===(t=m.credentialSubject)||void 0===t||null===(n=t.providedConsent)||void 0===n?void 0:n.mode,v=null===b||void 0===b?void 0:b.map((function(e){return{read:!!e.includes("Read"),write:!!e.includes("Write"),append:!!e.includes("Append"),control:!!e.includes("Control")}})),y=(0,u.Yj)(a),E=null===v||void 0===v?void 0:v.map((function(e){return(0,Kt.nY)(e)})),S=["View","Edit","Add","Share","View Sharing"],k=null===E||void 0===E?void 0:E.sort((function(e,t){return S.indexOf(e.name)-S.indexOf(t.name)})),I=!!(0,$t.ul)(m)&&(0,Gt.Z)(new Date((0,$t.ul)(m)),"MMMM' 'd', 'Y"),P=(0,Gt.Z)(new Date((0,$t.Wt)(m)),"M/dd/Y"),N=function(e){var t,n,r;return Array.isArray(null===e||void 0===e||null===(t=e.credentialSubject)||void 0===t?void 0:t.providedConsent)?null===e||void 0===e||null===(n=e.credentialSubject)||void 0===n?void 0:n.providedConsent[0].forPurpose:null===e||void 0===e||null===(r=e.credentialSubject)||void 0===r?void 0:r.providedConsent.forPurpose}(m),O=(0,c.useSession)().fetch;return r.createElement(p.u_,{open:s,style:{display:"flex",alignItems:"center",justifyContent:"center"},onClose:i,"aria-labelledby":"".concat(a," Modal"),"aria-describedby":"".concat(a," for this resource")},r.createElement(p.F0,{className:l.paper,"data-testid":"consent-details-modal"},r.createElement(p.fe,{className:d("access-details","wrapper")},r.createElement(Jt.Z,{container:!0},r.createElement(Jt.Z,{className:d("access-details","title"),container:!0},r.createElement(c.CombinedDataProvider,{datasetUrl:f,thingUrl:f},r.createElement(Jt.Z,{className:d("access-details","avatar-container"),container:!0,item:!0,xs:12,sm:2},r.createElement(c.Image,{profileIri:f,property:it.w_.hasPhoto,errorComponent:h})),r.createElement(Jt.Z,{item:!0,xs:12,sm:10},r.createElement(tn,{className:d("access-details","agent-name"),agentWebId:f,link:!0})))),r.createElement(Jt.Z,{className:d("access-details","section"),container:!0},r.createElement(Jt.Z,{justify:"space-between",container:!0,item:!0},r.createElement("h3",{className:d("access-details","section-header")},"Access")),r.createElement(Jt.Z,{item:!0},r.createElement("hr",{className:d("access-details","separator")}),r.createElement(x.Z,{dense:!0,style:{overflow:"visable"}},null===k||void 0===k?void 0:k.map((function(e){var t=e.name,n=e.icon,a=e.description;return r.createElement(w.Z,{key:t,style:{padding:"0px"}},r.createElement(Z.Z,{classes:{root:l.listItemIcon}},r.createElement(p.PJ,{name:n,className:d("access-details","section-icon")})),r.createElement(C.Z,{classes:{root:l.listItemText,primary:l.listItemTitleText,secondary:l.listItemSecondaryText},key:t,primary:t,secondary:a}))})))),r.createElement(Jt.Z,{item:!0},r.createElement("h3",{className:d("access-details","section-header")},"Approved On"),r.createElement("hr",{className:d("access-details","separator")}),r.createElement("p",null,P)),r.createElement(Jt.Z,{item:!0},r.createElement("h3",{className:d("access-details","section-header")},"Purpose"),r.createElement("hr",{className:d("access-details","separator")}),r.createElement("div",{className:d("purposes-container")},Array.isArray(N)?r.createElement(x.Z,{dense:!0,style:{overflow:"visable"}},null===N||void 0===N?void 0:N.map((function(e){return r.createElement(w.Z,{key:e,className:d("list-item")},r.createElement("span",{className:d("purpose")},e," ",r.createElement(Xt.Z,{tooltipText:e})))}))):r.createElement("span",{className:d("purpose")},N," ",r.createElement(Xt.Z,{tooltipText:N})))),r.createElement(Jt.Z,{item:!0},I&&r.createElement(Jt.Z,{container:!0},r.createElement("h3",{className:d("access-details","section-header")},"Access Duration"),r.createElement("hr",{className:d("access-details","separator")}),r.createElement("span",null,r.createElement(tn,{agentWebId:f}),"has access until ",r.createElement("strong",null,I),".")))),r.createElement(Jt.Z,{container:!0,className:d("access-details","action-container")},r.createElement(Jt.Z,{item:!0,xs:12,sm:6},r.createElement(p.Qj,{className:d("access-details","revoke-text"),variant:"secondary",onClick:function(){(0,Vt.bP)(m,{fetch:O}),i()},"data-testid":"consent-details-revoke"},"Revoke access to ".concat(y))),r.createElement(Jt.Z,{item:!0,xs:12,sm:2},r.createElement(p.zx,{type:"submit",onClick:i,"data-testid":"consent-details-done"},"Done")))))))}var an=(0,m.Z)((function(e){return(0,M.Z)(function(e){return(0,g.createStyles)(e,["icons"],{infoButton:{padding:0,minWidth:"max-content"},infoIcon:{margin:e.spacing(.4),color:e.palette.info.main},button:{flexShrink:0,width:"1.875rem",height:"1.875rem",color:e.palette.text.secondary,backgroundColor:"transparent",border:"none",borderRadius:"50%",margin:0,padding:0,cursor:"pointer","&&:hover":{color:e.palette.secondary.contrastText,backgroundColor:e.palette.grey[400]}},listItemText:{fontWeight:500},webIdContainer:{backgroundColor:e.palette.grey[100],fontSize:"0.75rem",fontWeight:500,letterSpacing:0,lineHeight:"13px",width:"100%",height:"100%",padding:e.spacing(.8,1.2),marginTop:0},webId:{marginTop:"0.25rem",marginBottom:"0.25rem"},webIdContainerGutters:{paddingLeft:0,paddingRight:0},webIdContainerRoot:{paddingTop:0},listRoot:{paddingTop:0}})}(e))}));function on(e){var t=e.resourceIri,n=e.permission,a=e.profile,o=e.setLoading,i=e.setLocalAccess,s=an(),c=(0,g.useBem)(an()),l=(0,r.useState)(null),u=l[0],d=l[1],p=(0,r.useState)(!1),m=p[0],f=p[1],h=n.webId,b=n.vc,v=function(){d(null),f(!1)},Z=Boolean(u),S=Z?"agent-access-options-menu":void 0;return r.createElement(r.Fragment,null,r.createElement("button",{"data-testid":"menu-button",type:"button",className:s.button,onClick:function(e){d(e.currentTarget)}},r.createElement("i",{className:(0,y.Z)(c("icon-more"),c("icon"))})),r.createElement(E.ZP,{id:S,open:Z,anchorEl:u,onClose:v,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},r.createElement(x.Z,{classes:{root:s.listRoot}},r.createElement(w.Z,{classes:{root:s.webIdContainerRoot,gutters:s.webIdContainerGutters}},r.createElement(C.Z,{disableTypography:!0,classes:{root:s.webIdContainer}},r.createElement("b",null,"WebID: "),r.createElement("p",{className:s.webId},h))),b?r.createElement(r.Fragment,null,r.createElement(qt,{resourceIri:t,permission:n,setOpenModal:f}),r.createElement(rn,{openModal:m,resourceIri:t,permission:n,handleCloseModal:v})):r.createElement(Ut,{resourceIri:t,profile:a,permission:n,setLoading:o,setLocalAccess:i}))))}on.defaultProps={resourceIri:null,setLoading:function(){},profile:null,setLocalAccess:function(){}};var sn=(0,m.Z)((function(e){return(0,M.Z)(function(e){return{nameAndAvatarContainer:{padding:e.spacing(.8,1.6),color:"#000",width:"100%",display:"flex",alignItems:"center",flexDirection:"row"},avatar:{marginRight:e.spacing(1.6),width:"1.875rem",height:"1.875rem",fontSize:"0.875rem"},detailText:{overflowWrap:"anywhere",fontWeight:500,display:"flex",fontSize:"1rem",fontFamily:"inherit",textAlign:"left",justifyContent:"space-between",alignItems:"center",flexGrow:1,flexDirection:"row"},shareText:{whiteSpace:"nowrap",padding:e.spacing(.5),color:e.palette.text.secondary,fontSize:"0.8125rem",fontWeight:500}}}(e))}));function cn(e){var t,n=e.resourceIri,a=e.permission,o=e.profile,i=e.setLoading,s=e.setLocalAccess,c=sn(),l=a.webId,u=(t=a).webId===et.fL?{name:"Anyone"}:t.webId===Qe.Ux?{name:"Anyone signed in"}:o,d=function(e){return e.webId===et.fL?et.Wp.getAvatarProps():e.webId===Qe.Ux?Qe.bm.getAvatarProps():{src:null===o||void 0===o?void 0:o.avatar}}(a);return r.createElement("div",{className:c.nameAndAvatarContainer},r.createElement(jt,(0,$.Z)({className:c.avatar,alt:l},d)),r.createElement(V.Z,{classes:{body1:c.detailText},"data-testid":"agent-web-id",className:c.detailText},u?(0,R.fK)(u):l),a.inherited?null:r.createElement(on,{resourceIri:n,profile:o,permission:a,setLoading:i,setLocalAccess:s}))}cn.defaultProps={resourceIri:null,setLoading:function(){},setLocalAccess:function(){},profile:null};var ln=(0,m.Z)((function(e){return(0,M.Z)(function(e){return{"alert-container":{maxWidth:"100%",backgroundColor:"#FFF4E5",padding:0},action:{padding:0,paddingRight:e.spacing(.5)},alertBox:{width:"100%",overflowWrap:"break-word",padding:e.spacing(.7,1.4)},alertMessage:{overflowWrap:"break-word",fontSize:"14px"},"bold-button":{fontWeight:"bold",alignSelf:"right"},icon:{marginLeft:"0.25em"},spinnerContainer:{width:"100%",textAlign:"center"},spinner:{justifySelf:"center",margin:e.spacing(2)},separator:{boxSizing:"border-box",backgroundColor:"#E1CAAA",margin:e.spacing(0,1.6),marginBottom:e.spacing(.8),height:"1px"},loadingStateContainer:{display:"flex",alignItems:"center"}}}(e))}));function un(e){var t=e.permission,n=ln(),a=(0,c.useSession)().session.fetch,o=(0,g.useBem)(ln()),i=(0,r.useContext)(c.DatasetContext).solidDataset,l=t.webId,u=t.acl,d=t.profile,p=t.profileError,m=(0,r.useState)(!1),f=m[0],h=m[1],b=(0,r.useState)(d),v=b[0],y=b[1],E=(0,r.useState)(p),x=E[0],w=E[1],Z=(0,r.useState)(!1),C=Z[0],S=Z[1],P=(0,s.LH)(i),O=(0,r.useState)(u),A=O[0],D=O[1];(0,r.useEffect)((function(){l===et.fL&&y({name:et.ZJ}),l===Qe.Ux&&y({name:Qe.wO})}),[l]);var T=function(){var e=(0,I.Z)(N().mark((function e(){var t,n,r;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,At(l,a);case 2:t=e.sent,n=t.profile,r=t.profileError,n&&(y(d),h(!1)),p&&(w(r),h(!1));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return A?C?r.createElement("div",{className:n.spinnerContainer},r.createElement(ue.Z,{size:20,className:o("spinner"),color:"primary"})):x?r.createElement("div",{className:o("alert-container")},r.createElement(fe.Z,{classes:{root:n.alertBox,message:n.alertMessage,action:n.action,icon:n.icon},severity:"warning",action:f?r.createElement(ue.Z,{"data-testid":"try-again-spinner",size:20,className:o("spinner"),color:"inherit"}):r.createElement(pe.Z,{"data-testid":"try-again-button",className:o("bold-button"),color:"inherit",size:"small",onClick:function(){h(!0),setTimeout(T,750)}},"Try again")},"Unable to load this profile"),r.createElement("div",{className:n.separator}),r.createElement(cn,{resourceIri:P,permission:t,profile:v,setLoading:S,setLocalAccess:D})):v||x?r.createElement(cn,{resourceIri:P,permission:t,profile:v,setLoading:S,setLocalAccess:D}):r.createElement("div",{className:n.loadingStateContainer},r.createElement(k.Z,{"data-testid":"skeleton-placeholder",className:n.avatar,variant:"circle",width:40,height:40}),r.createElement("div",{className:n.detailText},r.createElement(k.Z,{variant:"text",width:100}))):null}un.defaultProps={};var dn=n(5566),pn=n(9630),mn=n(78299);function fn(){var e=(0,r.useContext)(Le).accessControl,t=(0,r.useState)(null),n=t[0],a=t[1],o=(0,r.useContext)(c.DatasetContext).solidDataset,i=function(e){var t=(0,r.useState)(null),n=t[0],a=t[1],o=(0,r.useState)(null),i=o[0],s=o[1],l=(0,c.useSession)().fetch;return(0,r.useEffect)((function(){function t(e){return n.apply(this,arguments)}function n(){return(n=(0,I.Z)(N().mark((function e(t){var n;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,pn.zH)(t,{fetch:l});case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}e?(0,I.Z)(N().mark((function n(){var r,o;return N().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,mn.x8)(e,{fetch:l});case 3:return r=n.sent,n.next=6,Promise.all(r.map(function(){var e=(0,I.Z)(N().mark((function e(n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(n);case 2:if(e.sent.errors.length){e.next=5;break}return e.abrupt("return",n);case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:o=n.sent,a(o.filter((function(e){return null!==e}))),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),s(n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})))():a(null)}),[e,l]),{permissions:n,permissionsError:i}}((0,s.LH)(o)),l=i.permissions,u=(0,r.useMemo)((function(){return l?function(e){return e?e.map((function(e){return{acl:{read:Qt(e).mode.some((function(e){return e.includes("Read")})),write:Qt(e).mode.some((function(e){return e.includes("Write")})),append:Qt(e).mode.some((function(e){return e.includes("Append")})),control:Qt(e).mode.some((function(e){return e.includes("Control")}))},vc:e}})).map((function(e){var t=e.acl,n=e.vc;return{type:"agent",acl:t,webId:en(n),alias:(0,Kt.yz)(t,"name"),vc:n}})):[]}(l):[]}),[l]);return(0,r.useEffect)((function(){e?e.getAllPermissionsForResource().then((function(e){a([].concat((0,at.Z)(e),(0,at.Z)(u)))})):a(null)}),[e,u]),{permissions:n}}var gn={permissions:[],newAgentsWebIds:[],setNewAgentsWebIds:function(){},webIdsToDelete:[],setWebIdsToDelete:function(){},addingWebId:!1,setAddingWebId:function(){}},hn=(0,r.createContext)(gn);function bn(e){var t=e.children,n=fn().permissions,a=(0,r.useState)([]),o=a[0],i=a[1],s=(0,r.useState)([]),c=s[0],l=s[1],u=(0,r.useState)(!1),d=u[0],p=u[1];return r.createElement(hn.Provider,{value:{permissions:n,newAgentsWebIds:o,setNewAgentsWebIds:i,webIdsToDelete:c,setWebIdsToDelete:l,addingWebId:d,setAddingWebId:p}},t)}bn.defaultProps={children:null};var vn=hn,yn=n(59439);var En=(0,m.Z)((function(e){return(0,M.Z)(function(e){return(0,g.createStyles)(e,["icons"],{title:{fontSize:e.typography.h4.fontSize,fontWeight:e.typography.fontWeightBold,flexGrow:1},headerContainer:{display:"flex",flexDirection:"row",alignItems:"center",marginBottom:e.spacing(1.6),"&& p":{padding:0,margin:0}},textContainer:{width:"100%",flexDirection:"column"},description:{fontSize:"0.8125rem"},titleAndButtonContainer:{display:"flex",flexDirection:"row",alignItems:"center"},icon:{padding:e.spacing(1),borderRadius:"50%",marginRight:e.spacing(1.6),fontSize:e.typography.h1.fontSize},iconViewer:{color:yn.O6.viewers.iconColor,backgroundColor:yn.O6.viewers.iconBackgroundColor},iconBlocked:{color:yn.O6.blocked.iconColor,backgroundColor:yn.O6.blocked.iconBackgroundColor},iconEditor:{color:yn.O6.editors.iconColor,backgroundColor:yn.O6.editors.iconBackgroundColor},iconSettings:{color:yn.O6.custom.iconColor,backgroundColor:yn.O6.custom.iconBackgroundColor}})}(e))}));function xn(e){var t=e.children,n=e.type,a=e.isPolicyList,o=(0,g.useBem)(En()),i=En(),s=yn.O6[n],c=s.titlePlural,l=s.titleSingular,u=s.icon,d=s.iconClassName,p=s.DescriptionComponent;return r.createElement("div",{className:i.headerContainer},r.createElement("i",{className:(0,y.Z)(o(u),o("icon"),o(d))}),r.createElement("div",{className:i.textContainer},r.createElement("div",{className:i.titleAndButtonContainer},r.createElement("p",{className:i.title},a?c:l),t),r.createElement("span",{className:i.description},r.createElement(p,null))))}xn.defaultProps={isPolicyList:!1,children:null};var wn=n(17812),Zn=n(15575);var Cn=(0,m.Z)((function(e){return(0,M.Z)(function(e){return(0,g.createStyles)(e,["icons","table"],{searchBoxContainer:{display:"flex",margin:e.spacing(.7,1.2),border:"1px solid ".concat(e.palette.grey.A100),borderRadius:"10px",height:"2.5rem"},searchInput:{fontSize:"0.8125rem",width:"100%",font:"inherit",fontWeight:500,color:e.palette.primary.text},iconSearch:{fontSize:e.typography.body1.fontSize}})}(e))}));function Sn(e){var t=e.handleFilterChange,n=(0,g.useBem)(Cn()),a=Cn();return r.createElement("div",{className:a.searchBoxContainer},r.createElement(wn.Z,{type:"submit","aria-label":"search"},r.createElement("i",{className:(0,y.Z)(n("icon-search"),n("icon"),a.iconSearch),"aria-label":"search"})),r.createElement(Zn.Z,{classes:{root:a.searchInput},placeholder:"Search by name or WebId",inputProps:{"data-testid":"search-input","aria-label":"Search by name or WebId",onChange:t}}))}Sn.defaultProps={handleFilterChange:function(){}};var kn=n(39803);var In=n(35345);function Pn(e){var t=(0,c.useSession)().fetch,n=function(e){var t;try{t=(0,rt.j5)(e)}catch(n){t=null}return t}(e);return(0,In.ZP)(["contact",n],(0,I.Z)(N().mark((function e(){var r;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,It(n,t);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))))}var Nn=(0,m.Z)((function(e){return(0,M.Z)(function(e){return(0,g.createStyles)(e,["icons","button"],{addAgentForm:{display:"flex",flexDirection:"row",padding:0},nameAndAvatarContainer:{display:"flex",alignItems:"Center"},avatar:{width:"1.875rem",height:"1.875rem",margin:e.spacing(0,.8)},detailText:(0,h.Z)({fontFamily:e.typography.body.fontFamily,fontWeight:e.typography.body.fontWeight},e.breakpoints.up("sm"),{minWidth:"20rem"}),button:{padding:e.spacing(.8,1),maxHeight:"2.5rem",margin:e.spacing(0,.5)},searchBoxContainer:(0,h.Z)({display:"flex",border:"1px solid ".concat(e.palette.grey.A100),borderRadius:"10px",height:"2.5rem",minWidth:"calc(100% - 25px)"},e.breakpoints.up("sm"),{minWidth:"20rem"}),searchInput:{height:"100%",fontSize:"0.8125rem",width:"100%",fontFamily:e.typography.body.fontFamily,fontWeight:e.typography.body.fontWeight,color:e.palette.primary.text,padding:e.spacing(.5)},agentPickerFormContainer:{display:"flex",alignItems:"center"},publicIcon:{display:"flex",width:"1.875rem",height:"1.875rem",alignItems:"center",justifyContent:"center",color:"#2196F3",backgroundColor:"#E8F4FD",borderRadius:"50%",margin:e.spacing(0,.8)},authenticatedIcon:{display:"flex",width:"1.875rem",height:"1.875rem",alignItems:"center",justifyContent:"center",color:"#4CAF50",backgroundColor:"#EDF7ED",borderRadius:"50%",margin:e.spacing(0,.8)}})}(e))})),On="http://www.w3.org/ns/solid/acp#agent",An="agent-webid",Dn=function(){var e=(0,I.Z)(N().mark((function e(t,n,r){var a,o,i,s,c;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,R.In)(t,r);case 3:(o=e.sent)?(i=o.name,s=o.avatar,c=o.webId,a=(0,ie.tS)(n,(function(e){return(0,ct.go)(e,it.ay.name,i)}),(function(e){return(0,ct.qg)(e,On,c)})),s&&(a=(0,ct.qg)(a,it.w_.hasPhoto,s))):a=(0,ct.qg)(n,On,t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a=(0,ct.qg)(n,On,t);case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}();function Tn(e){var t=e.index,n=e.contactsArrayLength,a=e.updateTemporaryRowThing,o=e.type,i=(0,c.useSession)(),s=i.session,l=i.fetch,u=(0,r.useContext)(vn),d=u.permissions,m=u.newAgentsWebIds,f=u.setAddingWebId,g=u.addingWebId,h=u.setNewAgentsWebIds,b=(0,c.useThing)().thing,v=Nn(),y=(0,r.useState)(""),E=y[0],x=y[1],w=(0,r.useState)(null),Z=w[0],C=w[1],k=(0,r.useState)(null),P=k[0],O=k[1],A=(0,r.useState)(""),D=A[0],T=A[1],W=Pn(b).data,j=(0,r.useState)(null),L=j[0],R=j[1];(0,r.useEffect)((function(){W?(C(W.name),O(W.avatar),T(W.webId)):b&&!W&&n>0&&(C((0,st.oX)(b,it.ay.name)||(0,st.oX)(b,it.w_.fn)||null),O((0,st.Gr)(b,it.w_.hasPhoto)||null),T((0,st.Gr)(b,On)))}),[W,b,E,n]);var B=function(){var e=(0,I.Z)(N().mark((function e(t){var n;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),E!==s.info.webId){e.next=4;break}return R("You cannot add your own WebID to permissions"),e.abrupt("return");case 4:if(!d.filter((function(e){return e.webId===E&&e.alias===o})).length){e.next=8;break}return R("That WebID has already been added"),e.abrupt("return");case 8:return h([].concat((0,at.Z)(m),[E])),e.next=11,Dn(E,b,l);case 11:n=e.sent,a(n),f(!1);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return 0===t&&g?r.createElement("div",{className:v.agentPickerFormContainer},r.createElement("form",{className:v.addAgentForm,onSubmit:B},r.createElement("div",{className:v.searchBoxContainer},r.createElement(kn.Z,{"aria-label":"Enter WebID",placeholder:"Enter WebID",value:E,error:!!L,helperText:L,onChange:function(e){R(null),x(e.target.value)},classes:{root:v.searchInput},type:"url",inputProps:{"data-testid":"webid-input"},InputProps:{pattern:"https://.+",title:"Must start with https://",className:v.searchInput,disableUnderline:!0},required:!0})),r.createElement(p.zx,{"data-testid":"add-button",className:v.button,type:"submit",variant:"with-input"},"Add"))):D===et.fL||D===Qe.Ux?r.createElement(S.ZP,{title:D===et.fL?"Anyone on the internet will be able to access this resource":"Anyone signed in with a WebID will be able to access this resource"},r.createElement("div",{className:v.nameAndAvatarContainer},D===et.fL?r.createElement(p.PJ,{name:"globe",className:v.publicIcon}):r.createElement(p.PJ,{name:"user-lock",className:v.authenticatedIcon}),r.createElement(V.Z,{classes:{body1:v.detailText},"data-testid":An,className:v.detailText},Z||D))):r.createElement(S.ZP,{title:Z?D||E:"Unable to load profile"},r.createElement("div",{className:v.nameAndAvatarContainer},D===et.fL?r.createElement(p.PJ,{name:"globe",className:v.publicIcon}):r.createElement(me.Z,{className:v.avatar,alt:D,src:P||null}),r.createElement(V.Z,{classes:{body1:v.detailText},"data-testid":An,className:v.detailText},Z||D)))}function Wn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wn(Object(n),!0).forEach((function(t){(0,h.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ln=function(e){return(0,g.createStyles)(e,["button","icons"],{"icon-large":jn(jn({},e.icons.iconColor("#0D6796")),{},{fontSize:64})})},Rn=(0,m.Z)((function(e){return(0,f.Z)(Ln(e))}));function Bn(e){var t=e.onClick,n=(0,g.useBem)(Rn());return r.createElement(p.VY,null,r.createElement(p.W2,{variant:"empty"},r.createElement(p.PJ,{name:"user",className:n("icon-large")}),r.createElement("h2",{className:"text"},"Add a new person with their WebId"),r.createElement(p.zx,{"data-testid":"empty-state-add-webid-button",onClick:t,iconBefore:"add",variant:"small"},"Add WebId")))}var Fn=n(94924),zn=n(85639);var _n=(0,m.Z)((function(e){return(0,M.Z)(function(e){return(0,g.createStyles)(e,["icons"],{dropdown:{display:"flex",border:"1px solid ".concat(e.palette.grey.A100),borderRadius:e.shape.borderRadius,marginBottom:e.spacing(1.2),padding:e.spacing(1.2),fontWeight:e.typography.body.fontWeight,fontFamily:e.typography.body.fontFamily,backgroundColor:e.palette.background.paper},menuItem:{fontWeight:e.typography.body.fontWeight,fontFamily:e.typography.body.fontFamily},menuItemText:{padding:0},title:{fontSize:e.typography.h4.fontSize,fontWeight:e.typography.fontWeightBold},headerContainer:{display:"flex",flexDirection:"row",alignItems:"center",marginBottom:e.spacing(1.6)},textContainer:{width:"100%",flexDirection:"column"},description:{"&& p":{padding:0,margin:0,whiteSpace:"break-spaces"},fontSize:"0.8125rem"},titleAndButtonContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between"},"icon-custom-policies":{width:"1.5rem",height:"1.5rem",fontStretch:"unset",display:"flex",alignItems:"center",justifyContent:"center",color:"#404040",backgroundColor:"#F5F5F5",padding:e.spacing(1),borderRadius:"50%",marginRight:e.spacing(1.6),fontSize:e.typography.h1.fontSize},iconCaret:{fontSize:"2.125rem",top:"25%",color:e.palette.text.primary,marginRight:"1rem"}})}(e))}));function Mn(e){var t=e.setCustomPolicy,n=e.defaultValue,a=e.editing,o=(0,g.useBem)(_n()),i=_n(),s=(0,r.useState)(n),c=s[0],l=s[1];return(0,r.useEffect)((function(){t(c)}),[c,t]),r.createElement(Fn.Z,{disabled:a,"data-testid":"custom-policy-dropdown",value:c,onChange:function(e){var t=e.target.value;l(t)},classes:{root:i.dropdown},disableUnderline:!0,IconComponent:function(e){var t=e.className;return r.createElement(G.Z,{className:(0,y.Z)(i.iconCaret,t),fontSize:"inherit"})}},yn.PY.map((function(e){var t=e.name,n=e.title,a=e.DescriptionComponent;return r.createElement(zn.Z,{value:t,classes:{root:i.menuItem},key:t},r.createElement(Z.Z,null,r.createElement(p.PJ,{name:"settings",className:o("icon-custom-policies")})),r.createElement(C.Z,{disableTypography:!0,classes:{root:i.menuItemText}},r.createElement("div",{className:o("title")},n),r.createElement("div",{className:o("description")},r.createElement(a,null))))})))}function Un(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Un(Object(n),!0).forEach((function(t){(0,h.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Un(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Mn.defaultProps={setCustomPolicy:function(){},defaultValue:"viewAndAdd",editing:!1};var Hn=(0,m.Z)((function(e){return(0,M.Z)(function(e){var t,n;return(0,g.createStyles)(e,["icons","button"],{mobile:(t={},(0,h.Z)(t,e.breakpoints.up("sm"),{display:"none"}),(0,h.Z)(t,"display","flex"),t),desktop:(n={},(0,h.Z)(n,e.breakpoints.up("sm"),{display:"flex"}),(0,h.Z)(n,"display","none"),n),button:(0,h.Z)({marginTop:"0.5rem",width:"max-content",alignSelf:"flex-end",height:"max-content",fontWeight:e.typography.fontWeightBold,fontSize:"0.8125rem",textDecoration:"none",borderRadius:"7px",backgroundColor:e.palette.grey[50],whiteSpace:"nowrap",alignItems:"center",padding:e.spacing(.2,1.6)},e.breakpoints.up("sm"),{marginTop:"unset",alignSelf:"center"}),icon:{color:e.palette.primary.main,margin:e.spacing(.5)}})}(e))}));function qn(e){var t=e.onClick,n=e.disabled,a=e.className,o=Hn();return r.createElement(p.zx,{variant:"secondary","data-testid":null!==a&&void 0!==a&&a.includes("mobileOnly")?"add-web-id-button-mobile":"add-webid-button",className:(0,y.Z)(o.button,a),disabled:n,onClick:t,iconBefore:"add"},"Add WebId")}qn.defaultProps={disabled:!1,className:null};function Vn(e){var t=e.value,n=e.index,a=e.toggleCheckbox,o=e.type,i=(0,r.useContext)(vn),s=i.permissions,l=i.addingWebId,u=i.newAgentsWebIds,d=i.webIdsToDelete,p=(0,c.useThing)().thing,m=Pn(p).data,f=p&&(0,st.Gr)(p,"http://www.w3.org/ns/solid/acp#agent"),g=null===s||void 0===s?void 0:s.filter((function(e){return e.alias===o})),h=(0,Kt.yW)(g),b=(0,Kt.gM)(g),v=(0,r.useCallback)((function(){var e;return!f&&m?e=m.webId:f?e=t:f||0!==n||(e=""),e}),[f,n,m,t]),y=(0,r.useCallback)((function(){return!(0!==n||!l)||(!!u.includes(v())||!(!h.includes(v())||d.includes(v())))}),[l,v,n,u,h,d]),E=(0,r.useCallback)((function(){return-1!==b.indexOf(v())}),[v,b]);return r.createElement(ve.Z,{inputProps:{"data-testid":"webid-checkbox"},type:"checkbox",color:"primary",size:"medium",value:v()||"",disabled:E(),checked:y()||!1,onChange:function(e){return a(e,n,v())}})}Vn.defaultProps={value:null,toggleCheckbox:function(){}};var Gn=n(16677),Jn=n(58928),Kn=n(38775),Xn="add-new-permissions",$n=function(e){var t=e.permissions,n=e.newPolicy,r=e.agentWebId,a=e.accessControl,o=t.filter((function(e){return e.webId===r&&e.alias!==n}));o.length&&o.map((function(e){return a.removeAgentFromPolicy(e.webId,e.alias)}))},Qn=function(){var e=(0,I.Z)(N().mark((function e(t,n,r){var a,o,i,s;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,(0,R.In)(t,r);case 5:return a=e.sent,o=a.name,i=a.webId,e.next=10,St(n,i,r);case 10:if(!e.sent.length){e.next=13;break}return e.abrupt("return");case 13:if(!o){e.next=17;break}return s={webId:i,fn:o},e.next=17,Zt(n,s,r);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),e.t0;case 22:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(t,n,r){return e.apply(this,arguments)}}(),er=(0,m.Z)((function(e){return(0,M.Z)(function(e){var t,n,r,a;return(0,g.createStyles)(e,["icons","button","table"],{paper:(t={},(0,h.Z)(t,e.breakpoints.up("sm"),{minWidth:680,minHeight:680,height:"auto",width:680,padding:e.spacing(2,4,3)}),(0,h.Z)(t,"display","flex"),(0,h.Z)(t,"flexDirection","column"),(0,h.Z)(t,"position","absolute"),(0,h.Z)(t,"backgroundColor",e.palette.grey[50]),(0,h.Z)(t,"borderRadius",e.shape.borderRadius),(0,h.Z)(t,"boxShadow","0 9px 46px 8px rgba(0,0,0,0.12), 0 24px 38px 3px rgba(0,0,0,0.14), 0 11px 15px -7px rgba(0,0,0,0.2)"),(0,h.Z)(t,"minWidth","100vw"),(0,h.Z)(t,"minHeight","100vh"),(0,h.Z)(t,"width","100vw"),(0,h.Z)(t,"height","100vh"),(0,h.Z)(t,"padding",e.spacing(2,1.4,3)),t),title:Yn(Yn({},e.typography.h1),{},{marginBottom:e.spacing(1.2)}),addWebIdButtonContainer:{display:"flex",justifyContent:"flex-end",margin:e.spacing(0,1.2)},tableContainer:(n={minHeight:300},(0,h.Z)(n,e.breakpoints.up("xs"),{minHeight:"unset"}),(0,h.Z)(n,"display","flex"),(0,h.Z)(n,"flexDirection","column"),(0,h.Z)(n,"backgroundColor",e.palette.common.white),(0,h.Z)(n,"borderRadius",e.shape.borderRadius),(0,h.Z)(n,"border","1px solid ".concat(e.palette.grey.A100)),(0,h.Z)(n,"marginBottom",e.spacing(2.4)),(0,h.Z)(n,"height","100%"),(0,h.Z)(n,"maxHeight",450),(0,h.Z)(n,"overflowY","auto"),n),tabsAndAddButtonContainer:{display:"flex",alignItems:"center",justifyContent:"space-between"},agentPickerTable:{width:"calc(100% - ".concat(2*e.spacing(1.6),"px)"),boxSizing:"border-box",marginLeft:e.spacing(1.6),marginRight:e.spacing(1.6),"&& thead > tr":{minWidth:"100%",fontSize:e.typography.caption.fontSize,alignItems:"center",borderBottom:"1px solid ".concat(e.palette.grey.A100),fontWeight:e.typography.body1.fontWeight,color:e.palette.text.primary},"&& tbody tr":{borderBottom:"1px solid ".concat(e.palette.grey.A100)},"&& tbody td":{maxWidth:"100%"},"&& tbody :last-child":{borderBottom:"none"}},tableHeader:{display:"flex",margin:0,padding:e.spacing(.5),textTransform:"capitalize"},modalTabsContainer:{borderBottom:"none !important"},canShareTableHeader:{display:"flex",margin:0,alignSelf:"flex-end",alignItems:"center"},buttonsContainer:(0,h.Z)({display:"flex",flexDirection:"column-reverse",position:"relative",bottom:0,width:"100%",padding:0,alignItems:"center",justifyContent:"space-between"},e.breakpoints.up("sm"),{display:"flex",position:"absolute",flexDirection:"row",width:680-2*e.spacing(2.4)-e.spacing(4),maxWidth:"100%",padding:e.spacing(2.4)}),cancelButton:(0,h.Z)({textAlign:"center",width:"100%",fontSize:e.typography.body1.fontSize,fontWeight:e.typography.body1.fontWeight,padding:e.spacing(1.4,1.8),backgroundColor:"transparent"},e.breakpoints.up("sm"),{width:"max-content"}),submitAgentsButton:(0,h.Z)({textAlign:"center",width:"100%",fontSize:e.typography.body1.fontSize,fontWeight:e.typography.body1.fontWeight,color:e.palette.common.white,backgroundColor:e.palette.primary.main,padding:e.spacing(1.4,1.8)},e.breakpoints.up("sm"),{width:"max-content"}),capitalizedText:{textTransform:"capitalize"},emptyStateTextContainer:{display:"flex",flexDirection:"column",padding:e.spacing(.7,1.4),textAlign:"center"},mobileOnly:(r={},(0,h.Z)(r,e.breakpoints.up("sm"),{display:"none"}),(0,h.Z)(r,"display","flex"),r),desktopOnly:(a={},(0,h.Z)(a,e.breakpoints.up("sm"),{display:"flex"}),(0,h.Z)(a,"display","none"),a)})}(e))}));function tr(e,t){var n=e.type,a=e.onClose,o=e.setLoading,i=e.advancedSharing,l=e.editing,d=(0,r.useState)(i?n:null),m=d[0],f=d[1],h=i?m:n,b=yn.O6[h],v=b.header,E=b.saveText,x=b.titleSingular,w=b.title,Z=(0,r.useContext)(vn),C=Z.permissions,S=Z.newAgentsWebIds,k=Z.setNewAgentsWebIds,P=Z.webIdsToDelete,O=Z.setWebIdsToDelete,A=Z.setAddingWebId,D=Z.addingWebId,T=null===C||void 0===C?void 0:C.filter((function(e){return e.alias===n})),W=(0,r.useContext)(Ft).mutate,j=(0,Kn.Z)().data,L=(0,Gn.Z)([Jn.Wz,vt]),R=L.data,B=L.error,F=(0,Kt.yW)(T),z=(0,g.useBem)(er()),_=er(),M=(0,c.useSession)().session.fetch,U=(0,r.useContext)(c.DatasetContext).solidDataset,Y=(0,s.LH)(U),H=(0,u.Yj)(Y),q=(0,r.useContext)(Le).accessControl,V=(0,r.useState)(!1),G=V[0],J=V[1],K=(0,r.useState)([]),X=K[0],$=K[1],Q=(0,r.useState)(""),ee=Q[0],te=Q[1],ne=(0,r.useState)(!1),re=ne[0],ae=ne[1],oe=(0,r.useContext)(Oe.ZP),se=oe.open,ce=oe.confirmed,le=oe.setConfirmed,de=oe.setContent,pe=oe.setOpen,me=oe.setTitle,fe=oe.closeDialog,ge=function(e){var t=e.permissions,n=e.newAgentsWebIds,r=e.webIdsToDelete,a=e.accessControl,o=e.addressBook,i=e.mutateResourceInfo,s=e.saveAgentToContacts,c=e.onClose,l=e.setLoading,u=e.policyName,d=e.fetch;return(0,I.Z)(N().mark((function e(){var p,m,f,g,h,b,v;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c(),(n.length||r.length)&&a){e.next=3;break}return e.abrupt("return");case 3:return l(!0),p=null===n||void 0===n?void 0:n.map((function(e){return function(){$n({permissions:t,newPolicy:u,agentWebId:e,accessControl:a})}})),m=null===n||void 0===n?void 0:n.map((function(e){return function(){return et.fL===e?a.setRulePublic(u,!0):Qe.Ux===e?a.setRuleAuthenticated(u,!0):a.addAgentToPolicy(e,u)}})),f=null===r||void 0===r?void 0:r.map((function(e){return function(){return et.fL===e?a.setRulePublic(u,!1):Qe.Ux===e?a.setRuleAuthenticated(u,!1):a.removeAgentFromPolicy(e,u)}})),g=null===n||void 0===n?void 0:n.filter((function(e){return e!==et.fL&&e!==Qe.Ux})).map((function(e){return function(){return s(e,o,d)}})),e.next=10,(0,ie.Fb)([].concat((0,at.Z)(p),(0,at.Z)(m),(0,at.Z)(f),(0,at.Z)(g)));case 10:return h=e.sent,b=h.filter((function(e){return"undefined"!==typeof e})),v=b[b.length-1].response,e.next=15,i(v,!1);case 15:l(!1);case 16:case"end":return e.stop()}}),e)})))}({permissions:C,newAgentsWebIds:S,webIdsToDelete:P,accessControl:q,addressBook:j,mutateResourceInfo:W,saveAgentToContacts:Qn,onClose:a,setLoading:o,policyName:h,advancedSharing:i,fetch:M}),he=function(e){var t=j.dataset;$([{thing:e,dataset:t}].concat((0,at.Z)(X.slice(1,X.length))))};(0,r.useEffect)((function(){if(R&&j){var e=j.dataset,t=(0,et.Aq)(e),n=(0,Qe.SV)(e),r=R.map((function(t){return{thing:t.thing,dataset:e}}));r.unshift(t,n),$(r)}}),[R,j]),(0,r.useEffect)((function(){ae(!0),G&&(le(!0),ge()),se===Xn&&(re&&null===ce||(re&&ce&&ge(),re&&null!==ce&&(fe(),ae(!1))))}),[se,G,ae,re,le,ce,ge,fe]);var be=function(){A(!0);var e=(0,rt.Lx)(),t=j.dataset;$([{thing:e,dataset:t}].concat((0,at.Z)(X)))},ve=X,ye=function(e,t,n){return 0===t&&D?null:(!P.includes(n)&&F.includes(n)?O([n].concat((0,at.Z)(P))):P.includes(n)&&F.includes(n)&&O(P.filter((function(e){return e!==n}))),e.target.checked?k([n].concat((0,at.Z)(S))):k(S.filter((function(e){return e!==n}))))};return r.createElement(p.F0,{className:_.paper,"data-testid":"agent-picker-modal",ref:t,tabIndex:-1},r.createElement(p.fe,null,r.createElement("div",{className:_.title},"".concat(v," for ").concat(H)),i?r.createElement(Mn,{setCustomPolicy:f,defaultValue:n,editing:l}):r.createElement(xn,{type:n}),r.createElement("div",{className:_.tableContainer},r.createElement(Sn,{handleFilterChange:function(e){var t=e.target.value;te(t||void 0)}}),r.createElement("div",{className:_.addWebIdButtonContainer},r.createElement(qn,{onClick:be,disabled:D})),!R&&!B&&r.createElement(p.W2,{variant:"empty"},r.createElement(ue.Z,null)),!!R&&!!ve.length&&r.createElement(c.Table,{things:ve,className:(0,y.Z)(z("table"),z("agentPickerTable")),filter:ee},r.createElement(c.TableColumn,{property:"http://www.w3.org/ns/solid/acp#agent",dataType:"url",header:r.createElement("span",{className:_.tableHeader},x),body:function(e){var t=e.value,a=e.row.index;return r.createElement(Vn,{value:t,index:a,toggleCheckbox:ye,type:n})}}),r.createElement(c.TableColumn,{header:r.createElement("span",{className:_.tableHeader},"Name"),property:it.ay.name,filterable:!0,body:function(e){var t=e.row.index;return r.createElement(Tn,{type:h,index:t,contactsArrayLength:X.length,updateTemporaryRowThing:he})}})),!!R&&!ve.length&&r.createElement(Bn,{onClick:be})),r.createElement("div",{className:_.buttonsContainer},r.createElement(p.zx,{variant:"secondary","data-testid":"cancel-webids-button",className:_.cancelButton,onClick:a},"Cancel"),r.createElement(p.zx,{"data-testid":"submit-webids-button",onClick:function(){if(!S.length&&!P.length)return a(),void le(!1);var e=S.filter((function(e){return e!==et.fL&&e!==Qe.Ux})),t=P.filter((function(e){return e!==et.fL&&e!==Qe.Ux}));e.length||t.length||(me(null),de(null),pe(null),J(!0));var n="Change permissions for ".concat(e.length+t.length===1?"1 person":"".concat(S.length+t.length," people")),r="Continuing will change ".concat(e.length+t.length===1?"1 person ":"".concat(e.length+t.length," people ")," permissions to ").concat(w);me(n),de(r),pe(Xn)}},E),r.createElement(Ae.ZP,null))))}var nr=(0,r.forwardRef)(tr);tr.defaultProps={onClose:function(){},setLoading:function(){},advancedSharing:!1,editing:!1};var rr=n(827);function ar(e){var t=e.type,n=e.setLoading,a=(0,r.useState)(),o=a[0],i=a[1],s=(0,r.useContext)(vn).setAddingWebId,c=(0,r.useState)(!1),l=c[0],u=c[1],d=function(){i(!1),u(!1),s(!1)},m=yn.O6[t].editText;return r.createElement(r.Fragment,null,r.createElement(p.zx,{"data-testid":"add-agent-button",variant:"text",onClick:function(){i(!0),u(!0)},iconBefore:"edit"},m),r.createElement(dn.Z,{"data-testid":"agent-picker-modal-overlay",open:l,style:{display:"flex",alignItems:"center",justifyContent:"center"},onClose:d,"aria-labelledby":"".concat(m," Modal"),"aria-describedby":"".concat(m," for this resource")},r.createElement(nr,{type:t,onClose:d,setLoading:n,advancedSharing:(0,rr.Te)(t),editing:o})))}ar.defaultProps={setLoading:function(){}};var or=n(25476);function ir(e){var t,n=e.permissions,a=e.setLoading,o=e.type,i=(0,r.useContext)(Le).accessControl,l=0===n.length&&(0,rr.H2)(o),d=(0,rr.o$)(o),m="remove-policy",f=(0,r.useState)(),g=f[0],h=f[1],b=(0,r.useContext)(c.DatasetContext).solidDataset,v=(0,s.LH)(b),y=v?(0,u.Yj)(v):"this resource",E=null===(t=yn.O6[o])||void 0===t?void 0:t.title,x=(0,r.useContext)(Oe.ZP),w=x.open,Z=x.confirmed,C=x.setContent,S=x.setOpen,k=x.setTitle,P=x.closeDialog,O=(0,r.useContext)(Ft).mutate,A=(0,r.useState)(!1),D=A[0],T=A[1],W=n.filter((function(e){return e.alias===g})).map((function(e){return e.webId})),j=function(e){var t=e.webIds,n=e.setLoading,r=e.accessControl,a=e.policyToDelete,o=e.mutateResourceInfo;return(0,I.Z)(N().mark((function e(){var i,s,c,l;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return n(!0),i=null===t||void 0===t?void 0:t.map((function(e){return function(){return et.fL===e?r.setRulePublic(a,!1):Qe.Ux===e?r.setRuleAuthenticated(a,!1):r.removeAgentFromPolicy(e,a)}})),e.next=6,(0,ie.Fb)(i);case 6:return s=e.sent,c=s.filter((function(e){return"undefined"!==typeof e})),l=c[c.length-1].response,e.next=11,o(l,!1);case 11:n(!1);case 12:case"end":return e.stop()}}),e)})))}({webIds:W,setLoading:a,accessControl:i,policyToDelete:g,mutateResourceInfo:O});return(0,r.useEffect)((function(){T(!0),w===m&&(D&&null===Z||(D&&Z&&j(W),D&&null!==Z&&(P(),T(!1))))}),[w,m,T,D,Z,j,W,P]),d?r.createElement(p.Kk,{label:"Show menu for policy"},r.createElement(p.zx,{"data-testid":"remove-policy-button",onClick:function(){h(o);var e="Remove ".concat(E," access from ").concat(y,"?"),t="Everyone will be removed from the ".concat(E," list.");k(e),C(t),S(m)},variant:"in-menu",disabled:l,disabledText:l?"There's no one to remove":""},d.removeButtonLabel),r.createElement(Ae.ZP,null)):r.createElement(or.Z,{error:new Error("Type of policy not recognized")})}ir.defaultPtops={permissions:[],setLoading:function(){}};var sr=(0,m.Z)((function(e){return(0,M.Z)(function(e){return(0,g.createStyles)(e,["icons","table"],{accordion:{padding:e.spacing(1.8,1.6),color:e.palette.secondary.contrastText},rounded:{borderRadius:e.shape.borderRadius,boxShadow:"0 1px 4px 0 ".concat(e.palette.grey[500])},permissionsContainer:{position:"relative",boxSizing:"border-box",border:"1px solid ".concat(e.palette.grey.A100),borderRadius:e.shape.borderRadius,fontSize:e.typography.body2.fontSize,padding:0,overflow:"auto","&& p":{padding:0,margin:0}},showAllButtonContainer:{width:"100%",background:"linear-gradient(180deg, rgba(255,255,255,0) 0%, #FFFFFF 100%)",position:"absolute",textAlign:"center",bottom:0,padding:e.spacing(.6,.7)},showAllButton:{cursor:"pointer",width:"100%",backgroundColor:"transparent",border:"none"},expanded:{position:"relative"},showAllText:{textAlign:"center",color:e.palette.primary.main,fontSize:"13px"},showAllButtonIcon:{color:e.palette.primary.main,fontSize:"13px"},titleAndButtonContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between"},emptyStateTextContainer:{display:"flex",flexDirection:"column",padding:e.spacing(.7,1.4),textAlign:"center"},"agents-table":{padding:0},"agent-cell":{whiteSpace:"break-spaces",padding:0}})}(e))}));function cr(e){var t=e.type,n=e.loading,a=e.setLoading,o=(0,r.useContext)(vn).permissions,i=(0,r.useState)([]),s=i[0],l=i[1],u=(0,r.useState)([]),d=u[0],m=u[1],f=function(e){var t=(0,r.useState)([]),n=t[0],a=t[1],o=(0,c.useSession)().fetch;return(0,r.useEffect)((function(){e&&Promise.all(e.map(function(){var e=(0,I.Z)(N().mark((function e(t){var n,r;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.webId!==et.fL&&t.webId!==Qe.Ux){e.next=2;break}return e.abrupt("return",t);case 2:return e.prev=2,e.next=5,(0,R.In)(t.webId,o);case 5:n=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),r=e.t0;case 11:return e.abrupt("return",nt(nt({},t),{},{profile:n,profileError:r}));case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}())).then((function(e){return a(e)}))}),[e,o]),{permissionsWithProfiles:n}}(d),h=f.permissionsWithProfiles;(0,r.useEffect)((function(){var e=(null===o||void 0===o?void 0:o.filter((function(e){return e.alias===t})))||null;e&&m(e)}),[o,t]),(0,r.useEffect)((function(){if(h){var e=null===h||void 0===h?void 0:h.filter((function(e){return e.type===et.Ir||e.type===Qe.Hb})),t=h.filter((function(e){return"agent"===e.type})).sort((function(e,t){var n,r,a;return null===(n=e.profile)||void 0===n||null===(r=n.name)||void 0===r?void 0:r.localeCompare(null===(a=t.profile)||void 0===a?void 0:a.name)}));l(e.concat(t))}}),[h]);var b=(0,g.useBem)(sr()),v=sr(),E=(0,r.useState)(!1),x=E[0],w=E[1],Z=(0,r.useState)(""),C=Z[0],S=(Z[1],(0,r.useMemo)((function(){return[{header:"",accessor:"profile.name",modifiers:["align-center","width-preview"]},{header:"",accessor:"webId",modifiers:["align-center","width-preview"]},{header:"",accessor:"type",modifiers:["align-center","width-preview"]}]}),[])),k=(0,r.useMemo)((function(){return s?x?s:s.slice(0,3):[]}),[s,x]),P=(0,$e.useTable)({columns:S,data:k,initialState:{sortBy:[{id:"profile.name",desc:!1}]}},$e.useFilters,$e.useGlobalFilter),O=P.getTableProps,A=P.getTableBodyProps,D=P.rows,T=P.prepareRow,W=(P.setFilter,P.setGlobalFilter);if(!s.length&&(0,rr.Te)(t))return null;var j=yn.O6[t].emptyStateText;return r.createElement(Y.Z,{defaultExpanded:!0,classes:{root:v.accordion,rounded:v.rounded},"data-testid":"agent-access-table"},r.createElement(xn,{type:t,isPolicyList:!0},r.createElement(r.Fragment,null,r.createElement(ar,{type:t,setLoading:a,permissions:s}),r.createElement(ir,{permissions:s,setLoading:a,type:t}))),r.createElement("div",{className:v.permissionsContainer},!!s.length&&r.createElement(r.Fragment,null,r.createElement(Sn,{handleFilterChange:function(e){var t=e.target.value;W(t||void 0)}})),n&&r.createElement(p.W2,{variant:"empty"},r.createElement(ue.Z,null)),!n&&s.length?r.createElement("table",(0,$.Z)({className:(0,y.Z)(b("table"),b("agents-table"))},O()),r.createElement("tbody",(0,$.Z)({className:b("table__body")},A()),D.length?D.map((function(e){T(e);var t=e.original;return r.createElement("tr",{className:b("table__body-row"),key:t.webId},r.createElement("td",{className:(0,y.Z)(b("table__body-cell"),b("agent-cell"))},r.createElement(un,{permission:t})))})):r.createElement("tr",{className:v.emptyStateTextContainer},r.createElement("td",null,C&&"No ".concat("Person"===C?"people ":"groups "," found"))))):r.createElement("span",{className:v.emptyStateTextContainer},!n&&r.createElement("p",null,j)),!n&&s.length>3&&r.createElement("div",{className:(0,y.Z)(v.showAllButtonContainer,x&&b("expanded"))},r.createElement("button",{"data-testid":x?"hide-button":"show-all-button",type:"button",className:v.showAllButton,onClick:function(){return w(!x)}},r.createElement(V.Z,{classes:{body1:v.showAllText}},x?r.createElement("span",null,"Hide"," ",r.createElement("i",{className:(0,y.Z)(b("icon-caret-up"),v.showAllButtonIcon)})):r.createElement("span",null,"Show all (",s.length,")"," ",r.createElement("i",{className:(0,y.Z)(b("icon-caret-down"),v.showAllButtonIcon)})))))))}cr.defaultProps={loading:!1};var lr=(0,m.Z)((function(e){return(0,M.Z)(function(e){return(0,g.createStyles)(e,["icons","button"],{sharingButtonContainer:{display:"flex",justifyContent:"flex-end"},sharingButton:{display:"flex",alignItems:"center",color:e.palette.text.primary,fontWeight:e.typography.fontWeightBold,textTransform:"capitalize",fontSize:"0.8125rem",textDecoration:"none"},icon:{color:e.palette.text.primary,margin:e.spacing(.5)}})}(e))}));function ur(e){var t=e.loading,n=e.setLoading,a=lr(),o=(0,g.useBem)(lr()),i=(0,r.useState)(!1),s=i[0],c=i[1],l=function(){c(!1)};return r.createElement("div",{className:a.sharingButtonContainer},r.createElement(p.zx,{"data-testid":"advanced-sharing-button",variant:"text",className:a.sharingButton,onClick:function(){c(!0)}},r.createElement("i",{className:(0,y.Z)(o("icon-settings"),o("icon"))}),"Advanced Sharing"),r.createElement(dn.Z,{"data-testid":"advanced-sharing-modal-overlay",open:s,style:{display:"flex",alignItems:"center",justifyContent:"center"},onClose:l,"aria-labelledby":"Advanced sharing modal","aria-describedby":"Advanced sharing for this resource"},r.createElement(nr,{type:"viewAndAdd",onClose:l,advancedSharing:!0,loading:t,setLoading:n})))}var dr=function(){var e=(0,a.useRouter)(),t=(0,ie.sr)(e.query.resourceIri),n=(0,r.useState)(!1),o=n[0],i=n[1];return r.createElement(bn,null,yn.fj.concat(yn.PY).map((function(e){var t=e.name;return r.createElement(cr,{type:t,key:t,loading:o,setLoading:i})})),t&&r.createElement(fe.Z,{icon:!1,severity:"info"},"Sharing applies to all items in this folder"),r.createElement(ur,{loading:o,setLoading:i}))},pr=n(59737);function mr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=(0,pr.$o)(),a=(0,pr.dr)(),o=(0,r.useState)((function(){try{var r=n.getItem(e);return r?JSON.parse(r):t}catch(Sr){return a.error(Sr),t}})),i=o[0],s=o[1],c=function(t){s(t),n.setItem(e,t)};return[i,c]}var fr=n(96361),gr=(0,m.Z)((function(e){return(0,M.Z)(function(e){return K(K({},X),g.content.styles(e))}(e))}));function hr(e,t){return"".concat((0,s.LH)(e),"-").concat(t)}function br(e){var t=e.onDelete,n=e.onDeleteCurrentContainer,a=(0,r.useContext)(c.DatasetContext).solidDataset,o=(0,s.LH)(a),i=gr(),l=(0,ie.cn)(o),d=(0,u.Yj)(l),m=(0,s.wg)(a),f=p.PC.useBem(),g=(0,r.useContext)(Le),h=g.accessControl,b=g.accessControlType,y=mr(hr(a,"actions"),!0),E=(0,v.Z)(y,2),Z=E[0],C=E[1],S=mr(hr(a,"details"),!1),k=(0,v.Z)(S,2),I=k[0],P=k[1],N=mr(hr(a,"permissions"),!1),O=(0,v.Z)(N,2),A=O[0],D=O[1],T=mr(hr(a,"sharing"),!1),W=(0,v.Z)(T,2),j=W[0],L=W[1],R=r.createElement(G.Z,null);return r.createElement(r.Fragment,null,r.createElement("section",{className:i.headerSection},r.createElement("h3",{"data-testid":"resource-title",className:i["content-h3"],title:o},d)),r.createElement(U.Z,null),r.createElement(Y.Z,{expanded:Z,onChange:function(){return C(!Z)}},r.createElement(H.Z,{expandIcon:R,"data-testid":"accordion-resource-actions-trigger"},"Actions"),r.createElement(q.Z,{className:i.accordionDetails},r.createElement(p.PC,null,r.createElement(p.F9,null,r.createElement(le,{className:f("action-menu__trigger"),"data-testid":"download-resource-button",iri:o},"Download")),r.createElement(p.F9,null,r.createElement(oe,{className:f("action-menu__trigger","danger"),resourceIri:o,name:d,onDelete:t,onDeleteCurrentContainer:n,"data-testid":"delete-resource-button"}))))),r.createElement(Y.Z,{expanded:I,onChange:function(){return P(!I)}},r.createElement(H.Z,{expandIcon:R,"data-testid":"accordion-resource-details-trigger"},"Details"),r.createElement(q.Z,{className:i.accordionDetails},r.createElement("section",{className:i.centeredSection},r.createElement(x.Z,null,r.createElement(w.Z,{className:i.listItem},r.createElement(V.Z,{className:i.detailText},"Thing Type:"),r.createElement(V.Z,{className:"".concat(i.typeValue," ").concat(i.detailText)},m)))))),h&&r.createElement(r.Fragment,null,(0,fr.W9)(b)&&r.createElement(Y.Z,{expanded:A,onChange:function(){return D(!A)}},r.createElement(H.Z,{expandIcon:R,"data-testid":"accordion-resource-permissions"},"Permissions"),r.createElement(q.Z,{className:i.accordionDetails},r.createElement(Xe,null))),(0,fr.Cz)(b)&&r.createElement(Y.Z,{expanded:j,onChange:function(){return L(!j)}},r.createElement(H.Z,{expandIcon:R,"data-testid":"accordion-resource-sharing"},"Sharing"),r.createElement(q.Z,{className:i.accordionDetails},r.createElement(dr,null)))))}function vr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vr(Object(n),!0).forEach((function(t){(0,h.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}br.defaultProps={onDelete:function(){},onDeleteCurrentContainer:function(){}};var Er={spinnerContainer:{justifyContent:"center"},centeredSection:{paddingLeft:"1rem",paddingRight:"1rem"},raw:{height:"100%",width:"100%",maxHeight:200,overflow:"auto"},listItem:{display:"flex",justifyContent:"space-between"},detailText:{fontSize:"0.75rem"},typeValue:{marginLeft:"auto"},avatar:{marginRight:"1rem"}};var xr=(0,m.Z)((function(e){return(0,M.Z)(function(e){return yr(yr({},Er),g.content.styles(e))}(e))}));function wr(e){var t=e.iri,n=xr(),a=(0,ie.cn)(t),o=(0,u.Yj)(a);return r.createElement(r.Fragment,null,r.createElement("section",{className:n.centeredSection},r.createElement("h3",{className:n["content-h3"],title:t||""},o||r.createElement(k.Z,{width:100}))),r.createElement(U.Z,null),r.createElement(d.Z,null))}wr.defaultProps={iri:null};var Zr=wr,Cr=n(58112),Sr=n(55612);function kr(e){var t=e.setMenuOpen,n=e.router;return(0,I.Z)(N().mark((function e(){var r,a;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(!1),r=n.asPath,a=(0,D.aX)(r)||"/",e.next=5,n.replace("/resource/[iri]",a);case 5:case"end":return e.stop()}}),e)})))}function Ir(e){var t=e.onUpdate,n=e.onDeleteCurrentContainer,i=(0,r.useContext)(o.ZP),s=i.menuOpen,l=i.setMenuOpen,u=(0,a.useRouter)(),d=u.query,m=d.action,f=d.resourceIri,g=(0,ne.Z)(f,{revalidateOnFocus:!1,shouldRetryOnError:!1}),h=g.data,b=g.error,v=(0,Cr.Z)(h),y=v.data,E=v.error,x=v.isValidating;(0,r.useEffect)((function(){l(!(!m||!f))}),[m,f,l]);var w=kr({setMenuOpen:l,router:u});if(b)return r.createElement(p.dy,{open:s,close:w},r.createElement(p.v0,{variant:"error"},(0,Sr.ky)(b,403)?r.createElement("p",null,"You do not have access to this resource."):r.createElement("p",null,"We had a problem loading the resource.")));var Z=!h||!y&&!E||x;return r.createElement(p.dy,{open:s,close:w},Z?r.createElement(Zr,{iri:f}):r.createElement(zt,{swr:g},r.createElement(je,{accessControl:null===y||void 0===y?void 0:y.accessControl,accessControlType:null===y||void 0===y?void 0:y.accessControlType},r.createElement(c.DatasetProvider,{solidDataset:h},r.createElement(br,{onDelete:t,onDeleteCurrentContainer:n})))))}function Pr(e){var t=e.children,n=e.update,i=(0,r.useContext)(o.ZP),s=i.menuOpen,c=i.setMenuOpen,l=(0,a.useRouter)(),u=r.createElement(Ir,{onUpdate:function(){n(),kr({setMenuOpen:c,router:l})()},onDeleteCurrentContainer:function(e){n(),function(e){var t=e.setMenuOpen,n=e.iri,r=e.router;return(0,I.Z)(N().mark((function e(){var a;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(!1),a=(0,D.Uw)(n),e.next=4,r.replace("/resource/[iri]","/resource/".concat(encodeURIComponent(a)));case 4:case"end":return e.stop()}}),e)})))}({setMenuOpen:c,iri:e,router:l})()}});return r.createElement(p.qt,{drawer:u,open:s},t)}Ir.defaultProps={onUpdate:function(){},onDeleteCurrentContainer:function(){}},Pr.defaultProps={children:null};var Nr=n(26592),Or=n(84923);function Ar(){var e=(0,a.useRouter)();return r.createElement("div",{"data-testid":"access-forbidden"},r.createElement(p.mr,{title:"No Access"}),r.createElement(p.W2,null,r.createElement("p",null,"You don't have access to this resource:\xa0",r.createElement(Or.Z,{resourceIri:e.query.iri},e.query.iri),".")))}function Dr(){var e=(0,a.useRouter)();return r.createElement("div",{"data-testid":"resource-not-found"},r.createElement(p.mr,{title:"Resource Not Found"}),r.createElement(p.W2,null,r.createElement("p",null,"Unable to find the resource:\xa0",r.createElement(Or.Z,{resourceIri:e.query.iri},e.query.iri),".")))}var Tr=n(12221);function Wr(){var e=(0,a.useRouter)();return r.createElement("div",{"data-testid":"not-supported"},r.createElement(p.mr,{title:"Resource Not Supported"}),r.createElement(p.W2,null,r.createElement(p.VY,null,r.createElement("p",null,"PodBrowser can only show resources that are Solid containers."),r.createElement("p",null,r.createElement("span",null,"Navigate to the resource directly (this will navigate away from PodBrowser):\xa0"),r.createElement("a",{href:e.query.iri},e.query.iri)))))}var jr=n(86856),Lr=function(e){var t;return{"sub-header":(t={},(0,h.Z)(t,e.breakpoints.up("sm"),{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"}),(0,h.Z)(t,"display","flex"),(0,h.Z)(t,"flexDirection","column-reverse"),t),"actions-container":(0,h.Z)({display:"flex",gap:"2px",flexDirection:"column",marginTop:e.spacing(.5)},e.breakpoints.up("sm"),{display:"flex",flexDirection:"row",gap:"1rem",justifyContent:"space-between",alignItems:"center",marginTop:0,marginLeft:e.spacing(.5)})}},Rr=n(82349);function Br(e){return(0,g.createStyles)(e,["breadcrumb","icons"])}var Fr=n(41664),zr=(0,m.Z)((function(e){return(0,f.Z)(Br(e))}));function _r(e){var t=e.crumb,n=e.isLink,a=(0,g.useBem)(zr());return r.createElement("li",{key:t.uri,className:a("breadcrumb__crumb")},r.createElement("i",{className:(0,y.Z)(a("icon-caret-left"),a("breadcrumb__caret","small"))}),n?r.createElement(Fr.default,{href:t.uri},r.createElement("a",{className:a("breadcrumb__link")},r.createElement("span",{className:a("breadcrumb__prefix")},"Back to "),t.label)):t.label,r.createElement("i",{className:(0,y.Z)(a("icon-caret-right"),a("breadcrumb__caret","large"))}))}_r.defaultProps={crumb:{}};var Mr=(0,m.Z)((function(e){return(0,f.Z)(Br(e))}));function Ur(){var e=(0,g.useBem)(Mr()),t=(0,r.useContext)(Rr.Z),n=(0,r.createRef)();if(!t.baseUri)return r.createElement(d.Z,null);var a=t.baseUri,o=t.currentUri.substr(a.length).split("/").filter((function(e){return!!e})),i=function(e){return"/resource/".concat(encodeURIComponent("".concat(a+o.slice(0,e+1).join("/"),"/")))},s=[{uri:"/resource/".concat(encodeURIComponent(a)),label:"All files"}].concat(o.map((function(e,t){return{uri:i(t),label:decodeURIComponent(e)}})));return r.createElement("nav",{"aria-label":"Breadcrumbs"},r.createElement("ul",{"data-testid":"breadcrumbs",className:e("breadcrumb"),ref:n},s.map((function(e,t){return r.createElement(_r,{crumb:e,key:e.uri,isLink:t!==s.length-1})}))))}function Yr(e){var t=e.className;return r.createElement(Or.Z,{"data-testid":"folder-details-button",action:o.kj.DETAILS,className:t},"Folder Details")}Yr.defaultProps={className:null};var Hr=n(76403),qr="upload-duplicate-file";function Vr(e){return e.replace(/^-/,"")}function Gr(e){var t=e.fetch,n=e.currentUri,r=e.onSave,a=e.setIsUploading,o=e.setAlertOpen,i=e.setMessage,s=e.setSeverity;return function(){var e=(0,I.Z)(N().mark((function e(c){var l;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l=Vr(c.name),e.next=4,(0,Hr._u)((0,D.Vo)(n,encodeURIComponent(l)),c,{type:c.type,fetch:t});case 4:r(),s("success"),i("Your file has been uploaded as ".concat(l)),o(!0),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),s("error"),i(e.t0.toString()),o(!0);case 15:return e.prev=15,a(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,10,15,18]])})));return function(t){return e.apply(this,arguments)}}()}function Jr(e){var t=e.className,n=e.onSave,a=e.resourceList,o=(0,c.useSession)().session.fetch,i=(0,r.useContext)(Rr.Z).currentUri,s=(0,r.useState)(!1),l=s[0],u=s[1],d=(0,r.useContext)(te.ZP),p=d.setMessage,m=d.setSeverity,f=d.setAlertOpen,g=(0,r.useContext)(Oe.ZP),h=g.confirmed,b=g.open,v=g.setContent,y=g.setOpen,E=g.setTitle,x=g.closeDialog,w=(0,r.useState)(!1),Z=w[0],C=w[1],S=(0,r.useState)(null),k=S[0],I=S[1],P=(0,r.useRef)(null),N=Gr({fetch:o,currentUri:i,onSave:n,setIsUploading:u,setAlertOpen:f,setMessage:p,setSeverity:m}),O=function(e){var t=e.setOpen,n=e.setTitle,r=e.setContent,a=e.setConfirmationSetup,o=e.setIsUploading,i=e.saveResource;return function(e,s){s?(t(qr),n("File ".concat(Vr(e.name)," already exists")),r("Do you want to replace it?"),a(!0),o(!1)):(i(e),o(!1))}}({setOpen:y,setTitle:E,setContent:v,setConfirmationSetup:C,setIsUploading:u,saveResource:N}),A=function(e){var t=e.setIsUploading,n=e.setFile,r=e.saveUploadedFile,a=e.setSeverity,o=e.setMessage,i=e.setAlertOpen,s=e.resourceList;return function(e){if(e.target.files.length)try{t(!0);var c=e.target.files[0];n(c);var l=!!s.find((function(e){return e.name===Vr(c.name)}));r(c,l)}catch(Sr){a("error"),o(Sr.toString()),i(!0)}finally{t(!1)}}}({fetch:o,currentUri:i,setIsUploading:u,setFile:I,saveUploadedFile:O,saveResource:N,setSeverity:m,setMessage:p,setAlertOpen:f,resourceList:a});return(0,r.useEffect)((function(){Z&&null===h&&b===qr||(Z&&h&&b===qr&&N(k),null!==h&&(x(),C(!1)))}),[Z,h,N,x,k,b]),r.createElement(r.Fragment,null,r.createElement("label",{tabIndex:"0",htmlFor:"upload-file-input",className:t,"data-testid":"upload-file-button",disabled:l,onClick:function(e){P.current&&u(!0),e.target.value=null},onKeyUp:function(e){"Enter"===e.key&&(P.current&&P.current.click(),e.target.value=null)}},l?"Uploading...":"Upload File",r.createElement("input",{ref:P,id:"upload-file-input","data-testid":"upload-file-input",type:"file",style:{display:"none"},onChange:function(e){A(e),e.target.value=null}})),r.createElement(Ae.ZP,null))}Jr.defaultProps={className:null,onSave:function(){},resourceList:[]};var Kr=(0,de.Z)((function(e){return(0,M.Z)(qe(e))}));function Xr(e,t,n){var r=n;return function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=Boolean(e.find((function(e){return e.name===r})));if(a){var o=r.substr(0,r.indexOf("("));r=o.length?"".concat(o,"(").concat(n,")"):"".concat(r,"(").concat(n,")"),t(n+1)}}(),(0,D.Vo)(t,encodeURIComponent(r))}function $r(e){var t=e.onSave,n=e.className,a=e.resourceList,o=Kr(),i=(0,r.useState)(""),l=i[0],u=i[1],d=(0,r.useState)(null),m=d[0],f=d[1],g=(0,r.useState)(!1),h=g[0],b=g[1],v=(0,r.useState)(!1),y=v[0],x=v[1],w=(0,r.useContext)(Rr.Z).currentUri,Z=(0,r.useContext)(te.ZP),C=Z.setMessage,S=Z.setSeverity,k=Z.setAlertOpen,P=(0,c.useSession)().session.fetch,O=a&&a.filter((function(e){return e.iri.endsWith("/")})),A=function(){f(null)},D=Boolean(m),T=D?"add-folder-flyout":void 0,W=function(e){var t=e.options,n=e.onSave,r=e.currentUri,a=e.folders,o=e.name,i=e.setSeverity,c=e.setMessage,l=e.setAlertOpen,u=e.handleClose,d=e.setFolderName,p=e.setDirtyForm,m=e.setDirtyNameField;return function(){var e=(0,I.Z)(N().mark((function e(f){var g,h;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f.preventDefault(),p(!0),o){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,g=Xr(a,r,o),e.next=8,(0,lt.Mf)(g,t);case 8:h=e.sent,n(),i("success"),c("Your folder has been created at ".concat(decodeURIComponent((0,s.LH)(h)))),l(!0),d(""),p(!1),m(!1),u(),e.next=24;break;case 19:e.prev=19,e.t0=e.catch(4),i("error"),c(e.t0.toString()),l(!0);case 24:case"end":return e.stop()}}),e,null,[[4,19]])})));return function(t){return e.apply(this,arguments)}}()}({options:{fetch:P},folders:O,currentUri:w,name:l,onSave:t,setSeverity:S,setMessage:C,setAlertOpen:k,handleClose:A,setFolderName:u,setDirtyForm:b,setDirtyNameField:x}),j=function(e){return function(t){var n=t.target.value;e(n)}}(u),L=!l&&(h||y);return r.createElement(r.Fragment,null,r.createElement(p.zx,{"aria-describedby":T,"data-testid":"add-folder-button",className:n,onClick:function(e){f(e.currentTarget)},variant:"small"},"Create Folder"),r.createElement(E.ZP,{"data-testid":T,open:D,anchorEl:m,classes:o,onClose:A,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},r.createElement(p.l0,{onSubmit:function(e){return W(e)}},r.createElement(p.__,{htmlFor:"folder-input"},"Folder name"),L?r.createElement(p.v0,{variant:"invalid"},"Please give a name"):null,r.createElement(p.Jc,{id:"folder-input","data-testid":"folder-name-input",onChange:j,onBlur:function(){return x(!0)},value:l,required:L}),r.createElement(p.zx,{"data-testid":"create-folder-flyout-button",type:"submit"},"Create Folder"))))}$r.defaultProps={onSave:function(){},resourceList:[],className:null};var Qr=(0,m.Z)((function(e){return(0,f.Z)(Lr(e))}));function ea(e){var t=e.update,n=e.resourceList,a=(0,g.useBem)(Qr()),o=p.zx.useBem()("button","small");return r.createElement("div",{className:a("sub-header")},r.createElement(Ur,null),r.createElement("div",{className:a("actions-container")},r.createElement(Yr,{className:o}),r.createElement($r,{onSave:t,resourceList:n,className:o}),r.createElement(Jr,{onSave:t,resourceList:n,className:o})))}ea.defaultProps={update:function(){return null},resourceList:[]};var ta=n(6578);function na(){return r.createElement("div",{"data-testid":"auth-profile-load-error"},r.createElement(p.mr,{title:"Failed loading your profile"}),r.createElement(p.W2,null,r.createElement("p",null,"PodBrowser were not able to load your profile.")))}function ra(e){var t=e.podRootIri,n=(0,r.useState)(null),a=n[0],o=n[1],i=p.v0.useBem(),s=!sessionStorage.getItem("no-control-warning-closed");(0,r.useEffect)((function(){return o(window.location.origin)}),[]);var c=function(e){e.preventDefault(),sessionStorage.setItem("no-control-warning-closed","true")};return s?r.createElement(p.v0,{variant:"warning",prominent:!0,hasIcon:!0,onClose:c,closeButtonProps:{"data-testid":"no-control-close-button"},"data-testid":"no-control-error"},r.createElement("p",{className:i("message__title")},"You can't share anything or change permissions in your Pod"),r.createElement("p",null,"This is because you don't have control access. You can still browse the resources in your Pod, but you won't be able to share anything."),r.createElement("p",{className:i("message__title")},"How to fix:"),r.createElement("ol",null,r.createElement("li",null,r.createElement("span",null,"Log in to "),r.createElement("a",{href:t,target:"_blank",rel:"noreferrer"},r.createElement("span",null,"your Pod"),r.createElement(p.PJ,{name:"external-link","data-external":!0}))),r.createElement("li",null,"Go to \u201cPreferences\u201d"),r.createElement("li",null,r.createElement("span",null,"Under \u201cManage your trusted applications,\u201d look for "),r.createElement("span",null,a),r.createElement("span",null," and check the \u201cControl\u201d box")),r.createElement("li",null,"Click on \u201cUpdate\u201d"),r.createElement("li",null,"Return to PodBrowser"))):null}function aa(){return r.createElement("div",{"data-testid":"pod-root-load-error"},r.createElement(p.mr,{title:"Could not load your Pod"}),r.createElement(p.W2,null,r.createElement("p",null,"PodBrowser encountered an error while loading your Pod.")))}var oa=n(47687);function ia(e){var t=e.containerPath,n=e.data,a=e.resourcePath,o=p.iA.useBem(),i=(0,r.useMemo)((function(){return[{header:"Icon",accessor:"icon",disableSortBy:!0,modifiers:["align-center","width-preview"]},{header:"BookmarkIcon",accessor:"bookmark-icon",disableSortBy:!0,modifiers:["align-center","width-preview"]},{Header:"File",accessor:"filename"},{Header:"Type",accessor:"type"}]}),[]),c=(0,$e.useTable)({columns:i,data:n,defaultCanSort:!0},$e.useSortBy),u=c.getTableProps,d=c.getTableBodyProps,m=c.headerGroups,f=c.rows,g=c.prepareRow;return r.createElement("table",(0,$.Z)({className:(0,y.Z)(o("table"))},u(),{"data-testid":"container-table"}),r.createElement("thead",{className:o("table__header")},m.map((function(e){return r.createElement("tr",(0,$.Z)({key:e.id,className:o("table__header-row")},e.getHeaderGroupProps()),e.headers.map((function(e){return r.createElement("td",(0,$.Z)({key:e.id,className:o.apply(void 0,["table__header-cell"].concat((0,at.Z)(e.modifiers||[])))},e.getHeaderProps(e.getSortByToggleProps())),e.render("Header")," ",r.createElement(oa.Z,{sorted:e.isSorted,sortedDesc:e.isSortedDesc}))})))}))),r.createElement("tbody",(0,$.Z)({className:o("table__body")},d()),n&&n.length?null:r.createElement("tr",{key:"no-resources-found",className:o("table__body-row")},r.createElement("td",{rowSpan:3,className:o("table__body-cell")},"No resources were found within this container.")),f.map((function(e){g(e);var n=e.original;return r.createElement(l.ZP,{key:n.iri,resource:n,container:t,preselected:n.iri===a&&!(0,s.Nm)(a)})}))))}function sa(e){var t=e.iri;(0,i.KW)();var n=(0,c.useSession)().sessionRequestInProgress,a=(0,r.useState)(null),o=a[0],p=a[1],m=(0,B.Z)(),f=m.data,g=m.error,h=(0,ta.Z)(t),b=(0,r.useState)(null),v=b[0],y=b[1],E=(0,ne.Z)(h),x=E.data,w=E.error,Z=(0,Cr.Z)(x),C=Z.error,S=Z.isValidating,k=(0,Tr.Z)(t),I=k.data,P=k.error,N=k.mutate,O=k.isValidating;(0,r.useEffect)((function(){if(!function(e,t){return!e||t&&(0,ie.sr)(e)&&(0,s.LH)(t.dataset)!==e}(t,I)){var e=I&&(0,jr.W)(I);p(e)}}),[I,t]),(0,r.useEffect)((function(){y(C)}),[C]);var A=(0,r.useMemo)((function(){return o?o.map((function(e){var t;return{iri:e,name:(0,u.Yj)(e),filename:null===(t=(0,u.Yj)(e))||void 0===t?void 0:t.toLowerCase(),type:(0,l.wP)(e)}})):[]}),[o]);if(!t||O||S)return r.createElement(d.Z,null);if(P&&(0,Sr.ky)(P.message,401))return r.createElement(Ar,null);if(P&&(0,Sr.ky)(P.message,403))return r.createElement(Ar,null);if(P&&(0,Sr.ky)(P.message,404))return r.createElement(Dr,null);if(P&&!n)return r.createElement(Wr,null);if(g)return r.createElement(na,null);var T=(0,R.fI)(f,t);if(w&&T)return r.createElement(aa,null);if(!o||!I||!h)return r.createElement(d.Z,null);var W=I.dataset;return W&&!(0,s.Nm)(W)?r.createElement(Wr,null):r.createElement(r.Fragment,null,r.createElement(Nr.pm,null,r.createElement(_,null),r.createElement(Pr,{update:N},r.createElement(ea,{update:N,resourceList:A}),function(e,t,n){return e&&t&&r.createElement(ra,{podRootIri:n})}(T,v,h),function(e,t,n){return e?r.createElement(d.Z,null):r.createElement(ia,{containerPath:(0,D.Nk)(t),data:n,resourcePath:t})}(O,t,A))))}function ca(){(0,i.KW)();var e=(0,a.useRouter)();return r.createElement(Rr.w,{currentUri:e.query.iri},r.createElement(o.g9,null,r.createElement(sa,{iri:e.query.iri})))}function la(){return r.createElement(ca,null)}sa.defaultProps={iri:null}},12221:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(50029),a=n(87794),o=n.n(a),i=n(35345),s=n(40478),c=n(70936),l=n(86856);function u(e){var t=(0,s.useSession)(),n=t.sessionRequestInProgress,a=(0,c.Nk)(e);function u(e){return d.apply(this,arguments)}function d(){return(d=(0,r.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.Z)(a,{fetch:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,i.ZP)(["container",a,n],(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a&&!n){e.next=2;break}return e.abrupt("return",null);case 2:return e.abrupt("return",u(t.fetch));case 3:case"end":return e.stop()}}),e)}))),{revalidateOnFocus:!1,refreshInterval:0,errorRetryInterval:2e3})}},11977:function(e,t,n){"use strict";n.d(t,{FT:function(){return r},Wt:function(){return a},ul:function(){return o},a3:function(){return i},Pt:function(){return s},Ph:function(){return c},M2:function(){return l},MK:function(){return u}});function r(e){var t,n,r;return e?Array.isArray(null===e||void 0===e||null===(t=e.credentialSubject)||void 0===t?void 0:t.hasConsent)?null===e||void 0===e||null===(n=e.credentialSubject)||void 0===n?void 0:n.hasConsent[0].forPurpose:null===e||void 0===e||null===(r=e.credentialSubject)||void 0===r?void 0:r.hasConsent.forPurpose:null}function a(e){return null===e||void 0===e?void 0:e.issuanceDate}function o(e){return null===e||void 0===e?void 0:e.expirationDate}function i(e){var t,n,r;return Array.isArray(null===e||void 0===e||null===(t=e.credentialSubject)||void 0===t?void 0:t.hasConsent)?null===e||void 0===e||null===(n=e.credentialSubject)||void 0===n?void 0:n.hasConsent:[null===e||void 0===e||null===(r=e.credentialSubject)||void 0===r?void 0:r.hasConsent]}function s(e){return e.forPersonalData}function c(e){return e.mode}function l(e){var t;return null===e||void 0===e||null===(t=e.credentialSubject)||void 0===t?void 0:t.id}function u(e){return null===e||void 0===e?void 0:e.id}},86856:function(e,t,n){"use strict";n.d(t,{Z:function(){return u},W:function(){return p}});var r=n(50029),a=n(87794),o=n.n(a),i=n(9749),s=n(95287),c=n(35863),l=n(80480);function u(e,t){return d.apply(this,arguments)}function d(){return(d=(0,r.Z)(o().mark((function e(t,n){var r,a,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.fetch,e.next=3,(0,i.OE)(t,{fetch:r});case 3:return a=e.sent,c=(0,s.YY)(a,t),e.abrupt("return",{dataset:a,thing:c});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){var t=e.thing;return t?(0,c.Yd)(t,l.Vm.contains):[]}},59737:function(e,t,n){"use strict";function r(e){var t=window.location.origin;return"".concat(t,"/").concat(e)}function a(){return window.location.hostname?window.location.hostname:""}function o(){return window.location.origin}function i(){return window.localStorage}function s(){return window.console}n.d(t,{Gm:function(){return r},mR:function(){return a},il:function(){return o},$o:function(){return i},dr:function(){return s}})},55916:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/resource/[iri]",function(){return n(92249)}])}},function(e){e.O(0,[224,706,823,741,954,868,894,33,44,385,566,287,17,888,774,179],(function(){return t=55916,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=[iri]-bee6b165fdeeb6cf.js.map