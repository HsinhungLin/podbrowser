{"version":3,"file":"static/chunks/pages/resource/[iri]-bee6b165fdeeb6cf.js","mappings":"6NAoCMA,EAAiB,CACrBC,SAAU,CACRC,wBAAyB,yCAE3BC,YAAa,CACXD,wBAAyB,+CAI7B,SAASE,EAAmBD,EAAaE,GACvC,OAAOF,EAAYG,QAAO,SAACC,GAAD,OAAOA,EAAEC,QAAUH,KAASI,OA6CzC,SAASC,EAAT,GASZ,IARDC,EAQC,EARDA,KACAC,EAOC,EAPDA,WACAC,EAMC,EANDA,SACAC,EAKC,EALDA,UACAC,EAIC,EAJDA,SACAC,EAGC,EAHDA,SACAb,EAEC,EAFDA,YACAE,EACC,EADDA,QAEMY,GAAUC,EAAAA,EAAAA,MACRC,GAAYC,EAAAA,EAAAA,cAAZD,QACR,GAA8CE,EAAAA,EAAAA,UAASP,GAAhDQ,EAAP,KAAwBC,EAAxB,KACMC,GAAqBnB,IAAYS,GAAaQ,GACpD,GAA0CD,EAAAA,EAAAA,UAAS,MAA5CI,EAAP,KAAsBC,EAAtB,KACA,GAAoCL,EAAAA,EAAAA,WAAS,GAAtCM,EAAP,KAAmBC,EAAnB,KACMC,EA1DD,SACLxB,EACAc,EACAS,GAIA,IAHAzB,EAGA,uDAHc,GACduB,EAEA,uCADAV,EACA,uCACA,0CAAO,WAAOc,GAAP,oEACLA,EAAMC,mBAEFJ,EAAAA,EAAAA,IAAWR,EAASd,GAHnB,uBAIHuB,GAAc,GAJX,8BASDxB,EAAmBD,EAAaE,GAT/B,uBAUHqB,EAAiBrB,GAVd,0CAcCW,EAASX,GAdV,2CAAP,sDAkDqB2B,CACnB3B,EACAc,EACAS,EACAzB,EACAuB,EACAV,GAEIiB,EAxCD,SACLlB,EACAa,EACAF,GAEA,OAAO,SAACI,GACNf,EAASe,EAAMI,OAAOC,OACtBP,GAAc,GACdF,EAAiB,OAgCEU,CACnBrB,EACAa,EACAF,GAEIW,EAjCD,SAA4Bd,GACjC,OAAO,kBAAMA,GAAmB,IAgCjBe,CAAmBf,GAIlC,OACE,gBAAC,KAAD,CAAMP,SAAUa,GACd,gBAAC,KAAD,cAECL,GACC,gBAAC,KAAD,CAASe,QAAQ,WAAjB,gCAEDZ,GACC,gBAAC,KAAD,CAASY,QAAQ,WACdvC,EAAeW,GAAMT,yBAGzBuB,GACC,gBAAC,KAAD,CAASc,QAAQ,WAAjB,oBACgBd,EADhB,qCAIF,gBAAC,KAAD,CACEe,GAAIvB,EACJF,SAAUkB,EACVE,MAAO9B,EACPM,KAAK,MACL8B,QAAQ,mBACRC,MAAM,4EACNL,OAAQA,EACRM,SAAUnB,EACVe,QAASd,GAAiBE,EAAa,UAAY,OAEpDd,EACD,gBAAC,KAAD,CAAQF,KAAK,SAAS,cAvHgB,oBAwHnCC,IAiBTF,EAAgBkC,aAAe,CAC7BhC,WAAY,MACZC,SAAU,KACVC,WAAW,EACXC,SAAU,aACVC,SAAU,aACVb,YAAa,GACbE,QAAS,GACTM,KAAM,gB,wMC1JR,EAFe,SAACkC,GAAD,OAAWC,EAAAA,OAAAA,OAAcD,I,+GCUlCE,GAAYC,EAAAA,EAAAA,IAAW,SAACH,GAAD,OAAWI,EAAAA,EAAAA,GAAaC,EAAOL,OAsB7C,SAASM,EAAT,GAQZ,IAPDC,EAOC,EAPDA,kBACAC,EAMC,EANDA,oBACAC,EAKC,EALDA,SACAC,EAIC,EAJDA,SACAC,EAGC,EAHDA,eACAC,EAEC,EAFDA,aACGC,GACF,YACKC,GAAMC,EAAAA,EAAAA,QAAOb,KACnB,GAAkDc,EAAAA,EAAAA,YAAWC,EAAAA,IAArDC,EAAR,EAAQA,aAAcC,EAAtB,EAAsBA,WAAYC,EAAlC,EAAkCA,YAClC,GAAkD5C,EAAAA,EAAAA,WAAS,GAApD6C,EAAP,KAA0BC,EAA1B,KACA,GACEN,EAAAA,EAAAA,YAAWO,EAAAA,IADLC,EAAR,EAAQA,UAAWC,EAAnB,EAAmBA,KAAMC,EAAzB,EAAyBA,WAAYC,EAArC,EAAqCA,QAASC,EAA9C,EAA8CA,SAAUC,EAAxD,EAAwDA,YAaxD,IAAMC,EA7CD,YAOJ,IANDpB,EAMC,EANDA,SACAqB,EAKC,EALDA,cACAb,EAIC,EAJDA,aACAC,EAGC,EAHDA,WACAC,EAEC,EAFDA,YACAT,EACC,EADDA,eAEA,wBAAO,uGAEGD,IAFH,OAGHU,EAAY,WACZD,EAAWR,GACXO,GAAa,GALV,gDAOHa,EAAc,EAAD,IAPV,yDAqCgBC,CAAqB,CAC1CtB,SAAAA,EACAqB,cAZF,SAAuBE,GACrBb,EAAY,UACRc,EAAAA,EAAAA,IAAYD,EAAG,KACjBd,EAAW,GAAD,OAAIP,EAAJ,4CAEVO,EAAWc,EAAEE,YAEfjB,GAAa,IAMbA,aAAAA,EACAC,WAAAA,EACAC,YAAAA,EACAT,eAAAA,IAgCF,OA7BAyB,EAAAA,EAAAA,YAAU,WACJX,IAAShB,IACTY,GAAmC,OAAdG,IACzBI,EAASrB,GACTmB,EAAWlB,GACXc,GAAqB,GAEjBD,GAAqBG,GACvBM,IAGET,GAAmC,OAAdG,IACvBK,IACAP,GAAqB,QAEtB,CACDQ,EACAL,EACAhB,EACAF,EACAC,EACAc,EACAE,EACAH,EACAK,EACAE,EACAC,IAIA,kCACE/D,KAAK,SACLuE,WAAWC,EAAAA,EAAAA,GAAKxB,EAAI,WACpB,cA3FmC,iBA4F/BD,EAJN,CAKE0B,QAAS,kBAAMZ,EAAQlB,OAc7BH,EAAaP,aAAe,CAC1Ba,aAAc,kB,qIC7GhB,IAAMV,GAAYC,E,SAAAA,IAAW,SAACH,GAAD,OAAWI,EAAAA,EAAAA,GCPzB,SAAgBJ,GAC7B,OAAOI,EAAAA,EAAAA,cAAaJ,EAAO,CAAC,QAAS,UAAW,CAC9CwC,qBAAsB,CACpBC,QAAS,QAEXC,WAAY,CACVC,QAAS,EACTC,SAAU,eAEZC,SAAU,CACRC,OAAQ9C,EAAM+C,QAAQ,IACtBC,MAAOhD,EAAMiD,QAAQC,KAAKC,QDJqB9C,CAAOL,OAI7C,SAASoD,EAAT,GAAwD,IAAjCC,EAAiC,EAAjCA,YAAaC,EAAoB,EAApBA,MAAOjB,EAAa,EAAbA,UAClDkB,EAAUrD,IACVY,GAAMC,EAAAA,EAAAA,QAAOb,KACnB,OACE,uBAAKmC,WAAWC,EAAAA,EAAAA,GAAKiB,EAAQf,qBAAsBH,IAChDiB,GACC,wBAAM,cARwB,qBAQqBA,GAErD,gBAACE,EAAA,GAAD,CAAS3D,MAAOwD,EAAaI,OAAK,GAChC,gBAACC,EAAA,EAAD,CAAQH,QAAS,CAAEI,KAAMJ,EAAQb,aAC/B,qBACEL,WAAWC,EAAAA,EAAAA,GAAKxB,EAAI,aAAcA,EAAI,QAASyC,EAAQV,UACvD,aAAW,YAcvBO,EAAYrD,aAAe,CACzBsC,UAAW,KACXiB,MAAO,O,6OElBT,EArBe,SAACtD,GAAD,aACbI,EAAAA,EAAAA,cAAaJ,EAAO,CAAC,cAAe,CAClC,yCACGA,EAAM4D,YAAYC,GAAG,MAAQ,CAC5BpB,QAAS,OACTqB,cAAe,MACfC,eAAgB,gBAChBC,WAAY,SACZC,aAAc,EACdC,aAAc,aAAF,OAAelE,EAAMiD,QAAQkB,KAAKC,SAPlD,mBASW,SATX,yBAUiB,WAVjB,sBAWc,eAXd,uBAYe,IAZf,SAaE,OAAQ,CACNC,YAAarE,EAAM+C,QAAQ,OAd/B,M,gICeJ,EAjBe,SAAC/C,EAAOsE,GAAR,aACblE,EAAAA,EAAAA,cAAaJ,EAAO,GAAI,CACtBuE,kBAAgB,GACdC,aAAcxE,EAAM+C,QAAQ,EAAG,EAAG,EAAG,GACrCJ,QAAS3C,EAAM+C,QAAQ,EAAG,EAAG,GAC7B0B,SAAUH,IAHI,SAIbtE,EAAM4D,YAAYC,GAAG,MAAQ,CAC5BjB,SAAU,IACV8B,MAAOJ,KANK,SAQbtE,EAAM4D,YAAYe,KAAK,MAAQ,CAC9BD,MAAO,QACPE,KAAM,iBAVM,M,sBCcdC,EAAkC,sBAoCzB,SAASC,EAAT,GAIZ,IAHDC,EAGC,EAHDA,OACAC,EAEC,EAFDA,oBACAV,EACC,EADDA,aAKMf,GAHYpD,EAAAA,EAAAA,IAAW,SAACH,GAAD,OAC3BI,EAAAA,EAAAA,GAAaC,EAAOL,EAAOsE,MAEbpE,GAChB,EAAgC+E,EAAAA,SAAe,MAA/C,eAAOC,EAAP,KAAiBC,EAAjB,KACA,GAAsB3G,EAAAA,EAAAA,UAAS,IAAxB4G,EAAP,KAAYC,EAAZ,KACMC,GAASC,EAAAA,EAAAA,aACf,GAAkC/G,EAAAA,EAAAA,WAAS,GAApCP,EAAP,KAAkBuH,EAAlB,KACA,GAA0ChH,EAAAA,EAAAA,WAAS,GAA5CiH,EAAP,KAAsBC,EAAtB,KACMC,GAAmBP,IAAQnH,GAAawH,GACtCG,GAAUrH,EAAAA,EAAAA,cAAVqH,MAEFnE,EAAOoE,QAAQX,GACfvF,EAAK8B,EAAO,qBAAkBqE,EAC9BC,EAlDoB,SAACZ,EAAaH,GAAd,OAAsC,WAChEG,EAAY,MACZH,GAAoB,IAgDAgB,CAAab,EAAaH,GACxC7G,EA7CN,SAAC4H,EAAaV,EAAQG,EAAcE,EAAkBN,EAAKE,EAAQM,GAAnE,0CACA,WAAO3G,GAAP,4EACEA,EAAMC,iBACNsG,GAAa,GAED,KAARJ,EAJN,2EASyBa,EAAAA,EAAAA,IAAgBb,EAAK,CAAEQ,MAAAA,IAThD,OASIM,EATJ,yDAWIA,EAAe,KAXnB,eAaQC,EACHD,IAAgBE,EAAAA,EAAAA,IAAaF,KAC9BG,EAAAA,EAAAA,IAAsBjB,GAf1B,UAiBQE,EAAOgB,KAAK,mBAAmBC,EAAAA,EAAAA,IAAaJ,IAjBpD,QAkBEJ,IACAP,GAAa,GACbE,GAAiB,GACjBL,EAAO,IArBT,0DADA,sDA6CiBmB,CACfT,EACAV,EACAG,EACAE,EACAN,EACAE,EACAM,GAOF,OAJAxD,EAAAA,EAAAA,YAAU,WACR+C,EAAYJ,KACX,CAACA,IAGF,gBAAC0B,EAAA,GAAD,CACE9G,GAAIA,EACJ4D,QAAS,CACPmD,MAAOnD,EAAQgB,kBAEjB9C,KAAMA,EACNyD,SAAUA,EACVyB,QAASZ,EACTa,aAAc,CACZC,SAAU,SACVC,WAAY,QAEdC,gBAAiB,CACfF,SAAU,MACVC,WAAY,SAGd,gBAAC,KAAD,CAAM3I,SAAUA,GACd,gBAAC,KAAD,CACEwB,GAAG,eACH2D,MAAM,YACN0D,eAAgBrB,GAAmB,yBACnCjG,QAAQ,eAER,gBAAC,KAAD,CACEC,GAAG,eACH,cAlGkC,qBAmGlCL,MAAO8F,EACPlH,SAAU,SAACe,GAAD,OAAWoG,EAAOpG,EAAMI,OAAOC,QACzC2H,YAAY,gBACZnJ,KAAK,MACL8B,QAAQ,aACRC,MAAM,2BACNC,SAAU6F,IAEZ,gBAAC,KAAD,CACEjG,QAAQ,aACR5B,KAAK,SACL,cAAa+G,EACblF,GAAIkF,GAJN,S,eClBV,EAxGe,SAAC7E,EAAOkH,EAAgBC,GACrC,IAAMC,EAA4BD,EAAsB,KAAO,GAAK,GACpE,OAAO/G,EAAAA,EAAAA,cAAaJ,EAAO,CAAC,UAAW,CACrCqH,WAAW,QACT5E,QAAS,OACT6E,gBAAiBtH,EAAMiD,QAAQsE,WAAd,QACjBC,UAAW,OACXC,UAAW,cACX/C,MAAO,SACN1E,EAAM4D,YAAYC,GAAG,MAAQ,CAC5BY,SAAU,OACV7B,SAAU,QACV8B,MAAO,cACPgD,OAAQ,SAGZC,eAAgB,CACdC,SAAU5H,EAAM6H,WAAWC,UAAUF,SACrCG,WAAY/H,EAAM6H,WAAWG,eAC7BhF,MAAOhD,EAAMiD,QAAQgF,QAAQ9E,KAC7B+E,cAAe,aAEjBC,mBAAoB,CAClB1F,QAAS,QAEX,wCACEA,QAAS,UACRzC,EAAM4D,YAAYC,GAAG,MAAQ,CAC5BpB,QAAS,WAGb2F,iBAAkB,CAChB/D,YAAa,QACbrB,MAAOhD,EAAMiD,QAAQgF,QAAQ9E,MAE/BkF,iBAAiB,QACf1F,QAAS3C,EAAM+C,QAAQ,GAAK,KAC5BuF,OAAQ,UACR5D,MAAO,OACPgD,OAAQ,OACR1D,WAAY,aACZD,eAAgB,eAChBuD,gBAAiB,cACjBxD,cAAe,SACfrB,QAAS,cACTO,MAAOhD,EAAMiD,QAAQsF,KAAKC,UAC1BC,OAAQ,OACRC,UAAW,aAAF,OAAe1I,EAAMiD,QAAQkB,KAAKC,MAC3CF,aAAc,aAAF,OAAelE,EAAMiD,QAAQkB,KAAKC,MAC9C8D,cAAe,OACfN,SAAU5H,EAAM6H,WAAWC,UAAUF,SACrCG,WAAY/H,EAAM6H,WAAWc,mBAC5B3I,EAAM4D,YAAYC,GAAG,MAAQ,CAC5B4E,OAAQ,OACRG,WAAY,aAAF,OAAe5I,EAAMiD,QAAQkB,KAAKC,MAC5CJ,WAAY,WACZrB,QAAS3C,EAAM+C,QAAQ,GAAK,EAAG,GAAKqE,EAA4B,MAGpEyB,eAAe,QACbC,UAAW,aACXC,aAAc,aACdtE,SAAU,OACVuE,UAAW,OACXpB,SAAU5H,EAAM6H,WAAWoB,cAC1BjJ,EAAM4D,YAAYC,GAAG,MAAQ,CAC5BqF,aAAc,WACdC,SAAU,SACVC,WAAY,WAGhBC,aAAa,QACX5E,SAAU,OAAF,OAASyC,EAAT,cACRtE,SAAU,QACV8B,MAAO,OAAF,OAASwC,EAAT,cACL1C,aAAcxE,EAAM+C,QAAQ,EAAG,EAAG,EAAG,IACpC/C,EAAM4D,YAAYe,KAAK,MAAQ,CAC9BC,KAAM,eACNF,MAAO,QACPD,SAAU,QACV7B,SAAU,UAGd0G,KAAM,CACJ3G,QAAS,GAEX4G,SAAU,CACR5G,QAAS3C,EAAM+C,QAAQ,IAEzByG,SAAU,CACR7G,QAAS3C,EAAM+C,QAAQ,EAAG,IAC1BiG,UAAW,SACXpG,SAAU,yBACV8B,MAAO,QAET+E,SAAU,CACR9G,QAAS,GAEX,qBAAsB,CACpBA,QAAS,M,qBCtEA,SAAS+G,IACtB,IAAMpE,GAASC,EAAAA,EAAAA,aACf,GAA4C/G,EAAAA,EAAAA,YAArC0I,EAAP,KAAuByC,EAAvB,KACA,GAAgDnL,EAAAA,EAAAA,WAAS,GAAlDoL,EAAP,KAAyB5E,EAAzB,KACA,GAAsDxG,EAAAA,EAAAA,YAA/C2I,EAAP,KAA4B0C,EAA5B,KACA,GAAsCrL,EAAAA,EAAAA,WAAS,GAAxCsL,EAAP,KAAoBC,EAApB,KAEM7J,GAAYC,EAAAA,EAAAA,IAAW,SAACH,GAAD,OAC3BI,EAAAA,EAAAA,GAAaC,EAAOL,EAAOkH,EAAgBC,OAE7C,EAAgClC,EAAAA,SAAe,MAA/C,eAAOC,EAAP,KAAiBC,EAAjB,KACA,GAA8C3G,EAAAA,EAAAA,UAAS,MAAhDwL,EAAP,KAAwBC,EAAxB,KACMnJ,GAAMC,EAAAA,EAAAA,QAAOb,KACbgK,EAAS5E,EAAO6E,MAAMC,IACtBC,GAAWH,EACXzI,EAAOoE,QAAQX,GACfvF,EAAK8B,EAAO,0BAAuBqE,EACnCwE,EAtBoB,SAACnF,GAAD,OAAiB,SAAClG,GAAD,OAC3CkG,EAAYlG,EAAMsL,gBAqBEC,CAAarF,GAC3BY,EApBoB,SAACZ,GAAD,OAAiB,kBAAMA,EAAY,OAoBzCa,CAAab,GAM3BsF,GAAMC,EAAAA,EAAAA,aACNC,GAAoBD,EAAAA,EAAAA,aACZE,GAAyBC,EAAAA,EAAAA,KAA/BC,KACFC,GAAWC,EAAAA,EAAAA,IAA6BJ,EAAsBV,IAEpE9H,EAAAA,EAAAA,YAAU,WACR,IAAMsC,EAAQ+F,EAAIQ,QAAQC,aAAe,EACzCvB,EAAkBjF,KACjB,CAAC+F,KAEJrI,EAAAA,EAAAA,YAAU,WACR,GAAKuI,EAAkBM,QAAvB,CACA,IAAMvG,EAAQiG,EAAkBM,QAAQC,aAAe,EACvDrB,EAAuBnF,MACtB,CAACiG,IAUJ,OACE,uBACE,cA3D4B,gBA4D5BtI,UAAWvB,EAAI,aACf2J,IAAKA,GAEJJ,EACC,gBAACc,EAAA,EAAD,CAAUzG,MAAO,IAAK0G,MAAO,CAAE3I,QAAS,kBAExC,0BACE,cAlEsC,uBAmEtC9C,GAAG,uBACH7B,KAAK,SACL,mBAAkB6B,EAClB4C,QAAS+H,EACTjI,UAAWvB,EAAI,mBACfjB,MAAOqK,GAEP,wBAAM7H,UAAWvB,EAAI,mBACnB,wBAAMuB,UAAWvB,EAAI,qBAAsB,CAAEiK,SAAAA,KAA7C,YADF,MAKE,gBAAC,KAAD,CACEM,KAAM5J,EAAO,WAAa,aAC1BY,UAAWvB,EAAI,uBAGnB,wBACEuB,UAAWvB,EAAI,gBAAiB,CAAEiK,SAAAA,IAClCN,IAAKE,GAEJT,IAINN,EACC,gBAAC9E,EAAD,CACEC,OAAQiF,EACRhF,oBAAqBA,EACrBV,aAAc4C,IAGhB,gBAACT,EAAA,GAAD,CACE9G,GAAIA,EACJ4D,QAAS,CACPmD,MAAO5F,EAAI,gBAEbW,KAAMA,EACNyD,SAAUA,EACVyB,QAASZ,EACTa,aAAc,CACZC,SAAU,SACVC,WAAY,QAEdC,gBAAiB,CACfF,SAAU,MACVC,WAAY,SAGd,gBAACwE,EAAA,EAAD,CAAM/H,QAAS,CAAEI,KAAM7C,EAAI,UACzB,gBAAC,IAAD,CACEsJ,IAAKF,EACLX,UAAQ,EACRgC,QAAQ,eACRC,WAAW,sBACXC,YAAavB,IAEf,gBAACwB,EAAA,EAAD,CACEzL,QAAM,EACN0L,IAAI,aACJpJ,QApGgB,WAC1B0H,EAAmB/E,GACnBF,GAAoB,GACpBe,KAkGUxC,QAAS,CAAEI,KAAM7C,EAAI,cAErB,gBAAC8K,EAAA,EAAD,CAAcrI,QAAS,CAAEI,KAAM7C,EAAI,cACjC,qBACEuB,WAAWC,EAAAA,EAAAA,GAAKxB,EAAI,aAAcA,EAAI,SACtC,aAAW,gBAGf,gBAAC+K,EAAA,EAAD,CAAcC,mBAAiB,EAAC7D,QAAQ,gBAE1C,gBAACzE,EAAA,GAAD,CACEuI,YAAa,CACXC,eAAe,GAEjBvK,KAAMqI,EACNmC,sBAAoB,EACpBC,sBAAoB,EACpBC,sBAAoB,EACpBtM,MAAM,UAEN,gBAAC6L,EAAA,EAAD,CACEzL,QAAM,EACN0L,IAAI,YACJpJ,QAvGa,WACzB6J,UAAUC,UAAUC,UAAUpC,GAC9BH,GAAe,GACfwC,YAAW,WACTxC,GAAe,GACfhE,MACC,MAkGSxC,QAAS,CAAEI,KAAM7C,EAAI,aACrB,cAxJ8B,2BA0J9B,gBAAC8K,EAAA,EAAD,CAAcrI,QAAS,CAAEI,KAAM7C,EAAI,cACjC,gBAAC,KAAD,CAAOuK,KAAK,OAAOhJ,WAAWC,EAAAA,EAAAA,GAAKxB,EAAI,YAEzC,gBAAC+K,EAAA,EAAD,CAAcC,mBAAiB,EAAC7D,QAAQ,mBC7KxD,IAAM/H,GAAYC,EAAAA,EAAAA,IAAW,SAACH,GAAD,OAAWI,EAAAA,EAAAA,GAAaC,EAAOL,OAE7C,SAASwM,IACtB,IAAQlO,GAAYC,EAAAA,EAAAA,cAAZD,QACFwC,GAAMC,EAAAA,EAAAA,QAAOb,KACbuM,EAAenO,EAAQ4E,KAAKwJ,WAAa,gBAAChD,EAAD,MAAmB,KAClE,OACE,gBAAC,KAAD,CACE7J,MAAM,QACNwC,UAAWvB,EAAI,0BACf6L,QAASF,EAAe,CAACA,GAAgB,O,spBChB/C,IAAMG,EAAQ,CACZC,iBAAkB,CAChBpK,QAAS,QACTqK,cAAe,QAEjBC,gBAAiB,CACf1I,YAAa,OACbJ,aAAc,QAEhB+I,cAAe,CACb3I,YAAa,OACbJ,aAAc,OACdxB,QAAS,OACTuB,WAAY,aACZ,WAAY,CACViJ,WAAY,SAGhBC,IAAK,CACHxF,OAAQ,OACRhD,MAAO,OACP+C,UAAW,QACX0B,SAAU,QAEZgE,aAAc,CACZ1K,QAAS,SAEX2K,WAAY,CACVxF,SAAU,WAEZyF,UAAW,CACTJ,WAAY,QAEdK,WAAY,CACV5I,MAAO,OACP6I,aAAc,S,yICLH,SAASC,GAAT,GAMZ,IALDnC,EAKC,EALDA,KACAoC,EAIC,EAJDA,YACA/M,EAGC,EAHDA,SACAgN,EAEC,EAFDA,yBACG7M,GACF,aACO+E,GAAUrH,EAAAA,EAAAA,cAAVqH,MACFN,GAASC,EAAAA,EAAAA,aACPoI,GAAe3M,EAAAA,EAAAA,YAAWC,GAAAA,IAA1B0M,WACR,GACEC,EAAAA,GAAAA,GAAgBH,GADJvH,EAAd,EAAQ4E,KAA2B+C,EAAnC,EAA4BC,MAEtBC,GAAuBC,EAAAA,GAAAA,GAAwBP,GAEjDI,GACFF,EAAWE,EAAcI,SAG3B,IAAMC,EAvCD,SACLhI,EACA6H,EACArN,EACAgN,EACApI,EACAM,GAEA,wBAAO,qGACC9D,EAAAA,EAAAA,IAAeoE,EAAc6H,EAAsBnI,GADpD,OAECwE,GAAMhE,EAAAA,EAAAA,IAAaF,IAErBiI,EAAAA,EAAAA,IAAYjI,IAAiBkE,IAAQ9E,EAAO6E,MAAMC,IACpDsD,EAAyBtD,GAEzB1J,IAPG,2CA+Bc0N,CACnBlI,EACA6H,EACArN,EACAgN,EACApI,EACAM,GAGF,OACE,gBAAC,OAAD,QACErF,kBAAkB,iBAClBC,oBAAmB,0CAAqC6K,EAArC,KACnB5K,SAAQ,0BAAqBgN,GAC7B/M,SAAUwN,EACVtN,aAAcyK,EACd1K,eAAc,UAAK0K,EAAL,+BACVxK,GAPN,U,2BCtCG,SAASwN,GAAiBjE,EAAKxE,GACpC,OAAO,WACL,IACMyF,GADeiD,EAAAA,EAAAA,IAASlE,GAAtBmE,SACcC,QAAQ,MAAO,IAErC5I,EAAMwE,GACHqE,MAAK,SAACC,GAAD,OAAcA,EAASC,UAC5BF,MAAK,SAACG,GAAD,OArBL,SAAuBvD,EAAMuD,GAClC,IAAMC,EAAIC,SAASC,cAAc,KACjCF,EAAEzD,MAAM3I,QAAU,OAClBoM,EAAEG,KAAOC,OAAOC,IAAIC,gBAAgBP,GACpCC,EAAEO,aAAa,WAAY/D,GAE3ByD,SAASO,KAAKC,YAAYT,GAE1BA,EAAEU,QAEFN,OAAOC,IAAIM,gBAAgBX,EAAEG,MAC7BF,SAASO,KAAKI,YAAYZ,GAUNa,CAAcrE,EAAMuD,MAFtC,OAGS,SAAC3M,GAAD,OAAOA,MAIL,SAAS0N,GAAT,GAAyC,IAAjBvF,EAAiB,EAAjBA,IAAQwF,GAAS,aAC9ChK,GAAUrH,EAAAA,EAAAA,cAAVqH,MAER,OAAIiK,EAAAA,GAAAA,IAAezF,GAAa,KAG9B,oCAAYwF,EAAZ,CAAmBrN,QAAS8L,GAAiBjE,EAAKxE,GAAQ9H,KAAK,YASnE6R,GAAa5P,aAAe,CAC1BsC,UAAW,M,6GClDPyN,GAAgB,CACpBlI,SAAU,WAGZ,YAAgB5H,GAAD,MAAY,CACzB+P,UAAW,CACTtN,QAAS,QACTuN,SAAU,YAEZC,SAAU,CACRnD,cAAe,EACfoD,WAAY,GAEdC,gBAAiB,CACf1N,QAAS,QAEX2N,cAAe,CACb3N,QAAS,SAEX4N,QAAS,CACPC,UAAW,OACX7N,QAAS,OACT8N,SAAU,SACVvM,WAAY,SACZD,eAAgB,gBAChBmE,cAAe,UACfN,SAAU5H,EAAM6H,WAAWwH,KAAKzH,SAChCnD,SAAU,MACV9B,QAAS3C,EAAM+C,QAAQ,IAAK,IAE9BO,MAAOwM,GACPU,SAAU,CACR7N,QAAS,KClBPzC,IAAYC,EAAAA,GAAAA,IAAW,SAACH,GAAD,OAAWI,EAAAA,EAAAA,GAAaC,GAAOL,OAE5D,SAASyQ,GAAT,GAAkE,IAApCnR,EAAoC,EAApCA,MAAOgE,EAA6B,EAA7BA,MAAOoN,EAAsB,EAAtBA,SAAUxS,EAAY,EAAZA,SAC9CqF,EAAUrD,KACVmL,EAAO/H,EAAMqN,cAEnB,OAEE,gBAACjF,EAAA,EAAD,CAAUrJ,UAAWkB,EAAQ0M,UAC3B,gBAACW,GAAA,EAAD,CACErN,QAAS,CAAED,MAAOC,EAAQD,OAC1B,cAd6B,oBAce+H,EAC5C/H,MAAOA,EACPuN,QACE,gBAACC,GAAA,EAAD,CACEvN,QAAS,CAAEI,KAAMJ,EAAQiN,UACzBO,QAASzR,EACT+L,KAAMA,EACNnN,SAAUA,EACVwS,SAAUA,EACVM,WAAY,CAAC,cAtBsB,uBAsB2B3F,QAe1EoF,GAAmB1Q,aAAe,CAChC2Q,UAAU,EACVxS,SAAU,cAGZ,U,qlBCrCA,IAAMgC,IAAYC,EAAAA,GAAAA,IAAW,SAACH,GAAD,OAAWI,EAAAA,EAAAA,GAAaC,GAAOL,OAQrD,SAASiR,GAAUxP,GACxB,OAAOA,EAAO,gBAACyP,GAAA,EAAD,MAAsB,gBAACC,GAAA,EAAD,MAevB,SAASC,GAAT,GAOZ,IA3BwB3P,EAAME,EAqB/B0P,EAMC,EANDA,IACArT,EAKC,EALDA,SACUsT,EAIT,EAJDZ,SACAxS,EAGC,EAHDA,SACAP,EAEC,EAFDA,MACA4T,EACC,EADDA,OAEMhO,EAAUrD,KACR5B,GAAYC,EAAAA,EAAAA,cAAZD,QACMsM,GAAyBC,EAAAA,EAAAA,KAA/BC,KAEAV,GADO7E,EAAAA,EAAAA,aACQ4E,MAAfC,IACFoH,GAAuBxG,EAAAA,EAAAA,IAC3BJ,EACAR,GAGF,GAA4B5L,EAAAA,EAAAA,UAAS6S,GAA9BI,EAAP,KAAeC,EAAf,KACA,GAAgClT,EAAAA,EAAAA,WAAS,GAAlCmT,EAAP,KAAiBC,EAAjB,KACMlB,EAAQ,OACZY,QADY,IACZA,EAAAA,EAAkBhT,EAAQ4E,KAAKvF,QAAUA,GAAS6T,EAE9CK,EAnCD,SAA2BJ,EAAQC,EAAWxT,GACnD,OAAO,SAACyN,GAAD,OAAS,WACd,IAAMrM,GAASmS,EAAO9F,GAChBmG,EAAY,SACbL,GADU,cAEZ9F,EAAMrM,IAEToS,EAAUI,GACV5T,EAAS4T,KA2BkBC,CAAkBN,EAAQC,EAAWxT,GAElE,OACE,uBAAKmE,UAAWkB,EAAQwM,WACpBwB,EASE,KARF,gBAAC7N,GAAA,EAAD,CACE,cAnDsC,8BAoDtCrB,UAAWkB,EAAQ8M,QACnB9N,SAnDiBd,EAmDGkQ,EAnDGhQ,EAmDOiQ,EAlD/B,kBAAMjQ,GAASF,KAmDduQ,QAASf,GAAUU,IAEnB,6BAAOM,EAAAA,GAAAA,IAAmBR,KAG9B,2BACEpP,UACEsP,GAAYJ,EAAShO,EAAQ6M,cAAgB7M,EAAQ4M,iBAGvD,gBAAC7E,EAAA,EAAD,KACE,gBAAC,GAAD,CACEhM,MAAOmS,EAAOS,KACd3O,QAASA,EACTD,MAAO6O,GAAAA,GAAAA,KAAAA,MACPjU,SAAU2T,EAAqBM,GAAAA,GAAAA,KAAAA,KAC/BzB,SAAUA,IAEZ,gBAAC,GAAD,CACEpR,MAAOmS,EAAOW,MACd7O,QAASA,EACTD,MAAO6O,GAAAA,GAAAA,MAAAA,MACPzB,SAAUA,EACVxS,SAAU2T,EAAqBM,GAAAA,GAAAA,MAAAA,OAEjC,gBAAC,GAAD,CACE7S,MAAOmS,EAAOY,OACd9O,QAASA,EACTD,MAAO6O,GAAAA,GAAAA,OAAAA,MACPzB,SAAUA,EACVxS,SAAU2T,EAAqBM,GAAAA,GAAAA,OAAAA,OAEjC,gBAAC,GAAD,CACE7S,MAAOmS,EAAOZ,QACdtN,QAASA,EACTD,MAAO6O,GAAAA,GAAAA,QAAAA,MACPzB,SAAUA,EACVxS,SAAU2T,EAAqBM,GAAAA,GAAAA,QAAAA,QAGlCnU,IAoBToT,GAAgBrR,aAAe,CAC7BsR,IAAK,CACHa,MAAM,EACNE,OAAO,EACPC,QAAQ,EACRxB,SAAS,GAEXU,QAAQ,EACRvT,SAAU,KACV0S,SAAU,KACV/S,MAAO,KACPO,SAAU,c,uCC7INoU,GAAgB,CACpBC,cAAe,KACfC,kBAAmB,MAEfC,IAAuBC,EAAAA,EAAAA,eAAcJ,IAE3C,SAASK,GAAT,GAA+E,IAA9C3U,EAA8C,EAA9CA,SAAUuU,EAAoC,EAApCA,cAAeC,EAAqB,EAArBA,kBACxD,OACE,gBAACC,GAAqBG,SAAtB,CAA+BtT,MAAO,CAAEiT,cAAAA,EAAeC,kBAAAA,IACpDxU,GAKP2U,GAAsB5S,aAAe,CACnCwS,cAAe,KACfC,kBAAmB,MAWrB,UCEMtS,IAAYC,EAAAA,EAAAA,IAAW,SAACH,GAAD,OAAWI,EAAAA,EAAAA,GChCzB,SAAgBJ,GAG7B,MAAO,CACL6S,OAAQ,CACNC,YAAa,QAEf1F,WAAY,CACVxF,SAAU,UACVoB,UAAW,OACX+J,SAAU,GAEZ,kBAAmB,CACjBtO,SAAU,OACV6C,gBAb6B,UAc7B3E,QAAS3C,EAAM+C,QAAQ,GAAK,MAE9BiQ,OAAQ,CACNrQ,QAAS,EACTsB,aAAcjE,EAAM+C,QAAQ,KAE9BkQ,SAAU,CACRvO,MAAO,OACPqE,aAAc,aACdpG,QAAS,GAEXuQ,aAAc,CACZnK,aAAc,aACdnB,SAAU,QAEZ,mBAAoB,CAClBnF,QAAS,OACTgC,SAAU,OACV9B,QAAS,EACT,eACEoG,aAAc,aACd+J,YAAa9S,EAAM+C,QAAQ,GAAK,IAAK,IAAK,KACzC/C,EAAM4D,YAAYC,GAAG,MAAQ,CAC5BkF,aAAc,cAIpB,cAAe,CACbhB,WAAY,OACZoL,UAAW,SAEbC,QAAS,CACPtQ,OAAQ9C,EAAM+C,QAAQ,IAExBsQ,UAAW,CACTvK,UAAW,aACXL,OAAQ,aAAF,OAjDc,WAkDpB3F,OAAQ,EACRyK,aAAcvN,EAAM+C,QAAQ,IAC5B2E,OAAQ,QDtBuCrH,CAAOL,OAEtDsT,GAA2B,eAGpBC,GACX,iCA6Da,SAASC,GAAT,GAAgE,IAJnDC,EAIUC,EAAyC,EAAzCA,UAAyC,IAA9BC,WAActC,EAAgB,EAAhBA,IAAK1T,EAAW,EAAXA,MAClE,GAA6CiW,EAAAA,GAAAA,GAAgBjW,GAAjDkW,EAAZ,EAAM/I,KAAsBgJ,EAA5B,EAAqBhG,MACfvK,EAAUrD,KAChB,GAA2B3B,EAAAA,EAAAA,cAAnBqH,EAAR,EAAQA,MACOmO,EADf,EAAezV,QAC+B4E,KAAtCvF,MACFmD,GAAMC,EAAAA,EAAAA,QAAOb,MACnB,GAA4B1B,EAAAA,EAAAA,UAAS6S,GAA9BI,EAAP,KAAeC,EAAf,KACA,GAAoClT,EAAAA,EAAAA,UAAS6S,GAAtC2C,EAAP,KAAmBC,EAAnB,KACsBC,GAAYlT,EAAAA,EAAAA,YAAWmT,EAAAA,gBAArCC,aACA7B,GAAkBvR,EAAAA,EAAAA,YAAWyR,IAA7BF,cACR,GAAkC/T,EAAAA,EAAAA,WAAS,GAApC6V,EAAP,KAAkBC,EAAlB,KAEA,GAAiDtT,EAAAA,EAAAA,YAC/CO,GAAAA,IADME,EAAR,EAAQA,KAAMD,EAAd,EAAcA,UAAWE,EAAzB,EAAyBA,WAAYC,EAArC,EAAqCA,QAIrC,GAAkDX,EAAAA,EAAAA,YAAWC,GAAAA,IAArDE,EAAR,EAAQA,WAAYC,EAApB,EAAoBA,YAAaF,EAAjC,EAAiCA,aAC3BT,GArBoBgT,GAqBGc,EAAAA,EAAAA,IAAaL,GApB1C,8BAA8BT,IAsBxBe,EAxDD,SACLjC,EACAmB,EACAhC,EACA/T,EACAsW,EACA7S,EACAD,EACAD,GAEA,0CAAO,WAAO4Q,GAAP,4EACL4B,GAAU,GACVhC,EAAUI,GAELS,EAJA,iEAQmBA,EAAckC,wBACpC9W,EACAmU,GAVG,qBAQGhE,EARH,EAQGA,OARH,uBAaYA,EAbZ,QAeLmG,EAAc,MACd7S,EAAY,WACZD,EAAW,kCACXD,GAAa,GACbwS,GAAU,GAnBL,4CAAP,sDA8CwBgB,CACtBnC,EACAmB,EACAhC,EACA/T,EACAsW,EACA7S,EACAD,EACAD,IAGFkB,EAAAA,EAAAA,YAAU,WACJX,IAAShB,GAAae,GAAauS,IAAuBpW,GAE9D6W,EAAgBR,KACf,CACDD,EACAvS,EACAgT,EACAR,EACArW,EACA8C,EACAgB,IAGF,IAAMtD,EArGD,SACL4V,EACApW,EACAgE,EACAlB,EACA+T,EACAR,EACAtS,GAEA,0CAAO,WAAOzC,GAAP,oEACLA,EAAMC,iBACF6U,IAAuBpW,EAFtB,gBAGH+D,EAdJ,+DAeIC,EAAQlB,GAJL,sCAMG+T,EAAgBR,GANnB,2CAAP,sDA4FiBxN,CACfuN,EACApW,EACAgE,EACAlB,EACA+T,EACAR,EACAtS,GAGIiT,EAAgB,mCAAG,wGAELC,EAAAA,EAAAA,IAAajX,EAAOiI,GAFf,OAErBiO,EAFqB,OAGrBS,GAAa,GAHQ,gDAKrBR,EAAe,EAAH,GACZQ,GAAa,GANQ,yDAAH,qDAUtB,GAAIR,EAAc,CAEhB,OACE,uBAAKzR,UAAWvB,EAAI,oBAClB,gBAAC+T,GAAA,EAAD,CACEtR,QAAS,CACPI,KAAMJ,EAAQ0P,SACdhF,QAAS1K,EAAQ2P,aACjBF,OAAQzP,EAAQyP,QAElB8B,SAAS,UACT9B,OAEEqB,EACE,gBAACU,GAAA,EAAD,CACE,cA9IsB,oBA+ItBC,KAAM,GACN3S,UAAWvB,EAAI,WACfkC,MAAM,YAGR,gBAACU,GAAA,EAAD,CACE,cAtJqB,mBAuJrBrB,UAAWvB,EAAI,eACfkC,MAAM,UACNgS,KAAK,QACLzS,QAAS,WACP+R,GAAa,GACb/H,WAAWoI,EAAkB,OAPjC,cApBM,+BAqCZ,uBAAKtS,UAAWkB,EAAQ8P,YACxB,uBAAKhR,UAAWvB,EAAI,qBAClB,gBAACmU,GAAA,EAAD,CAAQ5S,UAAWkB,EAAQsP,OAAQqC,IAAKvX,EAAOwX,IAAK,OACpD,gBAACC,EAAA,EAAD,CACE,cAAa9B,GACbjR,UAAWkB,EAAQ6J,YAElBzP,GAEH,gBAAC,KAAD,CAAMQ,SAAUA,GACd,gBAACiT,GAAD,CACEzF,IAAKhO,EACLA,MAAOA,EACP0T,IAAKI,EACLvT,SAAU+V,GAEV,gBAAC,KAAD,CACE1R,QAASpE,EACTL,KAAK,SACL4B,QAAQ,YACR,cAAa6T,IAJf,WAWN,gBAAC,MAAD,OAKN,IAAKM,EACH,OACE,gCACE,gBAAC1I,EAAA,EAAD,CACE9I,UAAWkB,EAAQsP,OACnBnT,QAAQ,SACRgF,MAAO,GACPgD,OAAQ,KAEV,uBAAKrF,UAAWkB,EAAQ6J,YACtB,gBAACjC,EAAA,EAAD,CAAUzL,QAAQ,OAAOgF,MAAO,QAMxC,IAAQmO,EAAWgB,EAAXhB,OACFxH,GAAOgK,EAAAA,EAAAA,IAAmBxB,GAEhC,OACE,gCACE,gBAACoB,GAAA,EAAD,CAAQ5S,UAAWkB,EAAQsP,OAAQqC,IAAK7J,EAAM8J,IAAKtC,IACnD,gBAACuC,EAAA,EAAD,CACE,cAAa9B,GACbjR,UAAWkB,EAAQ6J,YAElB/B,GAEH,gBAAC,KAAD,CAAMlN,SAAUA,GACd,gBAACiT,GAAD,CACEzF,IAAKhO,EACLA,MAAOA,EACP0T,IAAKI,EACLvT,SAAU+V,GAEV,gBAAC,KAAD,CACE1R,QAASpE,EACTL,KAAK,SACL4B,QAAQ,YACR,cAAa6T,IAJf,UAUJ,gBAAC,MAAD,OEpRS,SAAS+B,GAAe/C,GACrC,OAAsC/T,EAAAA,EAAAA,UAAS,MAAxClB,EAAP,KAAoBiY,EAApB,KAYA,OAVAnT,EAAAA,EAAAA,YAAU,WACHmQ,EAILA,EAAciD,iBAAiB/G,MAAK,SAACgH,GACnCF,EAAeE,EAAsBC,cAJrCH,EAAe,QAMhB,CAAChD,IAEG,CAAEjV,YAAAA,GFiRXkW,GAAYzT,aAAe,CACzB2T,UAAW,cGrRb,IAAMxT,IAAYC,EAAAA,EAAAA,IAAW,SAACH,GAAD,OAAWI,EAAAA,EAAAA,GCZlB,CACpB6P,SAAU,CACRxN,QAAS,OACTsB,eAAgB,gBAChBC,WAAY,aACZC,aAAc,EACdI,YAAa,QDUjB,SAASsR,GAAT,GAAwC,IAAbjC,EAAa,EAAbA,UACnBnQ,EAAUrD,KAChB,GAA8B1B,EAAAA,EAAAA,WAAS,GAAhCoX,EAAP,KAAgBC,EAAhB,KAEQvY,EAAgBgY,IADEtU,EAAAA,EAAAA,YAAWyR,IAA7BF,eACAjV,YAIR,IAFiBA,EAEJ,OAAO,gBAACyX,GAAA,EAAD,CAAkB/R,MAAM,YAE5C,GAA2B,IAAvB1F,EAAYM,OACd,OAAO,mEAGT,IAAMkY,EAAmBF,EAAUtY,EAAcA,EAAYyY,MAAM,EAAG,GAEtE,OACE,gCACE,gBAACzK,EAAA,EAAD,KACGwK,EAAiBE,KAAI,SAACrC,GAAD,OACpB,gBAACjI,EAAA,EAAD,CAAUC,IAAKgI,EAAWhW,MAAO0E,UAAWkB,EAAQ0M,UAClD,gBAACuD,GAAD,CAAaG,WAAYA,EAAYD,UAAWA,SAIrDkC,GAAWtY,EAAYM,OAAS,EAAI,KACnC,gBAAC,KAAD,CACE,cA7BR,6BA8BQ2E,QAAS,kBAAMsT,GAAW,IAC1BnW,QAAQ,SAHV,aAgBRiW,GAAgB5V,aAAe,CAC7B2T,UAAW,cAGb,U,YE9DA,YAAgB1T,GAAD,MAAY,CACzB0G,MAAO,CACL/D,QAAS3C,EAAM+C,QAAQ,M,iBCuBrB7C,IAAYC,EAAAA,GAAAA,IAAW,SAACH,GAAD,OAAWI,EAAAA,EAAAA,GAAaC,GAAOL,OAuD7C,SAASiW,GAAT,GAGZ,IAFDvC,EAEC,EAFDA,UACG7S,GACF,aACD,GAAgCrC,EAAAA,EAAAA,UAAS,MAAlC0G,EAAP,KAAiBC,EAAjB,KACA,GAA4B3G,EAAAA,EAAAA,WAAS0X,EAAAA,GAAAA,KAAgB,IAA9CzE,EAAP,KAAeC,EAAf,KACMnO,EAAUrD,KAChB,GAAgC1B,EAAAA,EAAAA,WAAS,GAAlCkS,EAAP,KAAiByF,EAAjB,KACQ5D,GAAkBvR,EAAAA,EAAAA,YAAWyR,IAA7BF,cACR,GAA8B/T,EAAAA,EAAAA,UAAS,IAAhChB,EAAP,KAAgB4Y,EAAhB,KACA,GAAkC5X,EAAAA,EAAAA,WAAS,GAApCP,EAAP,KAAkBuH,EAAlB,KACQlI,EAAgBgY,GAAe/C,GAA/BjV,YAEF8B,EAlED,SAAuBgX,GAC5B,OAAO,SAACC,GACND,EAAWC,IAgEQC,CAAcF,GAE7B9L,EA9DD,SAAsBnF,GAC3B,OAAO,SAAClG,GACNkG,EAAYlG,EAAMsL,gBA4DAC,CAAarF,GAE3BY,EA1DD,SACLZ,EACAuM,EACAyE,EACAzC,EACAlO,GAEA,OAAO,WACLL,EAAY,MACZuM,GAAUwE,EAAAA,GAAAA,KAAgB,IAC1BC,GAAY,GACZzC,GAAU,GACVlO,GAAa,IA8CKQ,CAClBb,EACAuM,EACAyE,EACAzC,EACAlO,GAGIrH,EAlDD,SACLoU,EACAmB,EACAjC,EACA0E,EACApQ,EACAP,GAEA,0CAAO,WAAOhI,GAAP,4EACLgI,GAAa,GACRhI,KAAW+Y,EAAAA,GAAAA,IAAc9E,GAFzB,wDAKLiC,GAAU,GACVyC,GAAY,GANP,SAOmB5D,EAAckC,wBACpCjX,EACAiU,GATG,qBAOG3D,EAPH,EAOGA,OAPH,uBAWYA,EAXZ,QAYL/H,IACAP,GAAa,GAbR,4CAAP,sDA0CiBgB,CACf+L,EACAmB,EACAjC,EACA0E,EACApQ,EACAP,GAII/D,EAAOoE,QAAQX,GACfvF,EAAK8B,EA/FM,8BA+FcqE,EACzB0Q,EAAwBvY,IAAasY,EAAAA,GAAAA,IAAc9E,GAEzD,OACE,gCACE,gBAAC,MAAD,QACE/R,QAAQ,QACR+W,UAAU,cACV,mBAAkB9W,GACdkB,EAJN,CAKE0B,QAAS+H,EACT,cAxGN,2CAkGI,kBAUA,gBAAC7D,EAAA,GAAD,CACE9G,GAAIA,EACJ4D,QAASA,EACT9B,KAAMA,EACNyD,SAAUA,EACVwR,mBAAoB,KACpB/P,QAASZ,EACTa,aAAc,CACZC,SAAU,MACVC,WAAY,UAEdC,gBAAiB,CACfF,SAAU,SACVC,WAAY,WAGd,gBAAC,MAAD,CACEhJ,KAAK,cACLG,UAAWA,EACXC,SAAUkB,EACVjB,SAAUA,EACVmB,MAAO9B,EACPF,YAAaA,GAEb,gBAAC,KAAD,KACE,gBAAC,KAAD,2BACA,gBAAC8T,GAAD,CACEG,QAAM,EACNF,IAAKI,EACLvT,SAAUwT,EACVhB,SAAUA,IAEX8F,EACC,gBAAC,KAAD,CAAS9W,QAAQ,WAAjB,yCAGE,SAYhBuW,GAA8BlW,aAAe,CAC3C2T,UAAW,cCnKb,IAAMxT,IAAYC,EAAAA,GAAAA,IAAW,SAACH,GAAD,OAAWI,EAAAA,EAAAA,GCjBlB,CACpBuW,QAAS,CACPlU,QAAS,cDiBE,SAASmU,GAAT,GAA2C,IAAhBC,EAAgB,EAAhBA,aAClCtT,EAAUrD,KAChB,GAA8B1B,EAAAA,EAAAA,UAASqY,GAAhCxM,EAAP,KAAgByM,EAAhB,KAEA,OAAIzM,EAAgB,gBAAC0K,GAAA,EAAD,CAAkB/R,MAAM,YAG1C,gCACE,gBAAC,KAAD,KACE,gBAAC,KAAD,KACE,gBAACiT,GAAD,CAA+BvC,UAAWoD,MAG9C,gBAACC,EAAA,EAAD,CAAWC,iBAAe,GACxB,gBAACC,EAAA,EAAD,CAAkBC,WAAY,gBAACC,EAAA,EAAD,OAA9B,0BAGA,gBAACC,EAAA,EAAD,CAAkB/U,UAAWkB,EAAQoT,SACnC,gBAAC,GAAD,CAAiBjD,UAAWoD,OAWtCF,GAAgB7W,aAAe,CAC7B8W,cAAc,G,u9BEbT,IACMQ,GAAmB,SACnBC,GAAa,YACbC,IAA6BC,EAAAA,GAAAA,IAAY,kBACzCC,GAAiB,CAC5B1H,UAAWsH,GACXK,UAN+B,aAO/BC,mBAAoBJ,GACpBK,eAAgBC,GAAAA,GAAAA,WAChBC,SAAU,SAACC,GAAD,SAAeC,EAAAA,GAAAA,IAAOD,GAASP,EAAAA,GAAAA,IAAY,oBAQhD,SAAeS,GAAtB,qC,0CAAO,WAA4BC,EAAatS,GAAzC,2FACEuS,EAAAA,GAAAA,IAAcD,EAAa,CAACT,IAAiB7R,IAD/C,4C,sBAIA,SAASwS,GAAYlE,EAAS9J,GACnC,IAAMiO,GAAQC,EAAAA,GAAAA,IAASpE,EAAS9J,GAC1BmO,GAAeP,EAAAA,GAAAA,IAAOK,EAAOR,GAAAA,GAAAA,KACnC,GAAIU,EAAc,CAChB,IAAMC,GAAYF,EAAAA,GAAAA,IAASpE,EAASqE,GACpC,OAAOC,IAAaR,EAAAA,GAAAA,IAAOQ,EAAWX,GAAAA,GAAAA,OAExC,OAAOG,EAAAA,GAAAA,IAAOK,EAAOI,GAAAA,GAAAA,QAavB,SAASC,GAAoBR,EAAaH,GACxC,IAAsBY,EAA4BT,EAA1CU,aAEFC,E,uWAAoB,EACxBC,OAAQ,GACRC,UAAW,GACXC,WAAY,IACTjB,GAGCpY,GAAKsZ,EAAAA,GAAAA,KACL7O,GAAM8O,EAAAA,EAAAA,IACVP,EACAtB,GACA1X,EACA2X,IAEF,EA3BK,SAAyB3Z,EAAOyM,GACrC,IAAMoO,GAAYW,EAAAA,GAAAA,KAChBC,EAAAA,GAAAA,OACA,SAACC,GAAD,OAAOC,EAAAA,GAAAA,IAAOD,EAAGE,GAAAA,GAAAA,MAAU/B,EAAAA,GAAAA,IAAY,aACvC,SAAC6B,GAAD,OAAOC,EAAAA,GAAAA,IAAOD,EAAGxB,GAAAA,GAAAA,MAAala,MAGhC,MAAO,CAAE6a,UAAAA,EAAWD,cADCiB,EAAAA,GAAAA,IAAMhB,EAAWpO,IAqBFqP,CAAgB1B,EAAQpa,MAAOyM,GAA3DoO,EAAR,EAAQA,UAAWD,EAAnB,EAAmBA,aACbmB,GAAmBC,EAAAA,GAAAA,IAAoB5B,EAASQ,GAChDO,EAASD,EAAkBC,OAAO9C,KAAI4D,EAAAA,GAAAA,IAAU,UAChDb,EAAYF,EAAkBE,UAAU/C,KAAI4D,EAAAA,GAAAA,IAAU,YACtDZ,EAAaH,EAAkBG,WAAWhD,KAAI4D,EAAAA,GAAAA,IAAU,cAExDC,EAASC,GAAAA,GAAAA,WAAA,GACb,CAAEzO,KAAM,SADK,QAET,SAACgO,GAAD,OAAOC,EAAAA,GAAAA,IAAOD,EAAGE,GAAAA,GAAAA,KAAU1B,GAAAA,GAAAA,cAFlB,gBAEwC6B,KAFxC,QAGVZ,EAAO9C,KAAI,YAAc,IAAX3K,EAAW,EAAXA,KACf,OAAO,SAACgO,GAAD,OAAOC,EAAAA,GAAAA,IAAOD,EAAGxB,GAAAA,GAAAA,SAAgB,CAACzN,EAAKiB,GAAM0O,KAAK,YAJ9C,QAMVhB,EAAU/C,KAAI,YAAc,IAAX3K,EAAW,EAAXA,KAClB,OAAO,SAACgO,GAAD,OAAOC,EAAAA,GAAAA,IAAOD,EAAGxB,GAAAA,GAAAA,WAAkB,CAACzN,EAAKiB,GAAM0O,KAAK,YAPhD,QASVf,EAAWhD,KAAI,YAAc,IAAX3K,EAAW,EAAXA,KACnB,OAAO,SAACgO,GAAD,OAAOC,EAAAA,GAAAA,IAAOD,EAAGxB,GAAAA,GAAAA,aAAoB,CAACzN,EAAKiB,GAAM0O,KAAK,aAG3D7F,EAAUiF,GAAAA,GAAAA,WAAA,IACda,EAAAA,GAAAA,MACA,SAACC,GAAD,OAAOC,EAAAA,GAAAA,IAASD,EAAGJ,IACnB,SAACI,GAAD,OAAOC,EAAAA,GAAAA,IAASD,EAAGzB,KAHL,gBAIXM,EACAqB,OAAOpB,GACPoB,OAAOnB,GACPhD,KACC,gBAAGqC,EAAH,EAAGA,MAAH,OACE,SAAC4B,GAAD,OACEC,EAAAA,GAAAA,IAASD,EAAG5B,UAGtB,MAAO,CACLjO,IAAAA,EACA8J,QAAAA,GAIG,SAAekG,GAAtB,uC,0CAAO,WAA0BlC,EAAamC,EAAezU,GAAtD,8FACC0U,GAAWd,EAAAA,GAAAA,IAAMtB,EAAYG,OAC7BkC,EAAa7B,GAAoBR,EAAamC,GAC5CjQ,EAAiBmQ,EAAjBnQ,IAAK8J,EAAYqG,EAAZrG,QAHR,UAIuBsG,EAAAA,GAAAA,IAAmBpQ,EAAK8J,EAAS,CAAEtO,MAAAA,IAJ1D,UAIC6U,EAJD,OAKCC,GAAcZ,EAAAA,GAAAA,IAClB,CACE1U,IAAK,GAAF,QAAKmP,EAAAA,EAAAA,IAAakG,GAAlB,WAEL,SAACpB,GAAD,OACEsB,EAAAA,GAAAA,IAAkBtB,EAAGZ,GAAAA,GAAAA,KAAW4B,EAAcO,IAAMP,EAAchP,SACpE,SAACgO,GAAD,OAAOC,EAAAA,GAAAA,IAAOD,GAAG7B,EAAAA,GAAAA,IAAY,iBAAkB8C,MAG7CO,EAAqB3C,EACrB4C,GAAiBC,EAAAA,GAAAA,IAAmB7C,EAAaT,IAfhD,mCAiBwBuD,EAAAA,GAAAA,IACzB9C,EACAT,GACA7R,GApBC,QAiBHiV,EAjBG,OAsBHC,GAAiBC,EAAAA,GAAAA,IAAmBF,EAAoBpD,IAtBrD,0BAyBsBwD,EAAAA,GAAAA,GAAsBH,EAAgBlV,GAAO,SAACqU,GAAD,OACtEC,EAAAA,GAAAA,IAASD,EAAGS,MA1BT,eAyBCQ,EAzBD,yBA6BE,CACLhD,YAAa2C,EACbhB,OAAQ,CACN3F,QAASuG,EACTpC,MAAOqC,GAETS,YAAaD,IAnCV,6C,sBAuCA,SAAeE,GAAtB,uC,0CAAO,WACLlD,EACAva,EACAiI,GAHK,2FAKgBqS,GAAaC,EAAatS,GAL1C,cAKCyV,EALD,gBAMkBC,GAA6BD,EAAQzV,GANvD,cAMC2V,EAND,OAOCC,EAAkBD,EAAS9d,QAAO,SAACoW,GAAD,OAAaA,EAAQlW,QAAUA,KAPlE,kBAQE6d,GARF,2C,yBCjKA,SAAeC,GAAtB,qC,0CAAO,WAAoCC,EAAkB9V,GAAtD,2GAEwB+V,EAAAA,EAAAA,IAAYD,EAAkB9V,GAFtD,uBAEK8I,EAFL,EAEKA,SACAwF,EAAiBxF,EAAjBwF,QAAS9J,EAAQsE,EAARtE,IACXzM,EAAQya,GAAYlE,EAAS9J,GAJhC,UAK0BwK,EAAAA,EAAAA,IAAajX,EAAOiI,GAL9C,cAKGgW,EALH,yBAMIA,GANJ,2DAQI,MARJ,2D,sBAWA,SAAeN,GAAtB,qC,0CAAO,WAA4CD,EAAQzV,GAApD,uFACmBiW,QAAQC,IAC9BT,EAAOrF,KAAI,gBAAGqC,EAAH,EAAGA,MAAH,OAAeoD,IAAqBjC,EAAAA,GAAAA,IAAMnB,GAAQzS,OAF1D,cACCmW,EADD,yBAIEA,EAAUte,QAAO,SAACoW,GAAD,OAAaA,MAJhC,2C,yBAOA,SAAemI,GAAtB,qC,0CAAO,WAA0Bre,EAAOiI,GAAjC,mGAIagP,EAAAA,EAAAA,IAAajX,EAAOiI,GAJjC,OAIHiO,EAJG,sDAMHC,EAAe,EAAH,GANT,gCAQE,CAAED,QAAAA,EAASC,aAAAA,IARb,yD,yDClBD5T,IAAYC,EAAAA,EAAAA,IAAW,SAACH,GAAD,OAAWI,EAAAA,EAAAA,GCHzB,SAAgBJ,GAC7B,OAAOI,EAAAA,EAAAA,cAAaJ,EAAO,CAAC,QAAS,UAAW,CAC9Cic,aAAc,CACZjZ,MAAO,SAET,uBAAwB,CACtB4E,SAAU,WACVnF,QAAS,OACTiC,MAAO,WACPgD,OAAQ,WACR1D,WAAY,SACZD,eAAgB,SAChBf,MAjBoB,UAkBpBsE,gBAjB+B,UAkB/B9C,aAAc,OAEhB,8BAA+B,CAC7BoD,SAAU,WACVnF,QAAS,OACTiC,MAAO,WACPgD,OAAQ,WACR1D,WAAY,SACZD,eAAgB,SAChBf,MA1B2B,UA2B3BsE,gBA1BsC,UA2BtC9C,aAAc,SDtBiCnE,CAAOL,OAE7C,SAASiV,GAAT,GAAkD,IAAhCE,EAAgC,EAAhCA,IAAK+G,EAA2B,EAA3BA,KAAMxc,EAAqB,EAArBA,QAAYkQ,GAAS,aACzD9O,GAAMC,EAAAA,EAAAA,QAAOb,MACnB,OAAOiV,EACL,gBAAC,MAAD,QAAWA,IAAKA,GAASvF,IAEzB,gBAAC,KAAcA,EACb,gBAAC,KAAD,CAAOvE,KAAM6Q,EAAM7Z,UAAWvB,EAAI,eAAgBpB,MAWxDuV,GAAOlV,aAAe,CACpBmc,KAAM,OACN/G,IAAK,KACLzV,QAAS,M,2BE5BLyc,ICFoBC,KAAAA,MAAgB,CACxCte,KAAMse,KAAAA,OACN/K,IAAK+K,KAAAA,MAAgB,CACnBlK,KAAMkK,KAAAA,KACNhK,MAAOgK,KAAAA,KACP/J,OAAQ+J,KAAAA,KACRvL,QAASuL,KAAAA,OAEXze,MAAOye,KAAAA,OAAAA,WACPC,MAAOD,KAAAA,OACPE,UAAWF,KAAAA,KACXG,GAAIH,KAAAA,MAAgB,CAClB,WAAYA,KAAAA,QAAkBA,KAAAA,QAC9BI,kBAAmBJ,KAAAA,MAAgB,CACjCK,WAAYL,KAAAA,MAAgB,CAC1BM,KAAMN,KAAAA,QAAkBA,KAAAA,QACxBO,UAAWP,KAAAA,OACXQ,gBAAiBR,KAAAA,QAAkBA,KAAAA,QACnCS,WAAYT,KAAAA,QAAkBA,KAAAA,QAC9BU,aAAcV,KAAAA,SAEhBzc,GAAIyc,KAAAA,OACJW,MAAOX,KAAAA,SAETzc,GAAIyc,KAAAA,OACJY,aAAcZ,KAAAA,OACda,eAAgBb,KAAAA,OAChBc,OAAQd,KAAAA,OACRe,MAAOf,KAAAA,MAAgB,CACrBgB,QAAShB,KAAAA,OACTiB,OAAQjB,KAAAA,OACRkB,aAAclB,KAAAA,OACdmB,WAAYnB,KAAAA,OACZte,KAAMse,KAAAA,OACNoB,mBAAoBpB,KAAAA,SAEtBte,KAAMse,KAAAA,QAAkBA,KAAAA,YAILA,KAAAA,MAAgB,CACrCvJ,OAAQuJ,KAAAA,OACR/Q,KAAM+Q,KAAAA,OACNqB,SAAUrB,KAAAA,OACVze,MAAOye,KAAAA,OACPsB,MAAOtB,KAAAA,QAAkBA,KAAAA,UAGAA,KAAAA,MAAgB,CAEzCtR,KAAMsR,KAAAA,IAENtO,MAAOsO,KAAAA,OACPuB,aAAcvB,KAAAA,KAAAA,WACdwB,OAAQxB,KAAAA,KAAAA,cDpDkB1J,EAAAA,EAAAA,eAAc,CACxC5H,KAAM,KACNgD,MAAO,KACP6P,cAAc,EACdC,OAAQ,gBAGV,MAEO,SAASC,GAAT,GAAiD,IAAjB7f,EAAiB,EAAjBA,SAAU8f,EAAO,EAAPA,IAC/C,OACE,gBAAC3B,GAAoBvJ,SAArB,CAA8BtT,MAAOwe,GAClC9f,GECA,IAwBDkC,IAAYC,EAAAA,EAAAA,IAAW,SAACH,GAAD,OAAWI,EAAAA,EAAAA,GCvCzB,SAAgBJ,GAC7B,OAAOI,EAAAA,EAAAA,cAAaJ,EAAO,GAAI,CAC7B+d,aAAc,CACZhW,WAAY/H,EAAM6H,WAAWmW,MAAMjW,cDoCY1H,CAAOL,OAG/Cie,GAAY,eAGV,SAASC,GAAT,GAMZ,IALDzQ,EAKC,EALDA,YAKC,IAJDkG,WAAchW,EAIb,EAJaA,MAAO0e,EAIpB,EAJoBA,MACrBxI,EAGC,EAHDA,QACAiD,EAEC,EAFDA,WACAqH,EACC,EADDA,eAEQ5L,GAAkBvR,EAAAA,EAAAA,YAAWyR,IAA7BF,cACQ6L,GAAuBpd,EAAAA,EAAAA,YAAWmb,IAA1CyB,OACFhd,GAAeyd,EAAAA,EAAAA,IAAgB5Q,GAC/BlK,EAAUrD,KAChB,GAAwC1B,EAAAA,EAAAA,WAAS,GAA1C8f,EAAP,KAAqBC,EAArB,KACA,GAAkD/f,EAAAA,EAAAA,WAAS,GAApD6C,EAAP,KAA0BC,EAA1B,KACMkd,EA3C+B,SAAC,GAKlC,IAJJ1H,EAII,EAJJA,WACAvE,EAGI,EAHJA,cACA4L,EAEI,EAFJA,eACAC,EACI,EADJA,mBAEA,0CAAO,WAAOK,EAAYC,GAAnB,gFACL5H,GAAW,GACP6H,GAAAA,KAA2BF,GAC7BlM,EAAcqM,cAAcF,GAAY,GAEtCG,GAAAA,KAAkCJ,GACpClM,EAAcuM,qBAAqBJ,GAAY,GAN5C,SAQkCnM,EAAcwM,sBACnDN,EACAC,GAVG,uBAQaM,EARb,EAQGtQ,SARH,SAYC0P,EAAmBY,GAAY,GAZhC,OAaLlI,GAAW,GACXqH,EAAe,MAdV,4CAAP,wDAqC0Bc,CAAwB,CAChDnI,WAAAA,EACAvE,cAAAA,EACA4L,eAAAA,EACAC,mBAAAA,IAGF,GASIpd,EAAAA,EAAAA,YAAWO,GAAAA,IARbC,EADF,EACEA,UACAC,EAFF,EAEEA,KACAyd,EAHF,EAGEA,aACAvd,EAJF,EAIEA,QACA9B,EALF,EAKEA,MACA+B,EANF,EAMEA,SACAud,EAPF,EAOEA,eACAtd,EARF,EAQEA,YAoDF,OAjCAO,EAAAA,EAAAA,YAAU,WACRd,GAAqB,GACjBgd,IACFY,GAAa,GACbV,EAAkB7gB,EAAO0e,IAEvB5a,IAASwc,KACT5c,GAAmC,OAAdG,IAErBH,GAAqBG,GACvBgd,EAAkB7gB,EAAO0e,GAGvBhb,GAAmC,OAAdG,IACvBK,IACAP,GAAqB,IAEvB6d,EAAe,UACd,CACD9d,EACAG,EACA3B,EACAlC,EACA0e,EACAiC,EACAY,EACA5d,EACA6d,EACAX,EACA/c,EACAI,IAIA,gBAAC6J,EAAA,EAAD,CACE,cAtFmC,gBAuFnCzL,QAAM,EACNsC,QArDqB,WACvB4c,EAlC6B,UAqC3BR,GAAAA,KAA2BhhB,GAC3BkhB,GAAAA,KAAkClhB,GAElC4gB,GAAgB,GAElB,IAAMhW,EAAO,UAAH,QACD,OAAPsL,QAAO,IAAPA,OAAA,EAAAA,EAASxI,OAAQ1N,EADT,0BAEQiD,GAClBgB,EAAS2G,GACT5G,EAAQsc,MA0CN,gBAACpS,EAAA,EAAD,CACEC,mBAAiB,EACjBvI,QAAS,CAAE0E,QAAS1E,EAAQwa,eAF9B,UAMA,gBAAC,MAAD,OAaNG,GAAane,aAAe,CAC1B+W,WAAY,aACZqH,eAAgB,aAChBtK,QAAS,MEzJX,IAcA,GAde,SAAC7T,GACd,OAAOI,EAAAA,EAAAA,cAAaJ,EAAO,CAAC,cAAe,SAAU,CACnD,gBAAiB,CACfgD,MAAOhD,EAAMiD,QAAQ6K,MAAM3K,KAC3Bic,eAAgB,YAChB7X,WAAY,OACZkB,OAAQ,OACRH,OAAQ,UACRU,UAAW,OACXpB,SAAU,WCDV1H,IAAYC,EAAAA,EAAAA,IAAW,SAACH,GAAD,OAAWI,EAAAA,EAAAA,GAAaC,GAAOL,OAE7C,SAASqf,GAAT,GAAgD,IAAhBC,EAAgB,EAAhBA,aACvC/b,EAAUrD,KAEhB,OACE,gBAACwL,EAAA,EAAD,CACE,cARyC,sBASzCzL,QAAM,EACNsC,QAAS,kBAAM+c,GAAa,KAE5B,gBAACzT,EAAA,EAAD,CACEC,mBAAiB,EACjBvI,QAAS,CAAE0E,QAAS1E,EAAQwa,eAF9B,iB,4ECrBC,SAASwB,GAAiCC,GAAU,UACzD,OAAOC,MAAMC,QAAN,OAAcF,QAAd,IAAcA,GAAd,UAAcA,EAAUhD,yBAAxB,aAAc,EAA6BmD,gBAAgBjD,MAA3D,OACH8C,QADG,IACHA,GADG,UACHA,EAAUhD,yBADP,aACH,EAA6BmD,gBAC7B,QAACH,QAAD,IAACA,GAAD,UAACA,EAAUhD,yBAAX,aAAC,EAA6BmD,iBAG7B,SAASC,GAA8BJ,GAAU,QACtD,cAAOA,QAAP,IAAOA,GAAP,UAAOA,EAAUhD,yBAAjB,iBAAO,EAA6BmD,uBAApC,aAAO,EAA8C7C,aCExC,SAAS+C,GAAT,GAAoD,IAA/BpB,EAA+B,EAA/BA,WAAYpc,EAAmB,EAAnBA,UAAWyd,EAAQ,EAARA,KACjDzH,GAAU0H,EAAAA,EAAAA,YAAV1H,MACFhN,EAAOgN,IAAS2H,EAAAA,GAAAA,IAAkB3H,EAAOI,GAAAA,GAAAA,MAC/C,OACE,gCACGqH,EACC,qBACEzgB,OAAO,SACP2P,KAAMyP,EACNwB,IAAI,sBACJ,cAXiC,mBAajC,sBAAI5d,UAAWA,GAAYgJ,GAAQoT,IAGrC,wBAAMpc,UAAWA,GAAjB,IAA8BgJ,GAAQoT,EAAtC,MAYRoB,GAAU9f,aAAe,CACvBsC,UAAW,KACXyd,MAAM,GCID,IAOD5f,IAAYC,EAAAA,EAAAA,IAAW,SAACH,GAAD,OAAWI,EAAAA,EAAAA,GC9CzB,SAAgBJ,GAC7B,MAAO,CACL,0BAA2B,CACzByC,QAAS,OACTqB,cAAe,SACfoc,UAAW,aACXpd,OAAQ,QAEV,wBAAyB,CACvBH,QAAS,EACTG,OAAQ,EACRqd,WAAYngB,EAAM6H,WAAWuY,GAAGD,WAChCnQ,SAAU,YAEZ,gCAAiC,CAC/B+C,SAAU,EACV,QAAS,CACP1O,YAAa,QAEf,MAAO,CACLuD,SAAU,YACV9E,OAAQ,EACRud,SAAU,eAGd,uBAAwB,CACtBzY,SAAU,SACVnF,QAAS,OACTuB,WAAY,SACZuD,WAAY,8CACZ,0BAA2B,OAC3BvE,MAAO,cACP8P,YAAa,QAEfD,OAAQ,CACNC,YAAa,QAEf,mCAAoC,CAClCrQ,QAAS,OACTsB,eAAgB,SAChBoP,UAAW,UAEb,6BAA8B,CAC5BnQ,MAAO,OACPsd,oBAAqB,OACrB1Y,SAAU,OACVG,WAAY,MACZqX,eAAgB,aAElB,0BAA2B,CACzBxc,SAAU,OACVH,QAAS,OACTqB,cAAe,UAEjB,iCAAkC,CAChCqc,WAAYngB,EAAM6H,WAAW0Y,GAAGJ,WAChChN,UAAW,MACX5F,aAAc,GAEhB,4BAA6B,CAC3BvK,MA9DkB,UA+DlBiB,aAAc,SAEhB,+BAAgC,CAC9BjB,MAnEqB,UAoErB4E,SAAU,OACV5D,WAAY,cAEdwc,aAAc,CACZ5d,SAAU,cACVqB,aAAc,SACdxB,QAAS,OACT0Q,UAAW,aACXjD,WAAY,UAEduQ,kBAAmB,CACjBN,WAAYngB,EAAM6H,WAAWwH,KAAK8Q,WAClCvY,SAAU5H,EAAM6H,WAAWmW,MAAMpW,UAEnC8Y,sBAAuB,CACrBP,WAAYngB,EAAM6H,WAAWwH,KAAK8Q,WAClCvY,SAAU,aAEZ,4BAA6B,CAC3BN,gBAAiBtH,EAAMiD,QAAQkB,KAAKC,KACpCqE,OAAQ,OACRf,OAAQ,MACRhD,MAAO,QAETqZ,aAAc,CACZ4C,UAAW,GAEbC,QAAS,CACPne,QAAS,OACTsB,eAAgB,cAElB,mCAAoC,CAClCA,eAAgB,gBAChBW,MAAO,OACPic,UAAW,QAEb,8BAA+B,CAC7BzY,cAAe,OACflF,MAAOhD,EAAMiD,QAAQ6K,MAAM3K,KAC3BR,QAAS,SACT8F,OAAQ,OACRlB,WAAY,cACZ6X,eAAgB,YAChBxX,SAAU,OACVU,OAAQ,UACRU,UAAW,OACX6X,YAAa,WACb,UAAW,CACTvZ,gBAAiB,iBDnE4BjH,CAAOL,OAM7C,SAAS8gB,GAAT,GAKZ,QAJDrT,EAIC,EAJDA,YACAkG,EAGC,EAHDA,WACAoN,EAEC,EAFDA,iBACAC,EACC,EADDA,UAEMzd,EAAUrD,KACVY,GAAMC,EAAAA,EAAAA,QAAOwC,GACXgZ,EAA0B5I,EAA1B4I,GAAWkC,EAAe9K,EAAtBhW,MACNsjB,EAdD,SAA6BngB,GAClC,OAAO,kBACL,gBAACmU,GAAA,EAAD,CAAQ5S,UAAWvB,EAAI,UAAWoU,IAAI,+BAYjBgM,CAAoBpgB,GAErCqgB,EAAU,OAAG5E,QAAH,IAAGA,GAAH,UAAGA,EAAIC,yBAAP,iBAAG,EAAuBmD,uBAA1B,aAAG,EAAwCjD,KACrD0E,EAAK,OAAGD,QAAH,IAAGA,OAAH,EAAGA,EAAYnL,KAAI,SAAC0G,GAAD,MAAW,CACvCxK,OAAQwK,EAAK2E,SAAS,QACtBjP,QAASsK,EAAK2E,SAAS,SACvBhP,SAAUqK,EAAK2E,SAAS,UACxBxQ,UAAW6L,EAAK2E,SAAS,eAErBzgB,GAAeyd,EAAAA,EAAAA,IAAgB5Q,GAC/B6T,EAAa,OAAGF,QAAH,IAAGA,OAAH,EAAGA,EAAOpL,KAAI,SAAC0G,GAAD,OAAU6E,EAAAA,GAAAA,IAAoB7E,MACzD8E,EAAQ,CAAC,OAAQ,OAAQ,MAAO,QAAS,gBACzCC,EAAmB,OAAGH,QAAH,IAAGA,OAAH,EAAGA,EAAeI,MACzC,SAAC7S,EAAG8S,GAAJ,OAAUH,EAAMI,QAAQ/S,EAAExD,MAAQmW,EAAMI,QAAQD,EAAEtW,SAE9C4R,KAAiB4E,EAAAA,GAAAA,IAActF,KACjCuF,EAAAA,GAAAA,GAAO,IAAIC,MAAKF,EAAAA,GAAAA,IAActF,IAAM,iBAElCS,GAAe8E,EAAAA,GAAAA,GAAO,IAAIC,MAAKC,EAAAA,GAAAA,IAAgBzF,IAAM,UACrD0F,EFzED,SAAoCzC,GAAU,UACnD,OAAOC,MAAMC,QAAN,OAAcF,QAAd,IAAcA,GAAd,UAAcA,EAAUhD,yBAAxB,aAAc,EAA6BmD,iBAA3C,OACHH,QADG,IACHA,GADG,UACHA,EAAUhD,yBADP,aACH,EAA6BmD,gBAAgB,GAAG9C,WAD7C,OAEH2C,QAFG,IAEHA,GAFG,UAEHA,EAAUhD,yBAFP,aAEH,EAA6BmD,gBAAgB9C,WEsEhCqF,CAA2B3F,GACpC3W,GAAUrH,EAAAA,EAAAA,cAAVqH,MAMR,OACE,gBAAC,KAAD,CACEnE,KAAMuf,EACN5V,MAAO,CACL3I,QAAS,OACTuB,WAAY,SACZD,eAAgB,UAElB4C,QAASoa,EACT,4BAAoBtT,EAApB,UACA,6BAAqBA,EAArB,uBAEA,gBAAC,KAAD,CACEpL,UAAWkB,EAAQmD,MACnB,cA9DyC,yBAgEzC,gBAAC,KAAD,CAAWrE,UAAWvB,EAAI,iBAAkB,YAC1C,gBAACqhB,GAAA,EAAD,CAAMpS,WAAS,GACb,gBAACoS,GAAA,EAAD,CAAM9f,UAAWvB,EAAI,iBAAkB,SAAUiP,WAAS,GACxD,gBAAC,EAAAqS,qBAAD,CACEC,WAAY5D,EACZ6D,SAAU7D,GAEV,gBAAC0D,GAAA,EAAD,CACE9f,UAAWvB,EAAI,iBAAkB,oBACjCiP,WAAS,EACTwS,MAAI,EACJC,GAAI,GACJC,GAAI,GAEJ,gBAAC,EAAAC,MAAD,CACEC,WAAYlE,EACZmE,SAAU/K,GAAAA,GAAAA,SACVoJ,eAAgBA,KAGpB,gBAACkB,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,GAAIC,GAAI,IACrB,gBAAC5C,GAAD,CACExd,UAAWvB,EAAI,iBAAkB,cACjC2d,WAAYA,EACZqB,MAAI,OAMZ,gBAACqC,GAAA,EAAD,CAAM9f,UAAWvB,EAAI,iBAAkB,WAAYiP,WAAS,GAC1D,gBAACoS,GAAA,EAAD,CAAMU,QAAQ,gBAAgB9S,WAAS,EAACwS,MAAI,GAC1C,sBAAIlgB,UAAWvB,EAAI,iBAAkB,mBAArC,WAYF,gBAACqhB,GAAA,EAAD,CAAMI,MAAI,GACR,sBAAIlgB,UAAWvB,EAAI,iBAAkB,eACrC,gBAACwK,EAAA,EAAD,CAAMwX,OAAK,EAAC1X,MAAO,CAAEjC,SAAU,YAA/B,OACGsY,QADH,IACGA,OADH,EACGA,EAAqBzL,KAAI,gBAAG3K,EAAH,EAAGA,KAAM6Q,EAAT,EAASA,KAAM6G,EAAf,EAAeA,YAAf,OACxB,gBAACrX,EAAA,EAAD,CAAUC,IAAKN,EAAMD,MAAO,CAAEzI,QAAS,QACrC,gBAACiJ,EAAA,EAAD,CAAcrI,QAAS,CAAEI,KAAMJ,EAAQid,eACrC,gBAAC,KAAD,CACEnV,KAAM6Q,EACN7Z,UAAWvB,EAAI,iBAAkB,mBAGrC,gBAAC+K,EAAA,EAAD,CACEtI,QAAS,CACPI,KAAMJ,EAAQwa,aACd9V,QAAS1E,EAAQkd,kBACjBjY,UAAWjF,EAAQmd,uBAErB/U,IAAKN,EACLpD,QAASoD,EACT7C,UAAWua,UAMrB,gBAACZ,GAAA,EAAD,CAAMI,MAAI,GACR,sBAAIlgB,UAAWvB,EAAI,iBAAkB,mBAArC,eAGA,sBAAIuB,UAAWvB,EAAI,iBAAkB,eACrC,yBAAIkc,IAEN,gBAACmF,GAAA,EAAD,CAAMI,MAAI,GACR,sBAAIlgB,UAAWvB,EAAI,iBAAkB,mBAArC,WAGA,sBAAIuB,UAAWvB,EAAI,iBAAkB,eACrC,uBAAKuB,UAAWvB,EAAI,uBACjB2e,MAAMC,QAAQuC,GACb,gBAAC3W,EAAA,EAAD,CAAMwX,OAAK,EAAC1X,MAAO,CAAEjC,SAAU,YAA/B,OACG8Y,QADH,IACGA,OADH,EACGA,EAAUjM,KAAI,SAAC4K,GAAD,OACb,gBAAClV,EAAA,EAAD,CAAUC,IAAKiV,EAASve,UAAWvB,EAAI,cACrC,wBAAMuB,UAAWvB,EAAI,YAClB8f,EADH,IACY,gBAAC,KAAD,CAAavd,YAAaud,UAM5C,wBAAMve,UAAWvB,EAAI,YAClBmhB,EADH,IACa,gBAAC,KAAD,CAAa5e,YAAa4e,OAK7C,gBAACE,GAAA,EAAD,CAAMI,MAAI,GACPtF,GACC,gBAACkF,GAAA,EAAD,CAAMpS,WAAS,GACb,sBAAI1N,UAAWvB,EAAI,iBAAkB,mBAArC,mBAUA,sBAAIuB,UAAWvB,EAAI,iBAAkB,eACrC,4BACE,gBAAC+e,GAAD,CAAWpB,WAAYA,IADzB,oBAEmB,8BAASxB,GAF5B,QASR,gBAACkF,GAAA,EAAD,CACEpS,WAAS,EACT1N,UAAWvB,EAAI,iBAAkB,qBAEjC,gBAACqhB,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,GAAIC,GAAI,GACrB,gBAAC,KAAD,CACEpgB,UAAWvB,EAAI,iBAAkB,eACjCpB,QAAQ,YACR6C,QAtJK,YACnBygB,EAAAA,GAAAA,IAAkBzG,EAAI,CAAE3W,MAAAA,IACxBmb,KAqJc,cA9LhB,0BA0Lc,2BAMuBngB,KAIzB,gBAACuhB,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,GAAIC,GAAI,GACrB,gBAAC,KAAD,CACE3kB,KAAK,SACLyE,QAASwe,EACT,cA1MqC,wBAuMvC,cElOT,IACD7gB,IAAYC,EAAAA,EAAAA,IAAW,SAACH,GAAD,OAAWI,EAAAA,EAAAA,GCjBzB,SAAgBJ,GAC7B,OAAOI,EAAAA,EAAAA,cAAaJ,EAAO,CAAC,SAAU,CACpC0C,WAAY,CACVC,QAAS,EACTC,SAAU,eAEZC,SAAU,CACRC,OAAQ9C,EAAM+C,QAAQ,IACtBC,MAAOhD,EAAMiD,QAAQC,KAAKC,MAE5BlD,OAAQ,CACNgjB,WAAY,EACZve,MAAO,WACPgD,OAAQ,WACR1E,MAAOhD,EAAMiD,QAAQsF,KAAKC,UAC1BlB,gBAAiB,cACjBmB,OAAQ,OACRjE,aAAc,MACd1B,OAAQ,EACRH,QAAS,EACT2F,OAAQ,UACR,WAAY,CACVtF,MAAOhD,EAAMiD,QAAQuF,UAAU0a,aAC/B5b,gBAAiBtH,EAAMiD,QAAQkB,KAAK,OAGxC4Z,aAAc,CACZhW,WAAY,KAEdob,eAAgB,CACd7b,gBAAiBtH,EAAMiD,QAAQkB,KAAK,KACpCyD,SAAU,UACVG,WAAY,IACZqb,cAAe,EACfC,WAAY,OACZ3e,MAAO,OACPgD,OAAQ,OACR/E,QAAS3C,EAAM+C,QAAQ,GAAK,KAC5B4d,UAAW,GAEbhjB,MAAO,CACLgjB,UAAW,UACXpT,aAAc,WAEhB+V,sBAAuB,CACrBjf,YAAa,EACbJ,aAAc,GAEhBsf,mBAAoB,CAClBrT,WAAY,GAEdsT,SAAU,CACRtT,WAAY,KDnCmC7P,CAAOL,OAE7C,SAASyjB,GAAT,GAMZ,IALDhW,EAKC,EALDA,YACAkG,EAIC,EAJDA,WACAE,EAGC,EAHDA,QACAiD,EAEC,EAFDA,WACAqH,EACC,EADDA,eAEM5a,EAAUrD,KACVY,GAAMC,EAAAA,EAAAA,QAAOb,MACnB,GAAwC1B,EAAAA,EAAAA,UAAS,MAA1CklB,EAAP,KAAqBC,EAArB,KACA,GAAkCnlB,EAAAA,EAAAA,WAAS,GAApCwiB,EAAP,KAAkB1B,EAAlB,KACQ3hB,EAAcgW,EAAdhW,MAAO4e,EAAO5I,EAAP4I,GAOTxW,EAAc,WAClB4d,EAAgB,MAChBrE,GAAa,IAGTsE,EAAW/d,QAAQ6d,GACnB/jB,EAAKikB,EAAW,iCAA8B9d,EAEpD,OACE,gCACE,0BACE,cAhC+B,cAiC/BhI,KAAK,SACLuE,UAAWkB,EAAQtD,OACnBsC,QAnBc,SAACtD,GACnB0kB,EAAgB1kB,EAAMsL,iBAoBlB,qBAAGlI,WAAWC,EAAAA,EAAAA,GAAKxB,EAAI,aAAcA,EAAI,YAE3C,gBAAC2F,EAAA,GAAD,CACE9G,GAAIA,EACJ8B,KAAMmiB,EACN1e,SAAUwe,EACV/c,QAASZ,EACTa,aAAc,CACZC,SAAU,SACVC,WAAY,UAEdC,gBAAiB,CACfF,SAAU,MACVC,WAAY,WAGd,gBAACwE,EAAA,EAAD,CAAM/H,QAAS,CAAEI,KAAMJ,EAAQigB,WAC7B,gBAAC9X,EAAA,EAAD,CACEnI,QAAS,CACPI,KAAMJ,EAAQggB,mBACdM,QAAStgB,EAAQ+f,wBAGnB,gBAACzX,EAAA,EAAD,CACEC,mBAAiB,EACjBvI,QAAS,CAAEI,KAAMJ,EAAQ4f,iBAEzB,oCACA,qBAAG9gB,UAAWkB,EAAQ5F,OAAQA,KAGjC4e,EACC,gCACE,gBAAC8C,GAAD,CACE5R,YAAaA,EACbkG,WAAYA,EACZ2L,aAAcA,IAEhB,gBAACwB,GAAD,CACEE,UAAWA,EACXvT,YAAaA,EACbkG,WAAYA,EACZoN,iBAAkBhb,KAItB,gBAACmY,GAAD,CACEzQ,YAAaA,EACboG,QAASA,EACTF,WAAYA,EACZmD,WAAYA,EACZqH,eAAgBA,OAkB9BsF,GAAuB1jB,aAAe,CACpC0N,YAAa,KACbqJ,WAAY,aACZjD,QAAS,KACTsK,eAAgB,cExGlB,IAAMje,IAAYC,EAAAA,EAAAA,IAAW,SAACH,GAAD,OAAWI,EAAAA,EAAAA,GCxBzB,SAAgBJ,GAC7B,MAAO,CACL8jB,uBAAwB,CACtBnhB,QAAS3C,EAAM+C,QAAQ,GAAK,KAC5BC,MAAO,OACP0B,MAAO,OACPjC,QAAS,OACTuB,WAAY,SACZF,cAAe,OAEjB+O,OAAQ,CACNC,YAAa9S,EAAM+C,QAAQ,KAC3B2B,MAAO,WACPgD,OAAQ,WACRE,SAAU,YAEZwF,WAAY,CACVrE,aAAc,WACdhB,WAAY,IACZtF,QAAS,OACTmF,SAAU,OACVuY,WAAY,UACZnX,UAAW,OACXjF,eAAgB,gBAChBC,WAAY,SACZ+O,SAAU,EACVjP,cAAe,OAEjBigB,UAAW,CACT3a,WAAY,SACZzG,QAAS3C,EAAM+C,QAAQ,IACvBC,MAAOhD,EAAMiD,QAAQsF,KAAKC,UAC1BZ,SAAU,YACVG,WAAY,MDTmC1H,CAAOL,OAI7C,SAASgkB,GAAT,GAMZ,IAmBwBC,EAxBzBxW,EAKC,EALDA,YACAkG,EAIC,EAJDA,WACAE,EAGC,EAHDA,QACAiD,EAEC,EAFDA,WACAqH,EACC,EADDA,eAEM5a,EAAUrD,KAERvC,EAAUgW,EAAVhW,MA8BFumB,GAdmBD,EAcYtQ,GAbfhW,QAAUghB,GAAAA,GACrB,CACLtT,KAAM,UAIN4Y,EAAgBtmB,QAAUkhB,GAAAA,GACrB,CACLxT,KAAM,oBAGHwI,EAGHsQ,EA7BiB,SAACF,GACtB,OAAIA,EAAgBtmB,QAAUghB,GAAAA,GACrByF,GAAAA,GAAAA,iBAGLH,EAAgBtmB,QAAUkhB,GAAAA,GACrBwF,GAAAA,GAAAA,iBAGF,CACLlP,IAAG,OAAEtB,QAAF,IAAEA,OAAF,EAAEA,EAAShB,QAmBEyR,CAAe3Q,GAEnC,OACE,uBAAKtR,UAAWkB,EAAQugB,wBACtB,gBAAC,IAAD,QAAQzhB,UAAWkB,EAAQsP,OAAQqC,IAAKvX,GAAWwmB,IACnD,gBAAC/O,EAAA,EAAD,CACE7R,QAAS,CAAEya,MAAOza,EAAQ6J,YAC1B,cAjDgC,eAkDhC/K,UAAWkB,EAAQ6J,YAElB8W,GAAe7O,EAAAA,EAAAA,IAAmB6O,GAAgBvmB,GAEnDgW,EAAW2I,UAQT,KAPF,gBAACmH,GAAD,CACEhW,YAAaA,EACboG,QAASA,EACTF,WAAYA,EACZmD,WAAYA,EACZqH,eAAgBA,KAc1B6F,GAAoBjkB,aAAe,CACjC0N,YAAa,KACbqJ,WAAY,aACZqH,eAAgB,aAChBtK,QAAS,MElFX,IAAM3T,IAAYC,EAAAA,EAAAA,IAAW,SAACH,GAAD,OAAWI,EAAAA,EAAAA,GCtBzB,SAAgBJ,GAG7B,MAAO,CACL,kBAAmB,CACjByE,SAAU,OACV6C,gBAL6B,UAM7B3E,QAAS,GAEXqQ,OAAQ,CACNrQ,QAAS,EACTsB,aAAcjE,EAAM+C,QAAQ,KAE9BkQ,SAAU,CACRvO,MAAO,OACPqE,aAAc,aACdpG,QAAS3C,EAAM+C,QAAQ,GAAK,MAE9BmQ,aAAc,CACZnK,aAAc,aACdnB,SAAU,QAEZ,cAAe,CACbG,WAAY,OACZoL,UAAW,SAEb+I,KAAM,CACJjP,WAAY,UAEdsX,iBAAkB,CAChB7f,MAAO,OACPsE,UAAW,UAEboK,QAAS,CACPyN,YAAa,SACb/d,OAAQ9C,EAAM+C,QAAQ,IAExBsQ,UAAW,CACTvK,UAAW,aACXxB,gBArCoB,UAsCpBxE,OAAQ9C,EAAM+C,QAAQ,EAAG,KACzBwK,aAAcvN,EAAM+C,QAAQ,IAC5B2E,OAAQ,OAEV8c,sBAAuB,CACrB/hB,QAAS,OACTuB,WAAY,WDxBmC3D,CAAOL,OAO7C,SAASwT,GAAT,GAAqC,IAAdG,EAAc,EAAdA,WAC9BpQ,EAAUrD,KAEH0F,GACTrH,EAAAA,EAAAA,cADFD,QAAWsH,MAEP9E,GAAMC,EAAAA,EAAAA,QAAOb,MACGgU,GAAYlT,EAAAA,EAAAA,YAAWmT,EAAAA,gBAArCC,aACAzW,EAAsCgW,EAAtChW,MAAO0T,EAA+BsC,EAA/BtC,IAAKwC,EAA0BF,EAA1BE,QAASC,EAAiBH,EAAjBG,aAC7B,GAAgDtV,EAAAA,EAAAA,WAAS,GAAlDimB,EAAP,KAAyBC,EAAzB,KACA,GAAwClmB,EAAAA,EAAAA,UAASqV,GAA1CqQ,EAAP,KAAqBS,EAArB,KACA,GAAkDnmB,EAAAA,EAAAA,UAASsV,GAApD8Q,EAAP,KAA0BC,EAA1B,KACA,GAA8BrmB,EAAAA,EAAAA,WAAS,GAAhC6L,EAAP,KAAgByM,EAAhB,KACMrJ,GAAc8G,EAAAA,EAAAA,IAAaL,GACjC,GAAsC1V,EAAAA,EAAAA,UAAS6S,GAAxCyT,EAAP,KAAoB3G,EAApB,MAEA/b,EAAAA,EAAAA,YAAU,WACJzE,IAAUghB,GAAAA,IACZgG,EAAgB,CAAEtZ,KAAM0Z,GAAAA,KAEtBpnB,IAAUkhB,GAAAA,IACZ8F,EAAgB,CAAEtZ,KAAM2Z,GAAAA,OAEzB,CAACrnB,IAEJ,IAAMgX,EAAgB,mCAAG,wGAEfqH,GAAWre,EAAOiI,GAFH,gBACNgW,EADM,EACf/H,QAAuCoR,EADxB,EACUnR,aAE7B8H,IACF+I,EAAgB9Q,GAChB6Q,GAAoB,IAElB5Q,IACF+Q,EAAqBI,GACrBP,GAAoB,IATC,2CAAH,qDAatB,OAAKI,EAEDza,EAEA,uBAAKhI,UAAWkB,EAAQghB,kBACtB,gBAACxP,GAAA,EAAD,CACEC,KAAM,GACN3S,UAAWvB,EAAI,WACfkC,MAAM,aAKV4hB,EAEA,uBAAKviB,UAAWvB,EAAI,oBAClB,gBAAC+T,GAAA,EAAD,CACEtR,QAAS,CACPI,KAAMJ,EAAQ0P,SACdhF,QAAS1K,EAAQ2P,aACjBF,OAAQzP,EAAQyP,OAChBkJ,KAAM3Y,EAAQ2Y,MAEhBpH,SAAS,UACT9B,OAEEyR,EACE,gBAAC1P,GAAA,EAAD,CACE,cArE6B,oBAsE7BC,KAAM,GACN3S,UAAWvB,EAAI,WACfkC,MAAM,YAGR,gBAACU,GAAA,EAAD,CACE,cA7E4B,mBA8E5BrB,UAAWvB,EAAI,eACfkC,MAAM,UACNgS,KAAK,QACLzS,QAAS,WACPmiB,GAAoB,GACpBnY,WAAWoI,EAAkB,OAPjC,cAzEuB,+BA0F7B,uBAAKtS,UAAWkB,EAAQ8P,YACxB,gBAAC2Q,GAAD,CACEvW,YAAaA,EACbkG,WAAYA,EACZE,QAASqQ,EACTpN,WAAYA,EACZqH,eAAgBA,KAMnB+F,GAAiBU,EAkBpB,gBAACZ,GAAD,CACEvW,YAAaA,EACbkG,WAAYA,EACZE,QAASqQ,EACTpN,WAAYA,EACZqH,eAAgBA,IArBhB,uBAAK9b,UAAWkB,EAAQihB,uBACtB,gBAACrZ,EAAA,EAAD,CACE,cA3GsC,uBA4GtC9I,UAAWkB,EAAQsP,OACnBnT,QAAQ,SACRgF,MAAO,GACPgD,OAAQ,KAEV,uBAAKrF,UAAWkB,EAAQ6J,YACtB,gBAACjC,EAAA,EAAD,CAAUzL,QAAQ,OAAOgF,MAAO,QA1Ef,KA+F3B8O,GAAYzT,aAAe,G,sCEnHZ,SAASmlB,KACtB,IAAQ3S,GAAkBvR,EAAAA,EAAAA,YAAWyR,IAA7BF,cACR,GAAsC/T,EAAAA,EAAAA,UAAS,MAAxClB,EAAP,KAAoBiY,EAApB,KAEsBrB,GAAYlT,EAAAA,EAAAA,YAAWmT,EAAAA,gBAArCC,aAGR,EC9Ca,SAA0C+Q,GACvD,OAAsC3mB,EAAAA,EAAAA,UAAS,MAAxClB,EAAP,KAAoBiY,EAApB,KACA,GAAgD/W,EAAAA,EAAAA,UAAS,MAAlD4mB,EAAP,KAAyBC,EAAzB,KACQzf,GAAUrH,EAAAA,EAAAA,cAAVqH,MAgCR,OA/BAxD,EAAAA,EAAAA,YAAU,WAAM,SAKCkjB,EALD,0EAKd,WAA+B/I,GAA/B,iGAE2BgJ,EAAAA,GAAAA,IAAmBhJ,EAAI,CAAE3W,MAAAA,IAFpD,cAEU8I,EAFV,yBAGWA,GAHX,yDAKW,MALX,0DALc,sBACTyW,GAYL,iBAAC,gHAEwBK,EAAAA,GAAAA,IAAkBL,EAAa,CAAEvf,MAAAA,IAFzD,cAES6L,EAFT,gBAG0BoK,QAAQC,IAC7BrK,EAAOuE,IAAP,mCAAW,WAAOuG,GAAP,iFACe+I,EAAgB/I,GAD/B,iBAEMkJ,OAAO7nB,OAFb,yCAGA2e,GAHA,gCAKF,MALE,2CAAX,wDAJL,OAGSmJ,EAHT,OAYGnQ,EAAemQ,EAASjoB,QAAO,SAAC8e,GAAD,OAAe,OAAPA,MAZ1C,kDAcG8I,EAAoB,EAAD,IAdtB,yDAAD,GAXE9P,EAAe,QA4BhB,CAAC4P,EAAavf,IACV,CAAEtI,YAAAA,EAAa8nB,iBAAAA,GDYpBO,EAHiBpR,EAAAA,EAAAA,IAAaL,IAEX0R,EAArB,EAAQtoB,YAGFuoB,GAA+BC,EAAAA,EAAAA,UACnC,kBACEF,EA/CmC,SAACA,GACxC,OAAKA,EACwBA,EAAwB5P,KAAI,SAACuG,GAexD,MAAO,CACLlL,IAfiB,CACjBa,KAAMqN,GAAiChD,GAAIG,KAAKqJ,MAAK,SAACC,GAAD,OACnDA,EAAG3E,SAAS,WAEdjP,MAAOmN,GAAiChD,GAAIG,KAAKqJ,MAAK,SAACC,GAAD,OACpDA,EAAG3E,SAAS,YAEdhP,OAAQkN,GAAiChD,GAAIG,KAAKqJ,MAAK,SAACC,GAAD,OACrDA,EAAG3E,SAAS,aAEdxQ,QAAS0O,GAAiChD,GAAIG,KAAKqJ,MAAK,SAACC,GAAD,OACtDA,EAAG3E,SAAS,eAKd9E,GAAAA,MAI+CvG,KAAI,YAAiB,IAAd3E,EAAc,EAAdA,IAAKkL,EAAS,EAATA,GAC7D,MAAO,CACLze,KAAM,QACNuT,IAAAA,EACA1T,MAAOiiB,GAA8BrD,GACrCF,OAAO4J,EAAAA,GAAAA,IAA0B5U,EAAK,QACtCkL,GAAAA,MA5BiC,GA+C7B2J,CAAiCN,GACjC,KACN,CAACA,IAmBH,OAhBAxjB,EAAAA,EAAAA,YAAU,WACHmQ,EAKLA,EACG4T,+BACA1X,MAAK,SAACgH,GACLF,EAAe,GAAD,gBACTE,IADS,QAEToQ,QATPtQ,EAAe,QAYhB,CAAChD,EAAesT,IAEZ,CACLvoB,YAAAA,GE7EG,IAAM8oB,GAA4B,CACvC9oB,YAAa,GACb+oB,gBAAiB,GAEjBC,mBAAoB,aACpBC,eAAgB,GAEhBC,kBAAmB,aACnBC,aAAa,EAEbC,eAAgB,cAGZC,IAAqBjU,EAAAA,EAAAA,eAAc0T,IAEzC,SAASQ,GAAT,GAAkD,IAAZ5oB,EAAY,EAAZA,SAC5BV,EAAgB4nB,KAAhB5nB,YACR,GAA8CkB,EAAAA,EAAAA,UAAS,IAAhD6nB,EAAP,KAAwBC,EAAxB,KACA,GAA4C9nB,EAAAA,EAAAA,UAAS,IAA9C+nB,EAAP,KAAuBC,EAAvB,KACA,GAAsChoB,EAAAA,EAAAA,WAAS,GAAxCioB,EAAP,KAAoBC,EAApB,KACA,OACE,gBAACC,GAAmB/T,SAApB,CACEtT,MAAO,CACLhC,YAAAA,EACA+oB,gBAAAA,EACAC,mBAAAA,EACAC,eAAAA,EACAC,kBAAAA,EACAC,YAAAA,EACAC,eAAAA,IAGD1oB,GASP4oB,GAA2B7mB,aAAe,CACxC/B,SAAU,MAIZ,U,YCrCA,IAAMkC,IAAYC,EAAAA,EAAAA,IAAW,SAACH,GAAD,OAAWI,EAAAA,EAAAA,GCVzB,SAAgBJ,GAC7B,OAAOI,EAAAA,EAAAA,cAAaJ,EAAO,CAAC,SAAU,CACpCH,MAAO,CACL+H,SAAU5H,EAAM6H,WAAWgf,GAAGjf,SAC9BG,WAAY/H,EAAM6H,WAAWG,eAC7B+K,SAAU,GAEZ+T,gBAAiB,CACfrkB,QAAS,OACTqB,cAAe,MACfE,WAAY,SACZuJ,aAAcvN,EAAM+C,QAAQ,KAC5B,OAAQ,CACNJ,QAAS,EACTG,OAAQ,IAGZikB,cAAe,CACbriB,MAAO,OACPZ,cAAe,UAEjBif,YAAa,CACXnb,SAAU,aAEZof,wBAAyB,CACvBvkB,QAAS,OACTqB,cAAe,MACfE,WAAY,UAEdkY,KAAM,CACJvZ,QAAS3C,EAAM+C,QAAQ,GACvByB,aAAc,MACdsO,YAAa9S,EAAM+C,QAAQ,KAC3B6E,SAAU5H,EAAM6H,WAAWof,GAAGrf,UAEhCsf,WAAY,CACVlkB,MAAOmkB,GAAAA,GAAAA,QAAAA,UACP7f,gBAAiB6f,GAAAA,GAAAA,QAAAA,qBAEnBC,YAAa,CACXpkB,MAAOmkB,GAAAA,GAAAA,QAAAA,UACP7f,gBAAiB6f,GAAAA,GAAAA,QAAAA,qBAEnBE,WAAY,CACVrkB,MAAOmkB,GAAAA,GAAAA,QAAAA,UACP7f,gBAAiB6f,GAAAA,GAAAA,QAAAA,qBAEnBG,aAAc,CACZtkB,MAAOmkB,GAAAA,GAAAA,OAAAA,UACP7f,gBAAiB6f,GAAAA,GAAAA,OAAAA,uBDvC8B9mB,CAAOL,OAE7C,SAASunB,GAAT,GAAwD,IAAhCvpB,EAAgC,EAAhCA,SAAUF,EAAsB,EAAtBA,KAAM0pB,EAAgB,EAAhBA,aAC/C1mB,GAAMC,EAAAA,EAAAA,QAAOb,MAEbqD,EAAUrD,KAEhB,EAMIinB,GAAAA,GAAkBrpB,GALpB2pB,EADF,EACEA,YACAC,EAFF,EAEEA,cACAxL,EAHF,EAGEA,KACAyL,EAJF,EAIEA,cACAC,EALF,EAKEA,qBAGF,OACE,uBAAKvlB,UAAWkB,EAAQujB,iBACtB,qBAAGzkB,WAAWC,EAAAA,EAAAA,GAAKxB,EAAIob,GAAOpb,EAAI,QAASA,EAAI6mB,MAC/C,uBAAKtlB,UAAWkB,EAAQwjB,eACtB,uBAAK1kB,UAAWkB,EAAQyjB,yBACtB,qBAAG3kB,UAAWkB,EAAQ1D,OACnB2nB,EAAeC,EAAcC,GAE/B1pB,GAEH,wBAAMqE,UAAWkB,EAAQwf,aACvB,gBAAC6E,EAAD,SAaVL,GAAaxnB,aAAe,CAC1BynB,cAAc,EACdxpB,SAAU,M,4BE5CL,IAEDkC,IAAYC,EAAAA,EAAAA,IAAW,SAACH,GAAD,OAAWI,EAAAA,EAAAA,GCVzB,SAAgBJ,GAC7B,OAAOI,EAAAA,EAAAA,cAAaJ,EAAO,CAAC,QAAS,SAAU,CAC7C6nB,mBAAoB,CAClBplB,QAAS,OACTK,OAAQ9C,EAAM+C,QAAQ,GAAK,KAC3B0F,OAAQ,aAAF,OAAezI,EAAMiD,QAAQkB,KAAKC,MACxCI,aAAc,OACdkD,OAAQ,UAEVogB,YAAa,CACXlgB,SAAU,YACVlD,MAAO,OACPqjB,KAAM,UACNhgB,WAAY,IACZ/E,MAAOhD,EAAMiD,QAAQgF,QAAQM,MAE/Byf,WAAY,CACVpgB,SAAU5H,EAAM6H,WAAWmW,MAAMpW,YDPcvH,CAAOL,OAE7C,SAASioB,GAAT,GAAiD,IAAtBC,EAAsB,EAAtBA,mBAClCpnB,GAAMC,EAAAA,EAAAA,QAAOb,MAEbqD,EAAUrD,KAChB,OACE,uBAAKmC,UAAWkB,EAAQskB,oBACtB,gBAACM,GAAA,EAAD,CAAYrqB,KAAK,SAAS,aAAW,UACnC,qBACEuE,WAAWC,EAAAA,EAAAA,GAAKxB,EAAI,eAAgBA,EAAI,QAASyC,EAAQykB,YACzD,aAAW,YAGf,gBAACI,GAAA,EAAD,CACE7kB,QAAS,CAAEI,KAAMJ,EAAQukB,aACzB7gB,YAAY,0BACZ+J,WAAY,CACV,cApB8B,eAqB9B,aAAc,0BACd9S,SAAUgqB,MAWpBD,GAAgBloB,aAAe,CAC7BmoB,mBAAoB,c,gCE7BP,SAASG,GAAkBtQ,GACxC,IAAQnS,GAAUrH,EAAAA,EAAAA,cAAVqH,MACF0iB,EAZkB,SAACvQ,GACzB,IAAIuQ,EACJ,IACEA,GAAiB9O,EAAAA,GAAAA,IAAMzB,GACvB,SACAuQ,EAAiB,KAEnB,OAAOA,EAKgBC,CAAkBxQ,GACzC,OAAOyQ,EAAAA,GAAAA,IAAO,CAAC,UAAWF,IAAb,iBAA8B,uFACpCA,EADoC,yCACb,MADa,uBAEnB7M,GAAqB6M,EAAgB1iB,GAFlB,cAEnCiO,EAFmC,yBAGlCA,GAHkC,4CCU7C,IAAM3T,IAAYC,EAAAA,EAAAA,IAAW,SAACH,GAAD,OAAWI,EAAAA,EAAAA,GCpBzB,SAAgBJ,GAC7B,OAAOI,EAAAA,EAAAA,cAAaJ,EAAO,CAAC,QAAS,UAAW,CAC9CyoB,aAAc,CACZhmB,QAAS,OACTqB,cAAe,MACfnB,QAAS,GAEXmhB,uBAAwB,CACtBrhB,QAAS,OACTuB,WAAY,UAEd6O,OAAQ,CACNnO,MAAO,WACPgD,OAAQ,WACR5E,OAAQ9C,EAAM+C,QAAQ,EAAG,KAE3BqK,YAAY,QACV+S,WAAYngB,EAAM6H,WAAWwH,KAAK8Q,WAClCpY,WAAY/H,EAAM6H,WAAWwH,KAAKtH,YACjC/H,EAAM4D,YAAYC,GAAG,MAAQ,CAC5BjB,SAAU,UAGd3C,OAAQ,CACN0C,QAAS3C,EAAM+C,QAAQ,GAAK,GAC5B0E,UAAW,SACX3E,OAAQ9C,EAAM+C,QAAQ,EAAG,KAE3B8kB,oBAAoB,QAClBplB,QAAS,OACTgG,OAAQ,aAAF,OAAezI,EAAMiD,QAAQkB,KAAKC,MACxCI,aAAc,OACdkD,OAAQ,SACR9E,SAAU,qBACT5C,EAAM4D,YAAYC,GAAG,MAAQ,CAC5BjB,SAAU,UAGdklB,YAAa,CACXpgB,OAAQ,OACRE,SAAU,YACVlD,MAAO,OACPyb,WAAYngB,EAAM6H,WAAWwH,KAAK8Q,WAClCpY,WAAY/H,EAAM6H,WAAWwH,KAAKtH,WAClC/E,MAAOhD,EAAMiD,QAAQgF,QAAQM,KAC7B5F,QAAS3C,EAAM+C,QAAQ,KAEzB2lB,yBAA0B,CACxBjmB,QAAS,OACTuB,WAAY,UAEd2kB,WAAY,CACVlmB,QAAS,OACTiC,MAAO,WACPgD,OAAQ,WACR1D,WAAY,SACZD,eAAgB,SAChBf,MA/DoB,UAgEpBsE,gBA/D+B,UAgE/B9C,aAAc,MACd1B,OAAQ9C,EAAM+C,QAAQ,EAAG,KAE3B6lB,kBAAmB,CACjBnmB,QAAS,OACTiC,MAAO,WACPgD,OAAQ,WACR1D,WAAY,SACZD,eAAgB,SAChBf,MAvE2B,UAwE3BsE,gBAvEsC,UAwEtC9C,aAAc,MACd1B,OAAQ9C,EAAM+C,QAAQ,EAAG,ODnDsB1C,CAAOL,OACtD6oB,GAAkB,uCAGXvV,GAA2B,cAKlCwV,GAAoB,mCAAG,WAAOrK,EAAYpG,EAAOzS,GAA1B,yGAGHgP,EAAAA,EAAAA,IAAa6J,EAAY7Y,GAHtB,QAGnBiO,EAHmB,SAKfxI,EAAwBwI,EAAxBxI,KAAMwH,EAAkBgB,EAAlBhB,OAAQlV,EAAUkW,EAAVlW,MACtBorB,GAAW5P,EAAAA,GAAAA,IACTd,GACA,SAACgB,GAAD,OAAOsB,EAAAA,GAAAA,IAAkBtB,EAAGZ,GAAAA,GAAAA,KAAWpN,MACvC,SAACgO,GAAD,OAAOC,EAAAA,GAAAA,IAAOD,EAAGwP,GAAiBlrB,MAEhCkV,IACFkW,GAAWzP,EAAAA,GAAAA,IAAOyP,EAAUlR,GAAAA,GAAAA,SAAgBhF,KAG9CkW,GAAWzP,EAAAA,GAAAA,IAAOjB,EAAOwQ,GAAiBpK,GAfnB,gDAkBzBsK,GAAWzP,EAAAA,GAAAA,IAAOjB,EAAOwQ,GAAiBpK,GAlBjB,iCAoBpBsK,GApBoB,yDAAH,0DAuBX,SAASC,GAAT,GAKZ,IAJDC,EAIC,EAJDA,MACAC,EAGC,EAHDA,oBACAC,EAEC,EAFDA,wBACArrB,EACC,EADDA,KAEA,GAA2BS,EAAAA,EAAAA,cAAnBD,EAAR,EAAQA,QAASsH,EAAjB,EAAiBA,MACjB,GAMI5E,EAAAA,EAAAA,YAAW2lB,IALbrpB,EADF,EACEA,YACA+oB,EAFF,EAEEA,gBACAK,EAHF,EAGEA,eACAD,EAJF,EAIEA,YACAH,EALF,EAKEA,mBAEa8C,GAAsBrJ,EAAAA,EAAAA,YAA7B1H,MACF9U,EAAUrD,KAChB,GAAoC1B,EAAAA,EAAAA,UAAS,IAAtCigB,EAAP,KAAmB4K,EAAnB,KACA,GAAkC7qB,EAAAA,EAAAA,UAAS,MAApC8qB,EAAP,KAAkBC,EAAlB,KACA,GAAsC/qB,EAAAA,EAAAA,UAAS,MAAxCgrB,EAAP,KAAoBC,EAApB,KACA,GAA4CjrB,EAAAA,EAAAA,UAAS,IAA9CkrB,EAAP,KAAuBC,EAAvB,KACc9V,EAAYwU,GAAkBe,GAApCte,KACR,GAAsCtM,EAAAA,EAAAA,UAAS,MAAxCorB,EAAP,KAAoBC,EAApB,MAEAznB,EAAAA,EAAAA,YAAU,WACJyR,GACF0V,EAAa1V,EAAQxI,MACrBoe,EAAe5V,EAAQhB,QACvB8W,EAAkB9V,EAAQlW,QACjByrB,IAAsBvV,GAAWqV,EAAsB,IAChEK,GACEvJ,EAAAA,GAAAA,IAAkBoJ,EAAmB3Q,GAAAA,GAAAA,QACnCuH,EAAAA,GAAAA,IAAkBoJ,EAAmBvR,GAAAA,GAAAA,KACrC,MAEJ4R,GAAezR,EAAAA,GAAAA,IAAOoR,EAAmBvR,GAAAA,GAAAA,WAAmB,MAC5D8R,GAAkB3R,EAAAA,GAAAA,IAAOoR,EAAmBP,QAE7C,CAAChV,EAASuV,EAAmB3K,EAAYyK,IAE5C,IAAMY,EAAqB,mCAAG,WAAO7nB,GAAP,0EAC5BA,EAAE/C,iBACEuf,IAAengB,EAAQ4E,KAAKvF,MAFJ,uBAG1BksB,EApEJ,gDAiE8B,8BAMNvsB,EAAYG,QAChC,SAACC,GAAD,OAAOA,EAAEC,QAAU8gB,GAAc/gB,EAAE2e,QAAUve,KAE7BF,OATU,uBAU1BisB,EA1EsC,qCAgEZ,iCAa5BvD,EAAmB,GAAD,gBAAKD,GAAL,CAAsB5H,KAbZ,UAcLqK,GACrBrK,EACA2K,EACAxjB,GAjB0B,QActBmjB,EAdsB,OAmB5BI,EAAwBJ,GACxBrC,GAAe,GApBa,4CAAH,sDAuB3B,OAAc,IAAVuC,GAAexC,EAEf,uBAAKpkB,UAAWkB,EAAQmlB,0BACtB,wBAAMrmB,UAAWkB,EAAQklB,aAActqB,SAAU2rB,GAC/C,uBAAKznB,UAAWkB,EAAQskB,oBACtB,gBAACkC,GAAA,EAAD,CACE,aAAW,cACX9iB,YAAY,cACZ3H,MAAOmf,EACP3Q,QAAS8b,EACTI,WAAYJ,EACZ1rB,SAAU,SAAC+D,GACT4nB,EAAe,MACfR,EAAcpnB,EAAE5C,OAAOC,QAEzBiE,QAAS,CAAEI,KAAMJ,EAAQukB,aACzBhqB,KAAK,MACLkT,WAAY,CAAE,cA7GW,eAgHzBiZ,WAAY,CACVrqB,QAAS,aACTC,MAAO,2BACPwC,UAAWkB,EAAQukB,YACnBoC,kBAAkB,GAEpBpqB,UAAQ,KAGZ,gBAAC,KAAD,CACE,cAzHgC,aA0HhCuC,UAAWkB,EAAQtD,OACnBnC,KAAK,SACL4B,QAAQ,cAJV,SAcNgqB,IAAmB/K,GAAAA,IACnB+K,IAAmB7K,GAAAA,GAGjB,gBAACrb,EAAA,GAAD,CACE3D,MACE6pB,IAAmB/K,GAAAA,GACf,8DACA,sEAGN,uBAAKtc,UAAWkB,EAAQugB,wBACrB4F,IAAmB/K,GAAAA,GAClB,gBAAC,KAAD,CAAOtT,KAAK,QAAQhJ,UAAWkB,EAAQolB,aAEvC,gBAAC,KAAD,CAAOtd,KAAK,YAAYhJ,UAAWkB,EAAQqlB,oBAE7C,gBAACxT,EAAA,EAAD,CACE7R,QAAS,CAAEya,MAAOza,EAAQ6J,YAC1B,cAAakG,GACbjR,UAAWkB,EAAQ6J,YAElBkc,GAAaI,KAOtB,gBAAClmB,EAAA,GAAD,CACE3D,MACEypB,EAAYI,GAAkBjL,EAAa,0BAG7C,uBAAKpc,UAAWkB,EAAQugB,wBACrB4F,IAAmB/K,GAAAA,GAClB,gBAAC,KAAD,CAAOtT,KAAK,QAAQhJ,UAAWkB,EAAQolB,aAEvC,gBAAC1T,GAAA,EAAD,CACE5S,UAAWkB,EAAQsP,OACnBqC,IAAKwU,EACLvU,IAAKqU,GAAe,OAGxB,gBAACpU,EAAA,EAAD,CACE7R,QAAS,CAAEya,MAAOza,EAAQ6J,YAC1B,cAAakG,GACbjR,UAAWkB,EAAQ6J,YAElBkc,GAAaI,K,ykBEpNxB,IASA,GATe,SAAC1pB,GACd,OAAOI,EAAAA,EAAAA,cAAaJ,EAAO,CAAC,SAAU,SAAU,CAC9C,sBACKA,EAAMmqB,MAAMC,UAAU,YAD3B,IAEExiB,SAAU,QCMV1H,IAAYC,EAAAA,EAAAA,IAAW,SAACH,GAAD,OAAWI,EAAAA,EAAAA,GAAaC,GAAOL,OAG7C,SAASqqB,GAAT,GAA4C,IAAX9nB,EAAW,EAAXA,QACxCzB,GAAMC,EAAAA,EAAAA,QAAOb,MAEnB,OACE,gBAAC,KAAD,KACE,gBAAC,KAAD,CAAWR,QAAQ,SACjB,gBAAC,KAAD,CAAO2L,KAAK,OAAOhJ,UAAWvB,EAAI,gBAClC,sBAAIuB,UAAU,QAAd,qCACA,gBAAC,KAAD,CACE,cAXuC,+BAYvCE,QAASA,EACT+nB,WAAW,MACX5qB,QAAQ,SAJV,e,4BCHD,IAEDQ,IAAYC,EAAAA,EAAAA,IAAW,SAACH,GAAD,OAAWI,EAAAA,EAAAA,GCjBzB,SAAgBJ,GAC7B,OAAOI,EAAAA,EAAAA,cAAaJ,EAAO,CAAC,SAAU,CACpCuqB,SAAU,CACR9nB,QAAS,OACTgG,OAAQ,aAAF,OAAezI,EAAMiD,QAAQkB,KAAKC,MACxCI,aAAcxE,EAAMwqB,MAAMhmB,aAC1B+I,aAAcvN,EAAM+C,QAAQ,KAC5BJ,QAAS3C,EAAM+C,QAAQ,KACvBgF,WAAY/H,EAAM6H,WAAWwH,KAAKtH,WAClCoY,WAAYngB,EAAM6H,WAAWwH,KAAK8Q,WAClC7Y,gBAAiBtH,EAAMiD,QAAQsE,WAAWb,OAE5C6C,SAAU,CACRxB,WAAY/H,EAAM6H,WAAWwH,KAAKtH,WAClCoY,WAAYngB,EAAM6H,WAAWwH,KAAK8Q,YAEpCsK,aAAc,CACZ9nB,QAAS,GAEX9C,MAAO,CACL+H,SAAU5H,EAAM6H,WAAWgf,GAAGjf,SAC9BG,WAAY/H,EAAM6H,WAAWG,gBAE/B8e,gBAAiB,CACfrkB,QAAS,OACTqB,cAAe,MACfE,WAAY,SACZuJ,aAAcvN,EAAM+C,QAAQ,MAE9BgkB,cAAe,CACbriB,MAAO,OACPZ,cAAe,UAEjBif,YAAa,CACX,OAAQ,CACNpgB,QAAS,EACTG,OAAQ,EACRsG,WAAY,gBAEdxB,SAAU,aAEZof,wBAAyB,CACvBvkB,QAAS,OACTqB,cAAe,MACfC,eAAgB,iBAElB,uBAAwB,CACtBW,MAAO,SACPgD,OAAQ,SACRgjB,YAAa,QACbjoB,QAAS,OACTuB,WAAY,SACZD,eAAgB,SAChBf,MAxDsB,UAyDtBsE,gBAxD4B,UAyD5B3E,QAAS3C,EAAM+C,QAAQ,GACvByB,aAAc,MACdsO,YAAa9S,EAAM+C,QAAQ,KAC3B6E,SAAU5H,EAAM6H,WAAWof,GAAGrf,UAEhC+iB,UAAW,CACT/iB,SAAU,WACVgjB,IAAK,MACL5nB,MAAOhD,EAAMiD,QAAQsF,KAAKN,QAC1B6K,YAAa,UD/CkCzS,CAAOL,OAE7C,SAAS6qB,GAAT,GAIZ,IAHDC,EAGC,EAHDA,gBACAC,EAEC,EAFDA,aACAC,EACC,EADDA,QAEMlqB,GAAMC,EAAAA,EAAAA,QAAOb,MACbqD,EAAUrD,KAEhB,GAA0C1B,EAAAA,EAAAA,UAASusB,GAA5CE,EAAP,KAAsBC,EAAtB,KAWA,OAJA9oB,EAAAA,EAAAA,YAAU,WACR0oB,EAAgBG,KACf,CAACA,EAAeH,IAGjB,gBAACK,GAAA,EAAD,CACEza,SAAUsa,EACV,cA1B4C,yBA2B5C1rB,MAAO2rB,EACP/sB,SAduB,SAAC+D,GAC1B,IAAQ3C,EAAU2C,EAAE5C,OAAZC,MACR4rB,EAAiB5rB,IAafiE,QAAS,CAAEI,KAAMJ,EAAQgnB,UACzBL,kBAAgB,EAChBkB,cAAe,gBAAG/oB,EAAH,EAAGA,UAAH,OACb,gBAAC8U,EAAA,EAAD,CACE9U,WAAWC,EAAAA,EAAAA,GAAKiB,EAAQonB,UAAWtoB,GACnCuF,SAAS,cAIZyjB,GAAAA,GAAAA,KAAmB,YAA2C,IAAxChgB,EAAwC,EAAxCA,KAAMxL,EAAkC,EAAlCA,MAAO+nB,EAA2B,EAA3BA,qBAClC,OACE,gBAAC0D,GAAA,EAAD,CACEhsB,MAAO+L,EACP9H,QAAS,CAAEI,KAAMJ,EAAQgG,UACzBoC,IAAKN,GAEL,gBAACO,EAAA,EAAD,KACE,gBAAC,KAAD,CAAOP,KAAK,WAAWhJ,UAAWvB,EAAI,2BAExC,gBAAC+K,EAAA,EAAD,CACEC,mBAAiB,EACjBvI,QAAS,CAAEI,KAAMJ,EAAQknB,eAEzB,uBAAKpoB,UAAWvB,EAAI,UAAWjB,GAC/B,uBAAKwC,UAAWvB,EAAI,gBAClB,gBAAC8mB,EAAD,a,ykBAgBhBiD,GAAqB9qB,aAAe,CAClC+qB,gBAAiB,aACjBC,aAAc,aACdC,SAAS,GEnFJ,IAGD9qB,IAAYC,EAAAA,EAAAA,IAAW,SAACH,GAAD,OAAWI,EAAAA,EAAAA,GCXzB,SAAgBJ,GAAO,QACpC,OAAOI,EAAAA,EAAAA,cAAaJ,EAAO,CAAC,QAAS,UAAW,CAC9CurB,QAAM,eACHvrB,EAAM4D,YAAYC,GAAG,MAAQ,CAC5BpB,QAAS,UAFP,mBAIK,QAJL,GAMN+oB,SAAO,eACJxrB,EAAM4D,YAAYC,GAAG,MAAQ,CAC5BpB,QAAS,UAFN,mBAII,QAJJ,GAMPxC,QAAQ,QACN0gB,UAAW,SACXjc,MAAO,cACPyO,UAAW,WACXzL,OAAQ,cACRK,WAAY/H,EAAM6H,WAAWG,eAC7BJ,SAAU,YACVwX,eAAgB,OAChB5a,aAAc,MACd8C,gBAAiBtH,EAAMiD,QAAQkB,KAAK,IACpCiF,WAAY,SACZpF,WAAY,SACZrB,QAAS3C,EAAM+C,QAAQ,GAAK,MAC3B/C,EAAM4D,YAAYC,GAAG,MAAQ,CAC5B8c,UAAW,QACXxN,UAAW,WAGf+I,KAAM,CACJlZ,MAAOhD,EAAMiD,QAAQgF,QAAQ9E,KAC7BL,OAAQ9C,EAAM+C,QAAQ,ODvByB1C,CAAOL,OAE7C,SAASyrB,GAAT,GAA0D,IAAhClpB,EAAgC,EAAhCA,QAASmO,EAAuB,EAAvBA,SAAUrO,EAAa,EAAbA,UACpDkB,EAAUrD,KAChB,OACE,gBAAC,KAAD,CACER,QAAQ,YAER,cACW,OAAT2C,QAAS,IAATA,GAAAA,EAAWgf,SAAS,cAXa,2BADA,mBAgBnChf,WAAWC,EAAAA,EAAAA,GAAKiB,EAAQtD,OAAQoC,GAChCqO,SAAUA,EACVnO,QAASA,EACT+nB,WAAW,OAXb,aAwBJmB,GAAe1rB,aAAe,CAC5B2Q,UAAU,EACVrO,UAAW,ME3BE,SAASqpB,GAAT,GAA+D,IAAtCpsB,EAAsC,EAAtCA,MAAO2pB,EAA+B,EAA/BA,MAAO0C,EAAwB,EAAxBA,eAAgB7tB,EAAQ,EAARA,KACpE,GAKIkD,EAAAA,EAAAA,YAAW2lB,IAJAiF,EADf,EACEtuB,YACAmpB,EAFF,EAEEA,YACAJ,EAHF,EAGEA,gBACAE,EAJF,EAIEA,eAEMlO,GAAU0H,EAAAA,EAAAA,YAAV1H,MACMxE,EAAYwU,GAAkBhQ,GAApCvN,KACF+gB,EAAkBxT,IAASL,EAAAA,GAAAA,IAAOK,EAXlB,wCAYhB/a,EAAW,OAAGsuB,QAAH,IAAGA,OAAH,EAAGA,EAAgBnuB,QAAO,SAACC,GAAD,OAAOA,EAAE2e,QAAUve,KACxDguB,GAAsBC,EAAAA,GAAAA,IAAyBzuB,GAC/C0uB,GACJC,EAAAA,GAAAA,IAAkC3uB,GAE9BE,GAAU0uB,EAAAA,EAAAA,cAAY,WAC1B,IAAIC,EAQJ,OAPKN,GAAmBhY,EACtBsY,EAAuBtY,EAAQlW,MACtBkuB,EACTM,EAAuB7sB,EACbusB,GAA6B,IAAV5C,IAC7BkD,EAAuB,IAElBA,IACN,CAACN,EAAiB5C,EAAOpV,EAASvU,IAE/ByR,GAAUmb,EAAAA,EAAAA,cAAY,WAC1B,QAAc,IAAVjD,IAAexC,OAGfJ,EAAgBhF,SAAS7jB,SAI3BsuB,EAAoBzK,SAAS7jB,MAC5B+oB,EAAelF,SAAS7jB,SAK1B,CACDipB,EACAjpB,EACAyrB,EACA5C,EACAyF,EACAvF,IAEI7V,GAAWwb,EAAAA,EAAAA,cACf,kBAA6D,IAAvDF,EAA+BpK,QAAQpkB,OAC7C,CAACA,EAASwuB,IAGZ,OACE,gBAAClb,GAAA,EAAD,CACEE,WAAY,CAAE,cA3DsB,kBA4DpClT,KAAK,WACLkF,MAAM,UACNgS,KAAK,SACL1V,MAAO9B,KAAa,GACpBkT,SAAUA,IACVK,QAASA,MAAa,EACtB7S,SAAU,SAAC+D,GAAD,OAAO0pB,EAAe1pB,EAAGgnB,EAAOzrB,QAWhDkuB,GAAc3rB,aAAe,CAC3BT,MAAO,KACPqsB,eAAgB,c,wCC9BL1N,GAAY,sBAEZmO,GAAuC,SAAC,GAK/C,IAJJ9uB,EAII,EAJJA,YACA+uB,EAGI,EAHJA,UACA5N,EAEI,EAFJA,WACAlM,EACI,EADJA,cAEM+Z,EAAqBhvB,EAAYG,QACrC,SAACC,GAAD,OAAOA,EAAEC,QAAU8gB,GAAc/gB,EAAE2e,QAAUgQ,KAE3CC,EAAmB1uB,QACrB0uB,EAAmBtW,KAAI,SAACuW,GAAD,OACrBha,EAAcwM,sBAAsBwN,EAAG5uB,MAAO4uB,EAAGlQ,WAiF1CmQ,GAAiB,mCAAG,WAAOpiB,EAAK8N,EAAatS,GAAzB,gFAE1BwE,EAF0B,2EAOCwK,EAAAA,EAAAA,IAAaxK,EAAKxE,GAPnB,uBAOrByF,EAPqB,EAOrBA,KAAM1N,EAPe,EAOfA,MAPe,UASCyd,GAC5BlD,EACAva,EACAiI,GAZ2B,mBAcThI,OAdS,uDAkBzByN,EAlByB,wBAmBrB0M,EAAU,CAAEpa,MAAAA,EAAOid,GAAIvP,GAnBF,UAqBrB+O,GAAWlC,EAAaH,EAASnS,GArBZ,0DAwBrB,EAAH,GAxBwB,0DAAH,0DA4BxB1F,IAAYC,EAAAA,EAAAA,IAAW,SAACH,GAAD,OAAWI,EAAAA,EAAAA,GClLzB,SAAgBJ,GAAO,YACpC,OAAOI,EAAAA,EAAAA,cAAaJ,EAAO,CAAC,QAAS,SAAU,SAAU,CACvD0G,OAAK,eACF1G,EAAM4D,YAAYC,GAAG,MAAQ,CAC5BjB,SATgB,IAUhB4E,UATiB,IAUjBE,OAAQ,OACRhD,MAZgB,IAahB/B,QAAS3C,EAAM+C,QAAQ,EAAG,EAAG,MAN5B,mBAQM,SARN,yBASY,WATZ,oBAUO,aAVP,2BAWc/C,EAAMiD,QAAQkB,KAAK,MAXjC,wBAYWnE,EAAMwqB,MAAMhmB,eAZvB,qBAcD,wGAdC,oBAeO,UAfP,qBAgBQ,UAhBR,iBAiBI,UAjBJ,kBAkBK,UAlBL,mBAmBMxE,EAAM+C,QAAQ,EAAG,IAAK,IAnB5B,GAqBLlD,MAAO,SACFG,EAAM6H,WAAWof,IADjB,IAEH1Z,aAAcvN,EAAM+C,QAAQ,OAE9B0pB,wBAAyB,CACvBhqB,QAAS,OACTsB,eAAgB,WAChBjB,OAAQ9C,EAAM+C,QAAQ,EAAG,MAE3B2pB,gBAAc,GACZllB,UAnC0B,MAkCd,SAEXxH,EAAM4D,YAAYC,GAAG,MAAQ,CAC5B2D,UAAW,WAHD,mBAKH,SALG,yBAMG,WANH,2BAOKxH,EAAMiD,QAAQ0pB,OAAOC,QAP1B,wBAQE5sB,EAAMwqB,MAAMhmB,eARd,sCASSxE,EAAMiD,QAAQkB,KAAKC,QAT5B,wBAUEpE,EAAM+C,QAAQ,OAVhB,kBAWJ,SAXI,qBAnCO,MAmCP,qBAaD,QAbC,GAed8pB,0BAA2B,CACzBpqB,QAAS,OACTuB,WAAY,SACZD,eAAgB,iBAGlB+oB,iBAAkB,CAChBpoB,MAAO,eAAF,OAAsC,EAArB1E,EAAM+C,QAAQ,KAA/B,OACL+F,UAAW,aACXmE,WAAYjN,EAAM+C,QAAQ,KAC1B+P,YAAa9S,EAAM+C,QAAQ,KAC3B,gBAAiB,CACfH,SAAU,OACVgF,SAAU5H,EAAM6H,WAAWklB,QAAQnlB,SACnC5D,WAAY,SACZE,aAAc,aAAF,OAAelE,EAAMiD,QAAQkB,KAAKC,MAC9C2D,WAAY/H,EAAM6H,WAAWmW,MAAMjW,WACnC/E,MAAOhD,EAAMiD,QAAQsF,KAAKN,SAE5B,cAAe,CACb/D,aAAc,aAAF,OAAelE,EAAMiD,QAAQkB,KAAKC,OAEhD,cAAe,CACbK,SAAU,QAEZ,uBAAwB,CACtBP,aAAc,SAGlB8oB,YAAa,CACXvqB,QAAS,OACTK,OAAQ,EACRH,QAAS3C,EAAM+C,QAAQ,IACvBmF,cAAe,cAEjB+kB,mBAAoB,CAClB/oB,aAAc,mBAEhBgpB,oBAAqB,CACnBzqB,QAAS,OACTK,OAAQ,EACRqQ,UAAW,WACXnP,WAAY,UAEdmpB,kBAAkB,QAChB1qB,QAAS,OACTqB,cAAe,iBACfkM,SAAU,WACVod,OAAQ,EACR1oB,MAAO,OACP/B,QAAS,EACTqB,WAAY,SACZD,eAAgB,iBACf/D,EAAM4D,YAAYC,GAAG,MAAQ,CAC5BpB,QAAS,OACTuN,SAAU,WACVlM,cAAe,MACfY,MA7GgB,IA6G8B,EAArB1E,EAAM+C,QAAQ,KAAW/C,EAAM+C,QAAQ,GAChE0B,SAAU,OACV9B,QAAS3C,EAAM+C,QAAQ,OAG3BsqB,cAAc,QACZrkB,UAAW,SACXtE,MAAO,OACPkD,SAAU5H,EAAM6H,WAAWmW,MAAMpW,SACjCG,WAAY/H,EAAM6H,WAAWmW,MAAMjW,WACnCpF,QAAS3C,EAAM+C,QAAQ,IAAK,KAC5BuE,gBAAiB,eAChBtH,EAAM4D,YAAYC,GAAG,MAAQ,CAC5Ba,MAAO,gBAGX4oB,oBAAoB,QAClBtkB,UAAW,SACXtE,MAAO,OACPkD,SAAU5H,EAAM6H,WAAWmW,MAAMpW,SACjCG,WAAY/H,EAAM6H,WAAWmW,MAAMjW,WACnC/E,MAAOhD,EAAMiD,QAAQ0pB,OAAOC,MAC5BtlB,gBAAiBtH,EAAMiD,QAAQgF,QAAQ9E,KACvCR,QAAS3C,EAAM+C,QAAQ,IAAK,MAC3B/C,EAAM4D,YAAYC,GAAG,MAAQ,CAC5Ba,MAAO,gBAGX6oB,gBAAiB,CACfrlB,cAAe,cAEjBslB,wBAAyB,CACvB/qB,QAAS,OACTqB,cAAe,SACfnB,QAAS3C,EAAM+C,QAAQ,GAAK,KAC5BiG,UAAW,UAGbykB,YAAU,eACPztB,EAAM4D,YAAYC,GAAG,MAAQ,CAC5BpB,QAAS,UAFH,mBAIC,QAJD,GAMVirB,aAAW,eACR1tB,EAAM4D,YAAYC,GAAG,MAAQ,CAC5BpB,QAAS,UAFF,mBAIA,QAJA,KD8BsCpC,CAAOL,OAE5D,SAAS2tB,GAAT,EAEEljB,GACA,IAFE3M,EAEF,EAFEA,KAAM6I,EAER,EAFQA,QAASmQ,EAEjB,EAFiBA,WAAY8W,EAE7B,EAF6BA,gBAAiB5C,EAE9C,EAF8CA,QAG9C,GAAwCxsB,EAAAA,EAAAA,UACtCovB,EAAkB9vB,EAAO,MADpB+vB,EAAP,KAAqB/C,EAArB,KAGMpM,EAAakP,EAAkBC,EAAe/vB,EACpD,EACEqpB,GAAAA,GAAkBzI,GADZoP,EAAR,EAAQA,OAAQC,EAAhB,EAAgBA,SAAUrG,EAA1B,EAA0BA,cAAe7nB,EAAzC,EAAyCA,MAGzC,GAQImB,EAAAA,EAAAA,YAAW2lB,IAPAiF,EADf,EACEtuB,YACA+oB,EAFF,EAEEA,gBACAC,EAHF,EAGEA,mBACAC,EAJF,EAIEA,eACAC,EALF,EAKEA,kBACAE,EANF,EAMEA,eACAD,EAPF,EAOEA,YAEInpB,EAAW,OAAGsuB,QAAH,IAAGA,OAAH,EAAGA,EAAgBnuB,QAAO,SAACC,GAAD,OAAOA,EAAE2e,QAAUve,KAC9CsgB,GAAuBpd,EAAAA,EAAAA,YAAWmb,IAA1CyB,OAEM1F,GAAgB8V,EAAAA,GAAAA,KAAtBljB,KACR,GAAkCmjB,EAAAA,GAAAA,GAAY,CAC5CC,GAAAA,GACAzW,KAFYra,EAAd,EAAQ0N,KAAgBgD,EAAxB,EAAwBA,MAKlBge,GAAsBC,EAAAA,GAAAA,IAAyBzuB,GAE/CwD,GAAMC,EAAAA,EAAAA,QAAOb,MAEbqD,EAAUrD,KAGR0F,GADYrH,EAAAA,EAAAA,cAAZD,QACAsH,MACcsO,GAAYlT,EAAAA,EAAAA,YAAWmT,EAAAA,gBAArCC,aACF3G,GAAc8G,EAAAA,EAAAA,IAAaL,GAC3BtT,GAAeyd,EAAAA,EAAAA,IAAgB5Q,GAG7B8E,GAAkBvR,EAAAA,EAAAA,YAAWyR,IAA7BF,cAER,GAAwC/T,EAAAA,EAAAA,WAAS,GAA1C8f,EAAP,KAAqBC,EAArB,KACA,GAA0C/f,EAAAA,EAAAA,UAAS,IAA5C2vB,EAAP,KAAsBC,EAAtB,KAGA,GAAwC5vB,EAAAA,EAAAA,UAAS,IAA1C6vB,GAAP,KAAqBC,GAArB,KACA,IAAkD9vB,EAAAA,EAAAA,WAAS,GAApD6C,GAAP,MAA0BC,GAA1B,MACA,IAQIN,EAAAA,EAAAA,YAAWO,GAAAA,IAPbE,GADF,GACEA,KACAD,GAFF,GAEEA,UACA0d,GAHF,GAGEA,aACAxd,GAJF,GAIEA,WACAC,GALF,GAKEA,QACAC,GANF,GAMEA,SACAC,GAPF,GAOEA,YAYI0sB,GA/KoB,SAAC,GAYvB,IAXJjxB,EAWI,EAXJA,YACA+oB,EAUI,EAVJA,gBACAE,EASI,EATJA,eACAhU,EAQI,EARJA,cACA2F,EAOI,EAPJA,YACAkG,EAMI,EANJA,mBACAoQ,EAKI,EALJA,oBACA7nB,EAII,EAJJA,QACAmQ,EAGI,EAHJA,WACA4H,EAEI,EAFJA,WACA9Y,EACI,EADJA,MAEA,wBAAO,mGACLe,KACM0f,EAAgBzoB,QAAW2oB,EAAe3oB,SAAY2U,EAFvD,wDAKLuE,GAAW,GACL2X,EAND,OAMoCpI,QANpC,IAMoCA,OANpC,EAMoCA,EAAiBrQ,KACxD,SAACyI,GAAD,OAAgB,WACd2N,GAAqC,CACnC9uB,YAAAA,EACA+uB,UAAW3N,EACXD,WAAAA,EACAlM,cAAAA,QAIAmc,EAhBD,OAgBkCrI,QAhBlC,IAgBkCA,OAhBlC,EAgBkCA,EAAiBrQ,KACtD,SAACyI,GAAD,OAAgB,WACd,OAAIE,GAAAA,KAA2BF,EACtBlM,EAAcqM,cAAcF,GAAY,GAE7CG,GAAAA,KAAkCJ,EAC7BlM,EAAcuM,qBAAqBJ,GAAY,GAEjDnM,EAAcoc,iBAAiBlQ,EAAYC,OAIhDkQ,EA5BD,OA4BqCrI,QA5BrC,IA4BqCA,OA5BrC,EA4BqCA,EAAgBvQ,KACxD,SAACyI,GAAD,OAAgB,WACd,OAAIE,GAAAA,KAA2BF,EACtBlM,EAAcqM,cAAcF,GAAY,GAE7CG,GAAAA,KAAkCJ,EAC7BlM,EAAcuM,qBAAqBJ,GAAY,GAEjDnM,EAAcwM,sBAAsBN,EAAYC,OAIrDmQ,EAxCD,OAwCuCxI,QAxCvC,IAwCuCA,OAxCvC,EAwCuCA,EACxC5oB,QACA,SAACE,GAAD,OACEA,IAAUghB,GAAAA,IACVhhB,IAAUkhB,GAAAA,MAEb7I,KACC,SAACyI,GAAD,OAAgB,kBACd+P,EAAoB/P,EAAYvG,EAAatS,OAhD9C,WAkDckpB,EAAAA,GAAAA,IAAkB,GAAD,gBAC/BL,IAD+B,QAE/BC,IAF+B,QAG/BE,IAH+B,QAI/BC,KAtDA,eAkDCE,EAlDD,OAwDChT,EAAYgT,EAAKtxB,QAAO,SAACuxB,GAAD,MAAwB,qBAARA,KAC5BC,EAAclT,EAAUA,EAAUne,OAAS,GAArD8Q,SAzDH,UA0DC0P,EAAmB6Q,GAAW,GA1D/B,QA2DLnY,GAAW,GA3DN,4CAkKuB9X,CAAa,CACzC1B,YAAasuB,EACbvF,gBAAAA,EACAE,eAAAA,EACAhU,cAAAA,EACA2F,YAAAA,EACAkG,mBAAAA,EACAoQ,oBAAqBhC,GACrB7lB,QAAAA,EACAmQ,WAAAA,EACA4H,WAAAA,EACAkP,gBAAAA,EACAhoB,MAAAA,IAwCIujB,GAA0B,SAACJ,GAC/B,IAAiBmG,EAAuBhX,EAAhChE,QAKRka,EAAiB,CAJD,CACd/V,MAAO0Q,EACP7U,QAASgb,IAEK,gBAEXf,EAAcpY,MAAM,EAAGoY,EAAcvwB,aAI5CwE,EAAAA,EAAAA,YAAU,WACR,GAAKhF,GAAa8a,EAAlB,CACA,IAAiBgX,EAAuBhX,EAAhChE,QACFib,GAAcC,EAAAA,GAAAA,IAAkBF,GAChCG,GAAqBC,EAAAA,GAAAA,IAAyBJ,GAC9CK,EAAwBnyB,EAAS4Y,KAAI,YACzC,MAAO,CACLqC,MAFsD,EAAZA,MAG1CnE,QAASgb,MAGbK,EAAsBC,QAAQL,EAAaE,GAC3CjB,EAAiBmB,MAChB,CAACnyB,EAAU8a,KAYd9V,EAAAA,EAAAA,YAAU,WACRd,IAAqB,GACjBgd,IACFY,IAAa,GACbqP,MAEE9sB,KAASwc,KACT5c,IAAmC,OAAdG,KACrBH,IAAqBG,IACvB+sB,KAGEltB,IAAmC,OAAdG,KACvBK,KACAP,IAAqB,QAEtB,CACDG,GACA6c,EACAhd,GACAD,GACA6d,GACA1d,GACA+sB,GACA1sB,KAGF,IAAM4tB,GAAe,WACnB/I,GAAe,GACf,IAAMgJ,GAAatW,EAAAA,GAAAA,MACF8V,EAAuBhX,EAAhChE,QASRka,EAAiB,CARD,CACd/V,MAAOqX,EACPxb,QAASgb,IAMK,gBAAcf,MAG1BwB,GAAmBxB,EAGnBxC,GAAiB,SAAC1pB,EAAGgnB,EAAO3pB,GAChC,OAAc,IAAV2pB,GAAexC,EAAoB,OAEpCF,EAAelF,SAAS/hB,IACzBwsB,EAAoBzK,SAAS/hB,GAE7BknB,EAAkB,CAAClnB,GAAF,gBAAYinB,KAE7BA,EAAelF,SAAS/hB,IACxBwsB,EAAoBzK,SAAS/hB,IAE7BknB,EAAkBD,EAAe9oB,QAAO,SAACE,GAAD,OAAWA,IAAU2B,MAExD2C,EAAE5C,OAAO0R,QACZuV,EAAmB,CAAChnB,GAAF,gBAAY+mB,KAC9BC,EAAmBD,EAAgB5oB,QAAO,SAACE,GAAD,OAAWA,IAAU2B,QAErE,OACE,gBAAC,KAAD,CACE+C,UAAWkB,EAAQmD,MACnB,cA9VqC,qBA+VrC+D,IAAKA,EACLmlB,UAAW,GAEX,gBAAC,KAAD,KACE,uBAAKvtB,UAAWkB,EAAQ1D,OAAxB,UAAmCiuB,EAAnC,gBAAiDltB,IAChDgtB,EACC,gBAAC/C,GAAD,CACEC,gBAAiBA,EACjBC,aAAcjtB,EACdktB,QAASA,IAGX,gBAACzD,GAAD,CAAczpB,KAAMA,IAEtB,uBAAKuE,UAAWkB,EAAQmpB,gBACtB,gBAACzE,GAAD,CAAiBC,mBA9KE,SAACjmB,GAC1B,IAAQ3C,EAAU2C,EAAE5C,OAAZC,MACRgvB,GAAgBhvB,QAASwG,MA6KnB,uBAAKzD,UAAWkB,EAAQkpB,yBACtB,gBAAChB,GAAD,CAAgBlpB,QAASktB,GAAc/e,SAAU+V,MAEjDrpB,IAAa0Q,GACb,gBAAC,KAAD,CAAWpO,QAAQ,SACjB,gBAACqV,GAAA,EAAD,SAGD3X,KAAcuyB,GAAiB/xB,QAChC,gBAAC,EAAAiyB,MAAD,CACEC,OAAQH,GACRttB,WAAWC,EAAAA,EAAAA,GAAKxB,EAAI,SAAUA,EAAI,qBAClCrD,OAAQ4wB,IAER,gBAAC,EAAA0B,YAAD,CACEnN,SA/XQ,uCAgYRoN,SAAS,MACTlC,OAEE,wBAAMzrB,UAAWkB,EAAQypB,aAActF,GAEzCrY,KAAM,YAA+B,IAA5B/P,EAA4B,EAA5BA,MAAc2pB,EAAc,EAArBgH,IAAOhH,MACrB,OACE,gBAACyC,GAAD,CACEpsB,MAAOA,EACP2pB,MAAOA,EACP0C,eAAgBA,GAChB7tB,KAAMA,OAKd,gBAAC,EAAAiyB,YAAD,CACEjC,OAAQ,wBAAMzrB,UAAWkB,EAAQypB,aAAzB,QACRpK,SAAUnK,GAAAA,GAAAA,KACVyX,YAAU,EACV7gB,KAAM,gBAAU4Z,EAAV,EAAGgH,IAAOhH,MAAV,OACJ,gBAACD,GAAD,CACElrB,KAAM4gB,EACNuK,MAAOA,EACPC,oBAAqBiF,EAAcvwB,OACnCurB,wBAAyBA,WAQhC/rB,IAAauyB,GAAiB/xB,QAC/B,gBAACysB,GAAD,CAAuB9nB,QAASktB,MAapC,uBAAKptB,UAAWkB,EAAQ4pB,kBACtB,gBAAC,KAAD,CACEztB,QAAQ,YACR,cA/a0B,uBAgb1B2C,UAAWkB,EAAQ8pB,aACnB9qB,QAASoE,GAJX,UAQA,gBAAC,KAAD,CACE,cAvbiC,uBAwbjCpE,QAtOoB,WAC5B,IAAK8jB,EAAgBzoB,SAAW2oB,EAAe3oB,OAG7C,OAFA+I,SACAuY,IAAa,GAGf,IAAMiR,EAAoB9J,EAAgB5oB,QACxC,SAACE,GAAD,OACEA,IAAUghB,GAAAA,IACVhhB,IAAUkhB,GAAAA,MAERuR,EAAyB7J,EAAe9oB,QAC5C,SAACE,GAAD,OACEA,IAAUghB,GAAAA,IACVhhB,IAAUkhB,GAAAA,MAETsR,EAAkBvyB,QAAWwyB,EAAuBxyB,SACvDgE,GAAS,MACTF,GAAW,MACXC,GAAQ,MACR4c,GAAgB,IAElB,IAAMhe,EAAoB,0BAAH,OACrB4vB,EAAkBvyB,OAASwyB,EAAuBxyB,SAAW,EACzD,WADJ,UAEOyoB,EAAgBzoB,OAASwyB,EAAuBxyB,OAFvD,YAII4C,EAAsB,0BAAH,OACvB2vB,EAAkBvyB,OAASwyB,EAAuBxyB,SAAW,EACzD,YADJ,UAEOuyB,EAAkBvyB,OAASwyB,EAAuBxyB,OAFzD,YADuB,2BAINiC,GACnB+B,GAASrB,GACTmB,GAAWlB,GACXmB,GAAQsc,MAsMC8P,GAEH,gBAAC,MAAD,SAOV,IACA,IAD4BsC,EAAAA,EAAAA,YAAW1C,IAWvCA,GAAiB5tB,aAAe,CAC9B4G,QAAS,aACTmQ,WAAY,aACZ8W,iBAAiB,EACjB5C,SAAS,G,cEjgBI,SAASsF,GAAT,GAA8C,IAApBxyB,EAAoB,EAApBA,KAAMgZ,EAAc,EAAdA,WAC7C,GAA8BtY,EAAAA,EAAAA,YAAvBwsB,EAAP,KAAgBuF,EAAhB,KAEQ7J,GAAmB1lB,EAAAA,EAAAA,YAAW2lB,IAA9BD,eACR,GAAwBloB,EAAAA,EAAAA,WAAS,GAA1BiD,EAAP,KAAaE,EAAb,KAOMoE,EAAc,WAClBwqB,GAAW,GACX5uB,GAAQ,GACR+kB,GAAe,IAGT8J,EAAarJ,GAAAA,GAAkBrpB,GAA/B0yB,SAER,OACE,gCACE,gBAAC,KAAD,CACE,cAzBoC,mBA0BpC9wB,QAAQ,OACR6C,QAlBa,WACjBguB,GAAW,GACX5uB,GAAQ,IAiBJ2oB,WAAW,QAEVkG,GAGH,gBAACC,GAAA,EAAD,CACE,cAjCiC,6BAkCjChvB,KAAMA,EACN2J,MAAO,CACL3I,QAAS,OACTuB,WAAY,SACZD,eAAgB,UAElB4C,QAASZ,EACT,4BAAoByqB,EAApB,UACA,6BAAqBA,EAArB,uBAEA,gBAAC,GAAD,CACE1yB,KAAMA,EACN6I,QAASZ,EACT+Q,WAAYA,EACZ8W,iBAAiB8C,EAAAA,GAAAA,IAAe5yB,GAChCktB,QAASA,MAYnBsF,GAAevwB,aAAe,CAC5B+W,WAAY,c,gBCrBC,SAAS6Z,GAAT,GAA+D,MAAjCrzB,EAAiC,EAAjCA,YAAawZ,EAAoB,EAApBA,WAAYhZ,EAAQ,EAARA,KAC5DyU,GAAkBvR,EAAAA,EAAAA,YAAWyR,IAA7BF,cACFqe,EAA6C,IAAvBtzB,EAAYM,SAAgBizB,EAAAA,GAAAA,IAAc/yB,GAChEgzB,GAAaC,EAAAA,GAAAA,IAAcjzB,GAC3B2C,EAAW,gBACjB,GAA4CjC,EAAAA,EAAAA,YAArCwyB,EAAP,KAAuBC,EAAvB,KACsB/c,GAAYlT,EAAAA,EAAAA,YAAWmT,EAAAA,gBAArCC,aACF3G,GAAc8G,EAAAA,EAAAA,IAAaL,GAC3BtT,EAAe6M,GACjB4Q,EAAAA,EAAAA,IAAgB5Q,GAChB,gBACEyjB,EAAW,UAAG/J,GAAAA,GAAkBrpB,UAArB,aAAG,EAAyB+B,MAE7C,GACEmB,EAAAA,EAAAA,YAAWO,GAAAA,IADLE,EAAR,EAAQA,KAAMD,EAAd,EAAcA,UAAWE,EAAzB,EAAyBA,WAAYC,EAArC,EAAqCA,QAASC,EAA9C,EAA8CA,SAAUC,EAAxD,EAAwDA,YAExCuc,GAAuBpd,EAAAA,EAAAA,YAAWmb,IAA1CyB,OACR,GAAkDpf,EAAAA,EAAAA,WAAS,GAApD6C,EAAP,KAA0BC,EAA1B,KAWM6vB,EAAS7zB,EACZG,QAAO,qBAAG4e,QAAsB2U,KAChChb,KAAI,qBAAGrY,SAEJyzB,EA5D6B,SAAC,GAMhC,IALJD,EAKI,EALJA,OACAra,EAII,EAJJA,WACAvE,EAGI,EAHJA,cACAye,EAEI,EAFJA,eACA5S,EACI,EADJA,mBAEA,wBAAO,6FACA4S,EADA,wDAELla,GAAW,GACL8X,EAHD,OAGqCuC,QAHrC,IAGqCA,OAHrC,EAGqCA,EAAQnb,KAChD,SAACyI,GAAD,OAAgB,WACd,OAAIE,GAAAA,KAA2BF,EACtBlM,EAAcqM,cAAcoS,GAAgB,GAEjDnS,GAAAA,KAAkCJ,EAC7BlM,EAAcuM,qBAAqBkS,GAAgB,GAErDze,EAAcwM,sBAAsBN,EAAYuS,OAXtD,UAcclC,EAAAA,GAAAA,IAAkBF,GAdhC,cAcCG,EAdD,OAeChT,EAAYgT,EAAKtxB,QAAO,SAACuxB,GAAD,MAAwB,qBAARA,KAC5BC,EAAclT,EAAUA,EAAUne,OAAS,GAArD8Q,SAhBH,UAiBC0P,EAAmB6Q,GAAW,GAjB/B,QAkBLnY,GAAW,GAlBN,4CAqDiBua,CAAsB,CAC5CF,OAAAA,EACAra,WAAAA,EACAvE,cAAAA,EACAye,eAAAA,EACA5S,mBAAAA,IA0BF,OAvBAhc,EAAAA,EAAAA,YAAU,WACRd,GAAqB,GACjBG,IAAShB,IACTY,GAAmC,OAAdG,IACrBH,GAAqBG,GACvB4vB,EAAgBD,GAGd9vB,GAAmC,OAAdG,IACvBK,IACAP,GAAqB,QAEtB,CACDG,EACAhB,EACAa,EACAD,EACAG,EACA4vB,EACAD,EACAtvB,IAGGivB,EAIH,gBAAC,KAAD,CAAcxtB,MAAM,wBAClB,gBAAC,KAAD,CACE,cAnGwC,uBAoGxCf,QAnDwB,WAC5B0uB,EAAkBnzB,GAClB,IAAMyC,EAAoB,UAAH,OAAa2wB,EAAb,wBAAwCtwB,EAAxC,KACjBJ,EAAsB,qCAAH,OAAwC0wB,EAAxC,UACzBtvB,EAASrB,GACTmB,EAAWlB,GACXmB,EAAQlB,IA8CJf,QAAQ,UACRgR,SAAUkgB,EACVU,aACEV,EA1GR,2BA4GY,IAGLE,EAAWS,mBAEd,gBAAC,MAAD,OAjBK,gBAAC,KAAD,CAAczjB,MAAO,IAAI0jB,MAAM,mCA4B1Cb,GAAmBc,aAAe,CAChCn0B,YAAa,GACbwZ,WAAY,cCnHd,IAAM5W,IAAYC,EAAAA,EAAAA,IAAW,SAACH,GAAD,OAAWI,EAAAA,EAAAA,GC7BzB,SAAgBJ,GAC7B,OAAOI,EAAAA,EAAAA,cAAaJ,EAAO,CAAC,QAAS,SAAU,CAC7C0xB,UAAW,CACT/uB,QAAS3C,EAAM+C,QAAQ,IAAK,KAC5BC,MAAOhD,EAAMiD,QAAQuF,UAAU0a,cAEjCyO,QAAS,CACPntB,aAAcxE,EAAMwqB,MAAMhmB,aAC1BotB,UAAW,eAAF,OAAiB5xB,EAAMiD,QAAQkB,KAAK,OAE/C0tB,qBAAsB,CACpB7hB,SAAU,WACVlH,UAAW,aACXL,OAAQ,aAAF,OAAezI,EAAMiD,QAAQkB,KAAKC,MACxCI,aAAcxE,EAAMwqB,MAAMhmB,aAC1BoD,SAAU5H,EAAM6H,WAAWiqB,MAAMlqB,SACjCjF,QAAS,EACTwG,SAAU,OACV,OAAQ,CACNxG,QAAS,EACTG,OAAQ,IAGZivB,uBAAwB,CACtBrtB,MAAO,OACP6C,WACE,gEACFyI,SAAU,WACVhH,UAAW,SACXokB,OAAQ,EACRzqB,QAAS3C,EAAM+C,QAAQ,GAAK,KAE9BivB,cAAe,CACb1pB,OAAQ,UACR5D,MAAO,OACP4C,gBAAiB,cACjBmB,OAAQ,QAEVwpB,SAAU,CACRjiB,SAAU,YAEZkiB,YAAa,CACXlpB,UAAW,SACXhG,MAAOhD,EAAMiD,QAAQgF,QAAQ9E,KAC7ByE,SAAU,QAEZuqB,kBAAmB,CACjBnvB,MAAOhD,EAAMiD,QAAQgF,QAAQ9E,KAC7ByE,SAAU,QAEZof,wBAAyB,CACvBvkB,QAAS,OACTqB,cAAe,MACfC,eAAgB,iBAElBypB,wBAAyB,CACvB/qB,QAAS,OACTqB,cAAe,SACfnB,QAAS3C,EAAM+C,QAAQ,GAAK,KAC5BiG,UAAW,UAEb,eAAgB,CACdrG,QAAS,GAEX,aAAc,CACZyG,WAAY,eACZzG,QAAS,KDrCsCtC,CAAOL,OAK7C,SAASoyB,GAAT,GAAyD,IAA7Bt0B,EAA6B,EAA7BA,KAAMuM,EAAuB,EAAvBA,QAASyM,EAAc,EAAdA,WAChDxZ,GAAgB0D,EAAAA,EAAAA,YAAW2lB,IAA3BrpB,YACR,GAAgDkB,EAAAA,EAAAA,UAAS,IAAlD6zB,EAAP,KAAyBC,EAAzB,KACA,GAAkD9zB,EAAAA,EAAAA,UAAS,IAApD+zB,EAAP,KAA0BC,EAA1B,KACA,EElCa,SAAoCl1B,GACjD,OAA8DkB,EAAAA,EAAAA,UAAS,IAAhEi0B,EAAP,KAAgCC,EAAhC,KACQ9sB,GAAUrH,EAAAA,EAAAA,cAAVqH,MA2BR,OAzBAxD,EAAAA,EAAAA,YAAU,WACH9E,GACLue,QAAQC,IACNxe,EAAY0Y,IAAZ,mCAAgB,WAAOtY,GAAP,4EAIZA,EAAEC,QAAUghB,GAAAA,IACZjhB,EAAEC,QAAUkhB,GAAAA,GALA,yCAOLnhB,GAPK,iCAUIkX,EAAAA,EAAAA,IAAalX,EAAEC,MAAOiI,GAV1B,OAUZiO,EAVY,uDAYZC,EAAe,EAAH,GAZA,0CAeTpW,GAfS,IAgBZmW,QAAAA,EACAC,aAAAA,KAjBY,yDAAhB,wDAoBArF,MAAK,SAACkkB,GAAD,OAAeD,EAA2BC,QAChD,CAACr1B,EAAasI,IACV,CAAE6sB,wBAAAA,GFMPG,CAA2BL,GADrBE,EAAR,EAAQA,yBAGRrwB,EAAAA,EAAAA,YAAU,WACR,IAAMywB,GACO,OAAXv1B,QAAW,IAAXA,OAAA,EAAAA,EAAaG,QAAO,SAACkW,GAAD,OAAgBA,EAAW0I,QAAUve,OAAS,KAC/D+0B,GACLL,EAAqBK,KACpB,CAACv1B,EAAaQ,KAEjBsE,EAAAA,EAAAA,YAAU,WACR,GAAKqwB,EAAL,CACA,IAAMK,EAAa,OAAGL,QAAH,IAAGA,OAAH,EAAGA,EAAyBh1B,QAC7C,SAACC,GAAD,OAAOA,EAAEI,OAASi1B,GAAAA,IAAqBr1B,EAAEI,OAASk1B,GAAAA,MAE9CC,EAASR,EACZh1B,QAAO,SAACC,GAAD,MAAkB,UAAXA,EAAEI,QAChB4jB,MAAK,SAAC7S,EAAG8S,GAAM,UACd,iBAAO9S,EAAEgF,eAAT,iBAAO,EAAWxI,YAAlB,aAAO,EAAiB6nB,cAAjB,UAA+BvR,EAAE9N,eAAjC,aAA+B,EAAWxI,SAErDinB,EAAoBQ,EAAc3Y,OAAO8Y,OACxC,CAACR,IAEJ,IAAM3xB,GAAMC,EAAAA,EAAAA,QAAOb,MAEbqD,EAAUrD,KAEhB,GAA8B1B,EAAAA,EAAAA,WAAS,GAAhCoX,EAAP,KAAgBC,EAAhB,KACA,GAAgDrX,EAAAA,EAAAA,UAAS,IAAlD20B,EAAP,KAEMC,GAFN,MAEgBtN,EAAAA,EAAAA,UACd,iBAAM,CACJ,CACEgI,OAAQ,GACRuF,SAAU,eACVC,UAAW,CAAC,eAAgB,kBAE9B,CACExF,OAAQ,GACRuF,SAAU,QACVC,UAAW,CAAC,eAAgB,kBAE9B,CACExF,OAAQ,GACRuF,SAAU,OACVC,UAAW,CAAC,eAAgB,qBAGhC,KAGIxoB,GAAOgb,EAAAA,EAAAA,UAAQ,WACnB,OAAKuM,EAIEzc,EAAUyc,EAAmBA,EAAiBtc,MAAM,EAAG,GAHrD,KAIR,CAACsc,EAAkBzc,IAEtB,GAOI2d,EAAAA,GAAAA,UACF,CACEH,QAAAA,EACAtoB,KAAAA,EACA0oB,aAAc,CACZC,OAAQ,CAAC,CAAE9zB,GAAI,eAAgB+zB,MAAM,MAGzCC,GAAAA,WACAC,GAAAA,iBAfAC,EADF,EACEA,cACAC,EAFF,EAEEA,kBACAC,EAHF,EAGEA,KACAC,EAJF,EAIEA,WAEA1F,GANF,EAKE2F,UALF,EAME3F,iBAwBF,IAAK+D,EAAiBz0B,SAAU8yB,EAAAA,GAAAA,IAAe5yB,GAAO,OAAO,KAE7D,IAAQo2B,EAAmB/M,GAAAA,GAAkBrpB,GAArCo2B,eAER,OACE,gBAACnd,EAAA,EAAD,CACEC,iBAAe,EACfzT,QAAS,CAAEI,KAAMJ,EAAQmuB,UAAWC,QAASpuB,EAAQouB,SACrD,cAvGwC,sBAyGxC,gBAACpK,GAAD,CAAczpB,KAAMA,EAAM0pB,cAAY,GACpC,gCACE,gBAAC8I,GAAD,CACExyB,KAAMA,EACNgZ,WAAYA,EACZxZ,YAAa+0B,IAEf,gBAAC1B,GAAD,CACErzB,YAAa+0B,EACbvb,WAAYA,EACZhZ,KAAMA,MAIZ,uBAAKuE,UAAWkB,EAAQsuB,wBACnBQ,EAAiBz0B,QAClB,gCAOE,gBAACqqB,GAAD,CAAiBC,mBA5CA,SAACjmB,GAC1B,IAAQ3C,EAAU2C,EAAE5C,OAAZC,MACRgvB,EAAgBhvB,QAASwG,OA6CpBuE,GACC,gBAAC,KAAD,CAAW3K,QAAQ,SACjB,gBAACqV,GAAA,EAAD,QAGF1K,GAAWgoB,EAAiBz0B,OAC5B,iCACEyE,WAAWC,EAAAA,EAAAA,GAAKxB,EAAI,SAAUA,EAAI,kBAC9B+yB,KAEJ,iCAAOxxB,UAAWvB,EAAI,gBAAoBgzB,KACvCC,EAAKn2B,OACJm2B,EAAK/d,KAAI,SAACia,GACR+D,EAAW/D,GACX,IAAMtZ,EAAUsZ,EAAIkE,SACpB,OACE,sBAAI9xB,UAAWvB,EAAI,mBAAoB6K,IAAKgL,EAAQhZ,OAClD,sBACE0E,WAAWC,EAAAA,EAAAA,GACTxB,EAAI,oBACJA,EAAI,gBAGN,gBAAC,GAAD,CAAa6S,WAAYgD,SAMjC,sBAAItU,UAAWkB,EAAQiqB,yBACrB,0BACG2F,GAAgB,aAEQ,WAArBA,EAAgC,UAAY,UAF/B,cAU3B,wBAAM9wB,UAAWkB,EAAQiqB,0BACrBnjB,GAAW,yBAAI6pB,KAGnB7pB,GAAWgoB,EAAiBz0B,OAAS,GACrC,uBACEyE,WAAWC,EAAAA,EAAAA,GACTiB,EAAQwuB,uBACRnc,GAAW9U,EAAI,cAGjB,0BACE,cACE8U,EA1LgB,cADI,kBA6LtB9X,KAAK,SACLuE,UAAWkB,EAAQyuB,cACnBzvB,QAAS,kBAAMsT,GAAYD,KAE3B,gBAACR,EAAA,EAAD,CAAY7R,QAAS,CAAEya,MAAOza,EAAQ2uB,cACnCtc,EACC,mCACO,IACL,qBACEvT,WAAWC,EAAAA,EAAAA,GACTxB,EAAI,iBACJyC,EAAQ4uB,sBAKd,yCACaE,EAAiBz0B,OAD9B,IACuC,IACrC,qBACEyE,WAAWC,EAAAA,EAAAA,GACTxB,EAAI,mBACJyC,EAAQ4uB,2BAoBhCC,GAAiBryB,aAAe,CAC9BsK,SAAS,GG3PX,IAAMnK,IAAYC,EAAAA,EAAAA,IAAW,SAACH,GAAD,OAAWI,EAAAA,EAAAA,GCVzB,SAAgBJ,GAC7B,OAAOI,EAAAA,EAAAA,cAAaJ,EAAO,CAAC,QAAS,UAAW,CAC9Co0B,uBAAwB,CACtB3xB,QAAS,OACTsB,eAAgB,YAElBswB,cAAe,CACb5xB,QAAS,OACTuB,WAAY,SACZhB,MAAOhD,EAAMiD,QAAQsF,KAAKN,QAC1BF,WAAY/H,EAAM6H,WAAWG,eAC7BE,cAAe,aACfN,SAAU,YACVwX,eAAgB,QAElBlD,KAAM,CACJlZ,MAAOhD,EAAMiD,QAAQsF,KAAKN,QAC1BnF,OAAQ9C,EAAM+C,QAAQ,ODPyB1C,CAAOL,OAK7C,SAASs0B,GAAT,GAAwD,IAAvBjqB,EAAuB,EAAvBA,QAASyM,EAAc,EAAdA,WAEjDvT,EAAUrD,KAEVY,GAAMC,EAAAA,EAAAA,QAAOb,MACnB,GAAwB1B,EAAAA,EAAAA,WAAS,GAA1BiD,EAAP,KAAaE,EAAb,KAMMoE,EAAc,WAClBpE,GAAQ,IAGV,OACE,uBAAKU,UAAWkB,EAAQ6wB,wBACtB,gBAAC,KAAD,CACE,cArB2C,0BAsB3C10B,QAAQ,OACR2C,UAAWkB,EAAQ8wB,cACnB9xB,QAda,WACjBZ,GAAQ,KAeJ,qBAAGU,WAAWC,EAAAA,EAAAA,GAAKxB,EAAI,iBAAkBA,EAAI,WAN/C,oBAUA,gBAAC2vB,GAAA,EAAD,CACE,cA9BiC,iCA+BjChvB,KAAMA,EACN2J,MAAO,CACL3I,QAAS,OACTuB,WAAY,SACZD,eAAgB,UAElB4C,QAASZ,EACT,kBAAgB,yBAChB,mBAAiB,sCAEjB,gBAAC,GAAD,CACEjI,KAvCY,aAwCZ6I,QAASZ,EACT6nB,iBAAe,EACfvjB,QAASA,EACTyM,WAAYA,MEtBtB,OAzBA,WACE,IAAMxR,GAASC,EAAAA,EAAAA,aACT4I,GAAc0B,EAAAA,GAAAA,IAAevK,EAAO6E,MAAMsD,aAChD,GAA8BjP,EAAAA,EAAAA,WAAS,GAAhC6L,EAAP,KAAgByM,EAAhB,KAEA,OACE,gBAAC8P,GAAD,KACG2N,GAAAA,GAAAA,OAAqBlJ,GAAAA,IAAgBrV,KAAI,gBAAG3K,EAAH,EAAGA,KAAH,OACxC,gBAAC+mB,GAAD,CACEt0B,KAAMuN,EACNM,IAAKN,EACLhB,QAASA,EACTyM,WAAYA,OAGf3I,GACC,gBAAC0G,GAAA,EAAD,CAAOqH,MAAM,EAAOpH,SAAS,QAA7B,+CAIF,gBAACwf,GAAD,CAAuBjqB,QAASA,EAASyM,WAAYA,M,YC9B5C,SAAS0d,GAAgB7oB,GAAwB,IAAnB8oB,EAAmB,uDAAJ,GAGpDC,GAAeC,EAAAA,GAAAA,MACfC,GAAUC,EAAAA,GAAAA,MAChB,GAAsCr2B,EAAAA,EAAAA,WAAS,WAC7C,IAEE,IAAM+jB,EAAOmS,EAAaI,QAAQnpB,GAElC,OAAO4W,EAAOwS,KAAKC,MAAMzS,GAAQkS,EACjC,MAAO3mB,IAIP,OADA8mB,EAAQ9mB,MAAMA,IACP2mB,MAVJQ,EAAP,KAAoBC,EAApB,KAgBMC,EAAW,SAAC71B,GAEhB41B,EAAe51B,GAEfo1B,EAAaU,QAAQzpB,EAAKrM,IAG5B,MAAO,CAAC21B,EAAaE,G,gBCMjBj1B,IAAYC,EAAAA,EAAAA,IAAW,SAACH,GAAD,OAAWI,EAAAA,EAAAA,GhEGzB,SAAgBJ,GAC7B,cACK4M,GACAyoB,EAAAA,QAAAA,OAAer1B,IgEN+BK,CAAOL,OAE5D,SAASs1B,GAAgBphB,EAAS7I,GAChC,iBAAUkJ,EAAAA,EAAAA,IAAaL,GAAvB,YAAmC7I,GAGtB,SAASkqB,GAAT,GAGZ,IAFD70B,EAEC,EAFDA,SACAgN,EACC,EADDA,yBAEsBwG,GAAYlT,EAAAA,EAAAA,YAAWmT,EAAAA,gBAArCC,aACFiO,GAAa9N,EAAAA,EAAAA,IAAaL,GAC1B3Q,EAAUrD,KACVmL,GAAOmqB,EAAAA,GAAAA,IAAWnT,GAClBoT,GAAcpX,EAAAA,EAAAA,IAAgBhT,GAC9BvN,GAAO43B,EAAAA,EAAAA,IAAexhB,GACtByhB,EAAgBC,EAAAA,GAAAA,SACtB,GAA6C50B,EAAAA,EAAAA,YAAWyR,IAAhDF,EAAR,EAAQA,cAAeC,EAAvB,EAAuBA,kBAEvB,EAAgDgiB,GAC9Cc,GAAgBphB,EAAS,YACzB,GAFF,eAAO2hB,EAAP,KAAyBC,EAAzB,KAIA,EAAgDtB,GAC9Cc,GAAgBphB,EAAS,YACzB,GAFF,eAAO6hB,EAAP,KAAyBC,EAAzB,KAIA,EAAwDxB,GACtDc,GAAgBphB,EAAS,gBACzB,GAFF,eAAO+hB,EAAP,KAA6BC,EAA7B,KAIA,EAAgD1B,GAC9Cc,GAAgBphB,EAAS,YACzB,GAFF,eAAOiiB,EAAP,KAAyBC,EAAzB,KAKMlf,EAAa,gBAACC,EAAA,EAAD,MACnB,OACE,gCACE,2BAAS9U,UAAWkB,EAAQyJ,eAC1B,sBACE,cA3CgB,iBA4ChB3K,UAAWkB,EAAQ,cACnB1D,MAAOwiB,GAENoT,IAIL,gBAACY,EAAA,EAAD,MAEA,gBAACtf,EAAA,EAAD,CACEkb,SAAU4D,EACV33B,SAAU,kBAAM43B,GAAqBD,KAErC,gBAAC5e,EAAA,EAAD,CACEC,WAAYA,EACZ,cAjE4B,sCA+D9B,WAMA,gBAACE,EAAA,EAAD,CAAkB/U,UAAWkB,EAAQsJ,kBACnC,gBAAC,KAAD,KACE,gBAAC,KAAD,KACE,gBAAC8C,GAAD,CACEtN,UAAWszB,EAAc,wBACzB,cA5EoB,2BA6EpBvrB,IAAKiY,GAHP,aAQF,gBAAC,KAAD,KACE,gBAAC7U,GAAD,CACEnL,UAAWszB,EAAc,uBAAwB,UACjDloB,YAAa4U,EACbhX,KAAMoqB,EACN/0B,SAAUA,EACVgN,yBAA0BA,EAC1B,cAxFkB,+BA+F5B,gBAACqJ,EAAA,EAAD,CACEkb,SAAU8D,EACV73B,SAAU,kBAAM83B,GAAqBD,KAErC,gBAAC9e,EAAA,EAAD,CACEC,WAAYA,EACZ,cAlGR,sCAgGM,WAMA,gBAACE,EAAA,EAAD,CAAkB/U,UAAWkB,EAAQsJ,kBACnC,2BAASxK,UAAWkB,EAAQwJ,iBAC1B,gBAACzB,EAAA,EAAD,KACE,gBAACI,EAAA,EAAD,CAAUrJ,UAAWkB,EAAQ0M,UAC3B,gBAACmF,EAAA,EAAD,CAAY/S,UAAWkB,EAAQ6J,YAA/B,eAGA,gBAACgI,EAAA,EAAD,CACE/S,UAAS,UAAKkB,EAAQ8J,UAAb,YAA0B9J,EAAQ6J,aAE1CtP,QAQZyU,GACC,iCACG+jB,EAAAA,GAAAA,IAAM9jB,IACL,gBAACuE,EAAA,EAAD,CACEkb,SAAUgE,EACV/3B,SAAU,kBAAMg4B,GAAyBD,KAEzC,gBAAChf,EAAA,EAAD,CACEC,WAAYA,EACZ,cA/Hd,kCA6HY,eAMA,gBAACE,EAAA,EAAD,CAAkB/U,UAAWkB,EAAQsJ,kBACnC,gBAAC+J,GAAD,SAIL2f,EAAAA,GAAAA,IAAM/jB,IACL,gBAACuE,EAAA,EAAD,CACEkb,SAAUkE,EACVj4B,SAAU,kBAAMk4B,GAAqBD,KAErC,gBAAClf,EAAA,EAAD,CACEC,WAAYA,EACZ,cA9I6B,8BA4I/B,WAMA,gBAACE,EAAA,EAAD,CAAkB/U,UAAWkB,EAAQsJ,kBACnC,gBAAC,GAAD,U,ykBAehB0oB,GAAgBx1B,aAAe,CAC7BW,SAAU,aACVgN,yBAA0B,cCrM5B,IAAMd,GAAQ,CACZ2X,iBAAkB,CAChBxgB,eAAgB,UAElBgJ,gBAAiB,CACf1I,YAAa,OACbJ,aAAc,QAEhBiJ,IAAK,CACHxF,OAAQ,OACRhD,MAAO,OACP+C,UAAW,IACX0B,SAAU,QAEZ8G,SAAU,CACRxN,QAAS,OACTsB,eAAgB,iBAElBqJ,WAAY,CACVxF,SAAU,WAEZyF,UAAW,CACTJ,WAAY,QAEd4F,OAAQ,CACNC,YAAa,SCfjB,IAAM5S,IAAYC,EAAAA,EAAAA,IAAW,SAACH,GAAD,OAAWI,EAAAA,EAAAA,GDmBzB,SAAgBJ,GAC7B,gBACK4M,IACAyoB,EAAAA,QAAAA,OAAer1B,ICtB+BK,CAAOL,OAE5D,SAASw2B,GAAT,GAAiC,IAAPpsB,EAAO,EAAPA,IAClB7G,EAAUrD,KACVmL,GAAOmqB,EAAAA,GAAAA,IAAWprB,GAClBqrB,GAAcpX,EAAAA,EAAAA,IAAgBhT,GAEpC,OACE,gCACE,2BAAShJ,UAAWkB,EAAQwJ,iBAC1B,sBAAI1K,UAAWkB,EAAQ,cAAe1D,MAAOuK,GAAO,IACjDqrB,GAAe,gBAACtqB,EAAA,EAAD,CAAUzG,MAAO,QAIrC,gBAAC2xB,EAAA,EAAD,MAEA,gBAAC,IAAD,OASNG,GAAez2B,aAAe,CAC5BqK,IAAK,MAGP,U,wBCxBO,SAASqsB,GAAT,GAAoD,IAAvBC,EAAuB,EAAvBA,YAAapxB,EAAU,EAAVA,OAC/C,wBAAO,6FACLoxB,GAAY,GACJC,EAAWrxB,EAAXqxB,OACFpoB,GAAWqoB,EAAAA,EAAAA,IAAiBD,IAAW,IAHxC,SAICrxB,EAAOkJ,QAAQ,kBAAmBD,GAJnC,2CAmBM,SAASsoB,GAAT,GAAgE,IAAtCC,EAAsC,EAAtCA,SAAUppB,EAA4B,EAA5BA,yBACjD,GAAkC1M,EAAAA,EAAAA,YAAW+1B,EAAAA,IAArCnT,EAAR,EAAQA,SAAU8S,EAAlB,EAAkBA,YACZpxB,GAASC,EAAAA,EAAAA,aACf,EAEID,EADF6E,MAAS6I,EADX,EACWA,OAAQvF,EADnB,EACmBA,YAEbupB,GAA0BppB,EAAAA,GAAAA,GAAgBH,EAAa,CAC3DwpB,mBAAmB,EACnBC,oBAAoB,IAERhxB,EAAuC8wB,EAA7ClsB,KAA2B+C,EAAkBmpB,EAAzBlpB,MAEtBqpB,GAAwBC,EAAAA,GAAAA,GAAiBlxB,GAEvCmxB,EAGJF,EAHFrsB,KACOwsB,EAELH,EAFFrpB,MACA6P,EACEwZ,EADFxZ,cAGFvb,EAAAA,EAAAA,YAAU,WACRs0B,KAAe1jB,IAAUvF,MACxB,CAACuF,EAAQvF,EAAaipB,IAEzB,IAAMa,EAAcd,GAAkB,CAAEC,YAAAA,EAAapxB,OAAAA,IAErD,GAAIuI,EAGF,OACE,gBAAC,KAAD,CAAQpM,KAAMmiB,EAAU4T,MAAOD,GAC7B,gBAAC,KAAD,CAAS73B,QAAQ,UACdwC,EAAAA,GAAAA,IAAY2L,EAAe,KAC1B,qEAEA,qEAOV,IAAMxD,GACHnE,IACCmxB,IAAsBC,GACxB3Z,EAEF,OACE,gBAAC,KAAD,CAAQlc,KAAMmiB,EAAU4T,MAAOD,GAC5BltB,EACC,gBAAC,GAAD,CAAgBD,IAAKqD,IAErB,gBAACoQ,GAAD,CAAsBC,IAAKkZ,GACzB,gBAACrkB,GAAD,CACEJ,cAAa,OAAE8kB,QAAF,IAAEA,OAAF,EAAEA,EAAmB9kB,cAClCC,kBAAiB,OAAE6kB,QAAF,IAAEA,OAAF,EAAEA,EAAmB7kB,mBAEtC,gBAAC,EAAAilB,gBAAD,CAAiBrjB,aAAclO,GAC7B,gBAACqvB,GAAD,CACE70B,SAAUo2B,EACVppB,yBAA0BA,QCvF3B,SAASgqB,GAAT,GAAgD,IAApB15B,EAAoB,EAApBA,SAAU25B,EAAU,EAAVA,OACnD,GAAkC32B,EAAAA,EAAAA,YAAW+1B,EAAAA,IAArCnT,EAAR,EAAQA,SAAU8S,EAAlB,EAAkBA,YACZpxB,GAASC,EAAAA,EAAAA,aAETqyB,EACJ,gBAACf,GAAD,CACEC,SAAU,WACRa,IACAlB,GAAkB,CAAEC,YAAAA,EAAapxB,OAAAA,GAAjCmxB,IAEF/oB,yBAA0B,SAACtD,GACzButB,IDMD,YAAuE,IAA5BjB,EAA4B,EAA5BA,YAAatsB,EAAe,EAAfA,IAAK9E,EAAU,EAAVA,OAClE,wBAAO,2FACLoxB,GAAY,GACNmB,GAAqBC,EAAAA,EAAAA,IAAsB1tB,GAF5C,SAGC9E,EAAOkJ,QACX,kBADI,oBAESupB,mBAAmBF,KAL7B,2CCNDG,CAAgC,CAAEtB,YAAAA,EAAatsB,IAAAA,EAAK9E,OAAAA,GAApD0yB,MAKN,OACE,gBAAC,KAAD,CAAiBJ,OAAQA,EAAQn2B,KAAMmiB,GACpC5lB,GDmFP64B,GAAe92B,aAAe,CAC5B+2B,SAAU,aACVppB,yBAA0B,cC3E5BgqB,GAAiB33B,aAAe,CAC9B/B,SAAU,M,4BCjCG,SAASi6B,KACtB,IAAM3yB,GAASC,EAAAA,EAAAA,aACf,OACE,uBAAK,cALmC,oBAMtC,gBAAC,KAAD,CAAY1F,MAAM,cAClB,gBAAC,KAAD,KACE,uEAEE,gBAAC,KAAD,CAAc4N,YAAanI,EAAO6E,MAAMC,KACrC9E,EAAO6E,MAAMC,KAHlB,OCNO,SAAS8tB,KACtB,IAAM5yB,GAASC,EAAAA,EAAAA,aACf,OACE,uBAAK,cALqC,sBAMxC,gBAAC,KAAD,CAAY1F,MAAM,uBAClB,gBAAC,KAAD,KACE,4DAEE,gBAAC,KAAD,CAAc4N,YAAanI,EAAO6E,MAAMC,KACrC9E,EAAO6E,MAAMC,KAHlB,O,gBCPO,SAAS+tB,KACtB,IAAM7yB,GAASC,EAAAA,EAAAA,aACf,OACE,uBAAK,cALgC,iBAMnC,gBAAC,KAAD,CAAY1F,MAAM,2BAClB,gBAAC,KAAD,KACE,gBAAC,KAAD,KACE,0FACA,yBACE,gHAIA,qBAAGmP,KAAM1J,EAAO6E,MAAMC,KAAM9E,EAAO6E,MAAMC,S,gBCSrD,GA5Be,SAACpK,GAAD,YAAY,CACzB,6BACGA,EAAM4D,YAAYC,GAAG,MAAQ,CAC5BpB,QAAS,OACTqB,cAAe,MACfC,eAAgB,gBAChBC,WAAY,YALhB,mBAOW,SAPX,yBAQiB,kBARjB,GAUA,6BACEvB,QAAS,OACT21B,IAAK,MACLt0B,cAAe,SACf6c,UAAW3gB,EAAM+C,QAAQ,KACxB/C,EAAM4D,YAAYC,GAAG,MAAQ,CAC5BpB,QAAS,OACTqB,cAAe,MACfs0B,IAAK,OACLr0B,eAAgB,gBAChBC,WAAY,SACZ2c,UAAW,EACX1T,WAAYjN,EAAM+C,QAAQ,Q,YCrBjB,SAAS1C,GAAOL,GAC7B,OAAOI,EAAAA,EAAAA,cAAaJ,EAAO,CAAC,aAAc,U,gBCKtCE,IAAYC,EAAAA,EAAAA,IAAW,SAACH,GAAD,OAAWI,EAAAA,EAAAA,GAAaC,GAAOL,OAE7C,SAASq4B,GAAT,GAAkC,IAAjBC,EAAiB,EAAjBA,MAAOC,EAAU,EAAVA,OAC/Bz3B,GAAMC,EAAAA,EAAAA,QAAOb,MACnB,OACE,sBAAIyL,IAAK2sB,EAAME,IAAKn2B,UAAWvB,EAAI,sBACjC,qBACEuB,WAAWC,EAAAA,EAAAA,GACTxB,EAAI,mBACJA,EAAI,oBAAqB,YAG5By3B,EACC,gBAAC,WAAD,CAAMvpB,KAAMspB,EAAME,KAChB,qBAAGn2B,UAAWvB,EAAI,qBAChB,wBAAMuB,UAAWvB,EAAI,uBAArB,YACCw3B,EAAMh1B,QAIXg1B,EAAMh1B,MAER,qBACEjB,WAAWC,EAAAA,EAAAA,GACTxB,EAAI,oBACJA,EAAI,oBAAqB,aAOnCu3B,GAAMt4B,aAAe,CACnBu4B,MAAO,ICjCT,IAAMp4B,IAAYC,EAAAA,EAAAA,IAAW,SAACH,GAAD,OAAWI,EAAAA,EAAAA,GAAaC,GAAOL,OAI7C,SAASy4B,KACtB,IAAM33B,GAAMC,EAAAA,EAAAA,QAAOb,MACbw4B,GAAc13B,EAAAA,EAAAA,YAAW23B,GAAAA,GACzBC,GAAkBluB,EAAAA,EAAAA,aAExB,IAAKguB,EAAYG,QAAS,OAAO,gBAAC,IAAD,MAEjC,IAAQA,EAAwBH,EAAxBG,QACFC,EAD0BJ,EAAfK,WAEdC,OAAOH,EAAQj7B,QACfq7B,MAAM,KACNx7B,QAAO,SAAC66B,GAAD,QAAaA,KACjB/xB,EAAe,SAAC0iB,GACpB,0BAAoB8O,mBAAmB,GAAD,OACjCc,EAAUC,EAAS/iB,MAAM,EAAGkT,EAAQ,GAAGlP,KAAK,KADX,QAIlCmf,EAAS,CACb,CAAEV,IAAK,aAAF,OAAeT,mBAAmBc,IAAYv1B,MAAO,cAC1D6W,OACA2e,EAAS9iB,KAAI,SAACmjB,EAAMlQ,GAAP,MAAkB,CAC7BuP,IAAKjyB,EAAa0iB,GAClB3lB,MAAO81B,mBAAmBD,QAI9B,OACE,uBAAK,aAAW,eACd,sBACE,cA/BwB,cAgCxB92B,UAAWvB,EAAI,cACf2J,IAAKmuB,GAEJM,EAAOljB,KAAI,SAACsiB,EAAOrP,GAAR,OACV,gBAACoP,GAAD,CACEC,MAAOA,EACP3sB,IAAK2sB,EAAME,IACXD,OAAQtP,IAAUiQ,EAAOt7B,OAAS,SC1C/B,SAASy7B,GAAT,GAA+C,IAAbh3B,EAAa,EAAbA,UAC/C,OACE,gBAAC,KAAD,CACE,cALoC,wBAMpC2Q,OAAQsmB,EAAAA,GAAAA,QACRj3B,UAAWA,GAHb,kBAcJg3B,GAAuBt5B,aAAe,CACpCsC,UAAW,M,gBCTAk3B,GAAsB,wBAInC,SAASC,GAAsBC,GAC7B,OAAOA,EAASjrB,QAAQ,KAAM,IAGzB,SAASkrB,GAAT,GAQJ,IAPD9zB,EAOC,EAPDA,MACAmzB,EAMC,EANDA,WACAY,EAKC,EALDA,OACAC,EAIC,EAJDA,eACA14B,EAGC,EAHDA,aACAC,EAEC,EAFDA,WACAC,EACC,EADDA,YAEA,0CAAO,WAAOy4B,GAAP,uFAEGJ,EAAWD,GAAsBK,EAAaxuB,MAFjD,UAGGyuB,EAAAA,GAAAA,KACJ5gB,EAAAA,EAAAA,IAAS6f,EAAYhB,mBAAmB0B,IACxCI,EACA,CACE/7B,KAAM+7B,EAAa/7B,KACnB8H,MAAAA,IARD,OAYH+zB,IAEAv4B,EAAY,WACZD,EAAW,kCAAD,OAAmCs4B,IAC7Cv4B,GAAa,GAhBV,kDAkBHE,EAAY,SACZD,EAAW,KAAMgB,YACjBjB,GAAa,GApBV,yBAsBH04B,GAAe,GAtBZ,6EAAP,sDAgFa,SAASG,GAAT,GAA4D,IAAnC13B,EAAmC,EAAnCA,UAAWs3B,EAAwB,EAAxBA,OAAQK,EAAgB,EAAhBA,aAEjDp0B,GADYrH,EAAAA,EAAAA,cAAZD,QACAsH,MACAmzB,GAAe/3B,EAAAA,EAAAA,YAAW23B,GAAAA,GAA1BI,WACR,GAAsCv6B,EAAAA,EAAAA,WAAS,GAAxCy7B,EAAP,KAAoBL,EAApB,KACA,GAAkD54B,EAAAA,EAAAA,YAAWC,GAAAA,IAArDE,EAAR,EAAQA,WAAYC,EAApB,EAAoBA,YAAaF,EAAjC,EAAiCA,aACjC,GACEF,EAAAA,EAAAA,YAAWO,GAAAA,IADLC,EAAR,EAAQA,UAAWC,EAAnB,EAAmBA,KAAMC,EAAzB,EAAyBA,WAAYC,EAArC,EAAqCA,QAASC,EAA9C,EAA8CA,SAAUC,EAAxD,EAAwDA,YAExD,GAAkDrD,EAAAA,EAAAA,WAAS,GAApD6C,EAAP,KAA0BC,EAA1B,KACA,GAAwB9C,EAAAA,EAAAA,UAAS,MAA1BoQ,EAAP,KAAasrB,EAAb,KACMzvB,GAAM0vB,EAAAA,EAAAA,QAAO,MAEbC,EAAeV,GAAmB,CACtC9zB,MAAAA,EACAmzB,WAAAA,EACAY,OAAAA,EACAC,eAAAA,EACA14B,aAAAA,EACAC,WAAAA,EACAC,YAAAA,IAGIi5B,EA3ED,YAOJ,IAND14B,EAMC,EANDA,QACAC,EAKC,EALDA,SACAF,EAIC,EAJDA,WACAJ,EAGC,EAHDA,qBACAs4B,EAEC,EAFDA,eACAQ,EACC,EADDA,aAEA,OAAO,SAACP,EAAcS,GAChBA,GACF34B,EAAQ43B,IACR33B,EAAS,QAAD,OACE43B,GAAsBK,EAAaxuB,MADrC,oBAGR3J,EAxD8B,8BAyD9BJ,GAAqB,GACrBs4B,GAAe,KAEfQ,EAAaP,GACbD,GAAe,KAwDMW,CAAmB,CAC1C54B,QAAAA,EACAC,SAAAA,EACAF,WAAAA,EACAJ,qBAAAA,EACAs4B,eAAAA,EACAQ,aAAAA,IAGII,EA5DD,YAQJ,IAPDZ,EAOC,EAPDA,eACAM,EAMC,EANDA,QACAG,EAKC,EALDA,iBACAj5B,EAIC,EAJDA,YACAD,EAGC,EAHDA,WACAD,EAEC,EAFDA,aACA84B,EACC,EADDA,aAEA,OAAO,SAAC/3B,GACN,GAAKA,EAAE5C,OAAOo7B,MAAM78B,OACpB,IACEg8B,GAAe,GACf,IAAMC,EAAe53B,EAAE5C,OAAOo7B,MAAM,GACpCP,EAAQL,GACR,IAAMS,IAAiBN,EAAaU,MAClC,SAAC9rB,GAAD,OAAUA,EAAKvD,OAASmuB,GAAsBK,EAAaxuB,SAE7DgvB,EAAiBR,EAAcS,GAC/B,MAAOxsB,IACP1M,EAAY,SACZD,EAAW2M,GAAM3L,YACjBjB,GAAa,GAXf,QAaE04B,GAAe,KAoCEe,CAAiB,CACpC/0B,MAAAA,EACAmzB,WAAAA,EACAa,eAAAA,EACAM,QAAAA,EACAG,iBAAAA,EACAD,aAAAA,EACAh5B,YAAAA,EACAD,WAAAA,EACAD,aAAAA,EACA84B,aAAAA,IAiBF,OAdA53B,EAAAA,EAAAA,YAAU,WACJf,GAAmC,OAAdG,GAAsBC,IAAS83B,KAGpDl4B,GAAqBG,GAAaC,IAAS83B,IAC7Ca,EAAaxrB,GAGG,OAAdpN,IACFK,IACAP,GAAqB,OAEtB,CAACD,EAAmBG,EAAW44B,EAAcv4B,EAAa+M,EAAMnN,IAGjE,gCACE,yBAEEmuB,SAAS,IACTgL,QAAQ,oBACRv4B,UAAWA,EACX,cArKiC,qBAsKjCqO,SAAUupB,EACV13B,QAAS,SAACN,GACJwI,EAAIQ,SACN2uB,GAAe,GAEjB33B,EAAE5C,OAAOC,MAAQ,MAEnBu7B,QAAS,SAAC54B,GACM,UAAVA,EAAE0J,MACAlB,EAAIQ,SACNR,EAAIQ,QAAQsE,QAEdtN,EAAE5C,OAAOC,MAAQ,QAIpB26B,EAAc,eAAiB,cAChC,yBACExvB,IAAKA,EACL9K,GAAG,oBACH,cAzL8B,oBA0L9B7B,KAAK,OACLsN,MAAO,CAAE3I,QAAS,QAClBvE,SAAU,SAAC+D,GACTu4B,EAAav4B,GACbA,EAAE5C,OAAOC,MAAQ,SAIvB,gBAAC,MAAD,OAWNy6B,GAAch6B,aAAe,CAC3BsC,UAAW,KACXs3B,OAAQ,aACRK,aAAc,IC3MT,IAID95B,IAAYC,EAAAA,GAAAA,IAAW,SAACH,GAAD,OAAWI,EAAAA,EAAAA,GAAaC,GAAOL,OAErD,SAAS86B,GAAkBC,EAAShC,EAAY1tB,GACrD,IAAI2vB,EAAc3vB,EAgBlB,OAfA,SAAS4vB,IAA0B,IAAPC,EAAO,uDAAH,EACxBC,EAAQt1B,QACZk1B,EAAQL,MAAK,SAACU,GAAD,OAAYA,EAAO/vB,OAAS2vB,MAE3C,GAAIG,EAAO,CACT,IAAME,EAAWL,EAAYhC,OAAO,EAAGgC,EAAYpZ,QAAQ,MAEzDoZ,EADEK,EAASz9B,OACG,GAAH,OAAMy9B,EAAN,YAAkBH,EAAlB,KAEG,GAAH,OAAMF,EAAN,YAAqBE,EAArB,KAEbD,EAAmBC,EAAI,IAG3BD,IACO/hB,EAAAA,EAAAA,IAAS6f,EAAYhB,mBAAmBiD,IAqDlC,SAASM,GAAT,GAA8D,IAAnC3B,EAAmC,EAAnCA,OAAQt3B,EAA2B,EAA3BA,UAAW23B,EAAgB,EAAhBA,aACrDz2B,EAAUrD,KAChB,GAAoC1B,EAAAA,EAAAA,UAAS,IAAtC+8B,EAAP,KAAmBC,EAAnB,KACA,GAAgCh9B,EAAAA,EAAAA,UAAS,MAAlC0G,EAAP,KAAiBC,EAAjB,KACA,GAAkC3G,EAAAA,EAAAA,WAAS,GAApCP,EAAP,KAAkBuH,EAAlB,KACA,GAA4ChH,EAAAA,EAAAA,WAAS,GAA9Ci9B,EAAP,KAAuBC,EAAvB,KACQ3C,GAAe/3B,EAAAA,EAAAA,YAAW23B,GAAAA,GAA1BI,WACR,GAAkD/3B,EAAAA,EAAAA,YAAWC,GAAAA,IAArDE,EAAR,EAAQA,WAAYC,EAApB,EAAoBA,YAAaF,EAAjC,EAAiCA,aAGpB0E,GACTrH,EAAAA,EAAAA,cADFD,QAAWsH,MAGPm1B,EACJf,GAAgBA,EAAav8B,QAAO,SAACuoB,GAAD,OAAQA,EAAG5b,IAAIuxB,SAAS,QAKxD51B,EAAc,WAClBZ,EAAY,OAGR1D,EAAOoE,QAAQX,GACfvF,EAAK8B,EAAO,yBAAsBqE,EAGlC3H,EA7ED,YAaJ,IAZDy9B,EAYC,EAZDA,QACAjC,EAWC,EAXDA,OACAZ,EAUC,EAVDA,WACAgC,EASC,EATDA,QACA1vB,EAQC,EARDA,KACAjK,EAOC,EAPDA,YACAD,EAMC,EANDA,WACAD,EAKC,EALDA,aACA6E,EAIC,EAJDA,YACAy1B,EAGC,EAHDA,cACAh2B,EAEC,EAFDA,aACAk2B,EACC,EADDA,kBAEA,0CAAO,WAAOz8B,GAAP,4EACLA,EAAMC,iBACNsG,GAAa,GACR6F,EAHA,iEAOGjG,EAAM01B,GAAkBC,EAAShC,EAAY1tB,GAPhD,UAQoBwwB,EAAAA,GAAAA,IAAkBz2B,EAAKw2B,GAR3C,OAQGltB,EARH,OAUHirB,IACAv4B,EAAY,WACZD,EAAW,mCAAD,OAC2Bi4B,oBACjC7kB,EAAAA,EAAAA,IAAa7F,MAGjBxN,GAAa,GACbs6B,EAAc,IACdh2B,GAAa,GACbk2B,GAAkB,GAClB31B,IArBG,kDAuBH3E,EAAY,SACZD,EAAW,KAAMgB,YACjBjB,GAAa,GAzBV,0DAAP,sDA+DiB46B,CAAmB,CAClCF,QAHc,CAAEh2B,MAAAA,GAIhBm1B,QAAAA,EACAhC,WAAAA,EACA1tB,KAAMkwB,EACN5B,OAAAA,EACAv4B,YAAAA,EACAD,WAAAA,EACAD,aAAAA,EACA6E,YAAAA,EACAy1B,cAAAA,EACAh2B,aAAAA,EACAk2B,kBAAAA,IAGIx9B,EAhDD,SAAsBs9B,GAC3B,OAAO,YAA2B,IAAdl8B,EAAc,EAAxBD,OAAUC,MAClBk8B,EAAcl8B,IA8CCF,CAAao8B,GACxBO,GAAoBR,IAAet9B,GAAaw9B,GAEtD,OACE,gCACE,gBAAC,KAAD,CACE,mBAAkB97B,EAClB,cA7HqC,oBA8HrC0C,UAAWA,EACXE,QApCc,SAACtD,GACnBkG,EAAYlG,EAAMsL,gBAoCd7K,QAAQ,SALV,iBASA,gBAAC+G,EAAA,GAAD,CACE,cAAa9G,EACb8B,KAAMA,EACNyD,SAAUA,EACV3B,QAASA,EACToD,QAASZ,EACTa,aAAc,CACZC,SAAU,SACVC,WAAY,UAEdC,gBAAiB,CACfF,SAAU,MACVC,WAAY,WAGd,gBAAC,KAAD,CAAM3I,SAAU,SAACc,GAAD,OAAWd,EAASc,KAClC,gBAAC,KAAD,CAAO27B,QAAQ,gBAAf,eACCmB,EACC,gBAAC,KAAD,CAASr8B,QAAQ,WAAjB,sBACE,KACJ,gBAAC,KAAD,CACEC,GAAG,eACH,cAzJ0B,oBA0J1BzB,SAAUA,EACVsB,OAAQ,kBAAMk8B,GAAkB,IAChCp8B,MAAOi8B,EACPz7B,SAAUi8B,IAEZ,gBAAC,KAAD,CACE,cA/JoC,8BAgKpCj+B,KAAK,UAFP,oBAkBVw9B,GAAgBv7B,aAAe,CAC7B45B,OAAQ,aACRK,aAAc,GACd33B,UAAW,MC5Lb,IAAMnC,IAAYC,EAAAA,EAAAA,IAAW,SAACH,GAAD,OAAWI,EAAAA,EAAAA,GAAaC,GAAOL,OAE7C,SAASg8B,GAAT,GAAsD,IAAxBrE,EAAwB,EAAxBA,OAAQqC,EAAgB,EAAhBA,aAC7Cl5B,GAAMC,EAAAA,EAAAA,QAAOb,MAEb+7B,EADYv4B,EAAAA,GAAAA,QACOw4B,CAAU,SAAU,SAC7C,OACE,uBAAK75B,UAAWvB,EAAI,eAClB,gBAAC23B,GAAD,MACA,uBAAKp2B,UAAWvB,EAAI,sBAClB,gBAAC,GAAD,CAAkBuB,UAAW45B,IAC7B,gBAACX,GAAD,CACE3B,OAAQhC,EACRqC,aAAcA,EACd33B,UAAW45B,IAEb,gBAAClC,GAAD,CACEJ,OAAQhC,EACRqC,aAAcA,EACd33B,UAAW45B,MAiBrBD,GAAmBj8B,aAAe,CAChC43B,OAAQ,kBAAM,MACdqC,aAAc,I,eC5CD,SAASmC,KACtB,OACE,uBAAK,cAJ0C,2BAK7C,gBAAC,KAAD,CAAYt8B,MAAM,gCAClB,gBAAC,KAAD,KACE,6ECIO,SAASu8B,GAAT,GAA0C,IAAdC,EAAc,EAAdA,WACzC,GAA4B79B,EAAAA,EAAAA,UAAS,MAA9B89B,EAAP,KAAeC,EAAf,KACMz7B,EAAM07B,EAAAA,GAAAA,SACN/6B,GAAQg7B,eAAe3H,QAAQ,8BAErC1yB,EAAAA,EAAAA,YAAU,kBAAMm6B,EAAUttB,OAAOytB,SAASC,UAAS,IAEnD,IAAMh2B,EAbC,SAAC1H,GACNA,EAAMC,iBACNu9B,eAAerH,QAAQ,4BAA6B,SAatD,OAAO3zB,EACL,gBAAC,KAAD,CACE/B,QAAQ,UACRk9B,WAAS,EACTC,SAAO,EACPl2B,QAASA,EACTm2B,iBAAkB,CAAE,cAxByB,2BAyB7C,cA1BsC,oBA4BtC,qBAAGz6B,UAAWvB,EAAI,mBAAlB,8DAGA,oKAIA,qBAAGuB,UAAWvB,EAAI,mBAAlB,eACA,0BACE,0BACE,0CACA,qBAAGkO,KAAMqtB,EAAYh9B,OAAO,SAAS4gB,IAAI,cACvC,wCACA,gBAAC,KAAD,CAAO5U,KAAK,gBAAgB,uBAGhC,2DACA,0BACE,6FACA,4BAAOixB,GACP,uEAEF,yDACA,oDAGF,KCrDS,SAASS,KACtB,OACE,uBAAK,cAJsC,uBAKzC,gBAAC,KAAD,CAAYl9B,MAAM,4BAClB,gBAAC,KAAD,KACE,sF,gBCGO,SAASm9B,GAAT,GAA+D,IAArCC,EAAqC,EAArCA,cAAenyB,EAAsB,EAAtBA,KAAMoyB,EAAgB,EAAhBA,aACtDp8B,EAAM+uB,EAAAA,GAAAA,SAENuD,GAAUtN,EAAAA,EAAAA,UACd,iBAAM,CACJ,CACEgI,OAAQ,OACRuF,SAAU,OACV8J,eAAe,EACf7J,UAAW,CAAC,eAAgB,kBAE9B,CACExF,OAAQ,eACRuF,SAAU,gBACV8J,eAAe,EACf7J,UAAW,CAAC,eAAgB,kBAE9B,CACE8J,OAAQ,OACR/J,SAAU,YAEZ,CACE+J,OAAQ,OACR/J,SAAU,WAGd,IAGF,GACEE,EAAAA,GAAAA,UACE,CACEH,QAAAA,EACAtoB,KAAAA,EACAuyB,gBAAgB,GAElBC,GAAAA,WAPIzJ,EAAR,EAAQA,cAAeC,EAAvB,EAAuBA,kBAAmByJ,EAA1C,EAA0CA,aAAcxJ,EAAxD,EAAwDA,KAAMC,EAA9D,EAA8DA,WAU9D,OACE,iCACE3xB,WAAWC,EAAAA,EAAAA,GAAKxB,EAAI,WAChB+yB,IAFN,CAGE,cA7CqC,oBA+CrC,yBAAOxxB,UAAWvB,EAAI,kBACnBy8B,EAAavnB,KAAI,SAACwnB,GAAD,OAChB,8BACE7xB,IAAK6xB,EAAY79B,GACjB0C,UAAWvB,EAAI,sBACX08B,EAAYC,uBAEfD,EAAYE,QAAQ1nB,KAAI,SAAC2nB,GAAD,OACvB,8BACEhyB,IAAKgyB,EAAOh+B,GACZ0C,UAAWvB,EAAG,WAAH,GACT,sBADS,gBAEL68B,EAAOrK,WAAa,OAEtBqK,EAAOC,eAAeD,EAAOE,yBAEhCF,EAAOG,OAAO,UARjB,IAUE,gBAAC,KAAD,CACE7K,OAAQ0K,EAAOI,SACfC,WAAYL,EAAOM,wBAO/B,iCAAO57B,UAAWvB,EAAI,gBAAoBgzB,KACtChpB,GAASA,EAAKlN,OAMZ,KALF,sBAAI+N,IAAI,qBAAqBtJ,UAAWvB,EAAI,oBAC1C,sBAAIo9B,QAAS,EAAG77B,UAAWvB,EAAI,qBAA/B,mDAMHizB,EAAK/d,KAAI,SAACia,GACT+D,EAAW/D,GACX,IAAMtZ,EAAUsZ,EAAIkE,SACpB,OACE,gBAAC,KAAD,CACExoB,IAAKgL,EAAQvM,IACb+zB,SAAUxnB,EACV5G,UAAWktB,EACXmB,YACEznB,EAAQvM,MAAQ8yB,KAAiB/uB,EAAAA,EAAAA,IAAY+uB,UC/C9C,SAASmB,GAAT,GAA4B,IAAPj0B,EAAO,EAAPA,KAClCk0B,EAAAA,EAAAA,MACA,IAAQC,GAA6BhgC,EAAAA,EAAAA,cAA7BggC,yBACR,GAAwC//B,EAAAA,EAAAA,UAAS,MAA1CggC,EAAP,KAAqBC,EAArB,KACA,GACE5zB,EAAAA,EAAAA,KADYD,EAAd,EAAQE,KAAmC4zB,EAA3C,EAAoC5wB,MAE9BuuB,GAAasC,EAAAA,GAAAA,GAAcv0B,GACjC,GAA4C5L,EAAAA,EAAAA,UAAS,MAA9CogC,EAAP,KAAuBC,EAAvB,KACA,GACEjxB,EAAAA,GAAAA,GAAgByuB,GADJyC,EAAd,EAAQh0B,KAAkCi0B,EAA1C,EAAmCjxB,MAEnC,GAGIspB,EAAAA,GAAAA,GAAiB0H,GAFZxH,EADT,EACExpB,MACckxB,EAFhB,EAEErhB,aAGF,GAKIshB,EAAAA,GAAAA,GAAa70B,GAJT2F,EADR,EACEjF,KACOo0B,EAFT,EAEEpxB,MACQ6pB,EAHV,EAGE/Z,OACAD,EAJF,EAIEA,cAGFvb,EAAAA,EAAAA,YAAU,WACR,IAjDJ,SAAiCgI,EAAK2F,GACpC,OAAK3F,GAEH2F,IAAaF,EAAAA,GAAAA,IAAezF,KAAQmK,EAAAA,EAAAA,IAAaxE,EAAUmE,WAAa9J,EA8CpE+0B,CAAwB/0B,EAAK2F,GAAjC,CACA,IAAMqvB,EAAOrvB,IAAasvB,EAAAA,GAAAA,GAA2BtvB,GACrD0uB,EAAgBW,MACf,CAACrvB,EAAW3F,KAEfhI,EAAAA,EAAAA,YAAU,WACRy8B,EAAkBvH,KACjB,CAACA,IAEJ,IAAMxsB,GAAOgb,EAAAA,EAAAA,UAAQ,WACnB,OAAK0Y,EAIEA,EAAaxoB,KAAI,SAACspB,GAAD,YAAW,CACjCl1B,IAAKk1B,EACLj0B,MAAMgT,EAAAA,EAAAA,IAAgBihB,GACtBC,SAAQ,WAAElhB,EAAAA,EAAAA,IAAgBihB,UAAlB,aAAE,EAAuB3uB,cACjC7S,MAAM0hC,EAAAA,EAAAA,IAAmBF,OAPlB,KASR,CAACd,IAEJ,IAAKp0B,GAAOuT,GAAgBqhB,EAC1B,OAAO,gBAAC,IAAD,MAET,GAAIE,IAAkBh9B,EAAAA,GAAAA,IAAYg9B,EAAejxB,QAAS,KACxD,OAAO,gBAACgqB,GAAD,MACT,GAAIiH,IAAkBh9B,EAAAA,GAAAA,IAAYg9B,EAAejxB,QAAS,KACxD,OAAO,gBAACgqB,GAAD,MACT,GAAIiH,IAAkBh9B,EAAAA,GAAAA,IAAYg9B,EAAejxB,QAAS,KACxD,OAAO,gBAACiqB,GAAD,MACT,GAAIgH,IAAmBX,EAA0B,OAAO,gBAACpG,GAAD,MACxD,GAAIuG,EAA2B,OAAO,gBAACvC,GAAD,MAEtC,IAAM3qB,GAAuBxG,EAAAA,EAAAA,IAC3BJ,EACAR,GAGF,GAAI20B,GAAgBvtB,EAAsB,OAAO,gBAACurB,GAAD,MAEjD,IAAKyB,IAAiBzuB,IAAcssB,EAAY,OAAO,gBAAC,IAAD,MAEvD,IAAiBoD,EAAqB1vB,EAA9BmE,QAER,OAAIurB,KAAqBtxB,EAAAA,EAAAA,IAAYsxB,GAC5B,gBAACtH,GAAD,MAGP,gCACE,gBAAC,MAAD,KACE,gBAAC,EAAD,MACA,gBAACT,GAAD,CAAkBC,OAAQA,GACxB,gBAACqE,GAAD,CAAoBrE,OAAQA,EAAQqC,aAAclvB,IAnF5D,SAA4B0G,EAAsBotB,EAAgBvC,GAChE,OACE7qB,GACAotB,GAAkB,gBAACxC,GAAD,CAAkBC,WAAYA,IAiFzCqD,CAAmBluB,EAAsBotB,EAAgBvC,GAhGpE,SAAgC1e,EAAcvT,EAAKU,GACjD,OAAO6S,EACL,gBAAC,IAAD,MAEA,gBAACqf,GAAD,CACEC,eAAe0C,EAAAA,EAAAA,IAAgBv1B,GAC/BU,KAAMA,EACNoyB,aAAc9yB,IA0FTw1B,CAAuBjiB,EAAcvT,EAAKU,MC/HtC,SAAS+0B,MACtBvB,EAAAA,EAAAA,MACA,IAAMh5B,GAASC,EAAAA,EAAAA,aAEf,OACE,gBAAC,KAAD,CAAqBwzB,WAAYzzB,EAAO6E,MAAMC,KAC5C,gBAAC,KAAD,KACE,gBAACi0B,GAAD,CAAej0B,IAAK9E,EAAO6E,MAAMC,QCX1B,SAASy1B,KACtB,OAAO,gBAACA,GAAD,MF6ITxB,GAAUt+B,aAAe,CACvBqK,IAAK,O,kJG7IQ,SAAS60B,EAAa70B,GACnC,IAAM9L,GAAUC,EAAAA,EAAAA,cACRggC,EAA6BjgC,EAA7BigC,yBACFn5B,GAAMu6B,EAAAA,EAAAA,IAAgBv1B,GAHY,SAKzB01B,EALyB,0EAKxC,WAA8Bl6B,GAA9B,2FACSm6B,EAAAA,EAAAA,GAAa36B,EAAK,CAAEQ,MAAAA,KAD7B,4CALwC,sBASxC,OAAO4iB,EAAAA,EAAAA,IACL,CAAC,YAAapjB,EAAKm5B,IADR,iBAEX,iFACOn5B,IAAOm5B,EADd,yCAC+C,MAD/C,gCAESuB,EAAexhC,EAAQsH,QAFhC,2CAIA,CAAEqxB,mBAAmB,EAAO+I,gBAAiB,EAAGC,mBAAoB,Q,4OCPjE,SAASC,EAAeC,GAAgB,UAC7C,OAAKA,EACE1gB,MAAMC,QAAN,OAAcygB,QAAd,IAAcA,GAAd,UAAcA,EAAgB3jB,yBAA9B,aAAc,EAAmCC,YAAjD,OACH0jB,QADG,IACHA,GADG,UACHA,EAAgB3jB,yBADb,aACH,EAAmCC,WAAW,GAAGI,WAD9C,OAEHsjB,QAFG,IAEHA,GAFG,UAEHA,EAAgB3jB,yBAFb,aAEH,EAAmCC,WAAWI,WAHtB,KAMvB,SAASmF,EAAgBme,GAC9B,cAAOA,QAAP,IAAOA,OAAP,EAAOA,EAAgBnjB,aAGlB,SAAS6E,EAAcse,GAC5B,cAAOA,QAAP,IAAOA,OAAP,EAAOA,EAAgBljB,eAGlB,SAASmjB,EAAqBD,GAAgB,UACnD,OAAO1gB,MAAMC,QAAN,OAAcygB,QAAd,IAAcA,GAAd,UAAcA,EAAgB3jB,yBAA9B,aAAc,EAAmCC,YAAjD,OACH0jB,QADG,IACHA,GADG,UACHA,EAAgB3jB,yBADb,aACH,EAAmCC,WACnC,QAAC0jB,QAAD,IAACA,GAAD,UAACA,EAAgB3jB,yBAAjB,aAAC,EAAmCC,YAGnC,SAAS4jB,EAA0BC,GACxC,OAAOA,EAAe1jB,gBAGjB,SAAS2jB,EAAc9uB,GAC5B,OAAOA,EAAOiL,KAGT,SAAS8jB,EAAkBL,GAAgB,MAChD,cAAOA,QAAP,IAAOA,GAAP,UAAOA,EAAgB3jB,yBAAvB,aAAO,EAAmC7c,GAGrC,SAAS8gC,EAAQlkB,GACtB,cAAOA,QAAP,IAAOA,OAAP,EAAOA,EAAI5c,K,wKC1CN,SAAeogC,EAAtB,oC,wCAAO,WAA4B36B,EAA5B,qFAAmCQ,EAAnC,EAAmCA,MAAnC,UACiB86B,EAAAA,EAAAA,IAAgBt7B,EAAK,CAAEQ,MAAAA,IADxC,cACCsO,EADD,OAECmE,GAAQC,EAAAA,EAAAA,IAASpE,EAAS9O,GAF3B,kBAGE,CAAE8O,QAAAA,EAASmE,MAAAA,IAHb,4C,sBAMA,SAASgnB,EAAT,GAA+C,IAAThnB,EAAS,EAATA,MAC3C,OAAKA,GACEsoB,EAAAA,EAAAA,IAAUtoB,EAAOuoB,EAAAA,GAAAA,UADL,K,mCCVd,SAASC,EAAoBC,GAEhC,IAAMC,EAAgB9xB,OAAOytB,SAASC,OACtC,gBAAUoE,EAAV,YAA2BD,GAMxB,SAASE,IACd,OAAwC/xB,OAAOytB,SAASuE,SACpDhyB,OAAOytB,SAASuE,SAChB,GAGC,SAASC,IAGZ,OADsBjyB,OAAOytB,SAASC,OA2BnC,SAAShI,IAEZ,OAAO1lB,OAAOylB,aA6BX,SAASG,IAEZ,OAAO5lB,OAAO2lB,Q,yJCnGb3lB,OAAOkyB,SAAWlyB,OAAOkyB,UAAY,IAAI76B,KAAK,CAC7C,kBACA,WACE,OAAO,EAAQ,Y","sources":["webpack://_N_E/./components/agentSearchForm/index.jsx","webpack://_N_E/./components/deleteButton/styles.js","webpack://_N_E/./components/deleteButton/index.jsx","webpack://_N_E/./components/infoTooltip/index.jsx","webpack://_N_E/./components/infoTooltip/styles.js","webpack://_N_E/./components/containerPageHeader/styles.js","webpack://_N_E/./components/podIndicator/podNavigatorPopover/styles.js","webpack://_N_E/./components/podIndicator/podNavigatorPopover/index.jsx","webpack://_N_E/./components/podIndicator/styles.js","webpack://_N_E/./components/podIndicator/index.jsx","webpack://_N_E/./components/containerPageHeader/index.jsx","webpack://_N_E/./components/resourceDetails/styles.js","webpack://_N_E/./components/deleteResourceButton/index.jsx","webpack://_N_E/./components/downloadLink/index.jsx","webpack://_N_E/./components/permissionsForm/styles.js","webpack://_N_E/./components/permissionsForm/permissionCheckbox/index.jsx","webpack://_N_E/./components/permissionsForm/index.jsx","webpack://_N_E/./src/contexts/accessControlContext/index.jsx","webpack://_N_E/./components/resourceDetails/resourceSharing/agentAccessOld/index.jsx","webpack://_N_E/./components/resourceDetails/resourceSharing/agentAccessOld/styles.js","webpack://_N_E/./src/hooks/usePermissions/index.js","webpack://_N_E/./components/resourceDetails/resourceSharing/agentAccessList/index.jsx","webpack://_N_E/./components/resourceDetails/resourceSharing/agentAccessList/styles.js","webpack://_N_E/./components/addPermissionUsingWebIdButton/styles.js","webpack://_N_E/./components/addPermissionUsingWebIdButton/index.jsx","webpack://_N_E/./components/resourceDetails/resourceSharing/index.jsx","webpack://_N_E/./components/resourceDetails/resourceSharing/styles.js","webpack://_N_E/./src/models/contact/person/index.js","webpack://_N_E/./src/models/profile/index.js","webpack://_N_E/./components/avatar/index.jsx","webpack://_N_E/./components/avatar/styles.js","webpack://_N_E/./src/contexts/resourceInfoContext/index.jsx","webpack://_N_E/./constants/propTypes.js","webpack://_N_E/./components/resourceDetails/resourceSharing/agentAccess/agentAccessOptionsMenu/removeButton/index.jsx","webpack://_N_E/./components/resourceDetails/resourceSharing/agentAccess/agentAccessOptionsMenu/removeButton/styles.js","webpack://_N_E/./components/resourceDetails/resourceSharing/agentAccess/agentAccessOptionsMenu/consentDetailsButton/styles.js","webpack://_N_E/./components/resourceDetails/resourceSharing/agentAccess/agentAccessOptionsMenu/consentDetailsButton/index.jsx","webpack://_N_E/./src/models/consent/signedVc/index.js","webpack://_N_E/./components/resourceDetails/resourceSharing/agentAccess/agentAccessOptionsMenu/consentDetailsButton/agentName/index.jsx","webpack://_N_E/./components/resourceDetails/resourceSharing/agentAccess/agentAccessOptionsMenu/consentDetailsButton/consentDetailsModal/index.jsx","webpack://_N_E/./components/resourceDetails/resourceSharing/agentAccess/agentAccessOptionsMenu/consentDetailsButton/consentDetailsModal/styles.js","webpack://_N_E/./components/resourceDetails/resourceSharing/agentAccess/agentAccessOptionsMenu/index.jsx","webpack://_N_E/./components/resourceDetails/resourceSharing/agentAccess/agentAccessOptionsMenu/styles.js","webpack://_N_E/./components/resourceDetails/resourceSharing/agentAccess/agentProfileDetails/index.jsx","webpack://_N_E/./components/resourceDetails/resourceSharing/agentAccess/agentProfileDetails/styles.js","webpack://_N_E/./components/resourceDetails/resourceSharing/agentAccess/index.jsx","webpack://_N_E/./components/resourceDetails/resourceSharing/agentAccess/styles.js","webpack://_N_E/./src/hooks/useAllPermissions/index.js","webpack://_N_E/./src/hooks/useConsentBasedAccessForResource/index.jsx","webpack://_N_E/./src/contexts/permissionsContext/index.jsx","webpack://_N_E/./components/resourceDetails/resourceSharing/policyHeader/index.jsx","webpack://_N_E/./components/resourceDetails/resourceSharing/policyHeader/styles.js","webpack://_N_E/./components/resourceDetails/resourceSharing/agentsSearchBar/index.jsx","webpack://_N_E/./components/resourceDetails/resourceSharing/agentsSearchBar/styles.js","webpack://_N_E/./src/hooks/useContactProfile/index.js","webpack://_N_E/./components/resourceDetails/resourceSharing/addAgentRow/index.jsx","webpack://_N_E/./components/resourceDetails/resourceSharing/addAgentRow/styles.js","webpack://_N_E/./components/resourceDetails/resourceSharing/agentPickerEmptyState/styles.js","webpack://_N_E/./components/resourceDetails/resourceSharing/agentPickerEmptyState/index.jsx","webpack://_N_E/./components/resourceDetails/resourceSharing/customPolicyDropdown/index.jsx","webpack://_N_E/./components/resourceDetails/resourceSharing/customPolicyDropdown/styles.js","webpack://_N_E/./components/resourceDetails/resourceSharing/agentPickerModal/addWebIdButton/index.jsx","webpack://_N_E/./components/resourceDetails/resourceSharing/agentPickerModal/addWebIdButton/styles.js","webpack://_N_E/./components/resourceDetails/resourceSharing/agentPickerModal/webIdCheckbox/index.jsx","webpack://_N_E/./components/resourceDetails/resourceSharing/agentPickerModal/index.jsx","webpack://_N_E/./components/resourceDetails/resourceSharing/agentPickerModal/styles.js","webpack://_N_E/./components/resourceDetails/resourceSharing/addAgentButton/index.jsx","webpack://_N_E/./components/resourceDetails/resourceSharing/policyActionButton/index.jsx","webpack://_N_E/./components/resourceDetails/resourceSharing/agentAccessTable/index.jsx","webpack://_N_E/./components/resourceDetails/resourceSharing/agentAccessTable/styles.js","webpack://_N_E/./src/hooks/usePermissionsWithProfiles/index.js","webpack://_N_E/./components/resourceDetails/resourceSharing/advancedSharingButton/index.jsx","webpack://_N_E/./components/resourceDetails/resourceSharing/advancedSharingButton/styles.js","webpack://_N_E/./components/resourceDetails/resourceSharing/sharingAccordion/index.jsx","webpack://_N_E/./src/hooks/useLocalStorage/index.js","webpack://_N_E/./components/resourceDetails/index.jsx","webpack://_N_E/./components/resourceDetails/detailsLoading/styles.js","webpack://_N_E/./components/resourceDetails/detailsLoading/index.jsx","webpack://_N_E/./components/resourceDrawer/index.jsx","webpack://_N_E/./components/containerDetails/index.jsx","webpack://_N_E/./components/accessForbidden/index.jsx","webpack://_N_E/./components/resourceNotFound/index.jsx","webpack://_N_E/./components/notSupported/index.jsx","webpack://_N_E/./components/containerSubHeader/styles.js","webpack://_N_E/./components/breadcrumbs/styles.js","webpack://_N_E/./components/breadcrumbs/crumb/index.jsx","webpack://_N_E/./components/breadcrumbs/index.jsx","webpack://_N_E/./components/containerDetailsButton/index.jsx","webpack://_N_E/./components/addFileButton/index.jsx","webpack://_N_E/./components/addFolderFlyout/index.jsx","webpack://_N_E/./components/containerSubHeader/index.jsx","webpack://_N_E/./components/authProfileLoadError/index.jsx","webpack://_N_E/./components/noControlWarning/index.jsx","webpack://_N_E/./components/podRootLoadError/index.jsx","webpack://_N_E/./components/containerTable/index.jsx","webpack://_N_E/./components/container/index.jsx","webpack://_N_E/./components/pages/resource/index.jsx","webpack://_N_E/./pages/resource/[iri].jsx","webpack://_N_E/./src/hooks/useContainer/index.js","webpack://_N_E/./src/models/consent/request/index.js","webpack://_N_E/./src/models/container/index.js","webpack://_N_E/./src/windowHelpers/index.js","webpack://_N_E/?b799"],"sourcesContent":["/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport React, { useState } from \"react\";\nimport { useId } from \"react-id-generator\";\nimport T from \"prop-types\";\nimport {\n  Form,\n  Button,\n  Label,\n  Message,\n  SimpleInput,\n} from \"@inrupt/prism-react-components\";\nimport { useSession } from \"@inrupt/solid-ui-react\";\nimport { isPodOwner } from \"../../src/solidClientHelpers/utils\";\n\nexport const TESTCAFE_ID_ADD_AGENT_BUTTON = \"add-agent-button\";\n\nconst AGENT_TYPE_MAP = {\n  contacts: {\n    OWN_WEBID_ERROR_MESSAGE: \"You cannot add yourself as a contact.\",\n  },\n  permissions: {\n    OWN_WEBID_ERROR_MESSAGE: \"You cannot overwrite your own permissions.\",\n  },\n};\n\nfunction isDuplicateContact(permissions, agentId) {\n  return permissions.filter((p) => p.webId === agentId).length;\n}\n\nexport function setupSubmitHandler(\n  agentId,\n  session,\n  setIsPodOwner,\n  permissions = [],\n  setExistingWebId,\n  onSubmit\n) {\n  return async (event) => {\n    event.preventDefault();\n\n    if (isPodOwner(session, agentId)) {\n      setIsPodOwner(true);\n      return;\n    }\n    /* ignoring next block because it is affecting the coverage and we're removing this code soon */\n    /* istanbul ignore next */\n    if (isDuplicateContact(permissions, agentId)) {\n      setExistingWebId(agentId);\n      return;\n    }\n\n    await onSubmit(agentId);\n  };\n}\n\nexport function setupOnChangeHandler(\n  onChange,\n  setIsPodOwner,\n  setExistingWebId\n) {\n  return (event) => {\n    onChange(event.target.value);\n    setIsPodOwner(false);\n    setExistingWebId(null);\n  };\n}\n\nexport function setupOnBlurHandler(setDirtyWebIdField) {\n  return () => setDirtyWebIdField(true);\n}\n\nexport default function AgentSearchForm({\n  type,\n  buttonText,\n  children,\n  dirtyForm,\n  onChange,\n  onSubmit,\n  permissions,\n  agentId,\n}) {\n  const inputId = useId();\n  const { session } = useSession();\n  const [dirtyWebIdField, setDirtyWebIdField] = useState(dirtyForm);\n  const invalidWebIdField = !agentId && (dirtyForm || dirtyWebIdField);\n  const [existingWebId, setExistingWebId] = useState(null);\n  const [isPodOwner, setIsPodOwner] = useState(false);\n  const handleSubmit = setupSubmitHandler(\n    agentId,\n    session,\n    setIsPodOwner,\n    permissions,\n    setExistingWebId,\n    onSubmit\n  );\n  const handleChange = setupOnChangeHandler(\n    onChange,\n    setIsPodOwner,\n    setExistingWebId\n  );\n  const onBlur = setupOnBlurHandler(setDirtyWebIdField);\n\n  /* ignoring next block because it is affecting the coverage and we're removing this code soon */\n  /* istanbul ignore next */\n  return (\n    <Form onSubmit={handleSubmit}>\n      <Label>WebID</Label>\n\n      {invalidWebIdField && (\n        <Message variant=\"invalid\">Please provide a valid WebID</Message>\n      )}\n      {isPodOwner && (\n        <Message variant=\"invalid\">\n          {AGENT_TYPE_MAP[type].OWN_WEBID_ERROR_MESSAGE}\n        </Message>\n      )}\n      {existingWebId && (\n        <Message variant=\"invalid\">\n          {`The WebID ${existingWebId} is already in your permissions.`}\n        </Message>\n      )}\n      <SimpleInput\n        id={inputId}\n        onChange={handleChange}\n        value={agentId}\n        type=\"url\"\n        pattern=\"https:\\/\\/\\S+\"\n        title=\"Must be a valid URL that starts with https:// and does not contain spaces\"\n        onBlur={onBlur}\n        required={invalidWebIdField}\n        variant={existingWebId || isPodOwner ? \"invalid\" : null}\n      />\n      {children}\n      <Button type=\"submit\" data-testid={TESTCAFE_ID_ADD_AGENT_BUTTON}>\n        {buttonText}\n      </Button>\n    </Form>\n  );\n}\n\nAgentSearchForm.propTypes = {\n  buttonText: T.string,\n  children: T.node,\n  dirtyForm: T.bool,\n  onChange: T.func,\n  onSubmit: T.func,\n  permissions: T.arrayOf(T.object),\n  agentId: T.string,\n  type: T.string,\n};\n\nAgentSearchForm.defaultProps = {\n  buttonText: \"Add\",\n  children: null,\n  dirtyForm: false,\n  onChange: () => {},\n  onSubmit: () => {},\n  permissions: [],\n  agentId: \"\",\n  type: \"permissions\",\n};\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport { button } from \"@solid/lit-prism-patterns\";\n\nconst styles = (theme) => button.styles(theme);\n\nexport default styles;\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport React, { useContext, useEffect, useState } from \"react\";\nimport clsx from \"clsx\";\nimport { createStyles, makeStyles } from \"@material-ui/styles\";\nimport { useBem } from \"@solid/lit-prism-patterns\";\nimport T from \"prop-types\";\nimport AlertContext from \"../../src/contexts/alertContext\";\nimport ConfirmationDialogContext from \"../../src/contexts/confirmationDialogContext\";\nimport styles from \"./styles\";\nimport { isHTTPError } from \"../../src/error\";\n\nexport const TESTCAFE_ID_DELETE_BUTTON = \"delete-button\";\n\nconst useStyles = makeStyles((theme) => createStyles(styles(theme)));\n\nexport function handleDeleteResource({\n  onDelete,\n  onDeleteError,\n  setAlertOpen,\n  setMessage,\n  setSeverity,\n  successMessage,\n}) {\n  return async () => {\n    try {\n      await onDelete();\n      setSeverity(\"success\");\n      setMessage(successMessage);\n      setAlertOpen(true);\n    } catch (err) {\n      onDeleteError(err);\n    }\n  };\n}\n/* eslint react/jsx-props-no-spreading: 0 */\nexport default function DeleteButton({\n  confirmationTitle,\n  confirmationContent,\n  dialogId,\n  onDelete,\n  successMessage,\n  resourceName,\n  ...buttonProps\n}) {\n  const bem = useBem(useStyles());\n  const { setAlertOpen, setMessage, setSeverity } = useContext(AlertContext);\n  const [confirmationSetup, setConfirmationSetup] = useState(false);\n  const { confirmed, open, setContent, setOpen, setTitle, closeDialog } =\n    useContext(ConfirmationDialogContext);\n\n  function onDeleteError(e) {\n    setSeverity(\"error\");\n    if (isHTTPError(e, 409)) {\n      setMessage(`${resourceName} has files in it and cannot be deleted.`);\n    } else {\n      setMessage(e.toString());\n    }\n    setAlertOpen(true);\n  }\n\n  const deleteResource = handleDeleteResource({\n    onDelete,\n    onDeleteError,\n    setAlertOpen,\n    setMessage,\n    setSeverity,\n    successMessage,\n  });\n\n  useEffect(() => {\n    if (open !== dialogId) return;\n    if (confirmationSetup && confirmed === null) return;\n    setTitle(confirmationTitle);\n    setContent(confirmationContent);\n    setConfirmationSetup(true);\n\n    if (confirmationSetup && confirmed) {\n      deleteResource();\n    }\n\n    if (confirmationSetup && confirmed !== null) {\n      closeDialog();\n      setConfirmationSetup(false);\n    }\n  }, [\n    deleteResource,\n    open,\n    dialogId,\n    confirmationTitle,\n    confirmationContent,\n    setConfirmationSetup,\n    confirmed,\n    confirmationSetup,\n    setContent,\n    setTitle,\n    closeDialog,\n  ]);\n\n  return (\n    <button\n      type=\"button\"\n      className={clsx(bem(\"button\"))}\n      data-testid={TESTCAFE_ID_DELETE_BUTTON}\n      {...buttonProps}\n      onClick={() => setOpen(dialogId)}\n    />\n  );\n}\n\nDeleteButton.propTypes = {\n  confirmationTitle: T.string.isRequired,\n  confirmationContent: T.string.isRequired,\n  dialogId: T.string.isRequired,\n  onDelete: T.func.isRequired,\n  successMessage: T.string.isRequired,\n  resourceName: T.string,\n};\n\nDeleteButton.defaultProps = {\n  resourceName: \"this resource\",\n};\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Button, createStyles, Tooltip } from \"@material-ui/core\";\nimport { useBem } from \"@solid/lit-prism-patterns\";\nimport clsx from \"clsx\";\nimport { makeStyles } from \"@material-ui/styles\";\n\nimport styles from \"./styles\";\n\nconst useStyles = makeStyles((theme) => createStyles(styles(theme)));\n\nconst TESTCAFE_ID_INFO_BUTTON_LABEL = \"info-button-label\";\n\nexport default function InfoTooltip({ tooltipText, label, className }) {\n  const classes = useStyles();\n  const bem = useBem(useStyles());\n  return (\n    <div className={clsx(classes.infoTooltipContainer, className)}>\n      {label && (\n        <span data-testid={TESTCAFE_ID_INFO_BUTTON_LABEL}>{label}</span>\n      )}\n      <Tooltip title={tooltipText} arrow>\n        <Button classes={{ root: classes.infoButton }}>\n          <i\n            className={clsx(bem(\"icon-info\"), bem(\"icon\"), classes.infoIcon)}\n            aria-label=\"Info\"\n          />\n        </Button>\n      </Tooltip>\n    </div>\n  );\n}\n\nInfoTooltip.propTypes = {\n  tooltipText: PropTypes.string.isRequired,\n  className: PropTypes.string,\n  label: PropTypes.string,\n};\n\nInfoTooltip.defaultProps = {\n  className: null,\n  label: null,\n};\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport { createStyles } from \"@solid/lit-prism-patterns\";\n\nexport default function styles(theme) {\n  return createStyles(theme, [\"icons\", \"button\"], {\n    infoTooltipContainer: {\n      display: \"flex\",\n    },\n    infoButton: {\n      padding: 0,\n      minWidth: \"max-content\",\n    },\n    infoIcon: {\n      margin: theme.spacing(0.4),\n      color: theme.palette.info.main,\n    },\n  });\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport { createStyles } from \"@solid/lit-prism-patterns\";\n\nconst styles = (theme) =>\n  createStyles(theme, [\"pageHeader\"], {\n    \"files-container-header\": {\n      [theme.breakpoints.up(\"sm\")]: {\n        display: \"flex\",\n        flexDirection: \"row\",\n        justifyContent: \"space-between\",\n        alignItems: \"center\",\n        paddingRight: 0,\n        borderBottom: `1px solid ${theme.palette.grey.A100}`,\n      },\n      display: \"flex\",\n      flexDirection: \"column\",\n      alignItems: \"flex-start\",\n      paddingLeft: 0,\n      \"& h1\": {\n        paddingLeft: theme.spacing(2.4),\n      },\n    },\n  });\n\nexport default styles;\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport { createStyles } from \"@solid/lit-prism-patterns\";\n\nconst styles = (theme, popoverWidth) =>\n  createStyles(theme, [], {\n    popoverNavigator: {\n      borderRadius: theme.spacing(0, 0, 1, 1),\n      padding: theme.spacing(2, 2, 2),\n      maxWidth: popoverWidth,\n      [theme.breakpoints.up(\"sm\")]: {\n        minWidth: 450,\n        width: popoverWidth,\n      },\n      [theme.breakpoints.down(\"xs\")]: {\n        width: \"100vw\",\n        left: \"0 !important\",\n      },\n    },\n  });\n\nexport default styles;\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport React, { useEffect, useState } from \"react\";\nimport T from \"prop-types\";\nimport { createStyles, makeStyles } from \"@material-ui/styles\";\nimport { useRouter } from \"next/router\";\nimport { getResourceInfo, getSourceIri } from \"@inrupt/solid-client\";\nimport { useSession } from \"@inrupt/solid-ui-react\";\nimport { Popover } from \"@material-ui/core\";\nimport {\n  Button,\n  Form,\n  InputGroup,\n  SimpleInput,\n} from \"@inrupt/prism-react-components\";\nimport styles from \"./styles\";\nimport { resourceHref } from \"../../../src/navigator\";\nimport { normalizeContainerUrl } from \"../../../src/stringHelpers\";\n\nexport const TESTCAFE_ID_POD_NAVIGATE_INPUT = \"pod-navigate-input\";\nconst TESTCAFE_ID_POD_NAVIGATE_BUTTON = \"pod-navigate-button\";\n\nexport const clickHandler = (setAnchorEl) => (event) =>\n  setAnchorEl(event.currentTarget);\n\nexport const closeHandler = (setAnchorEl, setDisplayNavigator) => () => {\n  setAnchorEl(null);\n  setDisplayNavigator(false);\n};\n\nexport const submitHandler =\n  (handleClose, setUrl, setDirtyForm, setDirtyUrlField, url, router, fetch) =>\n  async (event) => {\n    event.preventDefault();\n    setDirtyForm(true);\n\n    if (url === \"\") {\n      return;\n    }\n    let resourceInfo;\n    try {\n      resourceInfo = await getResourceInfo(url, { fetch });\n    } catch (error) {\n      resourceInfo = null;\n    }\n    const sourceUrl =\n      (resourceInfo && getSourceIri(resourceInfo)) ||\n      normalizeContainerUrl(url);\n\n    await router.push(\"/resource/[iri]\", resourceHref(sourceUrl));\n    handleClose();\n    setDirtyForm(false);\n    setDirtyUrlField(false);\n    setUrl(\"\");\n  };\n\nexport default function PodNavigatorPopover({\n  anchor,\n  setDisplayNavigator,\n  popoverWidth,\n}) {\n  const useStyles = makeStyles((theme) =>\n    createStyles(styles(theme, popoverWidth))\n  );\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const [url, setUrl] = useState(\"\");\n  const router = useRouter();\n  const [dirtyForm, setDirtyForm] = useState(false);\n  const [dirtyUrlField, setDirtyUrlField] = useState(false);\n  const invalidUrlField = !url && (dirtyForm || dirtyUrlField);\n  const { fetch } = useSession();\n\n  const open = Boolean(anchorEl);\n  const id = open ? \"pod-navigator\" : undefined;\n  const handleClose = closeHandler(setAnchorEl, setDisplayNavigator);\n  const onSubmit = submitHandler(\n    handleClose,\n    setUrl,\n    setDirtyForm,\n    setDirtyUrlField,\n    url,\n    router,\n    fetch\n  );\n\n  useEffect(() => {\n    setAnchorEl(anchor);\n  }, [anchor]);\n\n  return (\n    <Popover\n      id={id}\n      classes={{\n        paper: classes.popoverNavigator,\n      }}\n      open={open}\n      anchorEl={anchorEl}\n      onClose={handleClose}\n      anchorOrigin={{\n        vertical: \"bottom\",\n        horizontal: \"left\",\n      }}\n      transformOrigin={{\n        vertical: \"top\",\n        horizontal: \"left\",\n      }}\n    >\n      <Form onSubmit={onSubmit}>\n        <InputGroup\n          id=\"PodNavigator\"\n          label=\"Go to Pod\"\n          invalidMessage={invalidUrlField && \"Please enter valid URL\"}\n          variant=\"with-button\"\n        >\n          <SimpleInput\n            id=\"PodNavigator\"\n            data-testid={TESTCAFE_ID_POD_NAVIGATE_INPUT}\n            value={url}\n            onChange={(event) => setUrl(event.target.value)}\n            placeholder=\"Enter Pod URI\"\n            type=\"url\"\n            pattern=\"https://.*\"\n            title=\"Must start with https://\"\n            required={invalidUrlField}\n          />\n          <Button\n            variant=\"with-input\"\n            type=\"submit\"\n            data-testid={TESTCAFE_ID_POD_NAVIGATE_BUTTON}\n            id={TESTCAFE_ID_POD_NAVIGATE_BUTTON}\n          >\n            Go\n          </Button>\n        </InputGroup>\n      </Form>\n    </Popover>\n  );\n}\n\nPodNavigatorPopover.propTypes = {\n  anchor: T.shape({ current: T.instanceOf(T.element) }).isRequired,\n  setDisplayNavigator: T.func.isRequired,\n  popoverWidth: T.number.isRequired,\n};\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport { createStyles } from \"@solid/lit-prism-patterns\";\n\nconst styles = (theme, indicatorWidth, indicatorLabelWidth) => {\n  const indicatorLabelPaddingLeft = indicatorLabelWidth < 42.8 ? 45 : 40;\n  return createStyles(theme, [\"button\"], {\n    indicator: {\n      display: \"flex\",\n      backgroundColor: theme.palette.background.default,\n      minHeight: \"60px\",\n      maxHeight: \"max-content\",\n      width: \"100vw\",\n      [theme.breakpoints.up(\"sm\")]: {\n        maxWidth: \"50vw\",\n        minWidth: \"128px\",\n        width: \"max-content\",\n        height: \"60px\",\n      },\n    },\n    indicatorLabel: {\n      fontSize: theme.typography.subtitle2.fontSize,\n      fontWeight: theme.typography.fontWeightBold,\n      color: theme.palette.primary.main,\n      textTransform: \"uppercase\",\n    },\n    indicatorLabelYour: {\n      display: \"none\",\n    },\n    \"indicatorLabelYour--isOwnPod\": {\n      display: \"inline\",\n      [theme.breakpoints.up(\"md\")]: {\n        display: \"inline\",\n      },\n    },\n    indicatorChevron: {\n      paddingLeft: \"0.5em\",\n      color: theme.palette.primary.main,\n    },\n    indicatorPrompt: {\n      padding: theme.spacing(0.6, 2.4),\n      cursor: \"pointer\",\n      width: \"100%\",\n      height: \"100%\",\n      alignItems: \"flex-start\",\n      justifyContent: \"space-around\",\n      backgroundColor: \"transparent\",\n      flexDirection: \"column\",\n      display: \"inline-flex\",\n      color: theme.palette.text.secondary,\n      border: \"none\",\n      borderTop: `1px solid ${theme.palette.grey.A100}`,\n      borderBottom: `1px solid ${theme.palette.grey.A100}`,\n      textTransform: \"none\",\n      fontSize: theme.typography.subtitle2.fontSize,\n      fontWeight: theme.typography.fontWeightRegular,\n      [theme.breakpoints.up(\"sm\")]: {\n        border: \"none\",\n        borderLeft: `1px solid ${theme.palette.grey.A100}`,\n        alignItems: \"flex-end\",\n        padding: theme.spacing(0.6, 4, 0.6, indicatorLabelPaddingLeft / 10),\n      },\n    },\n    indicatorName: {\n      boxSizing: \"border-box\",\n      overflowWrap: \"break-word\",\n      maxWidth: \"100%\",\n      textAlign: \"left\",\n      fontSize: theme.typography.htmlFontSize,\n      [theme.breakpoints.up(\"sm\")]: {\n        textOverflow: \"ellipsis\",\n        overflow: \"hidden\",\n        whiteSpace: \"nowrap\",\n      },\n    },\n    popoverMenu: {\n      maxWidth: `max(${indicatorWidth}px, 170px)`,\n      minWidth: \"128px\",\n      width: `max(${indicatorWidth}px, 170px)`,\n      borderRadius: theme.spacing(0, 0, 1, 1),\n      [theme.breakpoints.down(\"xs\")]: {\n        left: \"0 !important\", // overiding Material UI positioning\n        width: \"100vw\",\n        maxWidth: \"100vw\",\n        minWidth: \"100vw\",\n      },\n    },\n    list: {\n      padding: 0,\n    },\n    menuItem: {\n      padding: theme.spacing(1),\n    },\n    itemIcon: {\n      padding: theme.spacing(0, 0.8),\n      textAlign: \"center\",\n      minWidth: \"max-content !important\",\n      width: \"34px\",\n    },\n    itemText: {\n      padding: 0,\n    },\n    \"bookmark-menu-item\": {\n      padding: 0,\n    },\n  });\n};\n\nexport default styles;\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport React, { createRef, useEffect, useState } from \"react\";\nimport clsx from \"clsx\";\nimport { useRouter } from \"next/router\";\nimport { createStyles, makeStyles } from \"@material-ui/styles\";\nimport { useBem } from \"@solid/lit-prism-patterns\";\nimport {\n  Popover,\n  List,\n  ListItem,\n  ListItemText,\n  ListItemIcon,\n  Tooltip,\n  createSvgIcon,\n} from \"@material-ui/core\";\nimport Skeleton from \"@material-ui/lab/Skeleton\";\nimport { Icons } from \"@inrupt/prism-react-components\";\nimport PodNavigatorPopover from \"./podNavigatorPopover\";\nimport Bookmark from \"../bookmark\";\nimport styles from \"./styles\";\nimport { locationIsConnectedToProfile } from \"../../src/solidClientHelpers/profile\";\nimport useAuthenticatedProfile from \"../../src/hooks/useAuthenticatedProfile\";\n\nconst TESTCAFE_ID_POD_INDICATOR = \"pod-indicator\";\nexport const TESTCAFE_ID_POD_NAVIGATE_TRIGGER = \"pod-indicator-prompt\";\nexport const TESTCAFE_ID_POD_INDICATOR_COPY = \"pod-indicator-copy-link\";\n\nexport const clickHandler = (setAnchorEl) => (event) =>\n  setAnchorEl(event.currentTarget);\n\nexport const closeHandler = (setAnchorEl) => () => setAnchorEl(null);\n\nexport default function PodIndicator() {\n  const router = useRouter();\n  const [indicatorWidth, setIndicatorWidth] = useState();\n  const [displayNavigator, setDisplayNavigator] = useState(false);\n  const [indicatorLabelWidth, setIndicatorLabelWidth] = useState();\n  const [tooltipOpen, setTooltipOpen] = useState(false);\n\n  const useStyles = makeStyles((theme) =>\n    createStyles(styles(theme, indicatorWidth, indicatorLabelWidth))\n  );\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const [navigatorAnchor, setNavigatorAnchor] = useState(null);\n  const bem = useBem(useStyles());\n  const podIri = router.query.iri;\n  const loading = !podIri;\n  const open = Boolean(anchorEl);\n  const id = open ? \"pod-indicator-menu\" : undefined;\n  const handleClick = clickHandler(setAnchorEl);\n  const handleClose = closeHandler(setAnchorEl);\n  const handleOpenNavigator = () => {\n    setNavigatorAnchor(anchorEl);\n    setDisplayNavigator(true);\n    handleClose();\n  };\n  const ref = createRef();\n  const indicatorLabelRef = createRef();\n  const { data: authenticatedProfile } = useAuthenticatedProfile();\n  const isOwnPod = locationIsConnectedToProfile(authenticatedProfile, podIri);\n\n  useEffect(() => {\n    const width = ref.current.offsetWidth || 0;\n    setIndicatorWidth(width);\n  }, [ref]);\n\n  useEffect(() => {\n    if (!indicatorLabelRef.current) return;\n    const width = indicatorLabelRef.current.offsetWidth || 0;\n    setIndicatorLabelWidth(width);\n  }, [indicatorLabelRef]);\n\n  const handlePodCopyClick = () => {\n    navigator.clipboard.writeText(podIri);\n    setTooltipOpen(true);\n    setTimeout(() => {\n      setTooltipOpen(false);\n      handleClose();\n    }, 800);\n  };\n  return (\n    <div\n      data-testid={TESTCAFE_ID_POD_INDICATOR}\n      className={bem(\"indicator\")}\n      ref={ref}\n    >\n      {loading ? (\n        <Skeleton width={100} style={{ display: \"inline-block\" }} />\n      ) : (\n        <button\n          data-testid={TESTCAFE_ID_POD_NAVIGATE_TRIGGER}\n          id=\"pod-indicator-prompt\"\n          type=\"button\"\n          aria-describedby={id}\n          onClick={handleClick}\n          className={bem(\"indicatorPrompt\")}\n          title={podIri}\n        >\n          <span className={bem(\"indicatorLabel\")}>\n            <span className={bem(\"indicatorLabelYour\", { isOwnPod })}>\n              Your&nbsp;\n            </span>\n            Pod\n            <Icons\n              name={open ? \"caret-up\" : \"caret-down\"}\n              className={bem(\"indicatorChevron\")}\n            />\n          </span>\n          <span\n            className={bem(\"indicatorName\", { isOwnPod })}\n            ref={indicatorLabelRef}\n          >\n            {podIri}\n          </span>\n        </button>\n      )}\n      {displayNavigator ? (\n        <PodNavigatorPopover\n          anchor={navigatorAnchor}\n          setDisplayNavigator={setDisplayNavigator}\n          popoverWidth={indicatorWidth}\n        />\n      ) : (\n        <Popover\n          id={id}\n          classes={{\n            paper: bem(\"popoverMenu\"),\n          }}\n          open={open}\n          anchorEl={anchorEl}\n          onClose={handleClose}\n          anchorOrigin={{\n            vertical: \"bottom\",\n            horizontal: \"left\",\n          }}\n          transformOrigin={{\n            vertical: \"top\",\n            horizontal: \"left\",\n          }}\n        >\n          <List classes={{ root: bem(\"list\") }}>\n            <Bookmark\n              iri={podIri}\n              menuItem\n              addText=\"Bookmark Pod\"\n              removeText=\"Remove Pod Bookmark\"\n              profileName={podIri}\n            />\n            <ListItem\n              button\n              key=\"change-pod\"\n              onClick={handleOpenNavigator}\n              classes={{ root: bem(\"menuItem\") }}\n            >\n              <ListItemIcon classes={{ root: bem(\"itemIcon\") }}>\n                <i\n                  className={clsx(bem(\"icon-move\"), bem(\"icon\"))}\n                  aria-label=\"Change pod\"\n                />\n              </ListItemIcon>\n              <ListItemText disableTypography primary=\"Change Pod\" />\n            </ListItem>\n            <Tooltip\n              PopperProps={{\n                disablePortal: true,\n              }}\n              open={tooltipOpen}\n              disableFocusListener\n              disableHoverListener\n              disableTouchListener\n              title=\"Copied\"\n            >\n              <ListItem\n                button\n                key=\"copy-text\"\n                onClick={handlePodCopyClick}\n                classes={{ root: bem(\"menuItem\") }}\n                data-testid={TESTCAFE_ID_POD_INDICATOR_COPY}\n              >\n                <ListItemIcon classes={{ root: bem(\"itemIcon\") }}>\n                  <Icons name=\"copy\" className={clsx(bem(\"icon\"))} />\n                </ListItemIcon>\n                <ListItemText disableTypography primary=\"Copy Link\" />\n              </ListItem>\n            </Tooltip>\n          </List>\n        </Popover>\n      )}\n    </div>\n  );\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport React from \"react\";\nimport { PageHeader as PrismPageHeader } from \"@inrupt/prism-react-components\";\nimport { useSession } from \"@inrupt/solid-ui-react\";\nimport { createStyles, makeStyles } from \"@material-ui/styles\";\nimport { useBem } from \"@solid/lit-prism-patterns\";\nimport styles from \"./styles\";\nimport PodIndicator from \"../podIndicator\";\n\nconst useStyles = makeStyles((theme) => createStyles(styles(theme)));\n\nexport default function ContainerPageHeader() {\n  const { session } = useSession();\n  const bem = useBem(useStyles());\n  const podIndicator = session.info.isLoggedIn ? <PodIndicator /> : null;\n  return (\n    <PrismPageHeader\n      title=\"Files\"\n      className={bem(\"files-container-header\")}\n      actions={podIndicator ? [podIndicator] : null}\n    />\n  );\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport { content } from \"@solid/lit-prism-patterns\";\n\nconst rules = {\n  accordionDetails: {\n    display: \"block\",\n    paddingBottom: \"5rem\",\n  },\n  centeredSection: {\n    paddingLeft: \"1rem\",\n    paddingRight: \"1rem\",\n  },\n  headerSection: {\n    paddingLeft: \"1rem\",\n    paddingRight: \"1rem\",\n    display: \"flex\",\n    alignItems: \"flex-start\",\n    \"& button\": {\n      marginLeft: \"auto\",\n    },\n  },\n  raw: {\n    height: \"100%\",\n    width: \"100%\",\n    maxHeight: \"200px\",\n    overflow: \"auto\",\n  },\n  formListItem: {\n    display: \"block\",\n  },\n  detailText: {\n    fontSize: \"0.75rem\",\n  },\n  typeValue: {\n    marginLeft: \"auto\",\n  },\n  agentInput: {\n    width: \"100%\",\n    marginBottom: \"1rem\",\n  },\n};\n\nexport default function styles(theme) {\n  return {\n    ...rules,\n    ...content.styles(theme),\n  };\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport React, { useContext } from \"react\";\nimport T from \"prop-types\";\nimport { useRouter } from \"next/router\";\nimport { useSession } from \"@inrupt/solid-ui-react\";\nimport { getSourceIri, isContainer } from \"@inrupt/solid-client\";\nimport usePoliciesContainerUrl from \"../../src/hooks/usePoliciesContainerUrl\";\nimport AlertContext from \"../../src/contexts/alertContext\";\nimport useResourceInfo from \"../../src/hooks/useResourceInfo\";\nimport { deleteResource } from \"../../src/solidClientHelpers/resource\";\nimport DeleteButton from \"../deleteButton\";\n\nexport function createDeleteHandler(\n  resourceInfo,\n  policiesContainerUrl,\n  onDelete,\n  onDeleteCurrentContainer,\n  router,\n  fetch\n) {\n  return async () => {\n    await deleteResource(resourceInfo, policiesContainerUrl, fetch);\n    const iri = getSourceIri(resourceInfo);\n\n    if (isContainer(resourceInfo) && iri === router.query.iri) {\n      onDeleteCurrentContainer(iri);\n    } else {\n      onDelete();\n    }\n  };\n}\n\n/* eslint react/jsx-props-no-spreading: 0 */\nexport default function DeleteResourceButton({\n  name,\n  resourceIri,\n  onDelete,\n  onDeleteCurrentContainer,\n  ...buttonProps\n}) {\n  const { fetch } = useSession();\n  const router = useRouter();\n  const { alertError } = useContext(AlertContext);\n  const { data: resourceInfo, error: resourceError } =\n    useResourceInfo(resourceIri);\n  const policiesContainerUrl = usePoliciesContainerUrl(resourceIri);\n\n  if (resourceError) {\n    alertError(resourceError.message);\n  }\n\n  const handleDelete = createDeleteHandler(\n    resourceInfo,\n    policiesContainerUrl,\n    onDelete,\n    onDeleteCurrentContainer,\n    router,\n    fetch\n  );\n\n  return (\n    <DeleteButton\n      confirmationTitle=\"Confirm Delete\"\n      confirmationContent={`Are you sure you wish to delete ${name}?`}\n      dialogId={`delete-resource-${resourceIri}`}\n      onDelete={handleDelete}\n      resourceName={name}\n      successMessage={`${name} was successfully deleted.`}\n      {...buttonProps}\n    >\n      Delete\n    </DeleteButton>\n  );\n}\n\nDeleteResourceButton.propTypes = {\n  name: T.string.isRequired,\n  resourceIri: T.string.isRequired,\n  onDelete: T.func.isRequired,\n  onDeleteCurrentContainer: T.func.isRequired,\n};\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n/* eslint-disable react/jsx-props-no-spreading */\n\nimport React from \"react\";\nimport T from \"prop-types\";\nimport { useSession } from \"@inrupt/solid-ui-react\";\nimport { parseUrl } from \"../../src/stringHelpers\";\nimport { isContainerIri } from \"../../src/solidClientHelpers/utils\";\n\nexport function forceDownload(name, file) {\n  const a = document.createElement(\"a\");\n  a.style.display = \"none\";\n  a.href = window.URL.createObjectURL(file);\n  a.setAttribute(\"download\", name);\n\n  document.body.appendChild(a);\n\n  a.click();\n\n  window.URL.revokeObjectURL(a.href);\n  document.body.removeChild(a);\n}\n\nexport function downloadResource(iri, fetch) {\n  return () => {\n    const { pathname } = parseUrl(iri);\n    const name = pathname.replace(/\\//g, \"\");\n\n    fetch(iri)\n      .then((response) => response.blob())\n      .then((file) => forceDownload(name, file))\n      .catch((e) => e);\n  };\n}\n\nexport default function DownloadLink({ iri, ...props }) {\n  const { fetch } = useSession();\n\n  if (isContainerIri(iri)) return null;\n\n  return (\n    <button {...props} onClick={downloadResource(iri, fetch)} type=\"button\" />\n  );\n}\n\nDownloadLink.propTypes = {\n  iri: T.string.isRequired,\n  className: T.string,\n};\n\nDownloadLink.defaultProps = {\n  className: null,\n};\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nconst smallFontSize = {\n  fontSize: \"0.75rem\",\n};\n\nexport default (theme) => ({\n  container: {\n    display: \"block\",\n    position: \"relative\",\n  },\n  listItem: {\n    paddingBottom: 0,\n    paddingTop: 0,\n  },\n  selectionClosed: {\n    display: \"none\",\n  },\n  selectionOpen: {\n    display: \"block\",\n  },\n  summary: {\n    listStyle: \"none\",\n    display: \"flex\",\n    flexWrap: \"nowrap\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n    textTransform: \"inherit\",\n    fontSize: theme.typography.body.fontSize,\n    maxWidth: \"95%\",\n    padding: theme.spacing(1.5, 2),\n  },\n  label: smallFontSize,\n  checkbox: {\n    padding: 0,\n  },\n});\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport React from \"react\";\nimport T from \"prop-types\";\nimport {\n  Checkbox,\n  FormControlLabel,\n  ListItem,\n  makeStyles,\n  createStyles,\n} from \"@material-ui/core\";\nimport styles from \"../styles\";\n\nconst TESTCAFE_ID_PERMISSION_LABEL = \"permission-label-\";\nexport const TESTCASE_ID_PERMISSION_CHECKBOX = \"permission-checkbox-\";\n\nconst useStyles = makeStyles((theme) => createStyles(styles(theme)));\n\nfunction PermissionCheckbox({ value, label, disabled, onChange }) {\n  const classes = useStyles();\n  const name = label.toLowerCase();\n\n  return (\n    // prettier-ignore\n    <ListItem className={classes.listItem}>\n      <FormControlLabel\n        classes={{ label: classes.label }}\n        data-testid={TESTCAFE_ID_PERMISSION_LABEL + name}\n        label={label}\n        control={(\n          <Checkbox\n            classes={{ root: classes.checkbox }}\n            checked={value}\n            name={name}\n            onChange={onChange}\n            disabled={disabled}\n            inputProps={{\"data-testid\": TESTCASE_ID_PERMISSION_CHECKBOX + name}}\n          />\n        )}\n      />\n    </ListItem>\n  );\n}\n\nPermissionCheckbox.propTypes = {\n  disabled: T.bool,\n  value: T.bool.isRequired,\n  label: T.string.isRequired,\n  onChange: T.func,\n};\n\nPermissionCheckbox.defaultProps = {\n  disabled: false,\n  onChange: () => {},\n};\n\nexport default PermissionCheckbox;\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n/* eslint-disable camelcase */\nimport React, { useState } from \"react\";\nimport T from \"prop-types\";\nimport { Button, createStyles, List, makeStyles } from \"@material-ui/core\";\nimport KeyboardArrowDown from \"@material-ui/icons/KeyboardArrowDown\";\nimport KeyboardArrowUp from \"@material-ui/icons/KeyboardArrowUp\";\nimport { useSession } from \"@inrupt/solid-ui-react\";\nimport { useRouter } from \"next/router\";\nimport PermissionCheckbox from \"./permissionCheckbox\";\nimport {\n  displayPermissions,\n  ACL,\n} from \"../../src/solidClientHelpers/permissions\";\nimport styles from \"./styles\";\nimport useAuthenticatedProfile from \"../../src/hooks/useAuthenticatedProfile\";\nimport { locationIsConnectedToProfile } from \"../../src/solidClientHelpers/profile\";\n\nconst useStyles = makeStyles((theme) => createStyles(styles(theme)));\n\nconst TESTCAFE_ID_PERMISSIONS_DROPDOWN_BUTTON = \"permissions-dropdown-button\";\n\nexport function toggleOpen(open, setOpen) {\n  return () => setOpen(!open);\n}\n\nexport function arrowIcon(open) {\n  return open ? <KeyboardArrowUp /> : <KeyboardArrowDown />;\n}\n\nexport function permissionHandler(access, setAccess, onChange) {\n  return (key) => () => {\n    const value = !access[key];\n    const newAccess = {\n      ...access,\n      [key]: value,\n    };\n    setAccess(newAccess);\n    onChange(newAccess);\n  };\n}\n\nexport default function PermissionsForm({\n  acl,\n  children,\n  disabled: propsDisabled,\n  onChange,\n  webId,\n  isMenu,\n}) {\n  const classes = useStyles();\n  const { session } = useSession();\n  const { data: authenticatedProfile } = useAuthenticatedProfile();\n  const router = useRouter();\n  const { iri } = router.query;\n  const locationIsInUsersPod = locationIsConnectedToProfile(\n    authenticatedProfile,\n    iri\n  );\n\n  const [access, setAccess] = useState(acl);\n  const [formOpen, setFormOpen] = useState(false);\n  const disabled =\n    propsDisabled ?? (session.info.webId === webId && locationIsInUsersPod);\n\n  const setPermissionHandler = permissionHandler(access, setAccess, onChange);\n\n  return (\n    <div className={classes.container}>\n      {!isMenu ? (\n        <Button\n          data-testid={TESTCAFE_ID_PERMISSIONS_DROPDOWN_BUTTON}\n          className={classes.summary}\n          onClick={toggleOpen(formOpen, setFormOpen)}\n          endIcon={arrowIcon(formOpen)}\n        >\n          <span>{displayPermissions(access)}</span>\n        </Button>\n      ) : null}\n      <section\n        className={\n          formOpen || isMenu ? classes.selectionOpen : classes.selectionClosed\n        }\n      >\n        <List>\n          <PermissionCheckbox\n            value={access.read}\n            classes={classes}\n            label={ACL.READ.alias}\n            onChange={setPermissionHandler(ACL.READ.key)}\n            disabled={disabled}\n          />\n          <PermissionCheckbox\n            value={access.write}\n            classes={classes}\n            label={ACL.WRITE.alias}\n            disabled={disabled}\n            onChange={setPermissionHandler(ACL.WRITE.key)}\n          />\n          <PermissionCheckbox\n            value={access.append}\n            classes={classes}\n            label={ACL.APPEND.alias}\n            disabled={disabled}\n            onChange={setPermissionHandler(ACL.APPEND.key)}\n          />\n          <PermissionCheckbox\n            value={access.control}\n            classes={classes}\n            label={ACL.CONTROL.alias}\n            disabled={disabled}\n            onChange={setPermissionHandler(ACL.CONTROL.key)}\n          />\n        </List>\n        {children}\n      </section>\n    </div>\n  );\n}\n\nPermissionsForm.propTypes = {\n  acl: T.shape({\n    read: T.bool.isRequired,\n    write: T.bool.isRequired,\n    append: T.bool.isRequired,\n    control: T.bool.isRequired,\n  }),\n  isMenu: T.bool,\n  webId: T.string,\n  children: T.node,\n  disabled: T.bool,\n  onChange: T.func,\n};\n\nPermissionsForm.defaultProps = {\n  acl: {\n    read: false,\n    write: false,\n    append: false,\n    control: false,\n  },\n  isMenu: false,\n  children: null,\n  disabled: null,\n  webId: null,\n  onChange: () => {},\n};\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport React, { createContext } from \"react\";\nimport T from \"prop-types\";\n\nconst defaultValues = {\n  accessControl: null,\n  accessControlType: null,\n};\nconst AccessControlContext = createContext(defaultValues);\n\nfunction AccessControlProvider({ children, accessControl, accessControlType }) {\n  return (\n    <AccessControlContext.Provider value={{ accessControl, accessControlType }}>\n      {children}\n    </AccessControlContext.Provider>\n  );\n}\n\nAccessControlProvider.defaultProps = {\n  accessControl: null,\n  accessControlType: null,\n};\n\nAccessControlProvider.propTypes = {\n  children: T.node.isRequired,\n  // eslint-disable-next-line react/forbid-prop-types\n  accessControl: T.object,\n  accessControlType: T.string,\n};\n\nexport { AccessControlProvider };\nexport default AccessControlContext;\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n/* eslint-disable react/forbid-prop-types */\n\n// TODO: this component is kept here to keep the old Permissions accordion working.\n// It can be removed after the old permissions accordion is gone.\n\nimport React, { useContext, useEffect, useState } from \"react\";\nimport T from \"prop-types\";\nimport {\n  Avatar,\n  Button,\n  CircularProgress,\n  createStyles,\n  Typography,\n} from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport { useBem } from \"@solid/lit-prism-patterns\";\nimport { DatasetContext, useSession } from \"@inrupt/solid-ui-react\";\nimport { getSourceUrl } from \"@inrupt/solid-client\";\nimport { Form, Button as PrismButton } from \"@inrupt/prism-react-components\";\nimport { Alert, Skeleton } from \"@material-ui/lab\";\nimport PermissionsForm from \"../../../permissionsForm\";\nimport styles from \"./styles\";\nimport ConfirmationDialogContext from \"../../../../src/contexts/confirmationDialogContext\";\nimport ConfirmationDialog from \"../../../confirmationDialog\";\nimport {\n  displayProfileName,\n  fetchProfile,\n} from \"../../../../src/solidClientHelpers/profile\";\nimport AlertContext from \"../../../../src/contexts/alertContext\";\nimport useFetchProfile from \"../../../../src/hooks/useFetchProfile\";\nimport AccessControlContext from \"../../../../src/contexts/accessControlContext\";\n\nconst useStyles = makeStyles((theme) => createStyles(styles(theme)));\n\nconst TESTCAFE_ID_AGENT_WEB_ID = \"agent-web-id\";\nconst TESTCAFE_ID_TRY_AGAIN_BUTTON = \"try-again-button\";\nconst TESTCAFE_ID_TRY_AGAIN_SPINNER = \"try-again-spinner\";\nexport const TESTCAFE_ID_PERMISSIONS_FORM_SUBMIT_BUTTON =\n  \"permissions-form-submit-button\";\nexport const OWN_PERMISSIONS_WARNING_PERMISSION =\n  \"You are about to change your own permissions. Are you sure?\";\n\nexport function submitHandler(\n  authenticatedWebId,\n  webId,\n  setOpen,\n  dialogId,\n  savePermissions,\n  tempAccess,\n  setContent\n) {\n  return async (event) => {\n    event.preventDefault();\n    if (authenticatedWebId === webId) {\n      setContent(OWN_PERMISSIONS_WARNING_PERMISSION);\n      setOpen(dialogId);\n    } else {\n      await savePermissions(tempAccess);\n    }\n  };\n}\n\nexport function saveHandler(\n  accessControl,\n  onLoading,\n  setAccess,\n  webId,\n  setTempAccess,\n  setSeverity,\n  setMessage,\n  setAlertOpen\n) {\n  return async (newAccess) => {\n    onLoading(true);\n    setAccess(newAccess);\n\n    if (!accessControl) {\n      return;\n    }\n\n    const { error } = await accessControl.savePermissionsForAgent(\n      webId,\n      newAccess\n    );\n\n    if (error) throw error;\n\n    setTempAccess(null);\n    setSeverity(\"success\");\n    setMessage(\"Permissions have been updated!\");\n    setAlertOpen(true);\n    onLoading(false);\n  };\n}\n\nexport function getDialogId(datasetIri) {\n  return `change-agent-access-${datasetIri}`;\n}\n\nexport default function AgentAccess({ onLoading, permission: { acl, webId } }) {\n  let { data: profile, error: profileError } = useFetchProfile(webId);\n  const classes = useStyles();\n  const { fetch, session } = useSession();\n  const { webId: authenticatedWebId } = session.info;\n  const bem = useBem(useStyles());\n  const [access, setAccess] = useState(acl);\n  const [tempAccess, setTempAccess] = useState(acl);\n  const { solidDataset: dataset } = useContext(DatasetContext);\n  const { accessControl } = useContext(AccessControlContext);\n  const [isLoading, setIsLoading] = useState(false);\n\n  const { open, confirmed, setContent, setOpen } = useContext(\n    ConfirmationDialogContext\n  );\n\n  const { setMessage, setSeverity, setAlertOpen } = useContext(AlertContext);\n  const dialogId = getDialogId(getSourceUrl(dataset));\n\n  const savePermissions = saveHandler(\n    accessControl,\n    onLoading,\n    setAccess,\n    webId,\n    setTempAccess,\n    setSeverity,\n    setMessage,\n    setAlertOpen\n  );\n\n  useEffect(() => {\n    if (open !== dialogId || !confirmed || authenticatedWebId !== webId) return;\n    // this triggers when a visitor changes their own permissions\n    savePermissions(tempAccess);\n  }, [\n    authenticatedWebId,\n    confirmed,\n    savePermissions,\n    tempAccess,\n    webId,\n    dialogId,\n    open,\n  ]);\n\n  const onSubmit = submitHandler(\n    authenticatedWebId,\n    webId,\n    setOpen,\n    dialogId,\n    savePermissions,\n    tempAccess,\n    setContent\n  );\n\n  const handleRetryClick = async () => {\n    try {\n      profile = await fetchProfile(webId, fetch);\n      setIsLoading(false);\n    } catch (error) {\n      profileError = error;\n      setIsLoading(false);\n    }\n  };\n\n  if (profileError) {\n    const message = \"Unable to load this profile\";\n    return (\n      <div className={bem(\"alert-container\")}>\n        <Alert\n          classes={{\n            root: classes.alertBox,\n            message: classes.alertMessage,\n            action: classes.action,\n          }}\n          severity=\"warning\"\n          action={\n            // eslint-disable-next-line react/jsx-wrap-multilines\n            isLoading ? (\n              <CircularProgress\n                data-testid={TESTCAFE_ID_TRY_AGAIN_SPINNER}\n                size={20}\n                className={bem(\"spinner\")}\n                color=\"inherit\"\n              />\n            ) : (\n              <Button\n                data-testid={TESTCAFE_ID_TRY_AGAIN_BUTTON}\n                className={bem(\"bold-button\")}\n                color=\"inherit\"\n                size=\"small\"\n                onClick={() => {\n                  setIsLoading(true);\n                  setTimeout(handleRetryClick, 750);\n                }}\n              >\n                Try again\n              </Button>\n            )\n          }\n        >\n          {message}\n        </Alert>\n        <div className={classes.separator} />\n        <div className={bem(\"avatar-container\")}>\n          <Avatar className={classes.avatar} alt={webId} src={null} />\n          <Typography\n            data-testid={TESTCAFE_ID_AGENT_WEB_ID}\n            className={classes.detailText}\n          >\n            {webId}\n          </Typography>\n          <Form onSubmit={onSubmit}>\n            <PermissionsForm\n              key={webId}\n              webId={webId}\n              acl={access}\n              onChange={setTempAccess}\n            >\n              <PrismButton\n                onClick={onSubmit}\n                type=\"submit\"\n                variant=\"secondary\"\n                data-testid={TESTCAFE_ID_PERMISSIONS_FORM_SUBMIT_BUTTON}\n              >\n                Save\n              </PrismButton>\n            </PermissionsForm>\n          </Form>\n        </div>\n        <ConfirmationDialog />\n      </div>\n    );\n  }\n\n  if (!profile) {\n    return (\n      <>\n        <Skeleton\n          className={classes.avatar}\n          variant=\"circle\"\n          width={40}\n          height={40}\n        />\n        <div className={classes.detailText}>\n          <Skeleton variant=\"text\" width={100} />\n        </div>\n      </>\n    );\n  }\n\n  const { avatar } = profile;\n  const name = displayProfileName(profile);\n\n  return (\n    <>\n      <Avatar className={classes.avatar} alt={name} src={avatar} />\n      <Typography\n        data-testid={TESTCAFE_ID_AGENT_WEB_ID}\n        className={classes.detailText}\n      >\n        {name}\n      </Typography>\n      <Form onSubmit={onSubmit}>\n        <PermissionsForm\n          key={webId}\n          webId={webId}\n          acl={access}\n          onChange={setTempAccess}\n        >\n          <PrismButton\n            onClick={onSubmit}\n            type=\"submit\"\n            variant=\"secondary\"\n            data-testid={TESTCAFE_ID_PERMISSIONS_FORM_SUBMIT_BUTTON}\n          >\n            Save\n          </PrismButton>\n        </PermissionsForm>\n      </Form>\n      <ConfirmationDialog />\n    </>\n  );\n}\n\nAgentAccess.propTypes = {\n  permission: T.object.isRequired,\n  onLoading: T.func,\n};\n\nAgentAccess.defaultProps = {\n  onLoading: () => {},\n};\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nexport default function styles(theme) {\n  const WARNING_BACKGROUND_COLOR = \"#FFF4E5\";\n  const SEPARATOR_COLOR = \"#E1CAAA\";\n  return {\n    avatar: {\n      marginRight: \"1rem\",\n    },\n    detailText: {\n      fontSize: \"0.75rem\",\n      textAlign: \"left\",\n      flexGrow: 1,\n    },\n    \"alert-container\": {\n      maxWidth: \"100%\",\n      backgroundColor: WARNING_BACKGROUND_COLOR,\n      padding: theme.spacing(0.7, 1.4),\n    },\n    action: {\n      padding: 0,\n      paddingRight: theme.spacing(0.5),\n    },\n    alertBox: {\n      width: \"100%\",\n      overflowWrap: \"break-word\",\n      padding: 0,\n    },\n    alertMessage: {\n      overflowWrap: \"break-word\",\n      fontSize: \"14px\",\n    },\n    \"avatar-container\": {\n      display: \"flex\",\n      maxWidth: \"100%\",\n      padding: 0,\n      \"& p\": {\n        overflowWrap: \"break-word\",\n        marginRight: theme.spacing(0.7, 1.6, 1.4, 0.7),\n        [theme.breakpoints.up(\"sm\")]: {\n          overflowWrap: \"anywhere\",\n        },\n      },\n    },\n    \"bold-button\": {\n      fontWeight: \"bold\",\n      alignSelf: \"right\",\n    },\n    spinner: {\n      margin: theme.spacing(2),\n    },\n    separator: {\n      boxSizing: \"border-box\",\n      border: `1px solid ${SEPARATOR_COLOR}`,\n      margin: 0,\n      marginBottom: theme.spacing(0.8),\n      height: \"1px\",\n    },\n  };\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport { useState, useEffect } from \"react\";\n\nexport default function usePermissions(accessControl) {\n  const [permissions, setPermissions] = useState(null);\n\n  useEffect(() => {\n    if (!accessControl) {\n      setPermissions(null);\n      return;\n    }\n    accessControl.getPermissions().then((normalizedPermissions) => {\n      setPermissions(normalizedPermissions.reverse());\n    });\n  }, [accessControl]);\n\n  return { permissions };\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n/* eslint-disable react/jsx-props-no-spreading */\n\nimport React, { useContext, useState } from \"react\";\nimport T from \"prop-types\";\nimport { CircularProgress, List, ListItem } from \"@material-ui/core\";\nimport { createStyles, makeStyles } from \"@material-ui/styles\";\nimport { Button } from \"@inrupt/prism-react-components\";\nimport styles from \"./styles\";\nimport AgentAccess from \"../agentAccessOld\";\nimport AccessControlContext from \"../../../../src/contexts/accessControlContext\";\nimport usePermissions from \"../../../../src/hooks/usePermissions\";\n\nconst useStyles = makeStyles((theme) => createStyles(styles(theme)));\nexport const TESTCAFE_ID_AGENT_ACCESS_LIST_SHOW_ALL =\n  \"agent-access-list-show-all\";\n\nfunction AgentAccessList({ onLoading }) {\n  const classes = useStyles();\n  const [showAll, setShowAll] = useState(false);\n  const { accessControl } = useContext(AccessControlContext);\n  const { permissions } = usePermissions(accessControl);\n\n  const loading = !permissions;\n\n  if (loading) return <CircularProgress color=\"primary\" />;\n\n  if (permissions.length === 0) {\n    return <div>No access granted to individuals yet</div>;\n  }\n\n  const permissionsShown = showAll ? permissions : permissions.slice(0, 3);\n\n  return (\n    <>\n      <List>\n        {permissionsShown.map((permission) => (\n          <ListItem key={permission.webId} className={classes.listItem}>\n            <AgentAccess permission={permission} onLoading={onLoading} />\n          </ListItem>\n        ))}\n      </List>\n      {showAll || permissions.length < 3 ? null : (\n        <Button\n          data-testid={TESTCAFE_ID_AGENT_ACCESS_LIST_SHOW_ALL}\n          onClick={() => setShowAll(true)}\n          variant=\"small\"\n        >\n          Show all\n        </Button>\n      )}\n    </>\n  );\n}\n\nAgentAccessList.propTypes = {\n  onLoading: T.func,\n};\n\nAgentAccessList.defaultProps = {\n  onLoading: () => {},\n};\n\nexport default AgentAccessList;\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nexport default () => ({\n  listItem: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"flex-start\",\n    paddingRight: 0,\n    paddingLeft: 0,\n  },\n});\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nexport default (theme) => ({\n  paper: {\n    padding: theme.spacing(2),\n  },\n});\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n/* eslint-disable react/jsx-props-no-spreading */\n\nimport React, { useContext, useState } from \"react\";\nimport T from \"prop-types\";\nimport { createStyles, makeStyles, Popover } from \"@material-ui/core\";\nimport {\n  Button,\n  InputGroup,\n  Label,\n  Message,\n} from \"@inrupt/prism-react-components\";\nimport AgentSearchForm from \"../agentSearchForm\";\nimport PermissionsForm from \"../permissionsForm\";\nimport {\n  createAccessMap,\n  isEmptyAccess,\n} from \"../../src/solidClientHelpers/permissions\";\nimport styles from \"./styles\";\nimport AccessControlContext from \"../../src/contexts/accessControlContext\";\nimport usePermissions from \"../../src/hooks/usePermissions\";\n\nconst POPOVER_ID = \"AddPermissionWithWebId\";\nconst TESTCAFE_ID_ADD_USER_WITH_WEBID_BUTTON =\n  \"permissions-add-user-with-webid-button\";\n\nconst useStyles = makeStyles((theme) => createStyles(styles(theme)));\n\nexport function changeHandler(setAgentId) {\n  return (newAgentId) => {\n    setAgentId(newAgentId);\n  };\n}\n\nexport function clickHandler(setAnchorEl) {\n  return (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n}\n\nexport function closeHandler(\n  setAnchorEl,\n  setAccess,\n  setDisabled,\n  onLoading,\n  setDirtyForm\n) {\n  return () => {\n    setAnchorEl(null);\n    setAccess(createAccessMap(true));\n    setDisabled(false);\n    onLoading(false);\n    setDirtyForm(false);\n  };\n}\n\nexport function submitHandler(\n  accessControl,\n  onLoading,\n  access,\n  setDisabled,\n  handleClose,\n  setDirtyForm\n) {\n  return async (agentId) => {\n    setDirtyForm(true);\n    if (!agentId || isEmptyAccess(access)) {\n      return;\n    }\n    onLoading(true);\n    setDisabled(true);\n    const { error } = await accessControl.savePermissionsForAgent(\n      agentId,\n      access\n    );\n    if (error) throw error;\n    handleClose();\n    setDirtyForm(false);\n  };\n}\n\nexport default function AddPermissionUsingWebIdButton({\n  onLoading,\n  ...buttonProps\n}) {\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [access, setAccess] = useState(createAccessMap(true));\n  const classes = useStyles();\n  const [disabled, setDisabled] = useState(false);\n  const { accessControl } = useContext(AccessControlContext);\n  const [agentId, setAgentId] = useState(\"\");\n  const [dirtyForm, setDirtyForm] = useState(false);\n  const { permissions } = usePermissions(accessControl);\n\n  const handleChange = changeHandler(setAgentId);\n\n  const handleClick = clickHandler(setAnchorEl);\n\n  const handleClose = closeHandler(\n    setAnchorEl,\n    setAccess,\n    setDisabled,\n    onLoading,\n    setDirtyForm\n  );\n\n  const onSubmit = submitHandler(\n    accessControl,\n    onLoading,\n    access,\n    setDisabled,\n    handleClose,\n    setDirtyForm,\n    permissions\n  );\n\n  const open = Boolean(anchorEl);\n  const id = open ? POPOVER_ID : undefined;\n  const permissionFormInvalid = dirtyForm && isEmptyAccess(access);\n\n  return (\n    <>\n      <Button\n        variant=\"small\"\n        iconAfter=\"caret-right\"\n        aria-describedby={id}\n        {...buttonProps}\n        onClick={handleClick}\n        data-testid={TESTCAFE_ID_ADD_USER_WITH_WEBID_BUTTON}\n      >\n        Add with WebId\n      </Button>\n      <Popover\n        id={id}\n        classes={classes}\n        open={open}\n        anchorEl={anchorEl}\n        getContentAnchorEl={null}\n        onClose={handleClose}\n        anchorOrigin={{\n          vertical: \"top\",\n          horizontal: \"center\",\n        }}\n        transformOrigin={{\n          vertical: \"bottom\",\n          horizontal: \"center\",\n        }}\n      >\n        <AgentSearchForm\n          type=\"permissions\"\n          dirtyForm={dirtyForm}\n          onChange={handleChange}\n          onSubmit={onSubmit}\n          value={agentId}\n          permissions={permissions}\n        >\n          <InputGroup>\n            <Label>Assign permissions</Label>\n            <PermissionsForm\n              isMenu\n              acl={access}\n              onChange={setAccess}\n              disabled={disabled}\n            />\n            {permissionFormInvalid ? (\n              <Message variant=\"invalid\">\n                Please assign at least one permission\n              </Message>\n            ) : null}\n          </InputGroup>\n        </AgentSearchForm>\n      </Popover>\n    </>\n  );\n}\n\nAddPermissionUsingWebIdButton.propTypes = {\n  onLoading: T.func,\n};\n\nAddPermissionUsingWebIdButton.defaultProps = {\n  onLoading: () => {},\n};\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n/* eslint-disable camelcase, no-console, react/forbid-prop-types */\n\nimport React, { useState } from \"react\";\nimport T from \"prop-types\";\nimport {\n  Accordion,\n  AccordionDetails,\n  AccordionSummary,\n  CircularProgress,\n} from \"@material-ui/core\";\nimport { ActionMenu, ActionMenuItem } from \"@inrupt/prism-react-components\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport { createStyles, makeStyles } from \"@material-ui/core/styles\";\nimport styles from \"./styles\";\nimport AgentAccessList from \"./agentAccessList\";\nimport AddPermissionUsingWebIdButton from \"../../addPermissionUsingWebIdButton\";\n\nconst useStyles = makeStyles((theme) => createStyles(styles(theme)));\n\nexport default function ResourceSharing({ startLoading }) {\n  const classes = useStyles();\n  const [loading, setLoading] = useState(startLoading);\n\n  if (loading) return <CircularProgress color=\"primary\" />;\n\n  return (\n    <>\n      <ActionMenu>\n        <ActionMenuItem>\n          <AddPermissionUsingWebIdButton onLoading={setLoading} />\n        </ActionMenuItem>\n      </ActionMenu>\n      <Accordion defaultExpanded>\n        <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n          Individual permissions\n        </AccordionSummary>\n        <AccordionDetails className={classes.details}>\n          <AgentAccessList onLoading={setLoading} />\n        </AccordionDetails>\n      </Accordion>\n    </>\n  );\n}\n\nResourceSharing.propTypes = {\n  startLoading: T.bool,\n};\n\nResourceSharing.defaultProps = {\n  startLoading: false,\n};\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nexport default () => ({\n  details: {\n    display: \"block\",\n  },\n});\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport { v4 as uuid } from \"uuid\";\nimport { vcard, foaf, rdf } from \"rdf-namespaces\";\nimport {\n  addStringNoLocale,\n  addUrl,\n  asUrl,\n  createSolidDataset,\n  createThing,\n  getSourceUrl,\n  getThing,\n  getUrl,\n  saveSolidDatasetAt,\n  setThing,\n} from \"@inrupt/solid-client\";\nimport {\n  getSchemaOperations,\n  mapSchema,\n  vcardExtras,\n} from \"../../../addressBook\";\nimport { joinPath } from \"../../../stringHelpers\";\nimport { getContactAll } from \"../index\";\n// eslint-disable-next-line import/no-cycle\nimport { getProfilesForPersonContacts } from \"../../profile\";\nimport { chain, defineThing } from \"../../../solidClientHelpers/utils\";\nimport { updateOrCreateDataset } from \"../../dataset\";\nimport {\n  addContactIndexToAddressBook,\n  getContactIndexUrl,\n} from \"../collection\";\n\n/**\n * Person contacts represent the agents of type vcard:Individual, foaf:Person, schema:Person\n * Their location are usually at /contacts/Person/<unique-id>/index.ttl#this\n */\n\n/* Model constants */\nexport const PEOPLE_INDEX_FILE = \"people.ttl\";\nexport const PERSON_CONTAINER = \"Person\";\nexport const INDEX_FILE = \"index.ttl\";\nexport const NAME_EMAIL_INDEX_PREDICATE = vcardExtras(\"nameEmailIndex\");\nexport const PERSON_CONTACT = {\n  container: PERSON_CONTAINER,\n  indexFile: PEOPLE_INDEX_FILE,\n  indexFilePredicate: NAME_EMAIL_INDEX_PREDICATE,\n  contactTypeUrl: vcard.Individual,\n  isOfType: (contact) => !!getUrl(contact, vcardExtras(\"inAddressBook\")),\n};\n\n/* Model functions */\nexport function createPersonDatasetUrl(addressBook, id = uuid()) {\n  return joinPath(addressBook.containerUrl, PERSON_CONTAINER, id, INDEX_FILE);\n}\n\nexport async function getPersonAll(addressBook, fetch) {\n  return getContactAll(addressBook, [PERSON_CONTACT], fetch);\n}\n\nexport function getWebIdUrl(dataset, iri) {\n  const thing = getThing(dataset, iri);\n  const webIdNodeUrl = getUrl(thing, vcard.url);\n  if (webIdNodeUrl) {\n    const webIdNode = getThing(dataset, webIdNodeUrl);\n    return webIdNode && getUrl(webIdNode, vcard.value);\n  }\n  return getUrl(thing, foaf.openid);\n}\n\nexport function createWebIdNode(webId, iri) {\n  const webIdNode = chain(\n    createThing(),\n    (t) => addUrl(t, rdf.type, vcardExtras(\"WebId\")),\n    (t) => addUrl(t, vcard.value, webId)\n  );\n  const webIdNodeUrl = asUrl(webIdNode, iri);\n  return { webIdNode, webIdNodeUrl };\n}\n\nfunction createPersonContact(addressBook, contact) {\n  const { containerUrl: addressBookContainerUrl } = addressBook;\n\n  const normalizedContact = {\n    emails: [],\n    addresses: [],\n    telephones: [],\n    ...contact,\n  };\n\n  const id = uuid();\n  const iri = joinPath(\n    addressBookContainerUrl,\n    PERSON_CONTAINER,\n    id,\n    INDEX_FILE\n  );\n  const { webIdNode, webIdNodeUrl } = createWebIdNode(contact.webId, iri);\n  const rootAttributeFns = getSchemaOperations(contact, webIdNodeUrl);\n  const emails = normalizedContact.emails.map(mapSchema(\"email\"));\n  const addresses = normalizedContact.addresses.map(mapSchema(\"address\"));\n  const telephones = normalizedContact.telephones.map(mapSchema(\"telephone\"));\n\n  const person = defineThing(\n    { name: \"this\" },\n    ...[(t) => addUrl(t, rdf.type, vcard.Individual), ...rootAttributeFns],\n    ...emails.map(({ name }) => {\n      return (t) => addUrl(t, vcard.hasEmail, [iri, name].join(\"#\"));\n    }),\n    ...addresses.map(({ name }) => {\n      return (t) => addUrl(t, vcard.hasAddress, [iri, name].join(\"#\"));\n    }),\n    ...telephones.map(({ name }) => {\n      return (t) => addUrl(t, vcard.hasTelephone, [iri, name].join(\"#\"));\n    })\n  );\n  const dataset = chain(\n    createSolidDataset(),\n    (d) => setThing(d, person),\n    (d) => setThing(d, webIdNode),\n    ...emails\n      .concat(addresses)\n      .concat(telephones)\n      .map(\n        ({ thing }) =>\n          (d) =>\n            setThing(d, thing)\n      )\n  );\n  return {\n    iri,\n    dataset,\n  };\n}\n\nexport async function savePerson(addressBook, contactSchema, fetch) {\n  const indexIri = asUrl(addressBook.thing);\n  const newContact = createPersonContact(addressBook, contactSchema);\n  const { iri, dataset } = newContact;\n  const personDataset = await saveSolidDatasetAt(iri, dataset, { fetch });\n  const personThing = defineThing(\n    {\n      url: `${getSourceUrl(personDataset)}#this`,\n    },\n    (t) =>\n      addStringNoLocale(t, foaf.name, contactSchema.fn || contactSchema.name),\n    (t) => addUrl(t, vcardExtras(\"inAddressBook\"), indexIri)\n  );\n\n  let updatedAddressBook = addressBook;\n  let personIndexUrl = getContactIndexUrl(addressBook, PERSON_CONTACT);\n  if (!personIndexUrl) {\n    updatedAddressBook = await addContactIndexToAddressBook(\n      addressBook,\n      PERSON_CONTACT,\n      fetch\n    );\n    personIndexUrl = getContactIndexUrl(updatedAddressBook, PERSON_CONTACT);\n  }\n\n  const indexDataset = await updateOrCreateDataset(personIndexUrl, fetch, (d) =>\n    setThing(d, personThing)\n  );\n\n  return {\n    addressBook: updatedAddressBook,\n    person: {\n      dataset: personDataset,\n      thing: personThing,\n    },\n    personIndex: indexDataset,\n  };\n}\n\nexport async function findPersonContactInAddressBook(\n  addressBook,\n  webId,\n  fetch\n) {\n  const people = await getPersonAll(addressBook, fetch);\n  const profiles = await getProfilesForPersonContacts(people, fetch);\n  const existingContact = profiles.filter((profile) => profile.webId === webId);\n  return existingContact;\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport { asUrl } from \"@inrupt/solid-client\";\nimport { fetchProfile } from \"../../solidClientHelpers/profile\";\nimport { getResource } from \"../../solidClientHelpers/resource\";\n// eslint-disable-next-line import/no-cycle\nimport { getWebIdUrl } from \"../contact/person\";\n\n/* Model constants */\n\n/* Model functions */\n\nexport async function getProfileForContact(personContactUrl, fetch) {\n  try {\n    const { response } = await getResource(personContactUrl, fetch);\n    const { dataset, iri } = response;\n    const webId = getWebIdUrl(dataset, iri);\n    const fetchedProfile = await fetchProfile(webId, fetch);\n    return fetchedProfile;\n  } catch (e) {\n    return null;\n  }\n}\nexport async function getProfilesForPersonContacts(people, fetch) {\n  const responses = await Promise.all(\n    people.map(({ thing }) => getProfileForContact(asUrl(thing), fetch))\n  );\n  return responses.filter((profile) => profile);\n}\n\nexport async function getProfile(webId, fetch) {\n  let profile;\n  let profileError;\n  try {\n    profile = await fetchProfile(webId, fetch);\n  } catch (error) {\n    profileError = error;\n  }\n  return { profile, profileError };\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n/* eslint react/jsx-props-no-spreading:off */\n\nimport React from \"react\";\nimport { Icons } from \"@inrupt/prism-react-components\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport { useBem } from \"@solid/lit-prism-patterns\";\nimport { Avatar as MuiAvatar, createStyles } from \"@material-ui/core\";\nimport T from \"prop-types\";\nimport styles from \"./styles\";\n\nconst useStyles = makeStyles((theme) => createStyles(styles(theme)));\n\nexport default function Avatar({ src, icon, variant, ...props }) {\n  const bem = useBem(useStyles());\n  return src ? (\n    <MuiAvatar src={src} {...props} />\n  ) : (\n    <MuiAvatar {...props}>\n      <Icons name={icon} className={bem(\"avatar__icon\", variant)} />\n    </MuiAvatar>\n  );\n}\n\nAvatar.propTypes = {\n  icon: T.string,\n  src: T.string,\n  variant: T.string,\n};\n\nAvatar.defaultProps = {\n  icon: \"user\",\n  src: null,\n  variant: null,\n};\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport { createStyles } from \"@solid/lit-prism-patterns\";\n\nconst PUBLIC_ICON_COLOR = \"#2196F3\";\nconst PUBLIC_ICON_BACKGROUND_COLOR = \"#E8F4FD\";\nconst AUTHENTICATED_ICON_COLOR = \"#4CAF50\";\nconst AUTHENTICATED_ICON_BACKGROUND_COLOR = \"#EDF7ED\";\n\nexport default function styles(theme) {\n  return createStyles(theme, [\"icons\", \"button\"], {\n    avatar__icon: {\n      color: \"white\",\n    },\n    \"avatar__icon--public\": {\n      fontSize: \"0.875rem\",\n      display: \"flex\",\n      width: \"1.875rem\",\n      height: \"1.875rem\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      color: PUBLIC_ICON_COLOR,\n      backgroundColor: PUBLIC_ICON_BACKGROUND_COLOR,\n      borderRadius: \"50%\",\n    },\n    \"avatar__icon--authenticated\": {\n      fontSize: \"0.875rem\",\n      display: \"flex\",\n      width: \"1.875rem\",\n      height: \"1.875rem\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      color: AUTHENTICATED_ICON_COLOR,\n      backgroundColor: AUTHENTICATED_ICON_BACKGROUND_COLOR,\n      borderRadius: \"50%\",\n    },\n  });\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport React, { createContext } from \"react\";\nimport T from \"prop-types\";\nimport { swrResponse as swrResponsePropType } from \"../../../constants/propTypes\";\n\nconst ResourceInfoContext = createContext({\n  data: null,\n  error: null,\n  isValidating: true,\n  mutate: () => {},\n});\n\nexport default ResourceInfoContext;\n\nexport function ResourceInfoProvider({ children, swr }) {\n  return (\n    <ResourceInfoContext.Provider value={swr}>\n      {children}\n    </ResourceInfoContext.Provider>\n  );\n}\n\nResourceInfoProvider.propTypes = {\n  children: T.node.isRequired,\n  swr: swrResponsePropType.isRequired,\n};\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport PropTypes from \"prop-types\";\n\nexport const permission = PropTypes.shape({\n  type: PropTypes.string,\n  acl: PropTypes.shape({\n    read: PropTypes.bool,\n    write: PropTypes.bool,\n    append: PropTypes.bool,\n    control: PropTypes.bool,\n  }),\n  webId: PropTypes.string.isRequired,\n  alias: PropTypes.string,\n  inherited: PropTypes.bool,\n  vc: PropTypes.shape({\n    \"@context\": PropTypes.arrayOf(PropTypes.string),\n    credentialSubject: PropTypes.shape({\n      hasConsent: PropTypes.shape({\n        mode: PropTypes.arrayOf(PropTypes.string),\n        hasStatus: PropTypes.string,\n        forPersonalData: PropTypes.arrayOf(PropTypes.string),\n        forPurpose: PropTypes.arrayOf(PropTypes.string),\n        isProvidedTo: PropTypes.string,\n      }),\n      id: PropTypes.string,\n      inbox: PropTypes.string,\n    }),\n    id: PropTypes.string,\n    issuanceDate: PropTypes.string,\n    expirationDate: PropTypes.string,\n    issuer: PropTypes.string,\n    proof: PropTypes.shape({\n      created: PropTypes.string,\n      domain: PropTypes.string,\n      proofPurpose: PropTypes.string,\n      proofValue: PropTypes.string,\n      type: PropTypes.string,\n      verificationMethod: PropTypes.string,\n    }),\n    type: PropTypes.arrayOf(PropTypes.string),\n  }),\n});\n\nexport const profile = PropTypes.shape({\n  avatar: PropTypes.string,\n  name: PropTypes.string,\n  nickname: PropTypes.string,\n  webId: PropTypes.string,\n  types: PropTypes.arrayOf(PropTypes.string),\n});\n\nexport const swrResponse = PropTypes.shape({\n  // eslint-disable-next-line react/forbid-prop-types\n  data: PropTypes.any,\n  // eslint-disable-next-line react/forbid-prop-types\n  error: PropTypes.object,\n  isValidating: PropTypes.bool.isRequired,\n  mutate: PropTypes.func.isRequired,\n});\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport React, { useContext, useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { createStyles, ListItem, ListItemText } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport { getResourceName } from \"../../../../../../src/solidClientHelpers/resource\";\nimport AccessControlContext from \"../../../../../../src/contexts/accessControlContext\";\nimport ConfirmationDialogContext from \"../../../../../../src/contexts/confirmationDialogContext\";\nimport styles from \"./styles\";\nimport { PUBLIC_AGENT_PREDICATE } from \"../../../../../../src/models/contact/public\";\nimport { AUTHENTICATED_AGENT_PREDICATE } from \"../../../../../../src/models/contact/authenticated\";\nimport {\n  permission as permissionPropType,\n  profile as profilePropType,\n} from \"../../../../../../constants/propTypes\";\nimport ResourceInfoContext from \"../../../../../../src/contexts/resourceInfoContext\";\nimport ConfirmationDialog from \"../../../../../confirmationDialog\";\n\nexport const handleRemovePermissions = ({\n  setLoading,\n  accessControl,\n  setLocalAccess,\n  mutateResourceInfo,\n}) => {\n  return async (agentWebId, policyName) => {\n    setLoading(true);\n    if (PUBLIC_AGENT_PREDICATE === agentWebId) {\n      accessControl.setRulePublic(policyName, false);\n    }\n    if (AUTHENTICATED_AGENT_PREDICATE === agentWebId) {\n      accessControl.setRuleAuthenticated(policyName, false);\n    }\n    const { response: updatedAcr } = await accessControl.removeAgentFromPolicy(\n      agentWebId,\n      policyName\n    );\n    await mutateResourceInfo(updatedAcr, false);\n    setLoading(false);\n    setLocalAccess(null);\n  };\n};\n\nconst useStyles = makeStyles((theme) => createStyles(styles(theme)));\n\nexport const TESTCAFE_ID_REMOVE_BUTTON = \"remove-button\";\nexport const DIALOG_ID = \"remove-agent\";\nexport const CONFIRMATION_TEXT = \"Remove\";\n\nexport default function RemoveButton({\n  resourceIri,\n  permission: { webId, alias },\n  profile,\n  setLoading,\n  setLocalAccess,\n}) {\n  const { accessControl } = useContext(AccessControlContext);\n  const { mutate: mutateResourceInfo } = useContext(ResourceInfoContext);\n  const resourceName = getResourceName(resourceIri);\n  const classes = useStyles();\n  const [bypassDialog, setBypassDialog] = useState(false);\n  const [confirmationSetup, setConfirmationSetup] = useState(false);\n  const handleRemoveAgent = handleRemovePermissions({\n    setLoading,\n    accessControl,\n    setLocalAccess,\n    mutateResourceInfo,\n  });\n\n  const {\n    confirmed,\n    open,\n    setConfirmed,\n    setOpen,\n    title,\n    setTitle,\n    setConfirmText,\n    closeDialog,\n  } = useContext(ConfirmationDialogContext);\n\n  const handleOpenDialog = () => {\n    setConfirmText(CONFIRMATION_TEXT);\n    // eslint-disable-next-line prettier/prettier\n    if (\n      PUBLIC_AGENT_PREDICATE === webId ||\n      AUTHENTICATED_AGENT_PREDICATE === webId\n    ) {\n      setBypassDialog(true);\n    }\n    const text = `Remove ${\n      profile?.name || webId\n    }'s access from ${resourceName}`;\n    setTitle(text);\n    setOpen(DIALOG_ID);\n  };\n\n  useEffect(() => {\n    setConfirmationSetup(true);\n    if (bypassDialog) {\n      setConfirmed(true);\n      handleRemoveAgent(webId, alias);\n    }\n    if (open !== DIALOG_ID) return;\n    if (confirmationSetup && confirmed === null) return;\n\n    if (confirmationSetup && confirmed) {\n      handleRemoveAgent(webId, alias);\n    }\n\n    if (confirmationSetup && confirmed !== null) {\n      closeDialog();\n      setConfirmationSetup(false);\n    }\n    setConfirmText(null);\n  }, [\n    confirmationSetup,\n    confirmed,\n    title,\n    webId,\n    alias,\n    bypassDialog,\n    setConfirmed,\n    setConfirmationSetup,\n    setConfirmText,\n    handleRemoveAgent,\n    open,\n    closeDialog,\n  ]);\n\n  return (\n    <ListItem\n      data-testid={TESTCAFE_ID_REMOVE_BUTTON}\n      button\n      onClick={handleOpenDialog}\n    >\n      <ListItemText\n        disableTypography\n        classes={{ primary: classes.listItemText }}\n      >\n        Remove\n      </ListItemText>\n      <ConfirmationDialog />\n    </ListItem>\n  );\n}\n\nRemoveButton.propTypes = {\n  resourceIri: PropTypes.string.isRequired,\n  permission: permissionPropType.isRequired,\n  profile: profilePropType,\n  setLoading: PropTypes.func,\n  setLocalAccess: PropTypes.func,\n};\n\nRemoveButton.defaultProps = {\n  setLoading: () => {},\n  setLocalAccess: () => {},\n  profile: null,\n};\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport { createStyles } from \"@solid/lit-prism-patterns\";\n\nexport default function styles(theme) {\n  return createStyles(theme, [], {\n    listItemText: {\n      fontWeight: theme.typography.body1.fontWeight,\n    },\n  });\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport { createStyles } from \"@solid/lit-prism-patterns\";\n\nconst styles = (theme) => {\n  return createStyles(theme, [\"back-to-nav\", \"input\"], {\n    \"revoke-button\": {\n      color: theme.palette.error.main,\n      textDecoration: \"underline\",\n      background: \"none\",\n      border: \"none\",\n      cursor: \"pointer\",\n      textAlign: \"left\",\n      fontSize: \"1rem\",\n    },\n  });\n};\n\nexport default styles;\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n/* eslint-disable react/jsx-one-expression-per-line */\n\nimport React, { useState, useEffect } from \"react\";\nimport T from \"prop-types\";\nimport { createStyles, ListItem, ListItemText } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport { permission as permissionPropType } from \"../../../../../../constants/propTypes\";\nimport styles from \"./styles\";\n\nexport const TESTCAFE_ID_VIEW_DETAILS_BUTTON = \"view-details-button\";\nconst useStyles = makeStyles((theme) => createStyles(styles(theme)));\n\nexport default function ConsentDetailsButton({ setOpenModal }) {\n  const classes = useStyles();\n\n  return (\n    <ListItem\n      data-testid={TESTCAFE_ID_VIEW_DETAILS_BUTTON}\n      button\n      onClick={() => setOpenModal(true)}\n    >\n      <ListItemText\n        disableTypography\n        classes={{ primary: classes.listItemText }}\n      >\n        View Details\n      </ListItemText>\n    </ListItem>\n  );\n}\n\nConsentDetailsButton.propTypes = {\n  setOpenModal: T.func.isRequired,\n};\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nexport function getRequestedAccessesFromSignedVc(signedVc) {\n  return Array.isArray(signedVc?.credentialSubject?.providedConsent.mode)\n    ? signedVc?.credentialSubject?.providedConsent\n    : [signedVc?.credentialSubject?.providedConsent];\n}\n\nexport function getRequestorWebIdFromSignedVc(signedVc) {\n  return signedVc?.credentialSubject?.providedConsent?.isProvidedTo;\n}\n\nexport function getPurposeUrlsFromSignedVc(signedVc) {\n  return Array.isArray(signedVc?.credentialSubject?.providedConsent)\n    ? signedVc?.credentialSubject?.providedConsent[0].forPurpose // getting first item in array for now\n    : signedVc?.credentialSubject?.providedConsent.forPurpose;\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n/* eslint-disable react/jsx-one-expression-per-line */\n\nimport React from \"react\";\nimport T from \"prop-types\";\nimport { getStringNoLocale } from \"@inrupt/solid-client\";\nimport { foaf } from \"rdf-namespaces\";\nimport { useThing } from \"@inrupt/solid-ui-react\";\n\nexport const TESTCAFE_ID_AGENT_NAME_LINK = \"agent-name-link\";\nexport default function AgentName({ agentWebId, className, link }) {\n  const { thing } = useThing();\n  const name = thing && getStringNoLocale(thing, foaf.name);\n  return (\n    <>\n      {link ? (\n        <a\n          target=\"_blank\"\n          href={agentWebId}\n          rel=\"noopener noreferrer\"\n          data-testid={TESTCAFE_ID_AGENT_NAME_LINK}\n        >\n          <h3 className={className}>{name || agentWebId}</h3>\n        </a>\n      ) : (\n        <span className={className}> {name || agentWebId} </span>\n      )}\n    </>\n  );\n}\n\nAgentName.propTypes = {\n  agentWebId: T.string.isRequired,\n  className: T.string,\n  link: T.bool,\n};\n\nAgentName.defaultProps = {\n  className: null,\n  link: false,\n};\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport React from \"react\";\nimport T from \"prop-types\";\nimport {\n  Icons,\n  ModalBody,\n  ModalContainer,\n  Button,\n  Modal,\n  LinkButton,\n} from \"@inrupt/prism-react-components\";\nimport { revokeAccessGrant } from \"@inrupt/solid-client-access-grants\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport { useBem } from \"@solid/lit-prism-patterns\";\nimport {\n  CombinedDataProvider,\n  Image,\n  useSession,\n} from \"@inrupt/solid-ui-react\";\nimport { format } from \"date-fns\";\nimport { vcard } from \"rdf-namespaces\";\nimport {\n  createStyles,\n  Grid,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Avatar,\n} from \"@material-ui/core\";\nimport { permission as permissionPropType } from \"../../../../../../../constants/propTypes\";\nimport { getAcpAccessDetails } from \"../../../../../../../src/accessControl/acp\";\nimport InfoTooltip from \"../../../../../../infoTooltip\";\nimport {\n  getExpiryDate,\n  getIssuanceDate,\n} from \"../../../../../../../src/models/consent/request\";\nimport { getPurposeUrlsFromSignedVc } from \"../../../../../../../src/models/consent/signedVc\";\nimport styles from \"./styles\";\nimport AgentName from \"../agentName\";\nimport { getResourceName } from \"../../../../../../../src/solidClientHelpers/resource\";\n\n// export const TESTCAFE_ID_CONSENT_DETAILS_CONTENT = \"consent-details-modal\";\nexport const TESTCAFE_ID_CONSENT_DETAILS_MODAL = \"consent-details-modal\";\nexport const TESTCAFE_ID_RESOURCE_DETAILS_REVOKE_ACCESS_LINK =\n  \"resource-details-revoke\";\nexport const TESTCAFE_ID_CONSENT_DETAILS_DONE_BUTTON = \"consent-details-done\";\nexport const TESTCAFE_ID_CONSENT_DETAILS_REVOKE_BUTTON =\n  \"consent-details-revoke\";\n\nconst useStyles = makeStyles((theme) => createStyles(styles(theme)));\nexport function setupErrorComponent(bem) {\n  return () => (\n    <Avatar className={bem(\"avatar\")} alt=\"Contact photo placeholder\" />\n  );\n}\nexport default function ConsentDetailsModal({\n  resourceIri,\n  permission,\n  handleCloseModal,\n  openModal,\n}) {\n  const classes = useStyles();\n  const bem = useBem(classes);\n  const { vc, webId: agentWebId } = permission;\n  const errorComponent = setupErrorComponent(bem);\n\n  const allowModes = vc?.credentialSubject?.providedConsent?.mode;\n  const modes = allowModes?.map((mode) => ({\n    read: !!mode.includes(\"Read\"),\n    write: !!mode.includes(\"Write\"),\n    append: !!mode.includes(\"Append\"),\n    control: !!mode.includes(\"Control\"),\n  }));\n  const resourceName = getResourceName(resourceIri);\n  const accessDetails = modes?.map((mode) => getAcpAccessDetails(mode));\n  const order = [\"View\", \"Edit\", \"Add\", \"Share\", \"View Sharing\"];\n  const sortedAccessDetails = accessDetails?.sort(\n    (a, b) => order.indexOf(a.name) - order.indexOf(b.name)\n  );\n  const expirationDate = getExpiryDate(vc)\n    ? format(new Date(getExpiryDate(vc)), \"MMMM' 'd', 'Y\")\n    : false;\n  const issuanceDate = format(new Date(getIssuanceDate(vc)), \"M/dd/Y\");\n  const purposes = getPurposeUrlsFromSignedVc(vc);\n  const { fetch } = useSession();\n\n  const handleRevoke = () => {\n    revokeAccessGrant(vc, { fetch });\n    handleCloseModal();\n  };\n  return (\n    <Modal\n      open={openModal}\n      style={{\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n      }}\n      onClose={handleCloseModal}\n      aria-labelledby={`${resourceIri} Modal`}\n      aria-describedby={`${resourceIri} for this resource`}\n    >\n      <ModalContainer\n        className={classes.paper}\n        data-testid={TESTCAFE_ID_CONSENT_DETAILS_MODAL}\n      >\n        <ModalBody className={bem(\"access-details\", \"wrapper\")}>\n          <Grid container>\n            <Grid className={bem(\"access-details\", \"title\")} container>\n              <CombinedDataProvider\n                datasetUrl={agentWebId}\n                thingUrl={agentWebId}\n              >\n                <Grid\n                  className={bem(\"access-details\", \"avatar-container\")}\n                  container\n                  item\n                  xs={12}\n                  sm={2}\n                >\n                  <Image\n                    profileIri={agentWebId}\n                    property={vcard.hasPhoto}\n                    errorComponent={errorComponent}\n                  />\n                </Grid>\n                <Grid item xs={12} sm={10}>\n                  <AgentName\n                    className={bem(\"access-details\", \"agent-name\")}\n                    agentWebId={agentWebId}\n                    link\n                  />\n                </Grid>\n              </CombinedDataProvider>\n            </Grid>\n\n            <Grid className={bem(\"access-details\", \"section\")} container>\n              <Grid justify=\"space-between\" container item>\n                <h3 className={bem(\"access-details\", \"section-header\")}>\n                  Access\n                </h3>\n                {/* <Button variant=\"outlined\">\n                <Icons\n                  className={bem(\"access-details\", \"edit-icon\")}\n                  name=\"edit\"\n                />\n                {`Edit`.toUpperCase()}\n              </Button> */}\n              </Grid>\n\n              <Grid item>\n                <hr className={bem(\"access-details\", \"separator\")} />\n                <List dense style={{ overflow: \"visable\" }}>\n                  {sortedAccessDetails?.map(({ name, icon, description }) => (\n                    <ListItem key={name} style={{ padding: \"0px\" }}>\n                      <ListItemIcon classes={{ root: classes.listItemIcon }}>\n                        <Icons\n                          name={icon}\n                          className={bem(\"access-details\", \"section-icon\")}\n                        />\n                      </ListItemIcon>\n                      <ListItemText\n                        classes={{\n                          root: classes.listItemText,\n                          primary: classes.listItemTitleText,\n                          secondary: classes.listItemSecondaryText,\n                        }}\n                        key={name}\n                        primary={name}\n                        secondary={description}\n                      />\n                    </ListItem>\n                  ))}\n                </List>\n              </Grid>\n              <Grid item>\n                <h3 className={bem(\"access-details\", \"section-header\")}>\n                  Approved On\n                </h3>\n                <hr className={bem(\"access-details\", \"separator\")} />\n                <p>{issuanceDate}</p>\n              </Grid>\n              <Grid item>\n                <h3 className={bem(\"access-details\", \"section-header\")}>\n                  Purpose\n                </h3>\n                <hr className={bem(\"access-details\", \"separator\")} />\n                <div className={bem(\"purposes-container\")}>\n                  {Array.isArray(purposes) ? (\n                    <List dense style={{ overflow: \"visable\" }}>\n                      {purposes?.map((purpose) => (\n                        <ListItem key={purpose} className={bem(\"list-item\")}>\n                          <span className={bem(\"purpose\")}>\n                            {purpose} <InfoTooltip tooltipText={purpose} />\n                          </span>\n                        </ListItem>\n                      ))}\n                    </List>\n                  ) : (\n                    <span className={bem(\"purpose\")}>\n                      {purposes} <InfoTooltip tooltipText={purposes} />\n                    </span>\n                  )}\n                </div>\n              </Grid>\n              <Grid item>\n                {expirationDate && (\n                  <Grid container>\n                    <h3 className={bem(\"access-details\", \"section-header\")}>\n                      Access Duration\n                    </h3>\n                    {/* <Button variant=\"outlined\">\n                <Icons\n                  className={bem(\"access-details\", \"edit-icon\")}\n                  name=\"edit\"\n                />\n                {`Edit`.toUpperCase()}\n              </Button> */}\n                    <hr className={bem(\"access-details\", \"separator\")} />\n                    <span>\n                      <AgentName agentWebId={agentWebId} />\n                      has access until <strong>{expirationDate}</strong>.\n                    </span>\n                  </Grid>\n                )}\n              </Grid>\n            </Grid>\n\n            <Grid\n              container\n              className={bem(\"access-details\", \"action-container\")}\n            >\n              <Grid item xs={12} sm={6}>\n                <LinkButton\n                  className={bem(\"access-details\", \"revoke-text\")}\n                  variant=\"secondary\"\n                  onClick={handleRevoke}\n                  data-testid={TESTCAFE_ID_CONSENT_DETAILS_REVOKE_BUTTON}\n                >\n                  {`Revoke access to ${resourceName}`}\n                </LinkButton>\n              </Grid>\n\n              <Grid item xs={12} sm={2}>\n                <Button\n                  type=\"submit\"\n                  onClick={handleCloseModal}\n                  data-testid={TESTCAFE_ID_CONSENT_DETAILS_DONE_BUTTON}\n                >\n                  Done\n                </Button>\n              </Grid>\n            </Grid>\n          </Grid>\n        </ModalBody>\n      </ModalContainer>\n    </Modal>\n  );\n}\nConsentDetailsModal.propTypes = {\n  resourceIri: T.string.isRequired,\n  permission: permissionPropType.isRequired,\n  handleCloseModal: T.func.isRequired,\n  openModal: T.bool.isRequired,\n};\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nconst DETAILS_ICON_COLOR = \"#4CAF50\";\nconst EDIT_ICON_COLOR = \"#7B4DFF\";\n\nexport default function styles(theme) {\n  return {\n    \"access-details--wrapper\": {\n      display: \"flex\",\n      flexDirection: \"column\",\n      wordBreak: \"break-word\",\n      margin: \"1rem\",\n    },\n    \"access-details--title\": {\n      padding: 0,\n      margin: 0,\n      fontFamily: theme.typography.h2.fontFamily,\n      position: \"relative\",\n    },\n    \"access-details--resource-info\": {\n      flexGrow: 1,\n      \"& > *\": {\n        paddingLeft: \"2rem\",\n      },\n      \"& p\": {\n        fontSize: \"0.8125rem\",\n        margin: 0,\n        wordWrap: \"break-word\",\n      },\n    },\n    \"access-details--icon\": {\n      fontSize: \"1.5rem\",\n      display: \"flex\",\n      alignItems: \"center\",\n      background: \"linear-gradient(to right, #0D6796, #33B2D3)\",\n      \"-webkit-background-clip\": \"text\",\n      color: \"transparent\",\n      marginRight: \"1rem\",\n    },\n    avatar: {\n      marginRight: \"1rem\",\n    },\n    \"access-details--avatar-container\": {\n      display: \"flex\",\n      justifyContent: \"center\",\n      alignSelf: \"center\",\n    },\n    \"access-details--agent-name\": {\n      color: \"#000\",\n      textDecorationColor: \"#000\",\n      fontSize: \"20px\",\n      fontWeight: \"700\",\n      textDecoration: \"underline\",\n    },\n    \"access-details--section\": {\n      minWidth: \"100%\",\n      display: \"flex\",\n      flexDirection: \"column\",\n    },\n    \"access-details--section-header\": {\n      fontFamily: theme.typography.h3.fontFamily,\n      alignSelf: \"end\",\n      marginBottom: 0,\n    },\n    \"access-details--edit-icon\": {\n      color: EDIT_ICON_COLOR,\n      paddingRight: \".5rem\",\n    },\n    \"access-details--section-icon\": {\n      color: DETAILS_ICON_COLOR,\n      fontSize: \"1rem\",\n      alignItems: \"flex-start\",\n    },\n    listItemIcon: {\n      minWidth: \"fit-content\",\n      paddingRight: \"0.5rem\",\n      display: \"flex\",\n      alignSelf: \"flex-start\",\n      paddingTop: \"0.2rem\",\n    },\n    listItemTitleText: {\n      fontFamily: theme.typography.body.fontFamily,\n      fontSize: theme.typography.body1.fontSize,\n    },\n    listItemSecondaryText: {\n      fontFamily: theme.typography.body.fontFamily,\n      fontSize: \"0.8125rem\",\n    },\n    \"access-details--separator\": {\n      backgroundColor: theme.palette.grey.A100,\n      border: \"none\",\n      height: \"1px\",\n      width: \"100%\",\n    },\n    listItemText: {\n      marginTop: 0,\n    },\n    purpose: {\n      display: \"flex\",\n      justifyContent: \"flex-start\",\n    },\n    \"access-details--action-container\": {\n      justifyContent: \"space-between\",\n      width: \"100%\",\n      marginTop: \"1rem\",\n    },\n    \"access-details--revoke-text\": {\n      textTransform: \"none\",\n      color: theme.palette.error.main,\n      padding: \"1rem 0\",\n      border: \"none\",\n      background: \"transparent\",\n      textDecoration: \"underline\",\n      fontSize: \"1rem\",\n      cursor: \"pointer\",\n      textAlign: \"left\",\n      justifySelf: \"flex-end\",\n      \"&:hover\": {\n        backgroundColor: \"transparent\",\n      },\n    },\n  };\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  createStyles,\n  List,\n  ListItem,\n  ListItemText,\n  Popover,\n} from \"@material-ui/core\";\nimport { useBem } from \"@solid/lit-prism-patterns\";\nimport clsx from \"clsx\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport RemoveButton from \"./removeButton\";\nimport ConsentDetailsButton from \"./consentDetailsButton\";\nimport styles from \"./styles\";\nimport { profile as profilePropType } from \"../../../../../constants/propTypes\";\nimport ConsentDetailsModal from \"./consentDetailsButton/consentDetailsModal\";\n\nexport const TESTCAFE_ID_MENU_BUTTON = \"menu-button\";\nconst useStyles = makeStyles((theme) => createStyles(styles(theme)));\n\nexport default function AgentAccessOptionsMenu({\n  resourceIri,\n  permission,\n  profile,\n  setLoading,\n  setLocalAccess,\n}) {\n  const classes = useStyles();\n  const bem = useBem(useStyles());\n  const [menuAnchorEl, setMenuAnchorEl] = useState(null);\n  const [openModal, setOpenModal] = useState(false);\n  const { webId, vc } = permission;\n\n  const handleClick = (event) => {\n    setMenuAnchorEl(event.currentTarget);\n  };\n\n  /* istanbul ignore next */\n  const handleClose = () => {\n    setMenuAnchorEl(null);\n    setOpenModal(false);\n  };\n\n  const menuOpen = Boolean(menuAnchorEl);\n  const id = menuOpen ? \"agent-access-options-menu\" : undefined;\n\n  return (\n    <>\n      <button\n        data-testid={TESTCAFE_ID_MENU_BUTTON}\n        type=\"button\"\n        className={classes.button}\n        onClick={handleClick}\n      >\n        <i className={clsx(bem(\"icon-more\"), bem(\"icon\"))} />\n      </button>\n      <Popover\n        id={id}\n        open={menuOpen}\n        anchorEl={menuAnchorEl}\n        onClose={handleClose}\n        anchorOrigin={{\n          vertical: \"bottom\",\n          horizontal: \"center\",\n        }}\n        transformOrigin={{\n          vertical: \"top\",\n          horizontal: \"center\",\n        }}\n      >\n        <List classes={{ root: classes.listRoot }}>\n          <ListItem\n            classes={{\n              root: classes.webIdContainerRoot,\n              gutters: classes.webIdContainerGutters,\n            }}\n          >\n            <ListItemText\n              disableTypography\n              classes={{ root: classes.webIdContainer }}\n            >\n              <b>WebID: </b>\n              <p className={classes.webId}>{webId}</p>\n            </ListItemText>\n          </ListItem>\n          {vc ? (\n            <>\n              <ConsentDetailsButton\n                resourceIri={resourceIri}\n                permission={permission}\n                setOpenModal={setOpenModal}\n              />\n              <ConsentDetailsModal\n                openModal={openModal}\n                resourceIri={resourceIri}\n                permission={permission}\n                handleCloseModal={handleClose}\n              />\n            </>\n          ) : (\n            <RemoveButton\n              resourceIri={resourceIri}\n              profile={profile}\n              permission={permission}\n              setLoading={setLoading}\n              setLocalAccess={setLocalAccess}\n            />\n          )}\n        </List>\n      </Popover>\n    </>\n  );\n}\n\nAgentAccessOptionsMenu.propTypes = {\n  resourceIri: PropTypes.string,\n  permission: PropTypes.shape().isRequired,\n  setLoading: PropTypes.func,\n  profile: profilePropType,\n  setLocalAccess: PropTypes.func,\n};\n\n/* istanbul ignore next */\nAgentAccessOptionsMenu.defaultProps = {\n  resourceIri: null,\n  setLoading: () => {},\n  profile: null,\n  setLocalAccess: () => {},\n};\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport { createStyles } from \"@solid/lit-prism-patterns\";\n\nexport default function styles(theme) {\n  return createStyles(theme, [\"icons\"], {\n    infoButton: {\n      padding: 0,\n      minWidth: \"max-content\",\n    },\n    infoIcon: {\n      margin: theme.spacing(0.4),\n      color: theme.palette.info.main,\n    },\n    button: {\n      flexShrink: 0,\n      width: \"1.875rem\",\n      height: \"1.875rem\",\n      color: theme.palette.text.secondary,\n      backgroundColor: \"transparent\",\n      border: \"none\",\n      borderRadius: \"50%\",\n      margin: 0,\n      padding: 0,\n      cursor: \"pointer\",\n      \"&&:hover\": {\n        color: theme.palette.secondary.contrastText,\n        backgroundColor: theme.palette.grey[400],\n      },\n    },\n    listItemText: {\n      fontWeight: 500,\n    },\n    webIdContainer: {\n      backgroundColor: theme.palette.grey[100],\n      fontSize: \"0.75rem\",\n      fontWeight: 500,\n      letterSpacing: 0,\n      lineHeight: \"13px\",\n      width: \"100%\",\n      height: \"100%\",\n      padding: theme.spacing(0.8, 1.2),\n      marginTop: 0,\n    },\n    webId: {\n      marginTop: \"0.25rem\",\n      marginBottom: \"0.25rem\",\n    },\n    webIdContainerGutters: {\n      paddingLeft: 0,\n      paddingRight: 0,\n    },\n    webIdContainerRoot: {\n      paddingTop: 0,\n    },\n    listRoot: {\n      paddingTop: 0,\n    },\n  });\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n/* eslint-disable react/forbid-prop-types */\n/* eslint-disable react/jsx-props-no-spreading */\n\nimport React from \"react\";\nimport T from \"prop-types\";\nimport { createStyles, Typography } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport {\n  PUBLIC_AGENT,\n  PUBLIC_AGENT_PREDICATE,\n} from \"../../../../../src/models/contact/public\";\nimport {\n  AUTHENTICATED_AGENT,\n  AUTHENTICATED_AGENT_PREDICATE,\n} from \"../../../../../src/models/contact/authenticated\";\nimport styles from \"./styles\";\nimport { displayProfileName } from \"../../../../../src/solidClientHelpers/profile\";\nimport Avatar from \"../../../../avatar\";\nimport AgentAccessOptionsMenu from \"../agentAccessOptionsMenu\";\nimport {\n  permission as permissionPropType,\n  profile as profilePropType,\n} from \"../../../../../constants/propTypes\";\n\nconst useStyles = makeStyles((theme) => createStyles(styles(theme)));\n\nexport const TESTCAFE_ID_AGENT_WEB_ID = \"agent-web-id\";\n\nexport default function AgentProfileDetails({\n  resourceIri,\n  permission,\n  profile,\n  setLoading,\n  setLocalAccess,\n}) {\n  const classes = useStyles();\n\n  const { webId } = permission;\n\n  const getAvatarProps = (localPermission) => {\n    if (localPermission.webId === PUBLIC_AGENT_PREDICATE) {\n      return PUBLIC_AGENT.getAvatarProps();\n    }\n\n    if (localPermission.webId === AUTHENTICATED_AGENT_PREDICATE) {\n      return AUTHENTICATED_AGENT.getAvatarProps();\n    }\n\n    return {\n      src: profile?.avatar,\n    };\n  };\n\n  const getLocalProfile = (localPermission) => {\n    if (localPermission.webId === PUBLIC_AGENT_PREDICATE) {\n      return {\n        name: \"Anyone\",\n      };\n    }\n\n    if (localPermission.webId === AUTHENTICATED_AGENT_PREDICATE) {\n      return {\n        name: \"Anyone signed in\",\n      };\n    }\n    return profile;\n  };\n  const localProfile = getLocalProfile(permission);\n  const avatarProps = getAvatarProps(permission);\n\n  return (\n    <div className={classes.nameAndAvatarContainer}>\n      <Avatar className={classes.avatar} alt={webId} {...avatarProps} />\n      <Typography\n        classes={{ body1: classes.detailText }}\n        data-testid={TESTCAFE_ID_AGENT_WEB_ID}\n        className={classes.detailText}\n      >\n        {localProfile ? displayProfileName(localProfile) : webId}\n      </Typography>\n      {!permission.inherited ? (\n        <AgentAccessOptionsMenu\n          resourceIri={resourceIri}\n          profile={profile}\n          permission={permission}\n          setLoading={setLoading}\n          setLocalAccess={setLocalAccess}\n        />\n      ) : null}\n    </div>\n  );\n}\nAgentProfileDetails.propTypes = {\n  resourceIri: T.string,\n  permission: permissionPropType.isRequired,\n  profile: profilePropType,\n  setLoading: T.func,\n  setLocalAccess: T.func,\n};\n\nAgentProfileDetails.defaultProps = {\n  resourceIri: null,\n  setLoading: () => {},\n  setLocalAccess: () => {},\n  profile: null,\n};\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nexport default function styles(theme) {\n  return {\n    nameAndAvatarContainer: {\n      padding: theme.spacing(0.8, 1.6),\n      color: \"#000\",\n      width: \"100%\",\n      display: \"flex\",\n      alignItems: \"center\",\n      flexDirection: \"row\",\n    },\n    avatar: {\n      marginRight: theme.spacing(1.6),\n      width: \"1.875rem\",\n      height: \"1.875rem\",\n      fontSize: \"0.875rem\",\n    },\n    detailText: {\n      overflowWrap: \"anywhere\",\n      fontWeight: 500,\n      display: \"flex\",\n      fontSize: \"1rem\",\n      fontFamily: \"inherit\",\n      textAlign: \"left\",\n      justifyContent: \"space-between\",\n      alignItems: \"center\",\n      flexGrow: 1,\n      flexDirection: \"row\",\n    },\n    shareText: {\n      whiteSpace: \"nowrap\",\n      padding: theme.spacing(0.5),\n      color: theme.palette.text.secondary,\n      fontSize: \"0.8125rem\",\n      fontWeight: 500,\n    },\n  };\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n/* eslint-disable react/forbid-prop-types */\n\nimport React, { useContext, useEffect, useState } from \"react\";\nimport T from \"prop-types\";\nimport { Button, CircularProgress, createStyles } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport { useBem } from \"@solid/lit-prism-patterns\";\nimport { DatasetContext, useSession } from \"@inrupt/solid-ui-react\";\nimport { getSourceUrl } from \"@inrupt/solid-client\";\nimport { Alert, Skeleton } from \"@material-ui/lab\";\nimport styles from \"./styles\";\nimport { getProfile } from \"../../../../src/models/profile\";\nimport AgentProfileDetails from \"./agentProfileDetails\";\nimport {\n  PUBLIC_AGENT_NAME,\n  PUBLIC_AGENT_PREDICATE,\n} from \"../../../../src/models/contact/public\";\nimport {\n  AUTHENTICATED_AGENT_NAME,\n  AUTHENTICATED_AGENT_PREDICATE,\n} from \"../../../../src/models/contact/authenticated\";\n\nconst useStyles = makeStyles((theme) => createStyles(styles(theme)));\n\nexport const TESTCAFE_ID_TRY_AGAIN_BUTTON = \"try-again-button\";\nexport const TESTCAFE_ID_TRY_AGAIN_SPINNER = \"try-again-spinner\";\nexport const TESTCAFE_ID_SKELETON_PLACEHOLDER = \"skeleton-placeholder\";\nexport const PROFILE_ERROR_MESSAGE = \"Unable to load this profile\";\n\nexport default function AgentAccess({ permission }) {\n  const classes = useStyles();\n  const {\n    session: { fetch },\n  } = useSession();\n  const bem = useBem(useStyles());\n  const { solidDataset: dataset } = useContext(DatasetContext);\n  const { webId, acl, profile, profileError } = permission;\n  const [isLoadingProfile, setIsLoadingProfile] = useState(false);\n  const [localProfile, setLocalProfile] = useState(profile);\n  const [localProfileError, setLocalProfileError] = useState(profileError);\n  const [loading, setLoading] = useState(false);\n  const resourceIri = getSourceUrl(dataset);\n  const [localAccess, setLocalAccess] = useState(acl);\n\n  useEffect(() => {\n    if (webId === PUBLIC_AGENT_PREDICATE) {\n      setLocalProfile({ name: PUBLIC_AGENT_NAME });\n    }\n    if (webId === AUTHENTICATED_AGENT_PREDICATE) {\n      setLocalProfile({ name: AUTHENTICATED_AGENT_NAME });\n    }\n  }, [webId]);\n\n  const handleRetryClick = async () => {\n    const { profile: fetchedProfile, profileError: fetchedProfileError } =\n      await getProfile(webId, fetch);\n    if (fetchedProfile) {\n      setLocalProfile(profile);\n      setIsLoadingProfile(false);\n    }\n    if (profileError) {\n      setLocalProfileError(fetchedProfileError);\n      setIsLoadingProfile(false);\n    }\n  };\n\n  if (!localAccess) return null;\n\n  if (loading)\n    return (\n      <div className={classes.spinnerContainer}>\n        <CircularProgress\n          size={20}\n          className={bem(\"spinner\")}\n          color=\"primary\"\n        />\n      </div>\n    );\n\n  if (localProfileError) {\n    return (\n      <div className={bem(\"alert-container\")}>\n        <Alert\n          classes={{\n            root: classes.alertBox,\n            message: classes.alertMessage,\n            action: classes.action,\n            icon: classes.icon,\n          }}\n          severity=\"warning\"\n          action={\n            // eslint-disable-next-line react/jsx-wrap-multilines\n            isLoadingProfile ? (\n              <CircularProgress\n                data-testid={TESTCAFE_ID_TRY_AGAIN_SPINNER}\n                size={20}\n                className={bem(\"spinner\")}\n                color=\"inherit\"\n              />\n            ) : (\n              <Button\n                data-testid={TESTCAFE_ID_TRY_AGAIN_BUTTON}\n                className={bem(\"bold-button\")}\n                color=\"inherit\"\n                size=\"small\"\n                onClick={() => {\n                  setIsLoadingProfile(true);\n                  setTimeout(handleRetryClick, 750);\n                }}\n              >\n                Try again\n              </Button>\n            )\n          }\n        >\n          {PROFILE_ERROR_MESSAGE}\n        </Alert>\n        <div className={classes.separator} />\n        <AgentProfileDetails\n          resourceIri={resourceIri}\n          permission={permission}\n          profile={localProfile}\n          setLoading={setLoading}\n          setLocalAccess={setLocalAccess}\n        />\n      </div>\n    );\n  }\n\n  if (!localProfile && !localProfileError) {\n    return (\n      <div className={classes.loadingStateContainer}>\n        <Skeleton\n          data-testid={TESTCAFE_ID_SKELETON_PLACEHOLDER}\n          className={classes.avatar}\n          variant=\"circle\"\n          width={40}\n          height={40}\n        />\n        <div className={classes.detailText}>\n          <Skeleton variant=\"text\" width={100} />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <AgentProfileDetails\n      resourceIri={resourceIri}\n      permission={permission}\n      profile={localProfile}\n      setLoading={setLoading}\n      setLocalAccess={setLocalAccess}\n    />\n  );\n}\n\nAgentAccess.propTypes = {\n  permission: T.object.isRequired,\n};\n\nAgentAccess.defaultProps = {};\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nexport default function styles(theme) {\n  const WARNING_BACKGROUND_COLOR = \"#FFF4E5\";\n  const SEPARATOR_COLOR = \"#E1CAAA\";\n  return {\n    \"alert-container\": {\n      maxWidth: \"100%\",\n      backgroundColor: WARNING_BACKGROUND_COLOR,\n      padding: 0,\n    },\n    action: {\n      padding: 0,\n      paddingRight: theme.spacing(0.5),\n    },\n    alertBox: {\n      width: \"100%\",\n      overflowWrap: \"break-word\",\n      padding: theme.spacing(0.7, 1.4),\n    },\n    alertMessage: {\n      overflowWrap: \"break-word\",\n      fontSize: \"14px\",\n    },\n    \"bold-button\": {\n      fontWeight: \"bold\",\n      alignSelf: \"right\",\n    },\n    icon: {\n      marginLeft: \"0.25em\",\n    },\n    spinnerContainer: {\n      width: \"100%\",\n      textAlign: \"center\",\n    },\n    spinner: {\n      justifySelf: \"center\",\n      margin: theme.spacing(2),\n    },\n    separator: {\n      boxSizing: \"border-box\",\n      backgroundColor: SEPARATOR_COLOR,\n      margin: theme.spacing(0, 1.6),\n      marginBottom: theme.spacing(0.8),\n      height: \"1px\",\n    },\n    loadingStateContainer: {\n      display: \"flex\",\n      alignItems: \"center\",\n    },\n  };\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport { DatasetContext } from \"@inrupt/solid-ui-react\";\nimport { getSourceUrl } from \"@inrupt/solid-client\";\nimport { useState, useEffect, useContext, useMemo } from \"react\";\nimport { getPolicyDetailFromAccess } from \"../../accessControl/acp\";\nimport AccessControlContext from \"../../contexts/accessControlContext\";\nimport useConsentBasedAccessForResource from \"../useConsentBasedAccessForResource\";\nimport {\n  getRequestedAccessesFromSignedVc,\n  getRequestorWebIdFromSignedVc,\n} from \"../../models/consent/signedVc\";\n\nconst normalizeConsentBasedPermissions = (consentBasedPermissions) => {\n  if (!consentBasedPermissions) return [];\n  const requestedAccessModes = consentBasedPermissions.map((vc) => {\n    const accessMode = {\n      read: getRequestedAccessesFromSignedVc(vc).mode.some((el) =>\n        el.includes(\"Read\")\n      ),\n      write: getRequestedAccessesFromSignedVc(vc).mode.some((el) =>\n        el.includes(\"Write\")\n      ),\n      append: getRequestedAccessesFromSignedVc(vc).mode.some((el) =>\n        el.includes(\"Append\")\n      ),\n      control: getRequestedAccessesFromSignedVc(vc).mode.some((el) =>\n        el.includes(\"Control\")\n      ),\n    };\n    return {\n      acl: accessMode,\n      vc,\n    };\n  });\n\n  const normalizedPermissions = requestedAccessModes.map(({ acl, vc }) => {\n    return {\n      type: \"agent\",\n      acl,\n      webId: getRequestorWebIdFromSignedVc(vc),\n      alias: getPolicyDetailFromAccess(acl, \"name\"),\n      vc,\n    };\n  });\n  return normalizedPermissions;\n};\n\nexport default function useAllPermissions() {\n  const { accessControl } = useContext(AccessControlContext);\n  const [permissions, setPermissions] = useState(null);\n\n  const { solidDataset: dataset } = useContext(DatasetContext);\n  const datasetUrl = getSourceUrl(dataset);\n\n  const { permissions: consentBasedPermissions } =\n    useConsentBasedAccessForResource(datasetUrl);\n\n  const normalizedConsentPermissions = useMemo(\n    () =>\n      consentBasedPermissions\n        ? normalizeConsentBasedPermissions(consentBasedPermissions)\n        : [],\n    [consentBasedPermissions]\n  );\n\n  useEffect(() => {\n    if (!accessControl) {\n      setPermissions(null);\n      return;\n    }\n\n    accessControl\n      .getAllPermissionsForResource()\n      .then((normalizedPermissions) => {\n        setPermissions([\n          ...normalizedPermissions,\n          ...normalizedConsentPermissions,\n        ]);\n      });\n  }, [accessControl, normalizedConsentPermissions]);\n\n  return {\n    permissions,\n  };\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport { useState, useEffect } from \"react\";\nimport {\n  getAccessGrantAll,\n  isValidAccessGrant,\n} from \"@inrupt/solid-client-access-grants\";\nimport { useSession } from \"@inrupt/solid-ui-react\";\n\nexport default function useConsentBasedAccessForResource(resourceUrl) {\n  const [permissions, setPermissions] = useState(null);\n  const [permissionsError, setPermissionsError] = useState(null);\n  const { fetch } = useSession();\n  useEffect(() => {\n    if (!resourceUrl) {\n      setPermissions(null);\n      return;\n    }\n    async function checkVcValidity(vc) {\n      try {\n        const response = await isValidAccessGrant(vc, { fetch });\n        return response;\n      } catch (err) {\n        return null;\n      }\n    }\n    (async () => {\n      try {\n        const access = await getAccessGrantAll(resourceUrl, { fetch });\n        const validVcs = await Promise.all(\n          access.map(async (vc) => {\n            const isValidVc = await checkVcValidity(vc);\n            if (!isValidVc.errors.length) {\n              return vc;\n            }\n            return null;\n          })\n        );\n        setPermissions(validVcs.filter((vc) => vc !== null));\n      } catch (err) {\n        setPermissionsError(err);\n      }\n    })();\n  }, [resourceUrl, fetch]);\n  return { permissions, permissionsError };\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport React, { createContext, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport useAllPermissions from \"../../hooks/useAllPermissions\";\n\nexport const defaultPermissionsContext = {\n  permissions: [],\n  newAgentsWebIds: [],\n  /* istanbul ignore next */\n  setNewAgentsWebIds: () => {},\n  webIdsToDelete: [],\n  /* istanbul ignore next */\n  setWebIdsToDelete: () => {},\n  addingWebId: false,\n  /* istanbul ignore next */\n  setAddingWebId: () => {},\n};\n\nconst PermissionsContext = createContext(defaultPermissionsContext);\n\nfunction PermissionsContextProvider({ children }) {\n  const { permissions } = useAllPermissions();\n  const [newAgentsWebIds, setNewAgentsWebIds] = useState([]);\n  const [webIdsToDelete, setWebIdsToDelete] = useState([]);\n  const [addingWebId, setAddingWebId] = useState(false);\n  return (\n    <PermissionsContext.Provider\n      value={{\n        permissions,\n        newAgentsWebIds,\n        setNewAgentsWebIds,\n        webIdsToDelete,\n        setWebIdsToDelete,\n        addingWebId,\n        setAddingWebId,\n      }}\n    >\n      {children}\n    </PermissionsContext.Provider>\n  );\n}\n\nPermissionsContextProvider.propTypes = {\n  children: PropTypes.node,\n};\n\nPermissionsContextProvider.defaultProps = {\n  children: null,\n};\n\nexport { PermissionsContextProvider };\nexport default PermissionsContext;\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n/* eslint-disable react/jsx-props-no-spreading */\n/* eslint-disable react/jsx-one-expression-per-line */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useBem } from \"@solid/lit-prism-patterns\";\nimport clsx from \"clsx\";\nimport { createStyles } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport { POLICIES_TYPE_MAP } from \"../../../../constants/policies\";\n\nimport styles from \"./styles\";\n\nconst useStyles = makeStyles((theme) => createStyles(styles(theme)));\n\nexport default function PolicyHeader({ children, type, isPolicyList }) {\n  const bem = useBem(useStyles());\n\n  const classes = useStyles();\n\n  const {\n    titlePlural,\n    titleSingular,\n    icon,\n    iconClassName,\n    DescriptionComponent,\n  } = POLICIES_TYPE_MAP[type];\n\n  return (\n    <div className={classes.headerContainer}>\n      <i className={clsx(bem(icon), bem(\"icon\"), bem(iconClassName))} />\n      <div className={classes.textContainer}>\n        <div className={classes.titleAndButtonContainer}>\n          <p className={classes.title}>\n            {isPolicyList ? titlePlural : titleSingular}\n          </p>\n          {children}\n        </div>\n        <span className={classes.description}>\n          <DescriptionComponent />\n        </span>\n      </div>\n    </div>\n  );\n}\n\nPolicyHeader.propTypes = {\n  type: PropTypes.string.isRequired,\n  isPolicyList: PropTypes.bool,\n  children: PropTypes.node,\n};\n\nPolicyHeader.defaultProps = {\n  isPolicyList: false,\n  children: null,\n};\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport { createStyles } from \"@solid/lit-prism-patterns\";\nimport { POLICIES_TYPE_MAP } from \"../../../../constants/policies\";\n\nexport default function styles(theme) {\n  return createStyles(theme, [\"icons\"], {\n    title: {\n      fontSize: theme.typography.h4.fontSize,\n      fontWeight: theme.typography.fontWeightBold,\n      flexGrow: 1,\n    },\n    headerContainer: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n      marginBottom: theme.spacing(1.6),\n      \"&& p\": {\n        padding: 0,\n        margin: 0,\n      },\n    },\n    textContainer: {\n      width: \"100%\",\n      flexDirection: \"column\",\n    },\n    description: {\n      fontSize: \"0.8125rem\",\n    },\n    titleAndButtonContainer: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n    },\n    icon: {\n      padding: theme.spacing(1),\n      borderRadius: \"50%\",\n      marginRight: theme.spacing(1.6),\n      fontSize: theme.typography.h1.fontSize,\n    },\n    iconViewer: {\n      color: POLICIES_TYPE_MAP.viewers.iconColor,\n      backgroundColor: POLICIES_TYPE_MAP.viewers.iconBackgroundColor,\n    },\n    iconBlocked: {\n      color: POLICIES_TYPE_MAP.blocked.iconColor,\n      backgroundColor: POLICIES_TYPE_MAP.blocked.iconBackgroundColor,\n    },\n    iconEditor: {\n      color: POLICIES_TYPE_MAP.editors.iconColor,\n      backgroundColor: POLICIES_TYPE_MAP.editors.iconBackgroundColor,\n    },\n    iconSettings: {\n      color: POLICIES_TYPE_MAP.custom.iconColor,\n      backgroundColor: POLICIES_TYPE_MAP.custom.iconBackgroundColor,\n    },\n  });\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n/* eslint-disable react/forbid-prop-types */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useBem } from \"@solid/lit-prism-patterns\";\nimport clsx from \"clsx\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport { IconButton, InputBase, createStyles } from \"@material-ui/core\";\nimport styles from \"./styles\";\n\nexport const TESTCAFE_ID_SEARCH_INPUT = \"search-input\";\n\nconst useStyles = makeStyles((theme) => createStyles(styles(theme)));\n\nexport default function AgentsSearchBar({ handleFilterChange }) {\n  const bem = useBem(useStyles());\n\n  const classes = useStyles();\n  return (\n    <div className={classes.searchBoxContainer}>\n      <IconButton type=\"submit\" aria-label=\"search\">\n        <i\n          className={clsx(bem(\"icon-search\"), bem(\"icon\"), classes.iconSearch)}\n          aria-label=\"search\"\n        />\n      </IconButton>\n      <InputBase\n        classes={{ root: classes.searchInput }}\n        placeholder=\"Search by name or WebId\"\n        inputProps={{\n          \"data-testid\": TESTCAFE_ID_SEARCH_INPUT,\n          \"aria-label\": \"Search by name or WebId\",\n          onChange: handleFilterChange,\n        }}\n      />\n    </div>\n  );\n}\n\nAgentsSearchBar.propTypes = {\n  handleFilterChange: PropTypes.func,\n};\n\nAgentsSearchBar.defaultProps = {\n  handleFilterChange: () => {},\n};\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport { createStyles } from \"@solid/lit-prism-patterns\";\n\nexport default function styles(theme) {\n  return createStyles(theme, [\"icons\", \"table\"], {\n    searchBoxContainer: {\n      display: \"flex\",\n      margin: theme.spacing(0.7, 1.2),\n      border: `1px solid ${theme.palette.grey.A100}`,\n      borderRadius: \"10px\",\n      height: \"2.5rem\",\n    },\n    searchInput: {\n      fontSize: \"0.8125rem\",\n      width: \"100%\",\n      font: \"inherit\",\n      fontWeight: 500,\n      color: theme.palette.primary.text,\n    },\n    iconSearch: {\n      fontSize: theme.typography.body1.fontSize,\n    },\n  });\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport { useSession } from \"@inrupt/solid-ui-react\";\nimport useSWR from \"swr\";\nimport { asUrl } from \"@inrupt/solid-client\";\nimport { getProfileForContact } from \"../../models/profile\";\n\nconst getPersonThingUrl = (contact) => {\n  let personThingUrl;\n  try {\n    personThingUrl = asUrl(contact);\n  } catch {\n    personThingUrl = null;\n  }\n  return personThingUrl;\n};\n\nexport default function useContactProfile(contact) {\n  const { fetch } = useSession();\n  const personThingUrl = getPersonThingUrl(contact);\n  return useSWR([\"contact\", personThingUrl], async () => {\n    if (!personThingUrl) return null;\n    const profile = await getProfileForContact(personThingUrl, fetch);\n    return profile;\n  });\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport React, { useContext, useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useSession, useThing } from \"@inrupt/solid-ui-react\";\nimport {\n  Avatar,\n  createStyles,\n  TextField,\n  Tooltip,\n  Typography,\n} from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport { Button, Icons } from \"@inrupt/prism-react-components\";\n\nimport {\n  addStringNoLocale,\n  addUrl,\n  getStringNoLocale,\n  getUrl,\n} from \"@inrupt/solid-client\";\nimport { foaf, vcard } from \"rdf-namespaces\";\nimport styles from \"./styles\";\nimport { chain } from \"../../../../src/solidClientHelpers/utils\";\nimport { fetchProfile } from \"../../../../src/solidClientHelpers/profile\";\nimport useContactProfile from \"../../../../src/hooks/useContactProfile\";\nimport { PUBLIC_AGENT_PREDICATE } from \"../../../../src/models/contact/public\";\nimport { AUTHENTICATED_AGENT_PREDICATE } from \"../../../../src/models/contact/authenticated\";\nimport PermissionsContext from \"../../../../src/contexts/permissionsContext\";\n\nconst useStyles = makeStyles((theme) => createStyles(styles(theme)));\nconst AGENT_PREDICATE = \"http://www.w3.org/ns/solid/acp#agent\";\nexport const TESTCAFE_ID_WEBID_INPUT = \"webid-input\";\nexport const TESTCAFE_ID_ADD_WEBID_BUTTON = \"add-button\";\nexport const TESTCAFE_ID_AGENT_WEB_ID = \"agent-webid\";\nexport const OWN_WEBID_ERROR_MESSAGE =\n  \"You cannot add your own WebID to permissions\";\nexport const EXISTING_WEBID_ERROR_MESSAGE = \"That WebID has already been added\";\n\nconst updateThingForNewRow = async (agentWebId, thing, fetch) => {\n  let newThing;\n  try {\n    const profile = await fetchProfile(agentWebId, fetch);\n    if (profile) {\n      const { name, avatar, webId } = profile;\n      newThing = chain(\n        thing,\n        (t) => addStringNoLocale(t, foaf.name, name),\n        (t) => addUrl(t, AGENT_PREDICATE, webId) // temporarily storing this here to have a webId to display for these temporary rows\n      );\n      if (avatar) {\n        newThing = addUrl(newThing, vcard.hasPhoto, avatar);\n      }\n    } else {\n      newThing = addUrl(thing, AGENT_PREDICATE, agentWebId); // temporarily storing this here to have a webId to display for these temporary rows\n    }\n  } catch (error) {\n    newThing = addUrl(thing, AGENT_PREDICATE, agentWebId); // temporarily storing this here to have a webId to display for these temporary rows\n  }\n  return newThing;\n};\n\nexport default function AddAgentRow({\n  index,\n  contactsArrayLength,\n  updateTemporaryRowThing,\n  type,\n}) {\n  const { session, fetch } = useSession();\n  const {\n    permissions,\n    newAgentsWebIds,\n    setAddingWebId,\n    addingWebId,\n    setNewAgentsWebIds,\n  } = useContext(PermissionsContext);\n  const { thing: temporaryRowThing } = useThing();\n  const classes = useStyles();\n  const [agentWebId, setAgentWebId] = useState(\"\");\n  const [agentName, setAgentName] = useState(null);\n  const [agentAvatar, setAgentAvatar] = useState(null);\n  const [displayedWebId, setDisplayedWebId] = useState(\"\");\n  const { data: profile } = useContactProfile(temporaryRowThing);\n  const [addingError, setAddingError] = useState(null);\n\n  useEffect(() => {\n    if (profile) {\n      setAgentName(profile.name);\n      setAgentAvatar(profile.avatar);\n      setDisplayedWebId(profile.webId);\n    } else if (temporaryRowThing && !profile && contactsArrayLength > 0) {\n      setAgentName(\n        getStringNoLocale(temporaryRowThing, foaf.name) ||\n          getStringNoLocale(temporaryRowThing, vcard.fn) ||\n          null\n      );\n      setAgentAvatar(getUrl(temporaryRowThing, vcard.hasPhoto) || null);\n      setDisplayedWebId(getUrl(temporaryRowThing, AGENT_PREDICATE));\n    }\n  }, [profile, temporaryRowThing, agentWebId, contactsArrayLength]);\n\n  const handleAddAgentsWebIds = async (e) => {\n    e.preventDefault();\n    if (agentWebId === session.info.webId) {\n      setAddingError(OWN_WEBID_ERROR_MESSAGE);\n      return;\n    }\n    const existingWebId = permissions.filter(\n      (p) => p.webId === agentWebId && p.alias === type\n    );\n    if (existingWebId.length) {\n      setAddingError(EXISTING_WEBID_ERROR_MESSAGE);\n      return;\n    }\n    setNewAgentsWebIds([...newAgentsWebIds, agentWebId]);\n    const newThing = await updateThingForNewRow(\n      agentWebId,\n      temporaryRowThing,\n      fetch\n    );\n    updateTemporaryRowThing(newThing);\n    setAddingWebId(false);\n  };\n\n  if (index === 0 && addingWebId) {\n    return (\n      <div className={classes.agentPickerFormContainer}>\n        <form className={classes.addAgentForm} onSubmit={handleAddAgentsWebIds}>\n          <div className={classes.searchBoxContainer}>\n            <TextField\n              aria-label=\"Enter WebID\"\n              placeholder=\"Enter WebID\"\n              value={agentWebId}\n              error={!!addingError}\n              helperText={addingError}\n              onChange={(e) => {\n                setAddingError(null);\n                setAgentWebId(e.target.value);\n              }}\n              classes={{ root: classes.searchInput }}\n              type=\"url\"\n              inputProps={{ \"data-testid\": TESTCAFE_ID_WEBID_INPUT }}\n              // the duplicate props is known issue for Material UI: https://github.com/mui-org/material-ui/issues/11377\n              // eslint-disable-next-line react/jsx-no-duplicate-props\n              InputProps={{\n                pattern: \"https://.+\",\n                title: \"Must start with https://\",\n                className: classes.searchInput,\n                disableUnderline: true,\n              }}\n              required\n            />\n          </div>\n          <Button\n            data-testid={TESTCAFE_ID_ADD_WEBID_BUTTON}\n            className={classes.button}\n            type=\"submit\"\n            variant=\"with-input\"\n          >\n            Add\n          </Button>\n        </form>\n      </div>\n    );\n  }\n\n  if (\n    displayedWebId === PUBLIC_AGENT_PREDICATE ||\n    displayedWebId === AUTHENTICATED_AGENT_PREDICATE\n  ) {\n    return (\n      <Tooltip\n        title={\n          displayedWebId === PUBLIC_AGENT_PREDICATE\n            ? \"Anyone on the internet will be able to access this resource\"\n            : \"Anyone signed in with a WebID will be able to access this resource\"\n        }\n      >\n        <div className={classes.nameAndAvatarContainer}>\n          {displayedWebId === PUBLIC_AGENT_PREDICATE ? (\n            <Icons name=\"globe\" className={classes.publicIcon} />\n          ) : (\n            <Icons name=\"user-lock\" className={classes.authenticatedIcon} />\n          )}\n          <Typography\n            classes={{ body1: classes.detailText }}\n            data-testid={TESTCAFE_ID_AGENT_WEB_ID}\n            className={classes.detailText}\n          >\n            {agentName || displayedWebId}\n          </Typography>\n        </div>\n      </Tooltip>\n    );\n  }\n  return (\n    <Tooltip\n      title={\n        agentName ? displayedWebId || agentWebId : \"Unable to load profile\"\n      }\n    >\n      <div className={classes.nameAndAvatarContainer}>\n        {displayedWebId === PUBLIC_AGENT_PREDICATE ? (\n          <Icons name=\"globe\" className={classes.publicIcon} />\n        ) : (\n          <Avatar\n            className={classes.avatar}\n            alt={displayedWebId}\n            src={agentAvatar || null}\n          />\n        )}\n        <Typography\n          classes={{ body1: classes.detailText }}\n          data-testid={TESTCAFE_ID_AGENT_WEB_ID}\n          className={classes.detailText}\n        >\n          {agentName || displayedWebId}\n        </Typography>\n      </div>\n    </Tooltip>\n  );\n}\n\nAddAgentRow.propTypes = {\n  index: PropTypes.number.isRequired,\n  contactsArrayLength: PropTypes.number.isRequired,\n  updateTemporaryRowThing: PropTypes.func.isRequired,\n  type: PropTypes.string.isRequired,\n};\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport { createStyles } from \"@solid/lit-prism-patterns\";\n\nconst PUBLIC_ICON_COLOR = \"#2196F3\";\nconst PUBLIC_ICON_BACKGROUND_COLOR = \"#E8F4FD\";\n\nconst AUTHENTICATED_ICON_COLOR = \"#4CAF50\";\nconst AUTHENTICATED_ICON_BACKGROUND_COLOR = \"#EDF7ED\";\n\nexport default function styles(theme) {\n  return createStyles(theme, [\"icons\", \"button\"], {\n    addAgentForm: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      padding: 0,\n    },\n    nameAndAvatarContainer: {\n      display: \"flex\",\n      alignItems: \"Center\",\n    },\n    avatar: {\n      width: \"1.875rem\",\n      height: \"1.875rem\",\n      margin: theme.spacing(0, 0.8),\n    },\n    detailText: {\n      fontFamily: theme.typography.body.fontFamily,\n      fontWeight: theme.typography.body.fontWeight,\n      [theme.breakpoints.up(\"sm\")]: {\n        minWidth: \"20rem\",\n      },\n    },\n    button: {\n      padding: theme.spacing(0.8, 1),\n      maxHeight: \"2.5rem\",\n      margin: theme.spacing(0, 0.5),\n    },\n    searchBoxContainer: {\n      display: \"flex\",\n      border: `1px solid ${theme.palette.grey.A100}`,\n      borderRadius: \"10px\",\n      height: \"2.5rem\",\n      minWidth: \"calc(100% - 25px)\",\n      [theme.breakpoints.up(\"sm\")]: {\n        minWidth: \"20rem\",\n      },\n    },\n    searchInput: {\n      height: \"100%\",\n      fontSize: \"0.8125rem\",\n      width: \"100%\",\n      fontFamily: theme.typography.body.fontFamily,\n      fontWeight: theme.typography.body.fontWeight,\n      color: theme.palette.primary.text,\n      padding: theme.spacing(0.5),\n    },\n    agentPickerFormContainer: {\n      display: \"flex\",\n      alignItems: \"center\",\n    },\n    publicIcon: {\n      display: \"flex\",\n      width: \"1.875rem\",\n      height: \"1.875rem\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      color: PUBLIC_ICON_COLOR,\n      backgroundColor: PUBLIC_ICON_BACKGROUND_COLOR,\n      borderRadius: \"50%\",\n      margin: theme.spacing(0, 0.8),\n    },\n    authenticatedIcon: {\n      display: \"flex\",\n      width: \"1.875rem\",\n      height: \"1.875rem\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      color: AUTHENTICATED_ICON_COLOR,\n      backgroundColor: AUTHENTICATED_ICON_BACKGROUND_COLOR,\n      borderRadius: \"50%\",\n      margin: theme.spacing(0, 0.8),\n    },\n  });\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport { createStyles } from \"@solid/lit-prism-patterns\";\n\nconst styles = (theme) => {\n  return createStyles(theme, [\"button\", \"icons\"], {\n    \"icon-large\": {\n      ...theme.icons.iconColor(\"#0D6796\"),\n      fontSize: 64,\n    },\n  });\n};\n\nexport default styles;\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { createStyles, makeStyles } from \"@material-ui/styles\";\nimport { useBem } from \"@solid/lit-prism-patterns\";\nimport {\n  Button,\n  Content,\n  Container,\n  Icons,\n} from \"@inrupt/prism-react-components\";\nimport styles from \"./styles\";\n\nconst useStyles = makeStyles((theme) => createStyles(styles(theme)));\nconst TESTCAFE_ID_EMPTY_STATE_ADD_WEBID_BUTTON = \"empty-state-add-webid-button\";\n\nexport default function AgentPickerEmptyState({ onClick }) {\n  const bem = useBem(useStyles());\n\n  return (\n    <Content>\n      <Container variant=\"empty\">\n        <Icons name=\"user\" className={bem(\"icon-large\")} />\n        <h2 className=\"text\">Add a new person with their WebId</h2>\n        <Button\n          data-testid={TESTCAFE_ID_EMPTY_STATE_ADD_WEBID_BUTTON}\n          onClick={onClick}\n          iconBefore=\"add\"\n          variant=\"small\"\n        >\n          Add WebId\n        </Button>\n      </Container>\n    </Content>\n  );\n}\n\nAgentPickerEmptyState.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n/* eslint-disable react/jsx-props-no-spreading */\n/* eslint-disable react/jsx-one-expression-per-line */\n\nimport React, { useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useBem } from \"@solid/lit-prism-patterns\";\nimport { Icons } from \"@inrupt/prism-react-components\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport clsx from \"clsx\";\nimport {\n  createStyles,\n  ListItemIcon,\n  ListItemText,\n  MenuItem,\n  Select,\n} from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport { customPolicies } from \"../../../../constants/policies\";\nimport styles from \"./styles\";\n\nexport const TESTCAFE_ID_CUSTOM_POLICY_DROPDOWN = \"custom-policy-dropdown\";\n\nconst useStyles = makeStyles((theme) => createStyles(styles(theme)));\n\nexport default function CustomPolicyDropdown({\n  setCustomPolicy,\n  defaultValue,\n  editing,\n}) {\n  const bem = useBem(useStyles());\n  const classes = useStyles();\n\n  const [selectedValue, setSelectedValue] = useState(defaultValue);\n\n  const handleSelectPolicy = (e) => {\n    const { value } = e.target;\n    setSelectedValue(value);\n  };\n\n  useEffect(() => {\n    setCustomPolicy(selectedValue);\n  }, [selectedValue, setCustomPolicy]);\n\n  return (\n    <Select\n      disabled={editing}\n      data-testid={TESTCAFE_ID_CUSTOM_POLICY_DROPDOWN}\n      value={selectedValue}\n      onChange={handleSelectPolicy}\n      classes={{ root: classes.dropdown }}\n      disableUnderline\n      IconComponent={({ className }) => (\n        <ExpandMoreIcon\n          className={clsx(classes.iconCaret, className)}\n          fontSize=\"inherit\"\n        />\n      )}\n    >\n      {customPolicies.map(({ name, title, DescriptionComponent }) => {\n        return (\n          <MenuItem\n            value={name}\n            classes={{ root: classes.menuItem }}\n            key={name}\n          >\n            <ListItemIcon>\n              <Icons name=\"settings\" className={bem(\"icon-custom-policies\")} />\n            </ListItemIcon>\n            <ListItemText\n              disableTypography\n              classes={{ root: classes.menuItemText }}\n            >\n              <div className={bem(\"title\")}>{title}</div>\n              <div className={bem(\"description\")}>\n                <DescriptionComponent />\n              </div>\n            </ListItemText>\n          </MenuItem>\n        );\n      })}\n    </Select>\n  );\n}\n\nCustomPolicyDropdown.propTypes = {\n  setCustomPolicy: PropTypes.func,\n  defaultValue: PropTypes.string,\n  editing: PropTypes.bool,\n};\n\nCustomPolicyDropdown.defaultProps = {\n  setCustomPolicy: () => {},\n  defaultValue: \"viewAndAdd\",\n  editing: false,\n};\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport { createStyles } from \"@solid/lit-prism-patterns\";\n\nconst SETTINGS_ICON_COLOR = \"#404040\";\nconst SETTINGS_BACKGROUND_COLOR = \"#F5F5F5\";\n\nexport default function styles(theme) {\n  return createStyles(theme, [\"icons\"], {\n    dropdown: {\n      display: \"flex\",\n      border: `1px solid ${theme.palette.grey.A100}`,\n      borderRadius: theme.shape.borderRadius,\n      marginBottom: theme.spacing(1.2),\n      padding: theme.spacing(1.2),\n      fontWeight: theme.typography.body.fontWeight,\n      fontFamily: theme.typography.body.fontFamily,\n      backgroundColor: theme.palette.background.paper,\n    },\n    menuItem: {\n      fontWeight: theme.typography.body.fontWeight,\n      fontFamily: theme.typography.body.fontFamily,\n    },\n    menuItemText: {\n      padding: 0,\n    },\n    title: {\n      fontSize: theme.typography.h4.fontSize,\n      fontWeight: theme.typography.fontWeightBold,\n    },\n    headerContainer: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n      marginBottom: theme.spacing(1.6),\n    },\n    textContainer: {\n      width: \"100%\",\n      flexDirection: \"column\",\n    },\n    description: {\n      \"&& p\": {\n        padding: 0,\n        margin: 0,\n        whiteSpace: \"break-spaces\",\n      },\n      fontSize: \"0.8125rem\",\n    },\n    titleAndButtonContainer: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      justifyContent: \"space-between\",\n    },\n    \"icon-custom-policies\": {\n      width: \"1.5rem\",\n      height: \"1.5rem\",\n      fontStretch: \"unset\",\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      color: SETTINGS_ICON_COLOR,\n      backgroundColor: SETTINGS_BACKGROUND_COLOR,\n      padding: theme.spacing(1),\n      borderRadius: \"50%\",\n      marginRight: theme.spacing(1.6),\n      fontSize: theme.typography.h1.fontSize,\n    },\n    iconCaret: {\n      fontSize: \"2.125rem\",\n      top: \"25%\",\n      color: theme.palette.text.primary,\n      marginRight: \"1rem\",\n    },\n  });\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n/* eslint-disable react/forbid-prop-types */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { createStyles } from \"@material-ui/core\";\nimport clsx from \"clsx\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport { Button } from \"@inrupt/prism-react-components\";\nimport styles from \"./styles\";\n\nexport const TESTCAFE_ADD_WEBID_BUTTON = \"add-webid-button\";\nconst TESTCAFE_ADD_WEBID_BUTTON_MOBILE = \"add-web-id-button-mobile\";\n\nconst useStyles = makeStyles((theme) => createStyles(styles(theme)));\n\nexport default function AddWebIdButton({ onClick, disabled, className }) {\n  const classes = useStyles();\n  return (\n    <Button\n      variant=\"secondary\"\n      /* istanbul ignore next */\n      data-testid={\n        className?.includes(\"mobileOnly\")\n          ? TESTCAFE_ADD_WEBID_BUTTON_MOBILE\n          : TESTCAFE_ADD_WEBID_BUTTON\n      }\n      className={clsx(classes.button, className)}\n      disabled={disabled}\n      onClick={onClick}\n      iconBefore=\"add\"\n    >\n      Add WebId\n    </Button>\n  );\n}\n\nAddWebIdButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n  disabled: PropTypes.bool,\n  className: PropTypes.string,\n};\n\nAddWebIdButton.defaultProps = {\n  disabled: false,\n  className: null,\n};\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport { createStyles } from \"@solid/lit-prism-patterns\";\n\nexport default function styles(theme) {\n  return createStyles(theme, [\"icons\", \"button\"], {\n    mobile: {\n      [theme.breakpoints.up(\"sm\")]: {\n        display: \"none\",\n      },\n      display: \"flex\",\n    },\n    desktop: {\n      [theme.breakpoints.up(\"sm\")]: {\n        display: \"flex\",\n      },\n      display: \"none\",\n    },\n    button: {\n      marginTop: \"0.5rem\",\n      width: \"max-content\",\n      alignSelf: \"flex-end\",\n      height: \"max-content\",\n      fontWeight: theme.typography.fontWeightBold,\n      fontSize: \"0.8125rem\",\n      textDecoration: \"none\",\n      borderRadius: \"7px\",\n      backgroundColor: theme.palette.grey[50],\n      whiteSpace: \"nowrap\",\n      alignItems: \"center\",\n      padding: theme.spacing(0.2, 1.6),\n      [theme.breakpoints.up(\"sm\")]: {\n        marginTop: \"unset\",\n        alignSelf: \"center\",\n      },\n    },\n    icon: {\n      color: theme.palette.primary.main,\n      margin: theme.spacing(0.5),\n    },\n  });\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n/* eslint-disable react/forbid-prop-types */\n\nimport React, { useCallback, useContext } from \"react\";\nimport { useThing } from \"@inrupt/solid-ui-react\";\nimport { getUrl } from \"@inrupt/solid-client\";\nimport PropTypes from \"prop-types\";\nimport { Checkbox } from \"@material-ui/core\";\nimport useContactProfile from \"../../../../../src/hooks/useContactProfile\";\nimport {\n  getWebIdsFromInheritedPermissions,\n  getWebIdsFromPermissions,\n} from \"../../../../../src/accessControl/acp\";\nimport PermissionsContext from \"../../../../../src/contexts/permissionsContext\";\n\nexport const TESTCAFE_ID_WEBID_CHECKBOX = \"webid-checkbox\";\nconst AGENT_PREDICATE = \"http://www.w3.org/ns/solid/acp#agent\";\n\nexport default function WebIdCheckbox({ value, index, toggleCheckbox, type }) {\n  const {\n    permissions: allPermissions,\n    addingWebId,\n    newAgentsWebIds,\n    webIdsToDelete,\n  } = useContext(PermissionsContext);\n  const { thing } = useThing();\n  const { data: profile } = useContactProfile(thing);\n  const agentIdentifier = thing && getUrl(thing, AGENT_PREDICATE); // todo: add corresponding groupIdentifier when adding groups\n  const permissions = allPermissions?.filter((p) => p.alias === type);\n  const webIdsInPermissions = getWebIdsFromPermissions(permissions);\n  const webIdsFromInheritedPermissions =\n    getWebIdsFromInheritedPermissions(permissions);\n\n  const agentId = useCallback(() => {\n    let agentIdentifierValue;\n    if (!agentIdentifier && profile) {\n      agentIdentifierValue = profile.webId;\n    } else if (agentIdentifier) {\n      agentIdentifierValue = value;\n    } else if (!agentIdentifier && index === 0) {\n      agentIdentifierValue = \"\";\n    }\n    return agentIdentifierValue;\n  }, [agentIdentifier, index, profile, value]);\n\n  const checked = useCallback(() => {\n    if (index === 0 && addingWebId) {\n      return true;\n    }\n    if (newAgentsWebIds.includes(agentId())) {\n      return true;\n    }\n    if (\n      webIdsInPermissions.includes(agentId()) &&\n      !webIdsToDelete.includes(agentId())\n    ) {\n      return true;\n    }\n    return false;\n  }, [\n    addingWebId,\n    agentId,\n    index,\n    newAgentsWebIds,\n    webIdsInPermissions,\n    webIdsToDelete,\n  ]);\n  const disabled = useCallback(\n    () => webIdsFromInheritedPermissions.indexOf(agentId()) !== -1,\n    [agentId, webIdsFromInheritedPermissions]\n  );\n\n  return (\n    <Checkbox\n      inputProps={{ \"data-testid\": TESTCAFE_ID_WEBID_CHECKBOX }}\n      type=\"checkbox\"\n      color=\"primary\"\n      size=\"medium\"\n      value={agentId() || \"\"}\n      disabled={disabled()}\n      checked={checked() || false}\n      onChange={(e) => toggleCheckbox(e, index, agentId())}\n    />\n  );\n}\nWebIdCheckbox.propTypes = {\n  value: PropTypes.string,\n  index: PropTypes.number.isRequired,\n  toggleCheckbox: PropTypes.func,\n  type: PropTypes.string.isRequired,\n};\n\nWebIdCheckbox.defaultProps = {\n  value: null,\n  toggleCheckbox: () => {},\n};\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n/* eslint-disable react/forbid-prop-types */\n// FIXME: ignoring this file to fix the build\n/* istanbul ignore file */\n\nimport React, { useContext, useState, useEffect, forwardRef } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { CircularProgress, createStyles } from \"@material-ui/core\";\nimport { useBem } from \"@solid/lit-prism-patterns\";\nimport clsx from \"clsx\";\nimport {\n  Button,\n  Container,\n  ModalBody,\n  ModalContainer,\n} from \"@inrupt/prism-react-components\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport {\n  DatasetContext,\n  Table,\n  TableColumn,\n  useSession,\n} from \"@inrupt/solid-ui-react\";\nimport { createThing, getSourceUrl } from \"@inrupt/solid-client\";\nimport { foaf } from \"rdf-namespaces\";\nimport { serializePromises } from \"../../../../src/solidClientHelpers/utils\";\nimport AccessControlContext from \"../../../../src/contexts/accessControlContext\";\nimport { fetchProfile } from \"../../../../src/solidClientHelpers/profile\";\nimport { getResourceName } from \"../../../../src/solidClientHelpers/resource\";\nimport PolicyHeader from \"../policyHeader\";\nimport AgentsSearchBar from \"../agentsSearchBar\";\nimport AddAgentRow from \"../addAgentRow\";\nimport AgentPickerEmptyState from \"../agentPickerEmptyState\";\nimport CustomPolicyDropdown from \"../customPolicyDropdown\";\nimport styles from \"./styles\";\nimport AddWebIdButton from \"./addWebIdButton\";\nimport WebIdCheckbox from \"./webIdCheckbox\";\nimport ConfirmationDialogContext from \"../../../../src/contexts/confirmationDialogContext\";\nimport ConfirmationDialog from \"../../../confirmationDialog\";\nimport useContacts from \"../../../../src/hooks/useContacts\";\nimport { GROUP_CONTACT } from \"../../../../src/models/contact/group\";\nimport {\n  PERSON_CONTACT,\n  findPersonContactInAddressBook,\n  savePerson,\n} from \"../../../../src/models/contact/person\";\nimport useAddressBook from \"../../../../src/hooks/useAddressBook\";\nimport { POLICIES_TYPE_MAP } from \"../../../../constants/policies\";\nimport {\n  createPublicAgent,\n  PUBLIC_AGENT_PREDICATE,\n} from \"../../../../src/models/contact/public\";\nimport {\n  createAuthenticatedAgent,\n  AUTHENTICATED_AGENT_PREDICATE,\n} from \"../../../../src/models/contact/authenticated\";\nimport ResourceInfoContext from \"../../../../src/contexts/resourceInfoContext\";\nimport { getWebIdsFromPermissions } from \"../../../../src/accessControl/acp\";\nimport PermissionsContext from \"../../../../src/contexts/permissionsContext\";\n\nconst AGENT_PREDICATE = \"http://www.w3.org/ns/solid/acp#agent\";\nconst TESTCAFE_ID_ADD_AGENT_PICKER_MODAL = \"agent-picker-modal\";\nexport const TESTCAFE_SUBMIT_WEBIDS_BUTTON = \"submit-webids-button\";\nconst TESTCAFE_CANCEL_WEBIDS_BUTTON = \"cancel-webids-button\";\nexport const DIALOG_ID = \"add-new-permissions\";\n\nexport const removeExistingAgentFromOtherPolicies = ({\n  permissions,\n  newPolicy,\n  agentWebId,\n  accessControl,\n}) => {\n  const existingPermission = permissions.filter(\n    (p) => p.webId === agentWebId && p.alias !== newPolicy\n  );\n  if (existingPermission.length) {\n    existingPermission.map((ep) =>\n      accessControl.removeAgentFromPolicy(ep.webId, ep.alias)\n    );\n  }\n};\n\nexport const handleSubmit = ({\n  permissions,\n  newAgentsWebIds,\n  webIdsToDelete,\n  accessControl,\n  addressBook,\n  mutateResourceInfo,\n  saveAgentToContacts,\n  onClose,\n  setLoading,\n  policyName,\n  fetch,\n}) => {\n  return async () => {\n    onClose();\n    if ((!newAgentsWebIds.length && !webIdsToDelete.length) || !accessControl) {\n      return;\n    }\n    setLoading(true);\n    const existingPoliciesPromiseFactories = newAgentsWebIds?.map(\n      (agentWebId) => () => {\n        removeExistingAgentFromOtherPolicies({\n          permissions,\n          newPolicy: policyName,\n          agentWebId,\n          accessControl,\n        });\n      }\n    );\n    const addPermissionsPromiseFactories = newAgentsWebIds?.map(\n      (agentWebId) => () => {\n        if (PUBLIC_AGENT_PREDICATE === agentWebId) {\n          return accessControl.setRulePublic(policyName, true);\n        }\n        if (AUTHENTICATED_AGENT_PREDICATE === agentWebId) {\n          return accessControl.setRuleAuthenticated(policyName, true);\n        }\n        return accessControl.addAgentToPolicy(agentWebId, policyName);\n      }\n    );\n\n    const removePermissionsPromiseFactories = webIdsToDelete?.map(\n      (agentWebId) => () => {\n        if (PUBLIC_AGENT_PREDICATE === agentWebId) {\n          return accessControl.setRulePublic(policyName, false);\n        }\n        if (AUTHENTICATED_AGENT_PREDICATE === agentWebId) {\n          return accessControl.setRuleAuthenticated(policyName, false);\n        }\n        return accessControl.removeAgentFromPolicy(agentWebId, policyName);\n      }\n    );\n\n    const addAgentsToContactsPromiseFactories = newAgentsWebIds\n      ?.filter(\n        (webId) =>\n          webId !== PUBLIC_AGENT_PREDICATE &&\n          webId !== AUTHENTICATED_AGENT_PREDICATE\n      )\n      .map(\n        (agentWebId) => () =>\n          saveAgentToContacts(agentWebId, addressBook, fetch)\n      );\n    const args = await serializePromises([\n      ...existingPoliciesPromiseFactories,\n      ...addPermissionsPromiseFactories,\n      ...removePermissionsPromiseFactories,\n      ...addAgentsToContactsPromiseFactories,\n    ]);\n    const responses = args.filter((res) => typeof res !== \"undefined\");\n    const { response: latestAcr } = responses[responses.length - 1];\n    await mutateResourceInfo(latestAcr, false);\n    setLoading(false);\n  };\n};\n\nexport const handleSaveContact = async (iri, addressBook, fetch) => {\n  let error;\n  if (!iri) {\n    return;\n  }\n\n  try {\n    const { name, webId } = await fetchProfile(iri, fetch);\n    // TODO: we will likely need to change this if we want to save groups on the fly as well\n    const existingContact = await findPersonContactInAddressBook(\n      addressBook,\n      webId,\n      fetch\n    );\n    if (existingContact.length) {\n      return;\n    }\n\n    if (name) {\n      const contact = { webId, fn: name };\n      // TODO: we will likely need to update this if we also want to create and save groups\n      await savePerson(addressBook, contact, fetch);\n    }\n  } catch (e) {\n    error = e; // need to do something with the error otherwise the function exits at any point a webId fails and does not continue processing the rest\n  }\n};\n\nconst useStyles = makeStyles((theme) => createStyles(styles(theme)));\n\nfunction AgentPickerModal(\n  { type, onClose, setLoading, advancedSharing, editing },\n  ref\n) {\n  const [customPolicy, setCustomPolicy] = useState(\n    advancedSharing ? type : null\n  );\n  const policyName = advancedSharing ? customPolicy : type;\n  const { header, saveText, titleSingular, title } =\n    POLICIES_TYPE_MAP[policyName];\n\n  const {\n    permissions: allPermissions,\n    newAgentsWebIds,\n    setNewAgentsWebIds,\n    webIdsToDelete,\n    setWebIdsToDelete,\n    setAddingWebId,\n    addingWebId,\n  } = useContext(PermissionsContext);\n  const permissions = allPermissions?.filter((p) => p.alias === type);\n  const { mutate: mutateResourceInfo } = useContext(ResourceInfoContext);\n\n  const { data: addressBook } = useAddressBook();\n  const { data: contacts, error } = useContacts([\n    GROUP_CONTACT,\n    PERSON_CONTACT,\n  ]);\n\n  const webIdsInPermissions = getWebIdsFromPermissions(permissions);\n\n  const bem = useBem(useStyles());\n\n  const classes = useStyles();\n\n  const { session } = useSession();\n  const { fetch } = session;\n  const { solidDataset: dataset } = useContext(DatasetContext);\n  const resourceIri = getSourceUrl(dataset);\n  const resourceName = getResourceName(resourceIri);\n  // TODO: Uncomment to reintroduce tabs\n  // const [selectedTabValue, setSelectedTabValue] = useState(\"\");\n  const { accessControl } = useContext(AccessControlContext);\n\n  const [bypassDialog, setBypassDialog] = useState(false);\n  const [contactsArray, setContactsArray] = useState([]);\n  // TODO: Uncomment to reintroduce tabs\n  // const [filteredContacts, setFilteredContacts] = useState([]);\n  const [globalFilter, setGlobalFilter] = useState(\"\");\n  const [confirmationSetup, setConfirmationSetup] = useState(false);\n  const {\n    open,\n    confirmed,\n    setConfirmed,\n    setContent,\n    setOpen,\n    setTitle,\n    closeDialog,\n  } = useContext(ConfirmationDialogContext);\n\n  // TODO: Uncomment to reintroduce tabs\n  // const handleTabChange = (e, newValue) => {\n  //   setSelectedTabValue(newValue);\n  // };\n\n  const handleFilterChange = (e) => {\n    const { value } = e.target;\n    setGlobalFilter(value || undefined);\n  };\n  const handleSubmitNewWebIds = handleSubmit({\n    permissions: allPermissions,\n    newAgentsWebIds,\n    webIdsToDelete,\n    accessControl,\n    addressBook,\n    mutateResourceInfo,\n    saveAgentToContacts: handleSaveContact,\n    onClose,\n    setLoading,\n    policyName,\n    advancedSharing,\n    fetch,\n  });\n\n  const handleClickOpenDialog = () => {\n    if (!newAgentsWebIds.length && !webIdsToDelete.length) {\n      onClose();\n      setConfirmed(false);\n      return;\n    }\n    const filteredNewWebIds = newAgentsWebIds.filter(\n      (webId) =>\n        webId !== PUBLIC_AGENT_PREDICATE &&\n        webId !== AUTHENTICATED_AGENT_PREDICATE\n    );\n    const filteredWebIdsToDelete = webIdsToDelete.filter(\n      (webId) =>\n        webId !== PUBLIC_AGENT_PREDICATE &&\n        webId !== AUTHENTICATED_AGENT_PREDICATE\n    );\n    if (!filteredNewWebIds.length && !filteredWebIdsToDelete.length) {\n      setTitle(null);\n      setContent(null);\n      setOpen(null);\n      setBypassDialog(true);\n    }\n    const confirmationTitle = `Change permissions for ${\n      filteredNewWebIds.length + filteredWebIdsToDelete.length === 1\n        ? \"1 person\"\n        : `${newAgentsWebIds.length + filteredWebIdsToDelete.length} people`\n    }`;\n    const confirmationContent = `Continuing will change ${\n      filteredNewWebIds.length + filteredWebIdsToDelete.length === 1\n        ? \"1 person \"\n        : `${filteredNewWebIds.length + filteredWebIdsToDelete.length} people `\n    } permissions to ${title}`;\n    setTitle(confirmationTitle);\n    setContent(confirmationContent);\n    setOpen(DIALOG_ID);\n  };\n\n  const updateTemporaryRowThing = (newThing) => {\n    const { dataset: addressBookDataset } = addressBook;\n    const newItem = {\n      thing: newThing,\n      dataset: addressBookDataset,\n    };\n    setContactsArray([\n      newItem,\n      ...contactsArray.slice(1, contactsArray.length),\n    ]);\n  };\n\n  useEffect(() => {\n    if (!contacts || !addressBook) return;\n    const { dataset: addressBookDataset } = addressBook;\n    const publicAgent = createPublicAgent(addressBookDataset);\n    const authenticatedAgent = createAuthenticatedAgent(addressBookDataset);\n    const contactsArrayForTable = contacts.map(({ thing }) => {\n      return {\n        thing,\n        dataset: addressBookDataset,\n      };\n    });\n    contactsArrayForTable.unshift(publicAgent, authenticatedAgent);\n    setContactsArray(contactsArrayForTable);\n  }, [contacts, addressBook]);\n\n  // TODO: Uncomment to reintroduce tabs\n  // useEffect(() => {\n  //   if (selectedTabValue) {\n  //     const filtered = contactsArray.filter(({ thing }) =>\n  //       selectedTabValue.isOfType(thing)\n  //     );\n  //     setFilteredContacts(filtered);\n  //   }\n  // }, [contactsArray, selectedTabValue, globalFilter]);\n\n  useEffect(() => {\n    setConfirmationSetup(true);\n    if (bypassDialog) {\n      setConfirmed(true);\n      handleSubmitNewWebIds();\n    }\n    if (open !== DIALOG_ID) return;\n    if (confirmationSetup && confirmed === null) return;\n    if (confirmationSetup && confirmed) {\n      handleSubmitNewWebIds();\n    }\n\n    if (confirmationSetup && confirmed !== null) {\n      closeDialog();\n      setConfirmationSetup(false);\n    }\n  }, [\n    open,\n    bypassDialog,\n    setConfirmationSetup,\n    confirmationSetup,\n    setConfirmed,\n    confirmed,\n    handleSubmitNewWebIds,\n    closeDialog,\n  ]);\n\n  const handleAddRow = () => {\n    setAddingWebId(true);\n    const emptyThing = createThing();\n    const { dataset: addressBookDataset } = addressBook;\n    const newItem = {\n      thing: emptyThing,\n      dataset: addressBookDataset,\n    };\n    // TODO: Uncomment to reintroduce tabs\n    // if (selectedTabValue) {\n    //   setFilteredContacts([newItem, ...filteredContacts]);\n    // }\n    setContactsArray([newItem, ...contactsArray]);\n  };\n\n  const contactsForTable = contactsArray;\n  // TODO: Uncomment to reintroduce tabs\n  // const contactsForTable = selectedTabValue ? filteredContacts : contactsArray;\n  const toggleCheckbox = (e, index, value) => {\n    if (index === 0 && addingWebId) return null;\n    if (\n      !webIdsToDelete.includes(value) &&\n      webIdsInPermissions.includes(value)\n    ) {\n      setWebIdsToDelete([value, ...webIdsToDelete]);\n    } else if (\n      webIdsToDelete.includes(value) &&\n      webIdsInPermissions.includes(value)\n    ) {\n      setWebIdsToDelete(webIdsToDelete.filter((webId) => webId !== value));\n    }\n    return e.target.checked\n      ? setNewAgentsWebIds([value, ...newAgentsWebIds])\n      : setNewAgentsWebIds(newAgentsWebIds.filter((webId) => webId !== value));\n  };\n  return (\n    <ModalContainer\n      className={classes.paper}\n      data-testid={TESTCAFE_ID_ADD_AGENT_PICKER_MODAL}\n      ref={ref}\n      tabIndex={-1}\n    >\n      <ModalBody>\n        <div className={classes.title}>{`${header} for ${resourceName}`}</div>\n        {advancedSharing ? (\n          <CustomPolicyDropdown\n            setCustomPolicy={setCustomPolicy}\n            defaultValue={type}\n            editing={editing}\n          />\n        ) : (\n          <PolicyHeader type={type} />\n        )}\n        <div className={classes.tableContainer}>\n          <AgentsSearchBar handleFilterChange={handleFilterChange} />\n          <div className={classes.addWebIdButtonContainer}>\n            <AddWebIdButton onClick={handleAddRow} disabled={addingWebId} />\n          </div>\n          {!contacts && !error && (\n            <Container variant=\"empty\">\n              <CircularProgress />\n            </Container>\n          )}\n          {!!contacts && !!contactsForTable.length && (\n            <Table\n              things={contactsForTable}\n              className={clsx(bem(\"table\"), bem(\"agentPickerTable\"))}\n              filter={globalFilter}\n            >\n              <TableColumn\n                property={AGENT_PREDICATE}\n                dataType=\"url\"\n                header={\n                  // eslint-disable-next-line react/jsx-wrap-multilines\n                  <span className={classes.tableHeader}>{titleSingular}</span>\n                }\n                body={({ value, row: { index } }) => {\n                  return (\n                    <WebIdCheckbox\n                      value={value}\n                      index={index}\n                      toggleCheckbox={toggleCheckbox}\n                      type={type}\n                    />\n                  );\n                }}\n              />\n              <TableColumn\n                header={<span className={classes.tableHeader}>Name</span>}\n                property={foaf.name}\n                filterable\n                body={({ row: { index } }) => (\n                  <AddAgentRow\n                    type={policyName}\n                    index={index}\n                    contactsArrayLength={contactsArray.length}\n                    updateTemporaryRowThing={updateTemporaryRowThing}\n                  />\n                )}\n              />\n            </Table>\n          )}\n          {/* TODO: Uncomment to reintroduce tabs */}\n          {/* {!!contacts && !contactsForTable.length && !selectedTabValue && ( */}\n          {!!contacts && !contactsForTable.length && (\n            <AgentPickerEmptyState onClick={handleAddRow} />\n          )}\n          {/* TODO: Uncomment to reintroduce tabs */}\n          {/* {!!contacts && !contactsForTable.length && !!selectedTabValue && ( */}\n          {/*  <span className={classes.emptyStateTextContainer}> */}\n          {/*    <p> */}\n          {/*      {`No ${ */}\n          {/*        selectedTabValue === PERSON_CONTACT ? \"people \" : \"groups \" */}\n          {/*      } found`} */}\n          {/*    </p> */}\n          {/*  </span> */}\n          {/* )} */}\n        </div>\n        <div className={classes.buttonsContainer}>\n          <Button\n            variant=\"secondary\"\n            data-testid={TESTCAFE_CANCEL_WEBIDS_BUTTON}\n            className={classes.cancelButton}\n            onClick={onClose}\n          >\n            Cancel\n          </Button>\n          <Button\n            data-testid={TESTCAFE_SUBMIT_WEBIDS_BUTTON}\n            onClick={handleClickOpenDialog}\n          >\n            {saveText}\n          </Button>\n          <ConfirmationDialog />\n        </div>\n      </ModalBody>\n    </ModalContainer>\n  );\n}\n\nconst AgentPickerModalRef = forwardRef(AgentPickerModal);\nexport default AgentPickerModalRef;\n\nAgentPickerModal.propTypes = {\n  onClose: PropTypes.func,\n  setLoading: PropTypes.func,\n  type: PropTypes.string.isRequired,\n  advancedSharing: PropTypes.bool,\n  editing: PropTypes.bool,\n};\n\nAgentPickerModal.defaultProps = {\n  onClose: () => {},\n  setLoading: () => {},\n  advancedSharing: false,\n  editing: false,\n};\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport { createStyles } from \"@solid/lit-prism-patterns\";\n\nconst MODAL_MIN_WIDTH = 680;\nconst MODAL_MIN_HEIGHT = 680;\nconst TABLE_MAX_HEIGHT = 450;\nconst MOBILE_TABLE_MIN_HEIGHT = 300;\n\nexport default function styles(theme) {\n  return createStyles(theme, [\"icons\", \"button\", \"table\"], {\n    paper: {\n      [theme.breakpoints.up(\"sm\")]: {\n        minWidth: MODAL_MIN_WIDTH,\n        minHeight: MODAL_MIN_HEIGHT,\n        height: \"auto\",\n        width: MODAL_MIN_WIDTH,\n        padding: theme.spacing(2, 4, 3),\n      },\n      display: \"flex\",\n      flexDirection: \"column\",\n      position: \"absolute\",\n      backgroundColor: theme.palette.grey[50],\n      borderRadius: theme.shape.borderRadius,\n      boxShadow:\n        \"0 9px 46px 8px rgba(0,0,0,0.12), 0 24px 38px 3px rgba(0,0,0,0.14), 0 11px 15px -7px rgba(0,0,0,0.2)\",\n      minWidth: \"100vw\",\n      minHeight: \"100vh\",\n      width: \"100vw\",\n      height: \"100vh\",\n      padding: theme.spacing(2, 1.4, 3),\n    },\n    title: {\n      ...theme.typography.h1,\n      marginBottom: theme.spacing(1.2),\n    },\n    addWebIdButtonContainer: {\n      display: \"flex\",\n      justifyContent: \"flex-end\",\n      margin: theme.spacing(0, 1.2),\n    },\n    tableContainer: {\n      minHeight: MOBILE_TABLE_MIN_HEIGHT,\n      [theme.breakpoints.up(\"xs\")]: {\n        minHeight: \"unset\",\n      },\n      display: \"flex\",\n      flexDirection: \"column\",\n      backgroundColor: theme.palette.common.white,\n      borderRadius: theme.shape.borderRadius,\n      border: `1px solid ${theme.palette.grey.A100}`,\n      marginBottom: theme.spacing(2.4),\n      height: \"100%\",\n      maxHeight: TABLE_MAX_HEIGHT,\n      overflowY: \"auto\",\n    },\n    tabsAndAddButtonContainer: {\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"space-between\",\n      // borderBottom: `1px solid ${theme.palette.grey.A100}`,\n    },\n    agentPickerTable: {\n      width: `calc(100% - ${theme.spacing(1.6) * 2}px)`,\n      boxSizing: \"border-box\",\n      marginLeft: theme.spacing(1.6),\n      marginRight: theme.spacing(1.6),\n      \"&& thead > tr\": {\n        minWidth: \"100%\",\n        fontSize: theme.typography.caption.fontSize,\n        alignItems: \"center\",\n        borderBottom: `1px solid ${theme.palette.grey.A100}`,\n        fontWeight: theme.typography.body1.fontWeight,\n        color: theme.palette.text.primary,\n      },\n      \"&& tbody tr\": {\n        borderBottom: `1px solid ${theme.palette.grey.A100}`,\n      },\n      \"&& tbody td\": {\n        maxWidth: \"100%\",\n      },\n      \"&& tbody :last-child\": {\n        borderBottom: \"none\",\n      },\n    },\n    tableHeader: {\n      display: \"flex\",\n      margin: 0,\n      padding: theme.spacing(0.5),\n      textTransform: \"capitalize\",\n    },\n    modalTabsContainer: {\n      borderBottom: \"none !important\", // overriding the default border bottom so we can set it to the whole width of the container\n    },\n    canShareTableHeader: {\n      display: \"flex\",\n      margin: 0,\n      alignSelf: \"flex-end\",\n      alignItems: \"center\",\n    },\n    buttonsContainer: {\n      display: \"flex\",\n      flexDirection: \"column-reverse\",\n      position: \"relative\",\n      bottom: 0,\n      width: \"100%\",\n      padding: 0,\n      alignItems: \"center\",\n      justifyContent: \"space-between\",\n      [theme.breakpoints.up(\"sm\")]: {\n        display: \"flex\",\n        position: \"absolute\",\n        flexDirection: \"row\",\n        width: MODAL_MIN_WIDTH - theme.spacing(2.4) * 2 - theme.spacing(4), // substracting the padding of the buttons and the left and right padding of the modal\n        maxWidth: \"100%\",\n        padding: theme.spacing(2.4),\n      },\n    },\n    cancelButton: {\n      textAlign: \"center\",\n      width: \"100%\",\n      fontSize: theme.typography.body1.fontSize,\n      fontWeight: theme.typography.body1.fontWeight,\n      padding: theme.spacing(1.4, 1.8),\n      backgroundColor: \"transparent\",\n      [theme.breakpoints.up(\"sm\")]: {\n        width: \"max-content\",\n      },\n    },\n    submitAgentsButton: {\n      textAlign: \"center\",\n      width: \"100%\",\n      fontSize: theme.typography.body1.fontSize,\n      fontWeight: theme.typography.body1.fontWeight,\n      color: theme.palette.common.white,\n      backgroundColor: theme.palette.primary.main,\n      padding: theme.spacing(1.4, 1.8),\n      [theme.breakpoints.up(\"sm\")]: {\n        width: \"max-content\",\n      },\n    },\n    capitalizedText: {\n      textTransform: \"capitalize\",\n    },\n    emptyStateTextContainer: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      padding: theme.spacing(0.7, 1.4),\n      textAlign: \"center\",\n    },\n    // hopefully we can remove these once we figure out how to test the Hidden component from MUI so we can use that instead\n    mobileOnly: {\n      [theme.breakpoints.up(\"sm\")]: {\n        display: \"none\",\n      },\n      display: \"flex\",\n    },\n    desktopOnly: {\n      [theme.breakpoints.up(\"sm\")]: {\n        display: \"flex\",\n      },\n      display: \"none\",\n    },\n  });\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n/* eslint-disable react/forbid-prop-types */\n\nimport React, { useState, useContext } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Modal } from \"@material-ui/core\";\nimport { Button } from \"@inrupt/prism-react-components\";\nimport PermissionsContext from \"../../../../src/contexts/permissionsContext\";\nimport AgentPickerModal from \"../agentPickerModal\";\nimport { POLICIES_TYPE_MAP } from \"../../../../constants/policies\";\nimport { isCustomPolicy } from \"../../../../src/models/policy\";\n\nexport const TESTCAFE_ID_ADD_AGENT_BUTTON = \"add-agent-button\";\nexport const TESTCAFE_ID_MODAL_OVERLAY = \"agent-picker-modal-overlay\";\n\nexport default function AddAgentButton({ type, setLoading }) {\n  const [editing, setEditing] = useState();\n\n  const { setAddingWebId } = useContext(PermissionsContext);\n  const [open, setOpen] = useState(false);\n\n  const handleOpen = () => {\n    setEditing(true);\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setEditing(false);\n    setOpen(false);\n    setAddingWebId(false);\n  };\n\n  const { editText } = POLICIES_TYPE_MAP[type];\n\n  return (\n    <>\n      <Button\n        data-testid={TESTCAFE_ID_ADD_AGENT_BUTTON}\n        variant=\"text\"\n        onClick={handleOpen}\n        iconBefore=\"edit\"\n      >\n        {editText}\n      </Button>\n\n      <Modal\n        data-testid={TESTCAFE_ID_MODAL_OVERLAY}\n        open={open}\n        style={{\n          display: \"flex\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n        }}\n        onClose={handleClose}\n        aria-labelledby={`${editText} Modal`}\n        aria-describedby={`${editText} for this resource`}\n      >\n        <AgentPickerModal\n          type={type}\n          onClose={handleClose}\n          setLoading={setLoading}\n          advancedSharing={isCustomPolicy(type)}\n          editing={editing}\n        />\n      </Modal>\n    </>\n  );\n}\n\nAddAgentButton.propTypes = {\n  type: PropTypes.string.isRequired,\n  setLoading: PropTypes.func,\n};\n\nAddAgentButton.defaultProps = {\n  setLoading: () => {},\n};\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n/* eslint react/require-default-props:off */\n\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { ActionButton, Button } from \"@inrupt/prism-react-components\";\nimport T from \"prop-types\";\nimport { DatasetContext } from \"@inrupt/solid-ui-react\";\nimport { getSourceUrl } from \"@inrupt/solid-client\";\nimport { getPolicyType, isNamedPolicy } from \"../../../../src/models/policy\";\nimport AccessControlContext from \"../../../../src/contexts/accessControlContext\";\nimport ErrorMessage from \"../../../errorMessage\";\nimport { AUTHENTICATED_AGENT_PREDICATE } from \"../../../../src/models/contact/authenticated\";\nimport { PUBLIC_AGENT_PREDICATE } from \"../../../../src/models/contact/public\";\nimport { serializePromises } from \"../../../../src/solidClientHelpers/utils\";\nimport ConfirmationDialogContext from \"../../../../src/contexts/confirmationDialogContext\";\nimport ConfirmationDialog from \"../../../confirmationDialog\";\nimport { getResourceName } from \"../../../../src/solidClientHelpers/resource\";\nimport { POLICIES_TYPE_MAP } from \"../../../../constants/policies\";\nimport ResourceInfoContext from \"../../../../src/contexts/resourceInfoContext\";\n\nexport const TEXT_POLICY_ACTION_BUTTON_DISABLED_REMOVE_BUTTON =\n  \"There's no one to remove\";\n\nexport const TESTCAFE_ID_REMOVE_POLICY_BUTTON = \"remove-policy-button\";\n\nexport const handleRemoveAllAgents = ({\n  webIds,\n  setLoading,\n  accessControl,\n  policyToDelete,\n  mutateResourceInfo,\n}) => {\n  return async () => {\n    if (!policyToDelete) return;\n    setLoading(true);\n    const removePermissionsPromiseFactories = webIds?.map(\n      (agentWebId) => () => {\n        if (PUBLIC_AGENT_PREDICATE === agentWebId) {\n          return accessControl.setRulePublic(policyToDelete, false);\n        }\n        if (AUTHENTICATED_AGENT_PREDICATE === agentWebId) {\n          return accessControl.setRuleAuthenticated(policyToDelete, false);\n        }\n        return accessControl.removeAgentFromPolicy(agentWebId, policyToDelete);\n      }\n    );\n    const args = await serializePromises(removePermissionsPromiseFactories);\n    const responses = args.filter((res) => typeof res !== \"undefined\");\n    const { response: latestAcr } = responses[responses.length - 1];\n    await mutateResourceInfo(latestAcr, false);\n    setLoading(false);\n  };\n};\n\nexport default function PolicyActionButton({ permissions, setLoading, type }) {\n  const { accessControl } = useContext(AccessControlContext);\n  const disableRemoveButton = permissions.length === 0 && isNamedPolicy(type);\n  const policyType = getPolicyType(type);\n  const dialogId = \"remove-policy\";\n  const [policyToDelete, setPolicyToDelete] = useState();\n  const { solidDataset: dataset } = useContext(DatasetContext);\n  const resourceIri = getSourceUrl(dataset);\n  const resourceName = resourceIri\n    ? getResourceName(resourceIri)\n    : \"this resource\";\n  const policyTitle = POLICIES_TYPE_MAP[type]?.title;\n\n  const { open, confirmed, setContent, setOpen, setTitle, closeDialog } =\n    useContext(ConfirmationDialogContext);\n  const { mutate: mutateResourceInfo } = useContext(ResourceInfoContext);\n  const [confirmationSetup, setConfirmationSetup] = useState(false);\n\n  const handleClickOpenDialog = () => {\n    setPolicyToDelete(type);\n    const confirmationTitle = `Remove ${policyTitle} access from ${resourceName}?`;\n    const confirmationContent = `Everyone will be removed from the ${policyTitle} list.`;\n    setTitle(confirmationTitle);\n    setContent(confirmationContent);\n    setOpen(dialogId);\n  };\n\n  const webIds = permissions\n    .filter(({ alias }) => alias === policyToDelete)\n    .map(({ webId }) => webId);\n\n  const removeAllAgents = handleRemoveAllAgents({\n    webIds,\n    setLoading,\n    accessControl,\n    policyToDelete,\n    mutateResourceInfo,\n  });\n\n  useEffect(() => {\n    setConfirmationSetup(true);\n    if (open !== dialogId) return;\n    if (confirmationSetup && confirmed === null) return;\n    if (confirmationSetup && confirmed) {\n      removeAllAgents(webIds);\n    }\n\n    if (confirmationSetup && confirmed !== null) {\n      closeDialog();\n      setConfirmationSetup(false);\n    }\n  }, [\n    open,\n    dialogId,\n    setConfirmationSetup,\n    confirmationSetup,\n    confirmed,\n    removeAllAgents,\n    webIds,\n    closeDialog,\n  ]);\n\n  if (!policyType)\n    return <ErrorMessage error={new Error(\"Type of policy not recognized\")} />;\n\n  return (\n    <ActionButton label=\"Show menu for policy\">\n      <Button\n        data-testid={TESTCAFE_ID_REMOVE_POLICY_BUTTON}\n        onClick={handleClickOpenDialog}\n        variant=\"in-menu\"\n        disabled={disableRemoveButton}\n        disabledText={\n          disableRemoveButton\n            ? TEXT_POLICY_ACTION_BUTTON_DISABLED_REMOVE_BUTTON\n            : \"\"\n        }\n      >\n        {policyType.removeButtonLabel}\n      </Button>\n      <ConfirmationDialog />\n    </ActionButton>\n  );\n}\n\nPolicyActionButton.propTypes = {\n  permissions: T.arrayOf(T.object),\n  setLoading: T.func,\n  type: T.string.isRequired,\n};\n\nPolicyActionButton.defaultPtops = {\n  permissions: [],\n  setLoading: () => {},\n};\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n/* eslint-disable react/jsx-props-no-spreading */\n/* eslint-disable react/jsx-one-expression-per-line */\n\nimport React, { useContext, useEffect, useMemo, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useFilters, useGlobalFilter, useTable } from \"react-table\";\nimport { useBem } from \"@solid/lit-prism-patterns\";\nimport { Container } from \"@inrupt/prism-react-components\";\nimport clsx from \"clsx\";\nimport {\n  Accordion,\n  CircularProgress,\n  createStyles,\n  Typography,\n} from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport usePermissionsWithProfiles from \"../../../../src/hooks/usePermissionsWithProfiles\";\nimport AgentAccess from \"../agentAccess\";\nimport AddAgentButton from \"../addAgentButton\";\n// import AgentsTableTabs from \"../agentsTableTabs\";\nimport AgentsSearchBar from \"../agentsSearchBar\";\nimport { POLICIES_TYPE_MAP } from \"../../../../constants/policies\";\n\nimport styles from \"./styles\";\nimport PolicyHeader from \"../policyHeader\";\nimport PolicyActionButton from \"../policyActionButton\";\nimport { isCustomPolicy } from \"../../../../src/models/policy\";\nimport { PUBLIC_AGENT_TYPE } from \"../../../../src/models/contact/public\";\nimport { AUTHENTICATED_AGENT_TYPE } from \"../../../../src/models/contact/authenticated\";\nimport PermissionsContext from \"../../../../src/contexts/permissionsContext\";\n\nconst useStyles = makeStyles((theme) => createStyles(styles(theme)));\nconst TESTCAFE_ID_SHOW_ALL_BUTTON = \"show-all-button\";\nconst TESTCAFE_ID_HIDE_BUTTON = \"hide-button\";\nexport const TESTCAFE_ID_AGENT_ACCESS_TABLE = \"agent-access-table\";\n\nexport default function AgentAccessTable({ type, loading, setLoading }) {\n  const { permissions } = useContext(PermissionsContext);\n  const [tablePermissions, setTablePermissions] = useState([]);\n  const [policyPermissions, setPolicyPermissions] = useState([]);\n  const { permissionsWithProfiles } =\n    usePermissionsWithProfiles(policyPermissions);\n\n  useEffect(() => {\n    const filteredPermissions =\n      permissions?.filter((permission) => permission.alias === type) || null;\n    if (!filteredPermissions) return;\n    setPolicyPermissions(filteredPermissions);\n  }, [permissions, type]);\n\n  useEffect(() => {\n    if (!permissionsWithProfiles) return;\n    const publicAndAuth = permissionsWithProfiles?.filter(\n      (p) => p.type === PUBLIC_AGENT_TYPE || p.type === AUTHENTICATED_AGENT_TYPE\n    );\n    const sorted = permissionsWithProfiles\n      .filter((p) => p.type === \"agent\")\n      .sort((a, b) => {\n        return a.profile?.name?.localeCompare(b.profile?.name);\n      });\n    setTablePermissions(publicAndAuth.concat(sorted));\n  }, [permissionsWithProfiles]);\n\n  const bem = useBem(useStyles());\n\n  const classes = useStyles();\n\n  const [showAll, setShowAll] = useState(false);\n  const [selectedTabValue, setSelectedTabValue] = useState(\"\");\n\n  const columns = useMemo(\n    () => [\n      {\n        header: \"\",\n        accessor: \"profile.name\",\n        modifiers: [\"align-center\", \"width-preview\"],\n      },\n      {\n        header: \"\",\n        accessor: \"webId\",\n        modifiers: [\"align-center\", \"width-preview\"],\n      },\n      {\n        header: \"\",\n        accessor: \"type\",\n        modifiers: [\"align-center\", \"width-preview\"],\n      },\n    ],\n    []\n  );\n\n  const data = useMemo(() => {\n    if (!tablePermissions) {\n      return [];\n    }\n\n    return showAll ? tablePermissions : tablePermissions.slice(0, 3);\n  }, [tablePermissions, showAll]);\n\n  const {\n    getTableProps,\n    getTableBodyProps,\n    rows,\n    prepareRow,\n    setFilter,\n    setGlobalFilter,\n  } = useTable(\n    {\n      columns,\n      data,\n      initialState: {\n        sortBy: [{ id: \"profile.name\", desc: false }],\n      },\n    },\n    useFilters,\n    useGlobalFilter\n  );\n\n  const handleFilterChange = (e) => {\n    const { value } = e.target;\n    setGlobalFilter(value || undefined);\n  };\n\n  const handleTabChange = (e, newValue) => {\n    setSelectedTabValue(newValue);\n    // TODO: this will change when Groups are available since we will not have profiles for Groups\n    setFilter(\"type\", newValue);\n  };\n\n  if (!tablePermissions.length && isCustomPolicy(type)) return null;\n\n  const { emptyStateText } = POLICIES_TYPE_MAP[type];\n\n  return (\n    <Accordion\n      defaultExpanded\n      classes={{ root: classes.accordion, rounded: classes.rounded }}\n      data-testid={TESTCAFE_ID_AGENT_ACCESS_TABLE}\n    >\n      <PolicyHeader type={type} isPolicyList>\n        <>\n          <AddAgentButton\n            type={type}\n            setLoading={setLoading}\n            permissions={tablePermissions}\n          />\n          <PolicyActionButton\n            permissions={tablePermissions}\n            setLoading={setLoading}\n            type={type}\n          />\n        </>\n      </PolicyHeader>\n      <div className={classes.permissionsContainer}>\n        {!!tablePermissions.length && (\n          <>\n            {/* TODO: Uncomment to reintroduce tabs */}\n            {/* <Tabs */}\n            {/*  handleTabChange={handleTabChange} */}\n            {/*  selectedTabValue={selectedTabValue} */}\n            {/*  tabs={[{ label: \"All\", value: \"all\", testid: TESTCAFE_ID_TAB_ALL },  { label: \"People\", value: \"agent\", testid: TESTCAFE_ID_TAB_PEOPLE }, { label: \"Groups\", value: \"group\", testid: TESTCAFE_ID_TAB_GROUPS } }]} */}\n            {/* /> */}\n            <AgentsSearchBar handleFilterChange={handleFilterChange} />\n          </>\n        )}\n        {loading && (\n          <Container variant=\"empty\">\n            <CircularProgress />\n          </Container>\n        )}\n        {!loading && tablePermissions.length ? (\n          <table\n            className={clsx(bem(\"table\"), bem(\"agents-table\"))}\n            {...getTableProps()}\n          >\n            <tbody className={bem(\"table__body\")} {...getTableBodyProps()}>\n              {rows.length ? (\n                rows.map((row) => {\n                  prepareRow(row);\n                  const details = row.original;\n                  return (\n                    <tr className={bem(\"table__body-row\")} key={details.webId}>\n                      <td\n                        className={clsx(\n                          bem(\"table__body-cell\"),\n                          bem(\"agent-cell\")\n                        )}\n                      >\n                        <AgentAccess permission={details} />\n                      </td>\n                    </tr>\n                  );\n                })\n              ) : (\n                <tr className={classes.emptyStateTextContainer}>\n                  <td>\n                    {selectedTabValue &&\n                      `No ${\n                        selectedTabValue === \"Person\" ? \"people \" : \"groups \"\n                      } found`}\n                  </td>\n                </tr>\n              )}\n            </tbody>\n          </table>\n        ) : (\n          <span className={classes.emptyStateTextContainer}>\n            {!loading && <p>{emptyStateText}</p>}\n          </span>\n        )}\n        {!loading && tablePermissions.length > 3 && (\n          <div\n            className={clsx(\n              classes.showAllButtonContainer,\n              showAll && bem(\"expanded\")\n            )}\n          >\n            <button\n              data-testid={\n                showAll ? TESTCAFE_ID_HIDE_BUTTON : TESTCAFE_ID_SHOW_ALL_BUTTON\n              }\n              type=\"button\"\n              className={classes.showAllButton}\n              onClick={() => setShowAll(!showAll)}\n            >\n              <Typography classes={{ body1: classes.showAllText }}>\n                {showAll ? (\n                  <span>\n                    Hide{\" \"}\n                    <i\n                      className={clsx(\n                        bem(\"icon-caret-up\"),\n                        classes.showAllButtonIcon\n                      )}\n                    />\n                  </span>\n                ) : (\n                  <span>\n                    Show all ({tablePermissions.length}){\" \"}\n                    <i\n                      className={clsx(\n                        bem(\"icon-caret-down\"),\n                        classes.showAllButtonIcon\n                      )}\n                    />\n                  </span>\n                )}\n              </Typography>\n            </button>\n          </div>\n        )}\n      </div>\n    </Accordion>\n  );\n}\n\nAgentAccessTable.propTypes = {\n  type: PropTypes.string.isRequired,\n  loading: PropTypes.bool,\n  setLoading: PropTypes.func.isRequired,\n};\n\nAgentAccessTable.defaultProps = {\n  loading: false,\n};\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport { createStyles } from \"@solid/lit-prism-patterns\";\n\nexport default function styles(theme) {\n  return createStyles(theme, [\"icons\", \"table\"], {\n    accordion: {\n      padding: theme.spacing(1.8, 1.6),\n      color: theme.palette.secondary.contrastText,\n    },\n    rounded: {\n      borderRadius: theme.shape.borderRadius,\n      boxShadow: `0 1px 4px 0 ${theme.palette.grey[500]}`,\n    },\n    permissionsContainer: {\n      position: \"relative\",\n      boxSizing: \"border-box\",\n      border: `1px solid ${theme.palette.grey.A100}`,\n      borderRadius: theme.shape.borderRadius,\n      fontSize: theme.typography.body2.fontSize,\n      padding: 0,\n      overflow: \"auto\",\n      \"&& p\": {\n        padding: 0,\n        margin: 0,\n      },\n    },\n    showAllButtonContainer: {\n      width: \"100%\",\n      background:\n        \"linear-gradient(180deg, rgba(255,255,255,0) 0%, #FFFFFF 100%)\",\n      position: \"absolute\",\n      textAlign: \"center\",\n      bottom: 0,\n      padding: theme.spacing(0.6, 0.7),\n    },\n    showAllButton: {\n      cursor: \"pointer\",\n      width: \"100%\",\n      backgroundColor: \"transparent\",\n      border: \"none\",\n    },\n    expanded: {\n      position: \"relative\",\n    },\n    showAllText: {\n      textAlign: \"center\",\n      color: theme.palette.primary.main,\n      fontSize: \"13px\",\n    },\n    showAllButtonIcon: {\n      color: theme.palette.primary.main,\n      fontSize: \"13px\",\n    },\n    titleAndButtonContainer: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      justifyContent: \"space-between\",\n    },\n    emptyStateTextContainer: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      padding: theme.spacing(0.7, 1.4),\n      textAlign: \"center\",\n    },\n    \"agents-table\": {\n      padding: 0,\n    },\n    \"agent-cell\": {\n      whiteSpace: \"break-spaces\",\n      padding: 0,\n    },\n  });\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport { useSession } from \"@inrupt/solid-ui-react\";\nimport { useState, useEffect } from \"react\";\nimport { AUTHENTICATED_AGENT_PREDICATE } from \"../../models/contact/authenticated\";\nimport { PUBLIC_AGENT_PREDICATE } from \"../../models/contact/public\";\nimport { fetchProfile } from \"../../solidClientHelpers/profile\";\n\nexport default function usePermissionsWithProfiles(permissions) {\n  const [permissionsWithProfiles, setPermissionsWithProfiles] = useState([]);\n  const { fetch } = useSession();\n\n  useEffect(() => {\n    if (!permissions) return;\n    Promise.all(\n      permissions.map(async (p) => {\n        let profile;\n        let profileError;\n        if (\n          p.webId === PUBLIC_AGENT_PREDICATE ||\n          p.webId === AUTHENTICATED_AGENT_PREDICATE\n        ) {\n          return p;\n        }\n        try {\n          profile = await fetchProfile(p.webId, fetch);\n        } catch (error) {\n          profileError = error;\n        }\n        return {\n          ...p,\n          profile,\n          profileError,\n        };\n      })\n    ).then((completed) => setPermissionsWithProfiles(completed));\n  }, [permissions, fetch]);\n  return { permissionsWithProfiles };\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n/* eslint-disable react/forbid-prop-types */\n\nimport React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { createStyles, Modal } from \"@material-ui/core\";\nimport { useBem } from \"@solid/lit-prism-patterns\";\nimport clsx from \"clsx\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport { Button } from \"@inrupt/prism-react-components\";\nimport AgentPickerModal from \"../agentPickerModal\";\nimport styles from \"./styles\";\n\nconst useStyles = makeStyles((theme) => createStyles(styles(theme)));\n\nexport const TESTCAFE_ID_ADVANCED_SHARING_BUTTON = \"advanced-sharing-button\";\nexport const TESTCAFE_ID_MODAL_OVERLAY = \"advanced-sharing-modal-overlay\";\n\nexport default function AdvancedSharingButton({ loading, setLoading }) {\n  const defaultType = \"viewAndAdd\";\n  const classes = useStyles();\n\n  const bem = useBem(useStyles());\n  const [open, setOpen] = useState(false);\n\n  const handleOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  return (\n    <div className={classes.sharingButtonContainer}>\n      <Button\n        data-testid={TESTCAFE_ID_ADVANCED_SHARING_BUTTON}\n        variant=\"text\"\n        className={classes.sharingButton}\n        onClick={handleOpen}\n      >\n        <i className={clsx(bem(\"icon-settings\"), bem(\"icon\"))} />\n        Advanced Sharing\n      </Button>\n\n      <Modal\n        data-testid={TESTCAFE_ID_MODAL_OVERLAY}\n        open={open}\n        style={{\n          display: \"flex\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n        }}\n        onClose={handleClose}\n        aria-labelledby=\"Advanced sharing modal\"\n        aria-describedby=\"Advanced sharing for this resource\"\n      >\n        <AgentPickerModal\n          type={defaultType}\n          onClose={handleClose}\n          advancedSharing\n          loading={loading}\n          setLoading={setLoading}\n        />\n      </Modal>\n    </div>\n  );\n}\n\nAdvancedSharingButton.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  setLoading: PropTypes.func.isRequired,\n};\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport { createStyles } from \"@solid/lit-prism-patterns\";\n\nexport default function styles(theme) {\n  return createStyles(theme, [\"icons\", \"button\"], {\n    sharingButtonContainer: {\n      display: \"flex\",\n      justifyContent: \"flex-end\",\n    },\n    sharingButton: {\n      display: \"flex\",\n      alignItems: \"center\",\n      color: theme.palette.text.primary,\n      fontWeight: theme.typography.fontWeightBold,\n      textTransform: \"capitalize\",\n      fontSize: \"0.8125rem\",\n      textDecoration: \"none\",\n    },\n    icon: {\n      color: theme.palette.text.primary,\n      margin: theme.spacing(0.5),\n    },\n  });\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n/* eslint-disable react/jsx-props-no-spreading */\n\nimport React, { useState } from \"react\";\nimport { useRouter } from \"next/router\";\nimport { Alert } from \"@material-ui/lab\";\nimport AgentAccessTable from \"../agentAccessTable\";\nimport AdvancedSharingButton from \"../advancedSharingButton\";\nimport { namedPolicies, customPolicies } from \"../../../../constants/policies\";\nimport { isContainerIri } from \"../../../../src/solidClientHelpers/utils\";\nimport { PermissionsContextProvider } from \"../../../../src/contexts/permissionsContext\";\n\nexport const TESTCAFE_ID_AGENT_ACCESS_LIST_SHOW_ALL =\n  \"agent-access-list-show-all\";\n\nfunction SharingAccordion() {\n  const router = useRouter();\n  const isContainer = isContainerIri(router.query.resourceIri);\n  const [loading, setLoading] = useState(false);\n\n  return (\n    <PermissionsContextProvider>\n      {namedPolicies.concat(customPolicies).map(({ name }) => (\n        <AgentAccessTable\n          type={name}\n          key={name}\n          loading={loading}\n          setLoading={setLoading}\n        />\n      ))}\n      {isContainer && (\n        <Alert icon={false} severity=\"info\">\n          Sharing applies to all items in this folder\n        </Alert>\n      )}\n      <AdvancedSharingButton loading={loading} setLoading={setLoading} />\n    </PermissionsContextProvider>\n  );\n}\n\nexport default SharingAccordion;\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport { useState } from \"react\";\nimport { getConsole, getLocalStorage } from \"../../windowHelpers\";\n\n// Original from https://usehooks.com/useLocalStorage/, modified for our needs\nexport default function useLocalStorage(key, initialValue = \"\") {\n  // State to store our value\n  // Pass initial state function to useState so logic is only executed once\n  const localStorage = getLocalStorage();\n  const console = getConsole();\n  const [storedValue, setStoredValue] = useState(() => {\n    try {\n      // Get from local storage by key\n      const item = localStorage.getItem(key);\n      // Parse stored json or if none return initialValue\n      return item ? JSON.parse(item) : initialValue;\n    } catch (error) {\n      // If error also return initialValue\n      // eslint-disable-next-line no-console\n      console.error(error);\n      return initialValue;\n    }\n  });\n\n  // Return a wrapped version of useState's setter function that ...\n  // ... persists the new value to localStorage.\n  const setValue = (value) => {\n    // Save state\n    setStoredValue(value);\n    // Save to local storage\n    localStorage.setItem(key, value);\n  };\n\n  return [storedValue, setValue];\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport React, { useContext } from \"react\";\nimport {\n  Accordion,\n  AccordionDetails,\n  AccordionSummary,\n  createStyles,\n  Divider,\n  List,\n  ListItem,\n  Typography,\n} from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport T from \"prop-types\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport { ActionMenu, ActionMenuItem } from \"@inrupt/prism-react-components\";\nimport { DatasetContext } from \"@inrupt/solid-ui-react\";\nimport { getContentType, getSourceUrl } from \"@inrupt/solid-client\";\nimport styles from \"./styles\";\nimport DeleteResourceButton from \"../deleteResourceButton\";\nimport DownloadLink from \"../downloadLink\";\nimport ResourceSharing from \"./resourceSharing\";\nimport { getIriPath } from \"../../src/solidClientHelpers/utils\";\nimport { getResourceName } from \"../../src/solidClientHelpers/resource\";\nimport AccessControlContext from \"../../src/contexts/accessControlContext\";\nimport SharingAccordion from \"./resourceSharing/sharingAccordion\";\nimport useLocalStorage from \"../../src/hooks/useLocalStorage\";\nimport { isAcp, isWac } from \"../../src/accessControl\";\n\nconst TESTCAFE_ID_DOWNLOAD_BUTTON = \"download-resource-button\";\nconst TESTCAFE_ID_DELETE_BUTTON = \"delete-resource-button\";\nconst TESTCAFE_ID_ACCORDION_ACTIONS = \"accordion-resource-actions-trigger\";\nexport const TESTCAFE_ID_ACCORDION_DETAILS =\n  \"accordion-resource-details-trigger\";\nexport const TESTCAFE_ID_ACCORDION_PERMISSIONS =\n  \"accordion-resource-permissions\";\nexport const TESTCAFE_ID_ACCORDION_SHARING = \"accordion-resource-sharing\";\nconst TESTCAFE_ID_TITLE = \"resource-title\";\n\nconst useStyles = makeStyles((theme) => createStyles(styles(theme)));\n\nfunction getAccordionKey(dataset, name) {\n  return `${getSourceUrl(dataset)}-${name}`;\n}\n\nexport default function ResourceDetails({\n  onDelete,\n  onDeleteCurrentContainer,\n}) {\n  const { solidDataset: dataset } = useContext(DatasetContext);\n  const datasetUrl = getSourceUrl(dataset);\n  const classes = useStyles();\n  const name = getIriPath(datasetUrl);\n  const displayName = getResourceName(name);\n  const type = getContentType(dataset);\n  const actionMenuBem = ActionMenu.useBem();\n  const { accessControl, accessControlType } = useContext(AccessControlContext);\n\n  const [actionsAccordion, setActionsAccordion] = useLocalStorage(\n    getAccordionKey(dataset, \"actions\"),\n    true\n  );\n  const [detailsAccordion, setDetailsAccordion] = useLocalStorage(\n    getAccordionKey(dataset, \"details\"),\n    false\n  );\n  const [permissionsAccordion, setPermissionsAccordion] = useLocalStorage(\n    getAccordionKey(dataset, \"permissions\"),\n    false\n  );\n  const [sharingAccordion, setSharingAccordion] = useLocalStorage(\n    getAccordionKey(dataset, \"sharing\"),\n    false\n  );\n\n  const expandIcon = <ExpandMoreIcon />;\n  return (\n    <>\n      <section className={classes.headerSection}>\n        <h3\n          data-testid={TESTCAFE_ID_TITLE}\n          className={classes[\"content-h3\"]}\n          title={datasetUrl}\n        >\n          {displayName}\n        </h3>\n      </section>\n\n      <Divider />\n\n      <Accordion\n        expanded={actionsAccordion}\n        onChange={() => setActionsAccordion(!actionsAccordion)}\n      >\n        <AccordionSummary\n          expandIcon={expandIcon}\n          data-testid={TESTCAFE_ID_ACCORDION_ACTIONS}\n        >\n          Actions\n        </AccordionSummary>\n        <AccordionDetails className={classes.accordionDetails}>\n          <ActionMenu>\n            <ActionMenuItem>\n              <DownloadLink\n                className={actionMenuBem(\"action-menu__trigger\")}\n                data-testid={TESTCAFE_ID_DOWNLOAD_BUTTON}\n                iri={datasetUrl}\n              >\n                Download\n              </DownloadLink>\n            </ActionMenuItem>\n            <ActionMenuItem>\n              <DeleteResourceButton\n                className={actionMenuBem(\"action-menu__trigger\", \"danger\")}\n                resourceIri={datasetUrl}\n                name={displayName}\n                onDelete={onDelete}\n                onDeleteCurrentContainer={onDeleteCurrentContainer}\n                data-testid={TESTCAFE_ID_DELETE_BUTTON}\n              />\n            </ActionMenuItem>\n          </ActionMenu>\n        </AccordionDetails>\n      </Accordion>\n\n      <Accordion\n        expanded={detailsAccordion}\n        onChange={() => setDetailsAccordion(!detailsAccordion)}\n      >\n        <AccordionSummary\n          expandIcon={expandIcon}\n          data-testid={TESTCAFE_ID_ACCORDION_DETAILS}\n        >\n          Details\n        </AccordionSummary>\n        <AccordionDetails className={classes.accordionDetails}>\n          <section className={classes.centeredSection}>\n            <List>\n              <ListItem className={classes.listItem}>\n                <Typography className={classes.detailText}>\n                  Thing Type:\n                </Typography>\n                <Typography\n                  className={`${classes.typeValue} ${classes.detailText}`}\n                >\n                  {type}\n                </Typography>\n              </ListItem>\n            </List>\n          </section>\n        </AccordionDetails>\n      </Accordion>\n\n      {accessControl && ( // only show when we know user has control access\n        <>\n          {isWac(accessControlType) && (\n            <Accordion\n              expanded={permissionsAccordion}\n              onChange={() => setPermissionsAccordion(!permissionsAccordion)}\n            >\n              <AccordionSummary\n                expandIcon={expandIcon}\n                data-testid={TESTCAFE_ID_ACCORDION_PERMISSIONS}\n              >\n                Permissions\n              </AccordionSummary>\n              <AccordionDetails className={classes.accordionDetails}>\n                <ResourceSharing />\n              </AccordionDetails>\n            </Accordion>\n          )}\n          {isAcp(accessControlType) && (\n            <Accordion\n              expanded={sharingAccordion}\n              onChange={() => setSharingAccordion(!sharingAccordion)}\n            >\n              <AccordionSummary\n                expandIcon={expandIcon}\n                data-testid={TESTCAFE_ID_ACCORDION_SHARING}\n              >\n                Sharing\n              </AccordionSummary>\n              <AccordionDetails className={classes.accordionDetails}>\n                <SharingAccordion />\n              </AccordionDetails>\n            </Accordion>\n          )}\n        </>\n      )}\n    </>\n  );\n}\n\nResourceDetails.propTypes = {\n  onDelete: T.func,\n  onDeleteCurrentContainer: T.func,\n};\n\nResourceDetails.defaultProps = {\n  onDelete: () => {},\n  onDeleteCurrentContainer: () => {},\n};\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport { content } from \"@solid/lit-prism-patterns\";\n\nconst rules = {\n  spinnerContainer: {\n    justifyContent: \"center\",\n  },\n  centeredSection: {\n    paddingLeft: \"1rem\",\n    paddingRight: \"1rem\",\n  },\n  raw: {\n    height: \"100%\",\n    width: \"100%\",\n    maxHeight: 200,\n    overflow: \"auto\",\n  },\n  listItem: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n  },\n  detailText: {\n    fontSize: \"0.75rem\",\n  },\n  typeValue: {\n    marginLeft: \"auto\",\n  },\n  avatar: {\n    marginRight: \"1rem\",\n  },\n};\n\nexport default function styles(theme) {\n  return {\n    ...rules,\n    ...content.styles(theme),\n  };\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n// material-ui is broken and doesn't allow `ListItem` to accept `component`\n\nimport React from \"react\";\nimport { Divider, createStyles } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport T from \"prop-types\";\nimport Skeleton from \"@material-ui/lab/Skeleton\";\nimport styles from \"./styles\";\nimport { getIriPath } from \"../../../src/solidClientHelpers/utils\";\nimport { getResourceName } from \"../../../src/solidClientHelpers/resource\";\nimport Spinner from \"../../spinner\";\n\nconst useStyles = makeStyles((theme) => createStyles(styles(theme)));\n\nfunction DetailsLoading({ iri }) {\n  const classes = useStyles();\n  const name = getIriPath(iri);\n  const displayName = getResourceName(name);\n\n  return (\n    <>\n      <section className={classes.centeredSection}>\n        <h3 className={classes[\"content-h3\"]} title={iri || \"\"}>\n          {displayName || <Skeleton width={100} />}\n        </h3>\n      </section>\n\n      <Divider />\n\n      <Spinner />\n    </>\n  );\n}\n\nDetailsLoading.propTypes = {\n  iri: T.string,\n};\n\nDetailsLoading.defaultProps = {\n  iri: null,\n};\n\nexport default DetailsLoading;\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport React, { useContext, useEffect } from \"react\";\nimport T from \"prop-types\";\nimport { useRouter } from \"next/router\";\nimport { Drawer, Message } from \"@inrupt/prism-react-components\";\nimport { DatasetProvider } from \"@inrupt/solid-ui-react\";\nimport DetailsMenuContext from \"../../src/contexts/detailsMenuContext\";\nimport {\n  getParentContainerUrl,\n  stripQueryParams,\n} from \"../../src/stringHelpers\";\nimport ResourceDetails from \"../resourceDetails\";\nimport DetailsLoading from \"../resourceDetails/detailsLoading\";\nimport useAccessControl from \"../../src/hooks/useAccessControl\";\nimport { AccessControlProvider } from \"../../src/contexts/accessControlContext\";\nimport useResourceInfo from \"../../src/hooks/useResourceInfo\";\nimport { isHTTPError } from \"../../src/error\";\nimport { ResourceInfoProvider } from \"../../src/contexts/resourceInfoContext\";\n\nexport function handleCloseDrawer({ setMenuOpen, router }) {\n  return async () => {\n    setMenuOpen(false);\n    const { asPath } = router;\n    const pathname = stripQueryParams(asPath) || \"/\";\n    await router.replace(\"/resource/[iri]\", pathname);\n  };\n}\n\nexport function handleRedirectToParentContainer({ setMenuOpen, iri, router }) {\n  return async () => {\n    setMenuOpen(false);\n    const parentContainerUrl = getParentContainerUrl(iri);\n    await router.replace(\n      \"/resource/[iri]\",\n      `/resource/${encodeURIComponent(parentContainerUrl)}`\n    );\n  };\n}\n\nexport default function ResourceDrawer({ onUpdate, onDeleteCurrentContainer }) {\n  const { menuOpen, setMenuOpen } = useContext(DetailsMenuContext);\n  const router = useRouter();\n  const {\n    query: { action, resourceIri },\n  } = router;\n  const resourceInfoSwrResponse = useResourceInfo(resourceIri, {\n    revalidateOnFocus: false,\n    shouldRetryOnError: false,\n  });\n  const { data: resourceInfo, error: resourceError } = resourceInfoSwrResponse;\n\n  const accessControlResponse = useAccessControl(resourceInfo);\n  const {\n    data: accessControlData,\n    error: accessControlError,\n    isValidating,\n  } = accessControlResponse;\n\n  useEffect(() => {\n    setMenuOpen(!!(action && resourceIri));\n  }, [action, resourceIri, setMenuOpen]);\n\n  const closeDrawer = handleCloseDrawer({ setMenuOpen, router });\n\n  if (resourceError) {\n    // if we fail to load the resource, there's not much more we can do\n    // but if access control fails, we can load the rest of the functionality\n    return (\n      <Drawer open={menuOpen} close={closeDrawer}>\n        <Message variant=\"error\">\n          {isHTTPError(resourceError, 403) ? (\n            <p>You do not have access to this resource.</p>\n          ) : (\n            <p>We had a problem loading the resource.</p>\n          )}\n        </Message>\n      </Drawer>\n    );\n  }\n\n  const loading =\n    !resourceInfo ||\n    (!accessControlData && !accessControlError) ||\n    isValidating;\n\n  return (\n    <Drawer open={menuOpen} close={closeDrawer}>\n      {loading ? (\n        <DetailsLoading iri={resourceIri} />\n      ) : (\n        <ResourceInfoProvider swr={resourceInfoSwrResponse}>\n          <AccessControlProvider\n            accessControl={accessControlData?.accessControl}\n            accessControlType={accessControlData?.accessControlType}\n          >\n            <DatasetProvider solidDataset={resourceInfo}>\n              <ResourceDetails\n                onDelete={onUpdate}\n                onDeleteCurrentContainer={onDeleteCurrentContainer}\n              />\n            </DatasetProvider>\n          </AccessControlProvider>\n        </ResourceInfoProvider>\n      )}\n    </Drawer>\n  );\n}\n\nResourceDrawer.propTypes = {\n  onUpdate: T.func,\n  onDeleteCurrentContainer: T.func,\n};\n\nResourceDrawer.defaultProps = {\n  onUpdate: () => {},\n  onDeleteCurrentContainer: () => {},\n};\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport React, { useContext } from \"react\";\nimport T from \"prop-types\";\nimport { DrawerContainer } from \"@inrupt/prism-react-components\";\nimport { useRouter } from \"next/router\";\nimport ResourceDrawer, {\n  handleCloseDrawer,\n  handleRedirectToParentContainer,\n} from \"../resourceDrawer\";\nimport DetailsMenuContext from \"../../src/contexts/detailsMenuContext\";\n\nexport default function ContainerDetails({ children, update }) {\n  const { menuOpen, setMenuOpen } = useContext(DetailsMenuContext);\n  const router = useRouter();\n\n  const drawer = (\n    <ResourceDrawer\n      onUpdate={() => {\n        update();\n        handleCloseDrawer({ setMenuOpen, router })();\n      }}\n      onDeleteCurrentContainer={(iri) => {\n        update();\n        handleRedirectToParentContainer({ setMenuOpen, iri, router })();\n      }}\n    />\n  );\n\n  return (\n    <DrawerContainer drawer={drawer} open={menuOpen}>\n      {children}\n    </DrawerContainer>\n  );\n}\n\nContainerDetails.propTypes = {\n  children: T.node,\n  update: T.func.isRequired,\n};\n\nContainerDetails.defaultProps = {\n  children: null,\n};\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport React from \"react\";\nimport { Container, PageHeader } from \"@inrupt/prism-react-components\";\nimport { useRouter } from \"next/router\";\nimport ResourceLink from \"../resourceLink\";\n\nexport const TESTCAFE_ID_ACCESS_FORBIDDEN = \"access-forbidden\";\n\nexport default function AccessForbidden() {\n  const router = useRouter();\n  return (\n    <div data-testid={TESTCAFE_ID_ACCESS_FORBIDDEN}>\n      <PageHeader title=\"No Access\" />\n      <Container>\n        <p>\n          You don&#39;t have access to this resource:&nbsp;\n          <ResourceLink resourceIri={router.query.iri}>\n            {router.query.iri}\n          </ResourceLink>\n          .\n        </p>\n      </Container>\n    </div>\n  );\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport React from \"react\";\nimport { Container, PageHeader } from \"@inrupt/prism-react-components\";\nimport { useRouter } from \"next/router\";\nimport ResourceLink from \"../resourceLink\";\n\nexport const TESTCAFE_ID_RESOURCE_NOT_FOUND = \"resource-not-found\";\n\nexport default function ResourceNotFound() {\n  const router = useRouter();\n  return (\n    <div data-testid={TESTCAFE_ID_RESOURCE_NOT_FOUND}>\n      <PageHeader title=\"Resource Not Found\" />\n      <Container>\n        <p>\n          Unable to find the resource:&nbsp;\n          <ResourceLink resourceIri={router.query.iri}>\n            {router.query.iri}\n          </ResourceLink>\n          .\n        </p>\n      </Container>\n    </div>\n  );\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport { Container, Content, PageHeader } from \"@inrupt/prism-react-components\";\nimport React from \"react\";\nimport { useRouter } from \"next/router\";\n\nexport const TESTCAFE_ID_NOT_SUPPORTED = \"not-supported\";\n\nexport default function NotSupported() {\n  const router = useRouter();\n  return (\n    <div data-testid={TESTCAFE_ID_NOT_SUPPORTED}>\n      <PageHeader title=\"Resource Not Supported\" />\n      <Container>\n        <Content>\n          <p>PodBrowser can only show resources that are Solid containers.</p>\n          <p>\n            <span>\n              Navigate to the resource directly (this will navigate away from\n              PodBrowser):&nbsp;\n            </span>\n            <a href={router.query.iri}>{router.query.iri}</a>\n          </p>\n        </Content>\n      </Container>\n    </div>\n  );\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nconst styles = (theme) => ({\n  \"sub-header\": {\n    [theme.breakpoints.up(\"sm\")]: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      justifyContent: \"space-between\",\n      alignItems: \"center\",\n    },\n    display: \"flex\",\n    flexDirection: \"column-reverse\",\n  },\n  \"actions-container\": {\n    display: \"flex\",\n    gap: \"2px\",\n    flexDirection: \"column\",\n    marginTop: theme.spacing(0.5),\n    [theme.breakpoints.up(\"sm\")]: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      gap: \"1rem\",\n      justifyContent: \"space-between\",\n      alignItems: \"center\",\n      marginTop: 0,\n      marginLeft: theme.spacing(0.5),\n    },\n  },\n});\n\nexport default styles;\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport { createStyles } from \"@solid/lit-prism-patterns\";\n\nexport default function styles(theme) {\n  return createStyles(theme, [\"breadcrumb\", \"icons\"]);\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport React from \"react\";\nimport { createStyles, makeStyles } from \"@material-ui/styles\";\nimport PropTypes from \"prop-types\";\nimport { useBem } from \"@solid/lit-prism-patterns\";\nimport Link from \"next/link\";\nimport clsx from \"clsx\";\nimport styles from \"../styles\";\n\nconst useStyles = makeStyles((theme) => createStyles(styles(theme)));\n\nexport default function Crumb({ crumb, isLink }) {\n  const bem = useBem(useStyles());\n  return (\n    <li key={crumb.uri} className={bem(\"breadcrumb__crumb\")}>\n      <i\n        className={clsx(\n          bem(\"icon-caret-left\"),\n          bem(\"breadcrumb__caret\", \"small\")\n        )}\n      />\n      {isLink ? (\n        <Link href={crumb.uri}>\n          <a className={bem(\"breadcrumb__link\")}>\n            <span className={bem(\"breadcrumb__prefix\")}>Back to </span>\n            {crumb.label}\n          </a>\n        </Link>\n      ) : (\n        crumb.label\n      )}\n      <i\n        className={clsx(\n          bem(\"icon-caret-right\"),\n          bem(\"breadcrumb__caret\", \"large\")\n        )}\n      />\n    </li>\n  );\n}\n\nCrumb.defaultProps = {\n  crumb: {},\n};\n\nCrumb.propTypes = {\n  crumb: PropTypes.shape({ uri: PropTypes.string, label: PropTypes.string }),\n  isLink: PropTypes.bool.isRequired,\n};\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport React, { createRef, useContext } from \"react\";\nimport { createStyles, makeStyles } from \"@material-ui/styles\";\nimport { useBem } from \"@solid/lit-prism-patterns\";\nimport PodLocationContext from \"../../src/contexts/podLocationContext\";\nimport Spinner from \"../spinner\";\nimport styles from \"./styles\";\nimport Crumb from \"./crumb\";\n\nconst useStyles = makeStyles((theme) => createStyles(styles(theme)));\n\nconst TESTCAFE_ID_BREADCRUMBS = \"breadcrumbs\";\n\nexport default function Breadcrumbs() {\n  const bem = useBem(useStyles());\n  const podLocation = useContext(PodLocationContext);\n  const breadcrumbsList = createRef();\n\n  if (!podLocation.baseUri) return <Spinner />;\n\n  const { baseUri, currentUri } = podLocation;\n  const uriParts = currentUri\n    .substr(baseUri.length)\n    .split(\"/\")\n    .filter((crumb) => !!crumb);\n  const resourceHref = (index) => {\n    return `/resource/${encodeURIComponent(\n      `${baseUri + uriParts.slice(0, index + 1).join(\"/\")}/`\n    )}`;\n  };\n  const crumbs = [\n    { uri: `/resource/${encodeURIComponent(baseUri)}`, label: \"All files\" },\n  ].concat(\n    uriParts.map((part, index) => ({\n      uri: resourceHref(index),\n      label: decodeURIComponent(part),\n    }))\n  );\n\n  return (\n    <nav aria-label=\"Breadcrumbs\">\n      <ul\n        data-testid={TESTCAFE_ID_BREADCRUMBS}\n        className={bem(\"breadcrumb\")}\n        ref={breadcrumbsList}\n      >\n        {crumbs.map((crumb, index) => (\n          <Crumb\n            crumb={crumb}\n            key={crumb.uri}\n            isLink={index !== crumbs.length - 1}\n          />\n        ))}\n      </ul>\n    </nav>\n  );\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport React from \"react\";\nimport T from \"prop-types\";\nimport ResourceLink from \"../resourceLink\";\nimport { DETAILS_CONTEXT_ACTIONS } from \"../../src/contexts/detailsMenuContext\";\n\nconst TESTCAFE_ID_FOLDER_DETAILS_BUTTON = \"folder-details-button\";\n\nexport default function ContainerDetailsButton({ className }) {\n  return (\n    <ResourceLink\n      data-testid={TESTCAFE_ID_FOLDER_DETAILS_BUTTON}\n      action={DETAILS_CONTEXT_ACTIONS.DETAILS}\n      className={className}\n    >\n      Folder Details\n    </ResourceLink>\n  );\n}\n\nContainerDetailsButton.propTypes = {\n  className: T.string,\n};\n\nContainerDetailsButton.defaultProps = {\n  className: null,\n};\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n/* eslint-disable jsx-a11y/no-noninteractive-element-interactions */\n\nimport React, { useContext, useEffect, useRef, useState } from \"react\";\nimport T from \"prop-types\";\nimport { overwriteFile } from \"@inrupt/solid-client\";\nimport { useSession } from \"@inrupt/solid-ui-react\";\nimport PodLocationContext from \"../../src/contexts/podLocationContext\";\nimport AlertContext from \"../../src/contexts/alertContext\";\nimport ConfirmationDialogContext from \"../../src/contexts/confirmationDialogContext\";\nimport { joinPath } from \"../../src/stringHelpers\";\nimport ConfirmationDialog from \"../confirmationDialog\";\n\nexport const TESTCAFE_ID_UPLOAD_BUTTON = \"upload-file-button\";\nexport const TESTCAFE_ID_UPLOAD_INPUT = \"upload-file-input\";\n\nexport const DUPLICATE_DIALOG_ID = \"upload-duplicate-file\";\n\nexport const CONFIRMATION_MESSAGE = \"Do you want to replace it?\";\n\nfunction normalizeSafeFileName(fileName) {\n  return fileName.replace(/^-/, \"\");\n}\n\nexport function handleSaveResource({\n  fetch,\n  currentUri,\n  onSave,\n  setIsUploading,\n  setAlertOpen,\n  setMessage,\n  setSeverity,\n}) {\n  return async (uploadedFile) => {\n    try {\n      const fileName = normalizeSafeFileName(uploadedFile.name);\n      await overwriteFile(\n        joinPath(currentUri, encodeURIComponent(fileName)),\n        uploadedFile,\n        {\n          type: uploadedFile.type,\n          fetch,\n        }\n      );\n\n      onSave();\n\n      setSeverity(\"success\");\n      setMessage(`Your file has been uploaded as ${fileName}`);\n      setAlertOpen(true);\n    } catch (error) {\n      setSeverity(\"error\");\n      setMessage(error.toString());\n      setAlertOpen(true);\n    } finally {\n      setIsUploading(false);\n    }\n  };\n}\n\nexport function handleUploadedFile({\n  setOpen,\n  setTitle,\n  setContent,\n  setConfirmationSetup,\n  setIsUploading,\n  saveResource,\n}) {\n  return (uploadedFile, existingFile) => {\n    if (existingFile) {\n      setOpen(DUPLICATE_DIALOG_ID);\n      setTitle(\n        `File ${normalizeSafeFileName(uploadedFile.name)} already exists`\n      );\n      setContent(CONFIRMATION_MESSAGE);\n      setConfirmationSetup(true);\n      setIsUploading(false);\n    } else {\n      saveResource(uploadedFile);\n      setIsUploading(false);\n    }\n  };\n}\n\nexport function handleFileSelect({\n  setIsUploading,\n  setFile,\n  saveUploadedFile,\n  setSeverity,\n  setMessage,\n  setAlertOpen,\n  resourceList,\n}) {\n  return (e) => {\n    if (!e.target.files.length) return;\n    try {\n      setIsUploading(true);\n      const uploadedFile = e.target.files[\"0\"];\n      setFile(uploadedFile);\n      const existingFile = !!resourceList.find(\n        (file) => file.name === normalizeSafeFileName(uploadedFile.name)\n      );\n      saveUploadedFile(uploadedFile, existingFile);\n    } catch (error) {\n      setSeverity(\"error\");\n      setMessage(error.toString());\n      setAlertOpen(true);\n    } finally {\n      setIsUploading(false);\n    }\n  };\n}\n\nexport default function AddFileButton({ className, onSave, resourceList }) {\n  const { session } = useSession();\n  const { fetch } = session;\n  const { currentUri } = useContext(PodLocationContext);\n  const [isUploading, setIsUploading] = useState(false);\n  const { setMessage, setSeverity, setAlertOpen } = useContext(AlertContext);\n  const { confirmed, open, setContent, setOpen, setTitle, closeDialog } =\n    useContext(ConfirmationDialogContext);\n  const [confirmationSetup, setConfirmationSetup] = useState(false);\n  const [file, setFile] = useState(null);\n  const ref = useRef(null);\n\n  const saveResource = handleSaveResource({\n    fetch,\n    currentUri,\n    onSave,\n    setIsUploading,\n    setAlertOpen,\n    setMessage,\n    setSeverity,\n  });\n\n  const saveUploadedFile = handleUploadedFile({\n    setOpen,\n    setTitle,\n    setContent,\n    setConfirmationSetup,\n    setIsUploading,\n    saveResource,\n  });\n\n  const onFileSelect = handleFileSelect({\n    fetch,\n    currentUri,\n    setIsUploading,\n    setFile,\n    saveUploadedFile,\n    saveResource,\n    setSeverity,\n    setMessage,\n    setAlertOpen,\n    resourceList,\n  });\n\n  useEffect(() => {\n    if (confirmationSetup && confirmed === null && open === DUPLICATE_DIALOG_ID)\n      return;\n\n    if (confirmationSetup && confirmed && open === DUPLICATE_DIALOG_ID) {\n      saveResource(file);\n    }\n\n    if (confirmed !== null) {\n      closeDialog();\n      setConfirmationSetup(false);\n    }\n  }, [confirmationSetup, confirmed, saveResource, closeDialog, file, open]);\n\n  return (\n    <>\n      <label\n        // eslint-disable-next-line jsx-a11y/no-noninteractive-tabindex\n        tabIndex=\"0\"\n        htmlFor=\"upload-file-input\"\n        className={className}\n        data-testid={TESTCAFE_ID_UPLOAD_BUTTON}\n        disabled={isUploading}\n        onClick={(e) => {\n          if (ref.current) {\n            setIsUploading(true);\n          }\n          e.target.value = null;\n        }}\n        onKeyUp={(e) => {\n          if (e.key === \"Enter\") {\n            if (ref.current) {\n              ref.current.click();\n            }\n            e.target.value = null;\n          }\n        }}\n      >\n        {isUploading ? \"Uploading...\" : \"Upload File\"}\n        <input\n          ref={ref}\n          id=\"upload-file-input\"\n          data-testid={TESTCAFE_ID_UPLOAD_INPUT}\n          type=\"file\"\n          style={{ display: \"none\" }}\n          onChange={(e) => {\n            onFileSelect(e);\n            e.target.value = null;\n          }}\n        />\n      </label>\n      <ConfirmationDialog />\n    </>\n  );\n}\n\nAddFileButton.propTypes = {\n  className: T.string,\n  onSave: T.func,\n  resourceList: T.arrayOf(T.shape),\n};\n\nAddFileButton.defaultProps = {\n  className: null,\n  onSave: () => {},\n  resourceList: [],\n};\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport React, { useContext, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { createContainerAt, getSourceUrl } from \"@inrupt/solid-client\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { useSession } from \"@inrupt/solid-ui-react\";\nimport { createStyles, Popover } from \"@material-ui/core\";\nimport {\n  Button,\n  Form,\n  Label,\n  Message,\n  SimpleInput,\n} from \"@inrupt/prism-react-components\";\nimport PodLocationContext from \"../../src/contexts/podLocationContext\";\nimport AlertContext from \"../../src/contexts/alertContext\";\nimport styles from \"../addPermissionUsingWebIdButton/styles\";\nimport { joinPath } from \"../../src/stringHelpers\";\n\nexport const TESTCAFE_ID_ADD_FOLDER_BUTTON = \"add-folder-button\";\nconst TESTCAFE_ID_FOLDER_NAME_INPUT = \"folder-name-input\";\nconst TESTCAFE_ID_CREATE_FOLDER_FLYOUT_BUTTON = \"create-folder-flyout-button\";\n\nconst useStyles = makeStyles((theme) => createStyles(styles(theme)));\n\nexport function determineFinalUrl(folders, currentUri, name) {\n  let currentName = name;\n  function determineFinalName(n = 1) {\n    const found = Boolean(\n      folders.find((folder) => folder.name === currentName)\n    );\n    if (found) {\n      const baseName = currentName.substr(0, currentName.indexOf(\"(\"));\n      if (baseName.length) {\n        currentName = `${baseName}(${n})`;\n      } else {\n        currentName = `${currentName}(${n})`;\n      }\n      determineFinalName(n + 1);\n    }\n  }\n  determineFinalName();\n  return joinPath(currentUri, encodeURIComponent(currentName));\n}\n\nexport function handleFolderSubmit({\n  options,\n  onSave,\n  currentUri,\n  folders,\n  name,\n  setSeverity,\n  setMessage,\n  setAlertOpen,\n  handleClose,\n  setFolderName,\n  setDirtyForm,\n  setDirtyNameField,\n}) {\n  return async (event) => {\n    event.preventDefault();\n    setDirtyForm(true);\n    if (!name) {\n      return;\n    }\n    try {\n      const url = determineFinalUrl(folders, currentUri, name);\n      const response = await createContainerAt(url, options);\n\n      onSave();\n      setSeverity(\"success\");\n      setMessage(\n        `Your folder has been created at ${decodeURIComponent(\n          getSourceUrl(response)\n        )}`\n      );\n      setAlertOpen(true);\n      setFolderName(\"\");\n      setDirtyForm(false);\n      setDirtyNameField(false);\n      handleClose();\n    } catch (error) {\n      setSeverity(\"error\");\n      setMessage(error.toString());\n      setAlertOpen(true);\n    }\n  };\n}\n\nexport function handleChange(setFolderName) {\n  return ({ target: { value } }) => {\n    setFolderName(value);\n  };\n}\n\nexport default function AddFolderFlyout({ onSave, className, resourceList }) {\n  const classes = useStyles();\n  const [folderName, setFolderName] = useState(\"\");\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [dirtyForm, setDirtyForm] = useState(false);\n  const [dirtyNameField, setDirtyNameField] = useState(false);\n  const { currentUri } = useContext(PodLocationContext);\n  const { setMessage, setSeverity, setAlertOpen } = useContext(AlertContext);\n\n  const {\n    session: { fetch },\n  } = useSession();\n\n  const folders =\n    resourceList && resourceList.filter((el) => el.iri.endsWith(\"/\"));\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const open = Boolean(anchorEl);\n  const id = open ? \"add-folder-flyout\" : undefined;\n  const options = { fetch };\n\n  const onSubmit = handleFolderSubmit({\n    options,\n    folders,\n    currentUri,\n    name: folderName,\n    onSave,\n    setSeverity,\n    setMessage,\n    setAlertOpen,\n    handleClose,\n    setFolderName,\n    setDirtyForm,\n    setDirtyNameField,\n  });\n\n  const onChange = handleChange(setFolderName);\n  const invalidNameField = !folderName && (dirtyForm || dirtyNameField);\n\n  return (\n    <>\n      <Button\n        aria-describedby={id}\n        data-testid={TESTCAFE_ID_ADD_FOLDER_BUTTON}\n        className={className}\n        onClick={handleClick}\n        variant=\"small\"\n      >\n        Create Folder\n      </Button>\n      <Popover\n        data-testid={id}\n        open={open}\n        anchorEl={anchorEl}\n        classes={classes}\n        onClose={handleClose}\n        anchorOrigin={{\n          vertical: \"bottom\",\n          horizontal: \"center\",\n        }}\n        transformOrigin={{\n          vertical: \"top\",\n          horizontal: \"center\",\n        }}\n      >\n        <Form onSubmit={(event) => onSubmit(event)}>\n          <Label htmlFor=\"folder-input\">Folder name</Label>\n          {invalidNameField ? (\n            <Message variant=\"invalid\">Please give a name</Message>\n          ) : null}\n          <SimpleInput\n            id=\"folder-input\"\n            data-testid={TESTCAFE_ID_FOLDER_NAME_INPUT}\n            onChange={onChange}\n            onBlur={() => setDirtyNameField(true)}\n            value={folderName}\n            required={invalidNameField}\n          />\n          <Button\n            data-testid={TESTCAFE_ID_CREATE_FOLDER_FLYOUT_BUTTON}\n            type=\"submit\"\n          >\n            Create Folder\n          </Button>\n        </Form>\n      </Popover>\n    </>\n  );\n}\n\nAddFolderFlyout.propTypes = {\n  onSave: PropTypes.func,\n  resourceList: PropTypes.arrayOf(PropTypes.shape()),\n  className: PropTypes.string,\n};\n\nAddFolderFlyout.defaultProps = {\n  onSave: () => {},\n  resourceList: [],\n  className: null,\n};\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport React from \"react\";\nimport { Button } from \"@inrupt/prism-react-components\";\nimport { createStyles, makeStyles } from \"@material-ui/styles\";\nimport { useBem } from \"@solid/lit-prism-patterns\";\nimport T from \"prop-types\";\nimport styles from \"./styles\";\nimport Breadcrumbs from \"../breadcrumbs\";\nimport ContainerDetails from \"../containerDetailsButton\";\nimport AddFileButton from \"../addFileButton\";\nimport AddFolderFlyout from \"../addFolderFlyout\";\n\nconst useStyles = makeStyles((theme) => createStyles(styles(theme)));\n\nexport default function ContainerSubHeader({ update, resourceList }) {\n  const bem = useBem(useStyles());\n  const buttonBem = Button.useBem();\n  const pageHeaderAction = buttonBem(\"button\", \"small\");\n  return (\n    <div className={bem(\"sub-header\")}>\n      <Breadcrumbs />\n      <div className={bem(\"actions-container\")}>\n        <ContainerDetails className={pageHeaderAction} />\n        <AddFolderFlyout\n          onSave={update}\n          resourceList={resourceList}\n          className={pageHeaderAction}\n        />\n        <AddFileButton\n          onSave={update}\n          resourceList={resourceList}\n          className={pageHeaderAction}\n        />\n      </div>\n    </div>\n  );\n}\n\nContainerSubHeader.propTypes = {\n  update: T.func,\n  resourceList: T.arrayOf(\n    T.shape({\n      iri: T.string.isRequired,\n      name: T.string.isRequired,\n    })\n  ),\n};\n\nContainerSubHeader.defaultProps = {\n  update: () => null,\n  resourceList: [],\n};\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport React from \"react\";\nimport { Container, PageHeader } from \"@inrupt/prism-react-components\";\n\nexport const TESTCAFE_ID_AUTH_PROFILE_LOAD_ERROR = \"auth-profile-load-error\";\n\nexport default function AuthProfileLoadError() {\n  return (\n    <div data-testid={TESTCAFE_ID_AUTH_PROFILE_LOAD_ERROR}>\n      <PageHeader title=\"Failed loading your profile\" />\n      <Container>\n        <p>PodBrowser were not able to load your profile.</p>\n      </Container>\n    </div>\n  );\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport React, { useEffect, useState } from \"react\";\nimport T from \"prop-types\";\nimport { Icons, Message } from \"@inrupt/prism-react-components\";\n\nexport const TESTCAFE_ID_NO_CONTROL_ERROR = \"no-control-error\";\nexport const TESTCAFE_ID_NO_CONTROL_CLOSE_BUTTON = \"no-control-close-button\";\n\nexport function setupOnClose() {\n  return (event) => {\n    event.preventDefault();\n    sessionStorage.setItem(\"no-control-warning-closed\", \"true\");\n  };\n}\n\nexport default function NoControlWarning({ podRootIri }) {\n  const [appUrl, setAppUrl] = useState(null);\n  const bem = Message.useBem();\n  const open = !sessionStorage.getItem(\"no-control-warning-closed\");\n\n  useEffect(() => setAppUrl(window.location.origin), []);\n\n  const onClose = setupOnClose();\n\n  return open ? (\n    <Message\n      variant=\"warning\"\n      prominent\n      hasIcon\n      onClose={onClose}\n      closeButtonProps={{ \"data-testid\": TESTCAFE_ID_NO_CONTROL_CLOSE_BUTTON }}\n      data-testid={TESTCAFE_ID_NO_CONTROL_ERROR}\n    >\n      <p className={bem(\"message__title\")}>\n        You can&apos;t share anything or change permissions in your Pod\n      </p>\n      <p>\n        This is because you don&apos;t have control access. You can still browse\n        the resources in your Pod, but you won&apos;t be able to share anything.\n      </p>\n      <p className={bem(\"message__title\")}>How to fix:</p>\n      <ol>\n        <li>\n          <span>Log in to </span>\n          <a href={podRootIri} target=\"_blank\" rel=\"noreferrer\">\n            <span>your Pod</span>\n            <Icons name=\"external-link\" data-external />\n          </a>\n        </li>\n        <li>Go to “Preferences”</li>\n        <li>\n          <span>Under “Manage your trusted applications,” look for </span>\n          <span>{appUrl}</span>\n          <span> and check the “Control” box</span>\n        </li>\n        <li>Click on “Update”</li>\n        <li>Return to PodBrowser</li>\n      </ol>\n    </Message>\n  ) : null;\n}\n\nNoControlWarning.propTypes = {\n  podRootIri: T.string.isRequired,\n};\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport React from \"react\";\nimport { Container, PageHeader } from \"@inrupt/prism-react-components\";\n\nexport const TESTCAFE_ID_POD_ROOT_LOAD_ERROR = \"pod-root-load-error\";\n\nexport default function PodRootLoadError() {\n  return (\n    <div data-testid={TESTCAFE_ID_POD_ROOT_LOAD_ERROR}>\n      <PageHeader title=\"Could not load your Pod\" />\n      <Container>\n        <p>PodBrowser encountered an error while loading your Pod.</p>\n      </Container>\n    </div>\n  );\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n/* eslint react/jsx-props-no-spreading:off */\n\nimport React, { useMemo } from \"react\";\nimport T from \"prop-types\";\nimport { useSortBy, useTable } from \"react-table\";\nimport clsx from \"clsx\";\nimport { isContainer } from \"@inrupt/solid-client\";\nimport { Table } from \"@inrupt/prism-react-components\";\nimport ContainerTableRow from \"../containerTableRow\";\nimport SortedTableCarat from \"../sortedTableCarat\";\n\nexport const TESTCAFE_ID_CONTAINER_TABLE = \"container-table\";\n\nexport default function ContainerTable({ containerPath, data, resourcePath }) {\n  const bem = Table.useBem();\n\n  const columns = useMemo(\n    () => [\n      {\n        header: \"Icon\",\n        accessor: \"icon\",\n        disableSortBy: true,\n        modifiers: [\"align-center\", \"width-preview\"],\n      },\n      {\n        header: \"BookmarkIcon\",\n        accessor: \"bookmark-icon\",\n        disableSortBy: true,\n        modifiers: [\"align-center\", \"width-preview\"],\n      },\n      {\n        Header: \"File\",\n        accessor: \"filename\",\n      },\n      {\n        Header: \"Type\",\n        accessor: \"type\",\n      },\n    ],\n    []\n  );\n\n  const { getTableProps, getTableBodyProps, headerGroups, rows, prepareRow } =\n    useTable(\n      {\n        columns,\n        data,\n        defaultCanSort: true,\n      },\n      useSortBy\n    );\n\n  return (\n    <table\n      className={clsx(bem(\"table\"))}\n      {...getTableProps()}\n      data-testid={TESTCAFE_ID_CONTAINER_TABLE}\n    >\n      <thead className={bem(\"table__header\")}>\n        {headerGroups.map((headerGroup) => (\n          <tr\n            key={headerGroup.id}\n            className={bem(\"table__header-row\")}\n            {...headerGroup.getHeaderGroupProps()}\n          >\n            {headerGroup.headers.map((column) => (\n              <td\n                key={column.id}\n                className={bem(\n                  \"table__header-cell\",\n                  ...(column.modifiers || [])\n                )}\n                {...column.getHeaderProps(column.getSortByToggleProps())}\n              >\n                {column.render(\"Header\")}\n                {` `}\n                <SortedTableCarat\n                  sorted={column.isSorted}\n                  sortedDesc={column.isSortedDesc}\n                />\n              </td>\n            ))}\n          </tr>\n        ))}\n      </thead>\n      <tbody className={bem(\"table__body\")} {...getTableBodyProps()}>\n        {!data || !data.length ? (\n          <tr key=\"no-resources-found\" className={bem(\"table__body-row\")}>\n            <td rowSpan={3} className={bem(\"table__body-cell\")}>\n              No resources were found within this container.\n            </td>\n          </tr>\n        ) : null}\n\n        {rows.map((row) => {\n          prepareRow(row);\n          const details = row.original;\n          return (\n            <ContainerTableRow\n              key={details.iri}\n              resource={details}\n              container={containerPath}\n              preselected={\n                details.iri === resourcePath && !isContainer(resourcePath)\n              }\n            />\n          );\n        })}\n      </tbody>\n    </table>\n  );\n}\n\nContainerTable.propTypes = {\n  containerPath: T.string.isRequired,\n  data: T.arrayOf(T.object).isRequired,\n  resourcePath: T.string.isRequired,\n};\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport T from \"prop-types\";\nimport { getSourceUrl, isContainer } from \"@inrupt/solid-client\";\nimport { useSession } from \"@inrupt/solid-ui-react\";\nimport { renderResourceType } from \"../containerTableRow\";\nimport { useRedirectIfLoggedOut } from \"../../src/effects/auth\";\nimport { getResourceName } from \"../../src/solidClientHelpers/resource\";\nimport Spinner from \"../spinner\";\nimport PageHeader from \"../containerPageHeader\";\nimport ContainerDetails from \"../containerDetails\";\nimport { BookmarksContextProvider } from \"../../src/contexts/bookmarksContext\";\nimport AccessForbidden from \"../accessForbidden\";\nimport ResourceNotFound from \"../resourceNotFound\";\nimport useContainer from \"../../src/hooks/useContainer\";\nimport NotSupported from \"../notSupported\";\nimport { getContainerResourceUrlAll } from \"../../src/models/container\";\nimport { getContainerUrl } from \"../../src/stringHelpers\";\nimport ContainerSubHeader from \"../containerSubHeader\";\nimport usePodRootUri from \"../../src/hooks/usePodRootUri\";\nimport useAuthenticatedProfile from \"../../src/hooks/useAuthenticatedProfile\";\nimport AuthProfileLoadError from \"../authProfileLoadError\";\nimport NoControlWarning from \"../noControlWarning\";\nimport useResourceInfo from \"../../src/hooks/useResourceInfo\";\nimport useAccessControl from \"../../src/hooks/useAccessControl\";\nimport PodRootLoadError from \"../podRootLoadError\";\nimport ContainerTable from \"../containerTable\";\nimport { isHTTPError } from \"../../src/error\";\nimport { locationIsConnectedToProfile } from \"../../src/solidClientHelpers/profile\";\nimport { isContainerIri } from \"../../src/solidClientHelpers/utils\";\n\nfunction isNotAContainerResource(iri, container) {\n  if (!iri) return true;\n  return (\n    container && isContainerIri(iri) && getSourceUrl(container.dataset) !== iri\n  );\n}\n\nfunction renderContainerContent(isValidating, iri, data) {\n  return isValidating ? (\n    <Spinner />\n  ) : (\n    <ContainerTable\n      containerPath={getContainerUrl(iri)}\n      data={data}\n      resourcePath={iri}\n    />\n  );\n}\n\nfunction maybeRenderWarning(locationIsInUsersPod, noControlError, podRootIri) {\n  return (\n    locationIsInUsersPod &&\n    noControlError && <NoControlWarning podRootIri={podRootIri} />\n  );\n}\n\nexport default function Container({ iri }) {\n  useRedirectIfLoggedOut();\n  const { sessionRequestInProgress } = useSession();\n  const [resourceUrls, setResourceUrls] = useState(null);\n  const { data: authenticatedProfile, error: authenticatedProfileError } =\n    useAuthenticatedProfile();\n  const podRootIri = usePodRootUri(iri);\n  const [noControlError, setNoControlError] = useState(null);\n  const { data: podRootResourceInfo, error: podRootError } =\n    useResourceInfo(podRootIri);\n  const {\n    error: accessControlError,\n    isValidating: validatingPodRootAccessControl,\n  } = useAccessControl(podRootResourceInfo);\n\n  const {\n    data: container,\n    error: containerError,\n    mutate: update,\n    isValidating,\n  } = useContainer(iri);\n\n  useEffect(() => {\n    if (isNotAContainerResource(iri, container)) return;\n    const urls = container && getContainerResourceUrlAll(container);\n    setResourceUrls(urls);\n  }, [container, iri]);\n\n  useEffect(() => {\n    setNoControlError(accessControlError);\n  }, [accessControlError]);\n\n  const data = useMemo(() => {\n    if (!resourceUrls) {\n      return [];\n    }\n\n    return resourceUrls.map((rIri) => ({\n      iri: rIri,\n      name: getResourceName(rIri),\n      filename: getResourceName(rIri)?.toLowerCase(),\n      type: renderResourceType(rIri),\n    }));\n  }, [resourceUrls]);\n\n  if (!iri || isValidating || validatingPodRootAccessControl)\n    return <Spinner />;\n\n  if (containerError && isHTTPError(containerError.message, 401))\n    return <AccessForbidden />;\n  if (containerError && isHTTPError(containerError.message, 403))\n    return <AccessForbidden />;\n  if (containerError && isHTTPError(containerError.message, 404))\n    return <ResourceNotFound />;\n  if (containerError && !sessionRequestInProgress) return <NotSupported />;\n  if (authenticatedProfileError) return <AuthProfileLoadError />;\n\n  const locationIsInUsersPod = locationIsConnectedToProfile(\n    authenticatedProfile,\n    iri\n  );\n\n  if (podRootError && locationIsInUsersPod) return <PodRootLoadError />;\n\n  if (!resourceUrls || !container || !podRootIri) return <Spinner />;\n\n  const { dataset: containerDataset } = container;\n\n  if (containerDataset && !isContainer(containerDataset))\n    return <NotSupported />;\n\n  return (\n    <>\n      <BookmarksContextProvider>\n        <PageHeader />\n        <ContainerDetails update={update}>\n          <ContainerSubHeader update={update} resourceList={data} />\n          {maybeRenderWarning(locationIsInUsersPod, noControlError, podRootIri)}\n          {renderContainerContent(isValidating, iri, data)}\n        </ContainerDetails>\n      </BookmarksContextProvider>\n    </>\n  );\n}\n\nContainer.propTypes = {\n  iri: T.string,\n};\n\nContainer.defaultProps = {\n  iri: null,\n};\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport React from \"react\";\nimport { useRouter } from \"next/router\";\nimport { DetailsMenuProvider } from \"../../../src/contexts/detailsMenuContext\";\nimport { useRedirectIfLoggedOut } from \"../../../src/effects/auth\";\nimport ContainerView from \"../../container\";\nimport { PodLocationProvider } from \"../../../src/contexts/podLocationContext\";\n\nexport default function Resource() {\n  useRedirectIfLoggedOut();\n  const router = useRouter();\n\n  return (\n    <PodLocationProvider currentUri={router.query.iri}>\n      <DetailsMenuProvider>\n        <ContainerView iri={router.query.iri} />\n      </DetailsMenuProvider>\n    </PodLocationProvider>\n  );\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport React from \"react\";\nimport ResourcePage from \"../../components/pages/resource\";\n\nexport default function Resource() {\n  return <ResourcePage />;\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport useSWR from \"swr\";\nimport { useSession } from \"@inrupt/solid-ui-react\";\nimport { getContainerUrl } from \"../../stringHelpers\";\nimport { getContainer } from \"../../models/container\";\n\nexport default function useContainer(iri) {\n  const session = useSession();\n  const { sessionRequestInProgress } = session;\n  const url = getContainerUrl(iri);\n\n  async function fetchContainer(fetch) {\n    return getContainer(url, { fetch });\n  }\n\n  return useSWR(\n    [\"container\", url, sessionRequestInProgress],\n    async () => {\n      if (!url || sessionRequestInProgress) return null;\n      return fetchContainer(session.fetch);\n    },\n    { revalidateOnFocus: false, refreshInterval: 0, errorRetryInterval: 2000 }\n  );\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n// TODO: replace with solid-client functions\n// TODO: replace mock data with real data\n\n/* Model constants */\n\nexport const MOCK_PURPOSES_DESCRIPTIONS = {\n  \"https://example.com/SomeSpecificPurpose\": \"Some Specific Purpose\",\n  \"https://example.com/SomeSpecificPurposeA\": \"Another Purpose\",\n  \"https://example.com/SomeSpecificPurposeB\": \"A Different Purpose\",\n};\n\n/* Model functions */\n\nexport function getPurposeUrls(consentRequest) {\n  if (!consentRequest) return null;\n  return Array.isArray(consentRequest?.credentialSubject?.hasConsent)\n    ? consentRequest?.credentialSubject?.hasConsent[0].forPurpose // getting first item in array for now\n    : consentRequest?.credentialSubject?.hasConsent.forPurpose;\n}\n\nexport function getIssuanceDate(consentRequest) {\n  return consentRequest?.issuanceDate;\n}\n\nexport function getExpiryDate(consentRequest) {\n  return consentRequest?.expirationDate;\n}\n\nexport function getRequestedAccesses(consentRequest) {\n  return Array.isArray(consentRequest?.credentialSubject?.hasConsent)\n    ? consentRequest?.credentialSubject?.hasConsent\n    : [consentRequest?.credentialSubject?.hasConsent];\n}\n\nexport function getRequestedResourcesIris(sectionDetails) {\n  return sectionDetails.forPersonalData;\n}\n\nexport function getAccessMode(access) {\n  return access.mode;\n}\n\nexport function getRequestorWebId(consentRequest) {\n  return consentRequest?.credentialSubject?.id;\n}\n\nexport function getVcId(vc) {\n  return vc?.id;\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport { getIriAll, getSolidDataset, getThing } from \"@inrupt/solid-client\";\nimport { ldp } from \"rdf-namespaces\";\n\n/* Model functions */\n\nexport async function getContainer(url, { fetch }) {\n  const dataset = await getSolidDataset(url, { fetch });\n  const thing = getThing(dataset, url);\n  return { dataset, thing };\n}\n\nexport function getContainerResourceUrlAll({ thing }) {\n  if (!thing) return [];\n  return getIriAll(thing, ldp.contains);\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n// A helper function to generate a full redirect url to a given path, using the current\n// domain and protocol.\nexport function generateRedirectUrl(path) {\n  if (typeof window !== \"undefined\") {\n    const currentOrigin = window.location.origin;\n    return `${currentOrigin}/${path}`;\n  }\n\n  return \"\";\n}\n\nexport function getCurrentHostname() {\n  return typeof window !== \"undefined\" && window.location.hostname\n    ? window.location.hostname\n    : \"\";\n}\n\nexport function getCurrentOrigin() {\n  if (typeof window !== \"undefined\") {\n    const currentOrigin = window.location.origin;\n    return currentOrigin;\n  }\n\n  return \"\";\n}\n\nexport function hardRedirect(path) {\n  window.location.href = path;\n}\n\nexport function getFakeLocalStorage() {\n  let memoryStore = {};\n  return {\n    getItem: (key) => memoryStore[key] ?? null,\n    setItem: (key, value) => {\n      memoryStore[key] = value.toString();\n    },\n    removeItem: (key) => {\n      delete memoryStore[key];\n    },\n    clear: () => {\n      memoryStore = {};\n    },\n  };\n}\n\nexport function getLocalStorage() {\n  if (typeof window !== \"undefined\") {\n    return window.localStorage;\n  }\n  return getFakeLocalStorage();\n}\n\nexport function getFakeConsole() {\n  const noop = () => {};\n  return {\n    assert: noop,\n    clear: noop,\n    count: noop,\n    countReset: noop,\n    debug: noop,\n    dir: noop,\n    dirxml: noop,\n    error: noop,\n    group: noop,\n    groupEnd: noop,\n    info: noop,\n    log: noop,\n    table: noop,\n    time: noop,\n    timeEnd: noop,\n    timeLog: noop,\n    trace: noop,\n    warn: noop,\n  };\n}\n\nexport function getConsole() {\n  if (typeof window !== \"undefined\") {\n    return window.console;\n  }\n  return getFakeConsole();\n}\n","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/resource/[iri]\",\n      function () {\n        return require(\"private-next-pages/resource/[iri].jsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/resource/[iri]\"])\n      });\n    }\n  "],"names":["AGENT_TYPE_MAP","contacts","OWN_WEBID_ERROR_MESSAGE","permissions","isDuplicateContact","agentId","filter","p","webId","length","AgentSearchForm","type","buttonText","children","dirtyForm","onChange","onSubmit","inputId","useId","session","useSession","useState","dirtyWebIdField","setDirtyWebIdField","invalidWebIdField","existingWebId","setExistingWebId","isPodOwner","setIsPodOwner","handleSubmit","event","preventDefault","setupSubmitHandler","handleChange","target","value","setupOnChangeHandler","onBlur","setupOnBlurHandler","variant","id","pattern","title","required","defaultProps","theme","button","useStyles","makeStyles","createStyles","styles","DeleteButton","confirmationTitle","confirmationContent","dialogId","onDelete","successMessage","resourceName","buttonProps","bem","useBem","useContext","AlertContext","setAlertOpen","setMessage","setSeverity","confirmationSetup","setConfirmationSetup","ConfirmationDialogContext","confirmed","open","setContent","setOpen","setTitle","closeDialog","deleteResource","onDeleteError","handleDeleteResource","e","isHTTPError","toString","useEffect","className","clsx","onClick","infoTooltipContainer","display","infoButton","padding","minWidth","infoIcon","margin","spacing","color","palette","info","main","InfoTooltip","tooltipText","label","classes","Tooltip","arrow","Button","root","breakpoints","up","flexDirection","justifyContent","alignItems","paddingRight","borderBottom","grey","A100","paddingLeft","popoverWidth","popoverNavigator","borderRadius","maxWidth","width","down","left","TESTCAFE_ID_POD_NAVIGATE_BUTTON","PodNavigatorPopover","anchor","setDisplayNavigator","React","anchorEl","setAnchorEl","url","setUrl","router","useRouter","setDirtyForm","dirtyUrlField","setDirtyUrlField","invalidUrlField","fetch","Boolean","undefined","handleClose","closeHandler","getResourceInfo","resourceInfo","sourceUrl","getSourceIri","normalizeContainerUrl","push","resourceHref","submitHandler","Popover","paper","onClose","anchorOrigin","vertical","horizontal","transformOrigin","invalidMessage","placeholder","indicatorWidth","indicatorLabelWidth","indicatorLabelPaddingLeft","indicator","backgroundColor","background","minHeight","maxHeight","height","indicatorLabel","fontSize","typography","subtitle2","fontWeight","fontWeightBold","primary","textTransform","indicatorLabelYour","indicatorChevron","indicatorPrompt","cursor","text","secondary","border","borderTop","fontWeightRegular","borderLeft","indicatorName","boxSizing","overflowWrap","textAlign","htmlFontSize","textOverflow","overflow","whiteSpace","popoverMenu","list","menuItem","itemIcon","itemText","PodIndicator","setIndicatorWidth","displayNavigator","setIndicatorLabelWidth","tooltipOpen","setTooltipOpen","navigatorAnchor","setNavigatorAnchor","podIri","query","iri","loading","handleClick","currentTarget","clickHandler","ref","createRef","indicatorLabelRef","authenticatedProfile","useAuthenticatedProfile","data","isOwnPod","locationIsConnectedToProfile","current","offsetWidth","Skeleton","style","name","List","addText","removeText","profileName","ListItem","key","ListItemIcon","ListItemText","disableTypography","PopperProps","disablePortal","disableFocusListener","disableHoverListener","disableTouchListener","navigator","clipboard","writeText","setTimeout","ContainerPageHeader","podIndicator","isLoggedIn","actions","rules","accordionDetails","paddingBottom","centeredSection","headerSection","marginLeft","raw","formListItem","detailText","typeValue","agentInput","marginBottom","DeleteResourceButton","resourceIri","onDeleteCurrentContainer","alertError","useResourceInfo","resourceError","error","policiesContainerUrl","usePoliciesContainerUrl","message","handleDelete","isContainer","createDeleteHandler","downloadResource","parseUrl","pathname","replace","then","response","blob","file","a","document","createElement","href","window","URL","createObjectURL","setAttribute","body","appendChild","click","revokeObjectURL","removeChild","forceDownload","DownloadLink","props","isContainerIri","smallFontSize","container","position","listItem","paddingTop","selectionClosed","selectionOpen","summary","listStyle","flexWrap","checkbox","PermissionCheckbox","disabled","toLowerCase","FormControlLabel","control","Checkbox","checked","inputProps","arrowIcon","KeyboardArrowUp","KeyboardArrowDown","PermissionsForm","acl","propsDisabled","isMenu","locationIsInUsersPod","access","setAccess","formOpen","setFormOpen","setPermissionHandler","newAccess","permissionHandler","endIcon","displayPermissions","read","ACL","write","append","defaultValues","accessControl","accessControlType","AccessControlContext","createContext","AccessControlProvider","Provider","avatar","marginRight","flexGrow","action","alertBox","alertMessage","alignSelf","spinner","separator","TESTCAFE_ID_AGENT_WEB_ID","TESTCAFE_ID_PERMISSIONS_FORM_SUBMIT_BUTTON","AgentAccess","datasetIri","onLoading","permission","useFetchProfile","profile","profileError","authenticatedWebId","tempAccess","setTempAccess","dataset","DatasetContext","solidDataset","isLoading","setIsLoading","getSourceUrl","savePermissions","savePermissionsForAgent","saveHandler","handleRetryClick","fetchProfile","Alert","severity","CircularProgress","size","Avatar","alt","src","Typography","displayProfileName","usePermissions","setPermissions","getPermissions","normalizedPermissions","reverse","AgentAccessList","showAll","setShowAll","permissionsShown","slice","map","AddPermissionUsingWebIdButton","createAccessMap","setDisabled","setAgentId","newAgentId","changeHandler","isEmptyAccess","permissionFormInvalid","iconAfter","getContentAnchorEl","details","ResourceSharing","startLoading","setLoading","Accordion","defaultExpanded","AccordionSummary","expandIcon","ExpandMore","AccordionDetails","PERSON_CONTAINER","INDEX_FILE","NAME_EMAIL_INDEX_PREDICATE","vcardExtras","PERSON_CONTACT","indexFile","indexFilePredicate","contactTypeUrl","vcard","isOfType","contact","getUrl","getPersonAll","addressBook","getContactAll","getWebIdUrl","thing","getThing","webIdNodeUrl","webIdNode","foaf","createPersonContact","addressBookContainerUrl","containerUrl","normalizedContact","emails","addresses","telephones","uuid","joinPath","chain","createThing","t","addUrl","rdf","asUrl","createWebIdNode","rootAttributeFns","getSchemaOperations","mapSchema","person","defineThing","join","createSolidDataset","d","setThing","concat","savePerson","contactSchema","indexIri","newContact","saveSolidDatasetAt","personDataset","personThing","addStringNoLocale","fn","updatedAddressBook","personIndexUrl","getContactIndexUrl","addContactIndexToAddressBook","updateOrCreateDataset","indexDataset","personIndex","findPersonContactInAddressBook","people","getProfilesForPersonContacts","profiles","existingContact","getProfileForContact","personContactUrl","getResource","fetchedProfile","Promise","all","responses","getProfile","avatar__icon","icon","ResourceInfoContext","PropTypes","alias","inherited","vc","credentialSubject","hasConsent","mode","hasStatus","forPersonalData","forPurpose","isProvidedTo","inbox","issuanceDate","expirationDate","issuer","proof","created","domain","proofPurpose","proofValue","verificationMethod","nickname","types","isValidating","mutate","ResourceInfoProvider","swr","listItemText","body1","DIALOG_ID","RemoveButton","setLocalAccess","mutateResourceInfo","getResourceName","bypassDialog","setBypassDialog","handleRemoveAgent","agentWebId","policyName","PUBLIC_AGENT_PREDICATE","setRulePublic","AUTHENTICATED_AGENT_PREDICATE","setRuleAuthenticated","removeAgentFromPolicy","updatedAcr","handleRemovePermissions","setConfirmed","setConfirmText","textDecoration","ConsentDetailsButton","setOpenModal","getRequestedAccessesFromSignedVc","signedVc","Array","isArray","providedConsent","getRequestorWebIdFromSignedVc","AgentName","link","useThing","getStringNoLocale","rel","wordBreak","fontFamily","h2","wordWrap","textDecorationColor","h3","listItemIcon","listItemTitleText","listItemSecondaryText","marginTop","purpose","justifySelf","ConsentDetailsModal","handleCloseModal","openModal","errorComponent","setupErrorComponent","allowModes","modes","includes","accessDetails","getAcpAccessDetails","order","sortedAccessDetails","sort","b","indexOf","getExpiryDate","format","Date","getIssuanceDate","purposes","getPurposeUrlsFromSignedVc","Grid","CombinedDataProvider","datasetUrl","thingUrl","item","xs","sm","Image","profileIri","property","justify","dense","description","revokeAccessGrant","flexShrink","contrastText","webIdContainer","letterSpacing","lineHeight","webIdContainerGutters","webIdContainerRoot","listRoot","AgentAccessOptionsMenu","menuAnchorEl","setMenuAnchorEl","menuOpen","gutters","nameAndAvatarContainer","shareText","AgentProfileDetails","localPermission","localProfile","avatarProps","PUBLIC_AGENT","AUTHENTICATED_AGENT","getAvatarProps","spinnerContainer","loadingStateContainer","isLoadingProfile","setIsLoadingProfile","setLocalProfile","localProfileError","setLocalProfileError","localAccess","PUBLIC_AGENT_NAME","AUTHENTICATED_AGENT_NAME","fetchedProfileError","useAllPermissions","resourceUrl","permissionsError","setPermissionsError","checkVcValidity","isValidAccessGrant","getAccessGrantAll","errors","validVcs","useConsentBasedAccessForResource","consentBasedPermissions","normalizedConsentPermissions","useMemo","some","el","getPolicyDetailFromAccess","normalizeConsentBasedPermissions","getAllPermissionsForResource","defaultPermissionsContext","newAgentsWebIds","setNewAgentsWebIds","webIdsToDelete","setWebIdsToDelete","addingWebId","setAddingWebId","PermissionsContext","PermissionsContextProvider","h4","headerContainer","textContainer","titleAndButtonContainer","h1","iconViewer","POLICIES_TYPE_MAP","iconBlocked","iconEditor","iconSettings","PolicyHeader","isPolicyList","titlePlural","titleSingular","iconClassName","DescriptionComponent","searchBoxContainer","searchInput","font","iconSearch","AgentsSearchBar","handleFilterChange","IconButton","InputBase","useContactProfile","personThingUrl","getPersonThingUrl","useSWR","addAgentForm","agentPickerFormContainer","publicIcon","authenticatedIcon","AGENT_PREDICATE","updateThingForNewRow","newThing","AddAgentRow","index","contactsArrayLength","updateTemporaryRowThing","temporaryRowThing","setAgentWebId","agentName","setAgentName","agentAvatar","setAgentAvatar","displayedWebId","setDisplayedWebId","addingError","setAddingError","handleAddAgentsWebIds","TextField","helperText","InputProps","disableUnderline","icons","iconColor","AgentPickerEmptyState","iconBefore","dropdown","shape","menuItemText","fontStretch","iconCaret","top","CustomPolicyDropdown","setCustomPolicy","defaultValue","editing","selectedValue","setSelectedValue","Select","IconComponent","customPolicies","MenuItem","mobile","desktop","AddWebIdButton","WebIdCheckbox","toggleCheckbox","allPermissions","agentIdentifier","webIdsInPermissions","getWebIdsFromPermissions","webIdsFromInheritedPermissions","getWebIdsFromInheritedPermissions","useCallback","agentIdentifierValue","removeExistingAgentFromOtherPolicies","newPolicy","existingPermission","ep","handleSaveContact","addWebIdButtonContainer","tableContainer","common","white","tabsAndAddButtonContainer","agentPickerTable","caption","tableHeader","modalTabsContainer","canShareTableHeader","buttonsContainer","bottom","cancelButton","submitAgentsButton","capitalizedText","emptyStateTextContainer","mobileOnly","desktopOnly","AgentPickerModal","advancedSharing","customPolicy","header","saveText","useAddressBook","useContacts","GROUP_CONTACT","contactsArray","setContactsArray","globalFilter","setGlobalFilter","handleSubmitNewWebIds","saveAgentToContacts","existingPoliciesPromiseFactories","addPermissionsPromiseFactories","addAgentToPolicy","removePermissionsPromiseFactories","addAgentsToContactsPromiseFactories","serializePromises","args","res","latestAcr","addressBookDataset","publicAgent","createPublicAgent","authenticatedAgent","createAuthenticatedAgent","contactsArrayForTable","unshift","handleAddRow","emptyThing","contactsForTable","tabIndex","Table","things","TableColumn","dataType","row","filterable","filteredNewWebIds","filteredWebIdsToDelete","forwardRef","AddAgentButton","setEditing","editText","Modal","isCustomPolicy","PolicyActionButton","disableRemoveButton","isNamedPolicy","policyType","getPolicyType","policyToDelete","setPolicyToDelete","policyTitle","webIds","removeAllAgents","handleRemoveAllAgents","disabledText","removeButtonLabel","Error","defaultPtops","accordion","rounded","boxShadow","permissionsContainer","body2","showAllButtonContainer","showAllButton","expanded","showAllText","showAllButtonIcon","AgentAccessTable","tablePermissions","setTablePermissions","policyPermissions","setPolicyPermissions","permissionsWithProfiles","setPermissionsWithProfiles","completed","usePermissionsWithProfiles","filteredPermissions","publicAndAuth","PUBLIC_AGENT_TYPE","AUTHENTICATED_AGENT_TYPE","sorted","localeCompare","selectedTabValue","columns","accessor","modifiers","useTable","initialState","sortBy","desc","useFilters","useGlobalFilter","getTableProps","getTableBodyProps","rows","prepareRow","setFilter","emptyStateText","original","sharingButtonContainer","sharingButton","AdvancedSharingButton","namedPolicies","useLocalStorage","initialValue","localStorage","getLocalStorage","console","getConsole","getItem","JSON","parse","storedValue","setStoredValue","setValue","setItem","content","getAccordionKey","ResourceDetails","getIriPath","displayName","getContentType","actionMenuBem","ActionMenu","actionsAccordion","setActionsAccordion","detailsAccordion","setDetailsAccordion","permissionsAccordion","setPermissionsAccordion","sharingAccordion","setSharingAccordion","Divider","isWac","isAcp","DetailsLoading","handleCloseDrawer","setMenuOpen","asPath","stripQueryParams","ResourceDrawer","onUpdate","DetailsMenuContext","resourceInfoSwrResponse","revalidateOnFocus","shouldRetryOnError","accessControlResponse","useAccessControl","accessControlData","accessControlError","closeDrawer","close","DatasetProvider","ContainerDetails","update","drawer","parentContainerUrl","getParentContainerUrl","encodeURIComponent","handleRedirectToParentContainer","AccessForbidden","ResourceNotFound","NotSupported","gap","Crumb","crumb","isLink","uri","Breadcrumbs","podLocation","PodLocationContext","breadcrumbsList","baseUri","uriParts","currentUri","substr","split","crumbs","part","decodeURIComponent","ContainerDetailsButton","DETAILS_CONTEXT_ACTIONS","DUPLICATE_DIALOG_ID","normalizeSafeFileName","fileName","handleSaveResource","onSave","setIsUploading","uploadedFile","overwriteFile","AddFileButton","resourceList","isUploading","setFile","useRef","saveResource","saveUploadedFile","existingFile","handleUploadedFile","onFileSelect","files","find","handleFileSelect","htmlFor","onKeyUp","determineFinalUrl","folders","currentName","determineFinalName","n","found","folder","baseName","AddFolderFlyout","folderName","setFolderName","dirtyNameField","setDirtyNameField","endsWith","options","createContainerAt","handleFolderSubmit","invalidNameField","ContainerSubHeader","pageHeaderAction","buttonBem","AuthProfileLoadError","NoControlWarning","podRootIri","appUrl","setAppUrl","Message","sessionStorage","location","origin","prominent","hasIcon","closeButtonProps","PodRootLoadError","ContainerTable","containerPath","resourcePath","disableSortBy","Header","defaultCanSort","useSortBy","headerGroups","headerGroup","getHeaderGroupProps","headers","column","getHeaderProps","getSortByToggleProps","render","isSorted","sortedDesc","isSortedDesc","rowSpan","resource","preselected","Container","useRedirectIfLoggedOut","sessionRequestInProgress","resourceUrls","setResourceUrls","authenticatedProfileError","usePodRootUri","noControlError","setNoControlError","podRootResourceInfo","podRootError","validatingPodRootAccessControl","useContainer","containerError","isNotAContainerResource","urls","getContainerResourceUrlAll","rIri","filename","renderResourceType","containerDataset","maybeRenderWarning","getContainerUrl","renderContainerContent","Resource","fetchContainer","getContainer","refreshInterval","errorRetryInterval","getPurposeUrls","consentRequest","getRequestedAccesses","getRequestedResourcesIris","sectionDetails","getAccessMode","getRequestorWebId","getVcId","getSolidDataset","getIriAll","ldp","generateRedirectUrl","path","currentOrigin","getCurrentHostname","hostname","getCurrentOrigin","__NEXT_P"],"sourceRoot":""}