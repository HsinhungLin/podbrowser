{"version":3,"file":"static/chunks/pages/contacts/add-33ab723d909e26b0.js","mappings":"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","sources":["webpack://_N_E/./components/agentSearchForm/index.jsx","webpack://_N_E/./components/addContact/styles.js","webpack://_N_E/./components/addContact/index.jsx","webpack://_N_E/./pages/contacts/add.jsx","webpack://_N_E/./src/contexts/detailsMenuContext/index.jsx","webpack://_N_E/./src/effects/auth/index.js","webpack://_N_E/./src/hooks/useAddressBookOld/index.js","webpack://_N_E/./src/hooks/useContactsContainerUrl/index.js","webpack://_N_E/./src/hooks/useContactsOld/index.js","webpack://_N_E/?716d","webpack://_N_E/./node_modules/react-id-generator/lib/index.js"],"sourcesContent":["/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport React, { useState } from \"react\";\nimport { useId } from \"react-id-generator\";\nimport T from \"prop-types\";\nimport {\n  Form,\n  Button,\n  Label,\n  Message,\n  SimpleInput,\n} from \"@inrupt/prism-react-components\";\nimport { useSession } from \"@inrupt/solid-ui-react\";\nimport { isPodOwner } from \"../../src/solidClientHelpers/utils\";\n\nexport const TESTCAFE_ID_ADD_AGENT_BUTTON = \"add-agent-button\";\n\nconst AGENT_TYPE_MAP = {\n  contacts: {\n    OWN_WEBID_ERROR_MESSAGE: \"You cannot add yourself as a contact.\",\n  },\n  permissions: {\n    OWN_WEBID_ERROR_MESSAGE: \"You cannot overwrite your own permissions.\",\n  },\n};\n\nfunction isDuplicateContact(permissions, agentId) {\n  return permissions.filter((p) => p.webId === agentId).length;\n}\n\nexport function setupSubmitHandler(\n  agentId,\n  session,\n  setIsPodOwner,\n  permissions = [],\n  setExistingWebId,\n  onSubmit\n) {\n  return async (event) => {\n    event.preventDefault();\n\n    if (isPodOwner(session, agentId)) {\n      setIsPodOwner(true);\n      return;\n    }\n    /* ignoring next block because it is affecting the coverage and we're removing this code soon */\n    /* istanbul ignore next */\n    if (isDuplicateContact(permissions, agentId)) {\n      setExistingWebId(agentId);\n      return;\n    }\n\n    await onSubmit(agentId);\n  };\n}\n\nexport function setupOnChangeHandler(\n  onChange,\n  setIsPodOwner,\n  setExistingWebId\n) {\n  return (event) => {\n    onChange(event.target.value);\n    setIsPodOwner(false);\n    setExistingWebId(null);\n  };\n}\n\nexport function setupOnBlurHandler(setDirtyWebIdField) {\n  return () => setDirtyWebIdField(true);\n}\n\nexport default function AgentSearchForm({\n  type,\n  buttonText,\n  children,\n  dirtyForm,\n  onChange,\n  onSubmit,\n  permissions,\n  agentId,\n}) {\n  const inputId = useId();\n  const { session } = useSession();\n  const [dirtyWebIdField, setDirtyWebIdField] = useState(dirtyForm);\n  const invalidWebIdField = !agentId && (dirtyForm || dirtyWebIdField);\n  const [existingWebId, setExistingWebId] = useState(null);\n  const [isPodOwner, setIsPodOwner] = useState(false);\n  const handleSubmit = setupSubmitHandler(\n    agentId,\n    session,\n    setIsPodOwner,\n    permissions,\n    setExistingWebId,\n    onSubmit\n  );\n  const handleChange = setupOnChangeHandler(\n    onChange,\n    setIsPodOwner,\n    setExistingWebId\n  );\n  const onBlur = setupOnBlurHandler(setDirtyWebIdField);\n\n  /* ignoring next block because it is affecting the coverage and we're removing this code soon */\n  /* istanbul ignore next */\n  return (\n    <Form onSubmit={handleSubmit}>\n      <Label>WebID</Label>\n\n      {invalidWebIdField && (\n        <Message variant=\"invalid\">Please provide a valid WebID</Message>\n      )}\n      {isPodOwner && (\n        <Message variant=\"invalid\">\n          {AGENT_TYPE_MAP[type].OWN_WEBID_ERROR_MESSAGE}\n        </Message>\n      )}\n      {existingWebId && (\n        <Message variant=\"invalid\">\n          {`The WebID ${existingWebId} is already in your permissions.`}\n        </Message>\n      )}\n      <SimpleInput\n        id={inputId}\n        onChange={handleChange}\n        value={agentId}\n        type=\"url\"\n        pattern=\"https:\\/\\/\\S+\"\n        title=\"Must be a valid URL that starts with https:// and does not contain spaces\"\n        onBlur={onBlur}\n        required={invalidWebIdField}\n        variant={existingWebId || isPodOwner ? \"invalid\" : null}\n      />\n      {children}\n      <Button type=\"submit\" data-testid={TESTCAFE_ID_ADD_AGENT_BUTTON}>\n        {buttonText}\n      </Button>\n    </Form>\n  );\n}\n\nAgentSearchForm.propTypes = {\n  buttonText: T.string,\n  children: T.node,\n  dirtyForm: T.bool,\n  onChange: T.func,\n  onSubmit: T.func,\n  permissions: T.arrayOf(T.object),\n  agentId: T.string,\n  type: T.string,\n};\n\nAgentSearchForm.defaultProps = {\n  buttonText: \"Add\",\n  children: null,\n  dirtyForm: false,\n  onChange: () => {},\n  onSubmit: () => {},\n  permissions: [],\n  agentId: \"\",\n  type: \"permissions\",\n};\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport { createStyles } from \"@solid/lit-prism-patterns\";\n\nconst styles = (theme) => {\n  return createStyles(theme, [\"container\", \"table\"], {\n    \"container-view--menu-open\": {\n      [theme.breakpoints.up(\"sm\")]: {\n        paddingRight: \"50%\",\n      },\n      [theme.breakpoints.up(\"md\")]: {\n        paddingRight: \"33.33%\",\n      },\n      [theme.breakpoints.up(\"lg\")]: {\n        paddingRight: \"25%\",\n      },\n    },\n    \"container-menu\": {\n      display: \"flex\",\n      justifyContent: \"space-between\",\n      margin: theme.spacing(1, 0, 0),\n    },\n  });\n};\n\nexport default styles;\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport React, { useContext, useState } from \"react\";\nimport { createStyles, makeStyles } from \"@material-ui/styles\";\nimport { useBem } from \"@solid/lit-prism-patterns\";\nimport { BackToNav, BackToNavLink } from \"@inrupt/prism-react-components\";\nimport clsx from \"clsx\";\nimport { useSession } from \"@inrupt/solid-ui-react\";\nimport { foaf } from \"rdf-namespaces\";\nimport Spinner from \"../spinner\";\nimport { findContactInAddressBook, saveContact } from \"../../src/addressBook\";\nimport useAddressBookOld from \"../../src/hooks/useAddressBookOld\";\nimport AgentSearchForm from \"../agentSearchForm\";\nimport DetailsMenuContext from \"../../src/contexts/detailsMenuContext\";\nimport AlertContext from \"../../src/contexts/alertContext\";\nimport { useRedirectIfLoggedOut } from \"../../src/effects/auth\";\nimport styles from \"./styles\";\nimport { fetchProfile } from \"../../src/solidClientHelpers/profile\";\nimport { isPodOwner } from \"../../src/solidClientHelpers/utils\";\nimport useContactsOld from \"../../src/hooks/useContactsOld\";\nimport useContactsContainerUrl from \"../../src/hooks/useContactsContainerUrl\";\n\nconst useStyles = makeStyles((theme) => createStyles(styles(theme)));\nexport const EXISTING_WEBID_ERROR_MESSAGE =\n  \"That WebID is already in your contacts\";\nexport const FETCH_PROFILE_FAILED_ERROR_MESSAGE =\n  \"Unable to retrieve a profile from the given WebID\";\n\nexport function handleSubmit({\n  addressBook,\n  addressBookContainerUrl,\n  setAgentId,\n  setIsLoading,\n  alertError,\n  alertSuccess,\n  session,\n  setDirtyForm,\n  peopleMutate,\n  people,\n}) {\n  return async (iri) => {\n    const { fetch } = session;\n    setDirtyForm(true);\n    if (!iri) return;\n    if (isPodOwner(session, iri)) {\n      alertError(\"You cannot add yourself as a contact\");\n    }\n\n    setIsLoading(true);\n\n    try {\n      const { name, webId, types } = await fetchProfile(iri, fetch);\n      const existingContact = await findContactInAddressBook(\n        people,\n        webId,\n        fetch\n      );\n\n      if (existingContact) {\n        alertError(EXISTING_WEBID_ERROR_MESSAGE);\n        setIsLoading(false);\n        return;\n      }\n\n      const contact = { webId, fn: name || null };\n      const { response, error } = await saveContact(\n        addressBook,\n        addressBookContainerUrl,\n        contact,\n        types,\n        fetch\n      );\n\n      if (error) alertError(error);\n      if (response) {\n        alertSuccess(`${contact.fn || webId} was added to your contacts`);\n        setAgentId(\"\");\n        peopleMutate();\n      }\n      setDirtyForm(false);\n    } catch (error) {\n      alertError(FETCH_PROFILE_FAILED_ERROR_MESSAGE);\n    }\n    setIsLoading(false);\n    setDirtyForm(false);\n  };\n}\n\nexport default function AddContact() {\n  useRedirectIfLoggedOut();\n  const { alertSuccess, alertError } = useContext(AlertContext);\n  const { session } = useSession();\n  const { menuOpen } = useContext(DetailsMenuContext);\n  const bem = useBem(useStyles());\n  const containerClass = clsx(\n    bem(\"container\"),\n    bem(\"container-view\", menuOpen ? \"menu-open\" : null)\n  );\n  const addressBookContainerUrl = useContactsContainerUrl();\n  const [addressBook] = useAddressBookOld();\n  const [isLoading, setIsLoading] = useState(false);\n  const [agentId, setAgentId] = useState(\"\");\n  const [dirtyForm, setDirtyForm] = useState(false);\n  const {\n    data: people,\n    error: peopleError,\n    mutate: peopleMutate,\n  } = useContactsOld(addressBook, foaf.Person);\n\n  if (peopleError) alertError(peopleError);\n\n  if (isLoading) return <Spinner />;\n\n  const onSubmit = handleSubmit({\n    addressBook,\n    addressBookContainerUrl,\n    setAgentId,\n    setIsLoading,\n    alertError,\n    alertSuccess,\n    session,\n    setDirtyForm,\n    peopleMutate,\n    people,\n  });\n\n  const handleChange = (newValue) => setAgentId(newValue);\n\n  const link = <BackToNavLink href=\"/contacts\">contacts</BackToNavLink>;\n\n  return (\n    <div className={containerClass}>\n      <BackToNav link={link} />\n\n      <h3>Add new contact</h3>\n\n      <AgentSearchForm\n        type=\"contacts\"\n        onChange={handleChange}\n        onSubmit={onSubmit}\n        buttonText=\"Add Contact\"\n        agentId={agentId}\n        dirtyForm={dirtyForm}\n      />\n    </div>\n  );\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport React from \"react\";\nimport AddContactPage from \"../../components/addContact\";\n\nexport default function Contacts() {\n  return <AddContactPage />;\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport React, { createContext, useState } from \"react\";\nimport T from \"prop-types\";\n\nexport const DETAILS_CONTEXT_ACTIONS = {\n  DETAILS: \"details\",\n};\n\nexport const defaultDetailsMenuContext = {\n  menuOpen: false,\n  setMenuOpen: (open) => open,\n};\nconst DetailsMenuContext = createContext(defaultDetailsMenuContext);\n\nfunction DetailsMenuProvider({ children }) {\n  const [menuOpen, setMenuOpen] = useState(false);\n\n  return (\n    <DetailsMenuContext.Provider\n      value={{\n        menuOpen,\n        setMenuOpen,\n      }}\n    >\n      {children}\n    </DetailsMenuContext.Provider>\n  );\n}\n\nDetailsMenuProvider.propTypes = {\n  children: T.node,\n};\n\nDetailsMenuProvider.defaultProps = {\n  children: null,\n};\n\nexport { DetailsMenuProvider };\nexport default DetailsMenuContext;\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport { useEffect } from \"react\";\nimport Router, { useRouter } from \"next/router\";\nimport { useSession } from \"@inrupt/solid-ui-react\";\n\nexport const SESSION_STATES = {\n  LOGGED_IN: \"LOGGED_IN\",\n  LOGGED_OUT: \"LOGGED_OUT\",\n};\n\nexport async function redirectBasedOnSessionState(\n  sessionIsLoggedIn,\n  sessionRequestInProgress,\n  redirectIfSessionState,\n  location\n) {\n  if (sessionRequestInProgress) {\n    return;\n  }\n\n  if (\n    sessionIsLoggedIn &&\n    redirectIfSessionState === SESSION_STATES.LOGGED_IN\n  ) {\n    await Router.push(location);\n  }\n\n  if (\n    !sessionIsLoggedIn &&\n    redirectIfSessionState === SESSION_STATES.LOGGED_OUT\n  ) {\n    await Router.push(location);\n  }\n}\n\nexport function useRedirectIfLoggedOut(location = \"/login\") {\n  const { session, sessionRequestInProgress } = useSession();\n\n  useEffect(() => {\n    if (session.info.isLoggedIn) return;\n    redirectBasedOnSessionState(\n      session.info.isLoggedIn,\n      sessionRequestInProgress,\n      SESSION_STATES.LOGGED_OUT,\n      location\n    );\n  });\n}\n\nexport function useRedirectIfLoggedIn(location = \"/\") {\n  const { session, sessionRequestInProgress } = useSession();\n  const router = useRouter();\n  useEffect(() => {\n    if (\n      (session.info.isLoggedIn && !router.asPath.includes(\"login\")) ||\n      sessionRequestInProgress\n    )\n      return;\n    redirectBasedOnSessionState(\n      session.info.isLoggedIn,\n      sessionRequestInProgress,\n      SESSION_STATES.LOGGED_IN,\n      location\n    );\n  }, [session, router, location, sessionRequestInProgress]);\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport { useEffect, useState } from \"react\";\nimport { useSession } from \"@inrupt/solid-ui-react\";\nimport useAuthenticatedProfile from \"../useAuthenticatedProfile\";\nimport { getContactsIndexIri, saveNewAddressBook } from \"../../addressBook\";\nimport { getResource } from \"../../solidClientHelpers/resource\";\nimport { ERROR_CODES, isHTTPError } from \"../../error\";\nimport useContactsContainerUrl from \"../useContactsContainerUrl\";\n\nexport default function useAddressBookOld() {\n  const [addressBook, setAddressBook] = useState(null);\n  const [error, setError] = useState(null);\n  const { session } = useSession();\n  const { data: profile } = useAuthenticatedProfile();\n  const addressBookContainerUrl = useContactsContainerUrl();\n\n  useEffect(() => {\n    if (!session.info.isLoggedIn || !profile || !addressBookContainerUrl) {\n      return;\n    }\n    const { webId } = profile;\n    const { fetch } = session;\n    const contactsIndexIri = getContactsIndexIri(addressBookContainerUrl);\n\n    (async () => {\n      const { response: existingAddressBook, error: existingError } =\n        await getResource(contactsIndexIri, fetch);\n\n      if (existingAddressBook) {\n        setAddressBook(existingAddressBook.dataset);\n        return;\n      }\n\n      if (existingError && isHTTPError(existingError, ERROR_CODES.NOT_FOUND)) {\n        const { response: newAddressBook, error: newError } =\n          await saveNewAddressBook(\n            {\n              iri: addressBookContainerUrl,\n              owner: webId,\n            },\n            fetch\n          );\n        if (newError) {\n          setError(newError);\n          return;\n        }\n        setAddressBook(newAddressBook.index);\n        return;\n      }\n      setError(existingError);\n    })();\n  }, [session, profile, addressBookContainerUrl]);\n\n  return [addressBook, error];\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport { useEffect, useState } from \"react\";\nimport { useSession } from \"@inrupt/solid-ui-react\";\nimport useAuthenticatedProfile from \"../useAuthenticatedProfile\";\nimport { contactsContainerIri } from \"../../addressBook\";\n\nexport default function useContactsContainerUrl() {\n  const [addressBookContainer, setAddressBookContainer] = useState(null);\n  const { session } = useSession();\n  const { data: profile } = useAuthenticatedProfile();\n\n  useEffect(() => {\n    if (!session.info.isLoggedIn || !profile) return;\n    const { pods } = profile;\n    setAddressBookContainer(contactsContainerIri(pods[0]));\n  }, [profile, session.info.isLoggedIn]);\n\n  return addressBookContainer;\n}\n","/**\n * Copyright 2020 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport useSWR from \"swr\";\nimport { useSession } from \"@inrupt/solid-ui-react\";\nimport {\n  getContacts,\n  getIndexDatasetFromAddressBook,\n  TYPE_MAP,\n} from \"../../addressBook\";\n\nexport default function useContactsOld(addressBook, type) {\n  const {\n    session: { fetch },\n  } = useSession();\n\n  return useSWR(\n    addressBook,\n    async () => {\n      const { indexFilePredicate } = TYPE_MAP[type];\n      const { contactTypeIri } = TYPE_MAP[type];\n      const { response: indexFileDataset } =\n        await getIndexDatasetFromAddressBook(\n          addressBook,\n          indexFilePredicate,\n          fetch\n        );\n      const { response, error } = await getContacts(\n        indexFileDataset,\n        contactTypeIri,\n        fetch\n      );\n      if (error) {\n        throw error;\n      }\n      return response;\n    },\n    { refreshInterval: 0 }\n  );\n}\n","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/contacts/add\",\n      function () {\n        return require(\"private-next-pages/contacts/add.jsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/contacts/add\"])\n      });\n    }\n  ","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar React = _interopDefault(require('react'));\n\nvar globalPrefix = \"id\";\nvar lastId = 0;\nfunction nextId(localPrefix) {\n  lastId++;\n  return \"\".concat(localPrefix || globalPrefix).concat(lastId);\n}\nvar resetId = function resetId() {\n  lastId = 0;\n};\nvar setPrefix = function setPrefix(newPrefix) {\n  globalPrefix = newPrefix;\n};\n\nvar getIds = function getIds(count, prefix) {\n  var ids = [];\n\n  for (var i = 0; i < count; i++) {\n    ids.push(nextId(prefix));\n  }\n\n  return ids;\n};\n\nfunction usePrevious(value) {\n  var ref = React.useRef();\n  React.useEffect(function () {\n    ref.current = value;\n  });\n  return ref.current;\n}\n\nfunction useId() {\n  var count = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n  var prefix = arguments.length > 1 ? arguments[1] : undefined;\n  var idsListRef = React.useRef([]);\n  var prevCount = usePrevious(count);\n  var prevPrefix = usePrevious(prefix);\n\n  if (count !== prevCount || prevPrefix !== prefix) {\n    idsListRef.current = getIds(count, prefix);\n  }\n\n  return idsListRef.current;\n}\n\nexports.default = nextId;\nexports.resetId = resetId;\nexports.setPrefix = setPrefix;\nexports.useId = useId;\n"],"names":["AGENT_TYPE_MAP","contacts","OWN_WEBID_ERROR_MESSAGE","permissions","isDuplicateContact","agentId","filter","p","webId","length","AgentSearchForm","type","buttonText","children","dirtyForm","onChange","onSubmit","inputId","useId","session","useSession","useState","dirtyWebIdField","setDirtyWebIdField","invalidWebIdField","existingWebId","setExistingWebId","isPodOwner","setIsPodOwner","handleSubmit","event","preventDefault","setupSubmitHandler","handleChange","target","value","setupOnChangeHandler","onBlur","setupOnBlurHandler","variant","id","pattern","title","required","defaultProps","theme","createStyles","breakpoints","up","paddingRight","display","justifyContent","margin","spacing","useStyles","makeStyles","styles","AddContact","useRedirectIfLoggedOut","useContext","AlertContext","alertSuccess","alertError","menuOpen","DetailsMenuContext","bem","useBem","containerClass","clsx","addressBookContainerUrl","useContactsContainerUrl","useAddressBookOld","addressBook","isLoading","setIsLoading","setAgentId","setDirtyForm","useContactsOld","foaf","people","data","peopleError","error","peopleMutate","mutate","iri","fetch","fetchProfile","name","types","findContactInAddressBook","contact","fn","saveContact","response","link","href","className","newValue","Contacts","DETAILS_CONTEXT_ACTIONS","DETAILS","defaultDetailsMenuContext","setMenuOpen","open","createContext","DetailsMenuProvider","Provider","SESSION_STATES","redirectBasedOnSessionState","sessionIsLoggedIn","sessionRequestInProgress","redirectIfSessionState","location","Router","useEffect","info","isLoggedIn","useRedirectIfLoggedIn","router","useRouter","asPath","includes","setAddressBook","setError","profile","useAuthenticatedProfile","contactsIndexIri","getContactsIndexIri","getResource","existingAddressBook","existingError","dataset","isHTTPError","ERROR_CODES","saveNewAddressBook","owner","newAddressBook","newError","index","addressBookContainer","setAddressBookContainer","pods","contactsContainerIri","useSWR","indexFilePredicate","TYPE_MAP","contactTypeIri","getIndexDatasetFromAddressBook","indexFileDataset","getContacts","refreshInterval","window","__NEXT_P","push","ex","React","globalPrefix","lastId","nextId","localPrefix","concat","getIds","count","prefix","ids","i","usePrevious","ref","useRef","current","exports","arguments","undefined","idsListRef","prevCount","prevPrefix"],"sourceRoot":""}