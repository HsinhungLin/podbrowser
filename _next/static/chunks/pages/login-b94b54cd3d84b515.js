(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{14844:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(67294),i=n(35117),o=n(868),a=n(282),l=n(54303),s=n(86010);var c=(0,n(11719).Z)((function(e){return(0,i.Z)(function(e){return(0,l.createStyles)(e,["icons","button"],{infoTooltipContainer:{display:"flex"},infoButton:{padding:0,minWidth:"max-content"},infoIcon:{margin:e.spacing(.4),color:e.palette.info.main}})}(e))}));function u(e){var t=e.tooltipText,n=e.label,i=e.className,u=c(),p=(0,l.useBem)(c());return r.createElement("div",{className:(0,s.Z)(u.infoTooltipContainer,i)},n&&r.createElement("span",{"data-testid":"info-button-label"},n),r.createElement(o.ZP,{title:t,arrow:!0},r.createElement(a.Z,{classes:{root:u.infoButton}},r.createElement("i",{className:(0,s.Z)(p("icon-info"),p("icon"),u.infoIcon),"aria-label":"Info"}))))}u.defaultProps={className:null,label:null}},58366:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return K}});var r=n(67294),i=n(11719),o=n(10150),a=n(29773),l=n(86010),s=n(54303),c=n(23934),u=n(40478),p=n(14844),d=n(36864),f=n(27812),g=n(59499),m=n(50029),v=n(87794),h=n.n(v),b=n(8920),y=n(64436),_=n(39803),x=n(30585),E=n(37547),w=n(59737),S=n(70936);var k=n(55612);var N="Inrupt PodBrowser",P=n(83454);function I(){return{devClientId:P.env.NEXT_PUBLIC_DEV_CLIENT_ID||"",host:P.env.NEXT_PUBLIC_APP_HOST||"",loginRedirect:"/"}}function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var B=[{logo:"solid-logo.svg",label:"Solidcommunity.net",iri:"https://solidcommunity.net/"},{logo:"solid-logo.svg",label:"Solidweb.org",iri:"https://solidweb.org/"},{logo:"inrupt_logo-2020.svg",label:"inrupt.net",iri:"https://inrupt.net/"}],T=(0,w.mR)(),D={clientName:N,clientId:(0,S.a8)(T)?I().devClientId:"".concat((0,w.il)(),"/api/app")},C=(0,i.Z)((function(e){return(0,o.Z)(function(e){return(0,s.createStyles)(e,["button"],{"provider-login__form":{width:"100%"},"provider-login__wrapper":{display:"flex",position:"relative",width:"100%",flexDirection:"row",alignItems:"center"},"provider-login__button":{display:"flex",whiteSpace:"nowrap",minWidth:"max-content",position:"absolute",top:0,margin:e.spacing(0,.4)},selectionBox:{width:"80%"}})}(e))}));function L(e){var t=e.defaultError,n=e.provider,i=(0,s.useBem)(C()),o=C(),l=(0,u.useSession)().login,c=(0,r.useState)(t),p=c[0],g=c[1],v=(0,b.Z)(),S=(0,r.useState)((null===n||void 0===n?void 0:n.iri)||""),N=S[0],P=S[1],I=(0,r.createRef)();(0,r.useEffect)((function(){var e;n&&(null===(e=I.current)||void 0===e||e.querySelector("input").focus())}),[n,I]);var Z,T=function(e,t){return function(n,r){n.preventDefault(),t(null),"string"===typeof r?r.startsWith("https://")||r.startsWith("http://")?e(r):e("https://".concat(r)):e((null===r||void 0===r?void 0:r.iri)||null)}}(P,g),L=function(e,t){return function(){var n=(0,m.Z)(h().mark((function n(r,i){return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),n.prev=1,n.next=4,e(O(O({},D),{},{oidcIssuer:i}));case 4:t(null),n.next=12;break;case 7:if(n.prev=7,n.t0=n.catch(1),r.target.value||i){n.next=11;break}return n.abrupt("return");case 11:t(n.t0);case 12:case"end":return n.stop()}}),n,null,[[1,7]])})));return function(e,t){return n.apply(this,arguments)}}()}(l,g),R=function(e){return function(t){e(t)}}(g),j=n?[n].concat((0,f.Z)(B)):B,U=(0,r.useState)((null===n||void 0===n?void 0:n.label)||""),z=U[0],W=U[1],A=function(e){W(e.target.value)};return r.createElement("form",{onSubmit:function(e){return L(e,N)},className:i("provider-login__form")},r.createElement("div",{className:i("provider-login__wrapper")},r.createElement(y.Z,{classes:{root:o.selectionBox},error:!!p},r.createElement(E.ZP,{onChange:T,id:"provider-select",freeSolo:!0,options:j,getOptionLabel:function(e){var t;return null!==(t=e.label)&&void 0!==t?t:e},value:(null===n||void 0===n?void 0:n.iri)||N,autoSelect:!0,renderOption:function(e){return r.createElement(r.Fragment,null,e.logo?r.createElement("img",{src:"../".concat(e.logo),width:20,style:{margin:"1rem"},alt:e.label}):r.createElement("div",{style:{minWidth:"20px",padding:"1.6rem"}}),e.label)},renderInput:function(e){return r.createElement(_.Z,(0,d.Z)({onChange:A},e,{error:!!p,margin:"none",variant:"outlined",type:"url","aria-describedby":p?"login-error-text":null,"data-testid":"login-field",ref:I,value:z,onKeyUp:function(e){"Enter"===e.key&&L(e,N)}}))}}),p?r.createElement(x.Z,{id:"login-error-text",style:{marginBottom:v.spacing(1)}},(Z=p,(0,k.xT)(Z,k.QN.INVALID_IDP)?"This URL is not a Solid Identity Provider.":(0,k.xT)(Z,k.QN.HANDLER_NOT_FOUND)?"Please fill out a valid Solid Identity Provider.":"We were unable to log in with this URL.".concat(" Please fill out a valid Solid Identity Provider."))):null),r.createElement(u.LoginButton,{oidcIssuer:N,redirectUrl:(0,w.Gm)(""),authOptions:D,onError:R},r.createElement(a.zx,{variant:"primary","data-testid":"go-button",type:"submit",className:i("provider-login__button"),onClick:function(){return P(z)}},"Go"))))}L.defaultProps={defaultError:null,provider:null};var R=n(11163);function j(){var e=(0,r.useState)(null),t=e[0],n=e[1],i=function(e){var t=(0,r.useState)(),n=t[0],i=t[1],o=(0,R.useRouter)();return(0,r.useEffect)((function(){i(Array.isArray(o.query[e])?o.query[e][0]:o.query[e])}),[e,o]),n}("idp");return(0,r.useEffect)((function(){if(i)try{var e=new URL(i);n({iri:i,label:e.hostname})}catch(t){n(null)}else n(null)}),[i]),t}var U=(0,w.mR)(),z=((0,S.a8)(U)?I().devClientId:"".concat((0,w.il)(),"/api/app"),(0,i.Z)((function(e){return(0,o.Z)(function(e){var t;return(0,s.createStyles)(e,["button"],{separator__wrap:{height:"2rem",margin:e.spacing(2.4,1.2),position:"relative",boxSizing:"border-box",marginBottom:e.spacing(3.2)},"separator__centre-line":{textAlign:"center",position:"absolute",top:"50%",left:"50%",width:"100%",transform:"translate(-50%, -50%)","&:before":{content:'""',position:"absolute",width:"100%",height:1,top:"50%",left:0,zIndex:-1,background:e.palette.grey.A100},"& span":{fontSize:"0.75rem",fontFamily:e.typography.body1.fontFamily,color:e.palette.grey[700],textTransform:"uppercase",backgroundColor:e.palette.background.default,padding:"0.5rem 1rem",display:"inline-block"}},"provider-login-container":{display:"none",paddingTop:e.spacing(1.6)},"provider-login-container--visible":{display:"flex",flexDirection:"column",alignItems:"flex-start"},"info-button":{fontSize:e.typography.button.fontSize},"login-form":(t={},(0,g.Z)(t,e.breakpoints.up("sm"),{maxWidth:400,padding:e.spacing(3.2)}),(0,g.Z)(t,"textAlign","center"),(0,g.Z)(t,"fontStyle","normal"),(0,g.Z)(t,"marginBottom",e.spacing(2.4)),(0,g.Z)(t,"background",e.palette.background.default),(0,g.Z)(t,"borderRadius",e.shape.borderRadius),(0,g.Z)(t,"padding",e.spacing(2.4)),(0,g.Z)(t,"boxShadow","0px 2px 4px 0px rgba(0,0,0,0.3)"),(0,g.Z)(t,"& h3",{fontFamily:e.typography.h3.fontFamily,textTransform:"uppercase",fontSize:"0.75rem"}),t),"login-form__button":{width:"100%"},"login-form__logo":{marginBottom:e.spacing(2.4)}})}(e))}))),W={clientName:N};function A(){var e=(0,s.useBem)(z()),t=j(),n=(0,r.useState)(!!t),i=n[0],o=n[1],l=i?"caret-up":"caret-down";return(0,r.useEffect)((function(){t&&o(!0)}),[t]),r.createElement("div",{className:e("login-form")},r.createElement("h3",{"data-testid":"login-title"},"Sign in with"),r.createElement("img",{width:160,src:"/pod-spaces-logo.svg",alt:"Inrupt PodBrowser",className:e("login-form__logo")}),r.createElement(u.LoginButton,{oidcIssuer:"https://broker.pod.inrupt.com/",redirectUrl:(0,w.Gm)(""),authOptions:W},r.createElement(a.zx,{variant:"primary","data-testid":"login-button",type:"submit",className:e("login-form__button")},"Sign In")),r.createElement("div",{className:e("separator__wrap")},r.createElement("h2",{className:e("separator__centre-line")},r.createElement("span",null,"Or"))),r.createElement(a.zx,{variant:"secondary",iconAfter:l,onClick:function(){return o(!i)},"data-testid":"other-providers-button"},"Sign in with other provider"),i&&r.createElement("div",{className:e("provider-login-container","visible")},r.createElement(p.Z,{label:"Where is your Pod hosted?",tooltipText:"This is where you signed up for a Solid Pod",className:e("info-button")}),r.createElement(L,{provider:t})))}var F="#0D6796",G=function(e){return(0,s.createStyles)(e,["content"],{"login-page":(0,g.Z)({textAlign:"center",flexGrow:1,flexShrink:0,backgroundColor:"#FCFEFF",color:e.palette.grey[800],boxSizing:"border-box",height:"100%",paddingTop:e.spacing(2),fontStyle:"italic",display:"flex",flexDirection:"column",alignItems:"center",position:"relative","& p":{marginBottom:e.spacing(3)}},e.breakpoints.up("sm"),{padding:0,paddingTop:e.spacing(2)}),"login-page__title":{fontStyle:"normal",color:F,fontSize:"2.3125rem",letterSpacing:1.4,lineHeight:"40px",margin:e.spacing(.7,0)},"login-page__text":{marginTop:0},"links-container":(0,g.Z)({fontStyle:"normal",width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",padding:e.spacing(0,3.2),paddingBottom:e.spacing(12.8),marginBottom:e.spacing(2)},e.breakpoints.up("sm"),{minWidth:420,maxWidth:600,padding:0,paddingBottom:e.spacing(12.8)}),"links-container__text":{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginBottom:e.spacing(6.4),paddingTop:e.spacing(2.4)},"links-container__list":{display:"flex",flexDirection:"row",justifyContent:"space-between"},"links-container__button":{padding:e.spacing(0,1)},"links-container__link":{color:F}})},q=(0,i.Z)((function(e){return(0,o.Z)(G(e))})),H="tos-link",X=[{href:"https://inrupt.com/terms-of-service",text:"Terms of Use",rel:"noreferrer",target:"_blank","data-testid":H},{href:"https://inrupt.com/privacy-policy/",text:"Privacy Policy",rel:"noreferrer",target:"_blank","data-testid":H},{href:"https://inrupt.atlassian.net/servicedesk/customer/portal/7",text:"Help",rel:"noreferrer",target:"_blank","data-testid":H}];function V(e){var t=e.history,n=t.slice(0,t.indexOf("/login")).filter((function(e){return!e.startsWith("/?code=")})),i=n[n.length-1],o=i||"/";(0,c.U2)(o);var u=(0,s.useBem)(q()),p=a.zx.useBem();return(0,r.useEffect)((function(){localStorage&&i&&localStorage.setItem("previousPage",i)}),[i]),r.createElement("div",{className:u("login-page")},r.createElement("h1",{className:(0,l.Z)(u("content-h1"),u("login-page__title"))},"PodBrowser"),r.createElement("p",{className:u("login-page__text")},"View and manage data in your Pod"),r.createElement(A,null),r.createElement("div",{className:u("links-container")},r.createElement("div",{className:u("links-container__text")},"Need a Pod?",r.createElement("a",{href:"https://signup.pod.inrupt.com/",variant:"secondary",className:(0,l.Z)(u("links-container__button"),p("button","secondary"))},"Sign up")),r.createElement("div",{className:u("links-container__list")},X.map((function(e){var t=e.href,n=e.text,i=e.target,o=e.rel;return r.createElement("a",{key:n,className:u("links-container__link"),href:t,target:i,rel:o},n)})))))}function K(e){var t=e.history;return r.createElement(V,{history:t})}V.defaultProps={history:[]},K.defaultProps={history:[]}},23934:function(e,t,n){"use strict";n.d(t,{KW:function(){return f},U2:function(){return g}});var r=n(50029),i=n(87794),o=n.n(i),a=n(67294),l=n(11163),s=n(40478),c="LOGGED_IN",u="LOGGED_OUT";function p(e,t,n,r){return d.apply(this,arguments)}function d(){return(d=(0,r.Z)(o().mark((function e(t,n,r,i){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=2;break}return e.abrupt("return");case 2:if(!t||r!==c){e.next=5;break}return e.next=5,l.default.push(i);case 5:if(t||r!==u){e.next=8;break}return e.next=8,l.default.push(i);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/login",t=(0,s.useSession)(),n=t.session,r=t.sessionRequestInProgress;(0,a.useEffect)((function(){n.info.isLoggedIn||p(n.info.isLoggedIn,r,u,e)}))}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=(0,s.useSession)(),n=t.session,r=t.sessionRequestInProgress,i=(0,l.useRouter)();(0,a.useEffect)((function(){n.info.isLoggedIn&&!i.asPath.includes("login")||r||p(n.info.isLoggedIn,r,c,e)}),[n,i,e,r])}},59737:function(e,t,n){"use strict";function r(e){var t=window.location.origin;return"".concat(t,"/").concat(e)}function i(){return window.location.hostname?window.location.hostname:""}function o(){return window.location.origin}function a(){return window.localStorage}function l(){return window.console}n.d(t,{Gm:function(){return r},mR:function(){return i},il:function(){return o},$o:function(){return a},dr:function(){return l}})},44140:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return n(58366)}])}},function(e){e.O(0,[224,823,868,547,888,774,179],(function(){return t=44140,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=login-b94b54cd3d84b515.js.map