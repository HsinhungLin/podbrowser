"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[385],{20829:function(t,e,n){n.d(e,{ZP:function(){return Z}});var r=n(67294),c=n(11719),i=n(35117),a=n(52663),s=n(66083),u=n(29525),o=n(7212),l=n(66856),h=n(29773),f=n(7513),p=n(54303);var d=(0,c.Z)((function(t){return(0,i.Z)(function(t){return(0,p.createStyles)(t,["icons","button"],{dialog:{width:640},dialogActions:{padding:t.spacing(2.4)},dialogTitle:{fontSize:t.typography.h2.fontSize,fontWeight:t.typography.h2.fontWeight},dialogText:{fontWeight:t.typography.body.fontWeight,fontFamily:t.typography.body.fontFamily},dangerButton:{backgroundColor:t.palette.error.main}})}(t))}));function Z(){var t=d(),e=(0,r.useContext)(f.ZP),n=e.open,c=e.title,i=e.content,p=e.customContentWrapper,Z=e.setConfirmed,v=e.cancelText,y=e.confirmText,g=e.omitCancelButton,A=e.isDangerousAction;return r.createElement(a.Z,{classes:{paperWidthFalse:t.dialog},"data-testid":"confirmation-dialog",maxWidth:!1,"aria-labelledby":"confirmation-dialog",open:!!n},c&&r.createElement(s.Z,{"data-testid":"confirmation-dialog-title",disableTypography:!0,classes:{root:t.dialogTitle}},c),r.createElement(u.Z,null,!p&&r.createElement(o.Z,{"data-testid":"confirmation-dialog-content",classes:{root:t.dialogText},id:"alert-confirmation-dialog"},i),p&&r.createElement("div",null,i)),r.createElement(l.Z,{classes:{root:t.dialogActions}},!g&&r.createElement(h.zx,{variant:"secondary","data-testid":"confirmation-cancel-button",className:t.cancelButton,autoFocus:!0,onClick:function(){return Z(!1)}},v||"Cancel"),r.createElement(h.zx,{"data-testid":"confirm-button",className:A?t.dangerButton:t.submitAgentsButton,type:"submit",onClick:function(){return Z(!0)}},y||"Confirm")))}},14179:function(t,e,n){n.d(e,{nY:function(){return M},yz:function(){return U},yW:function(){return ot},gM:function(){return lt},ZP:function(){return gt}});var r=n(92777),c=n(82262),i=n(76078),a=n(82227),s=n(50029),u=n(16835),o=n(27812),l=n(59499),h=n(87794),f=n.n(h),p=n(31958),d=n(29754),Z=n(95287),v=n(9749),y=n(76403),g=n(68504),A=n(69873),x=n(15259),m=n(28e3),k=n(827),w=n(55612),b=n(70766),P=n(35878),O=n(59439),C={titleConsent:"wants to add or remove people from",iconName:"user"};function E(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t={},(0,l.Z)(t,A.c9.READ.key,e),(0,l.Z)(t,A.c9.WRITE.key,n),(0,l.Z)(t,A.c9.APPEND.key,r),t}var R={editors:E(!0,!0),viewers:E(!0),viewAndAdd:E(!0,!1,!0),editOnly:E(!1,!0),addOnly:E(!1,!1,!0)},M=function(t){var e=t.read,n=t.write,r=t.append,c=t.control,i=(e?"read":n&&"write")||r&&"append"||c&&"control";return O.lH[i]},U=function(t,e){var n=t.read,r=t.write,c=t.append,i=t.control;return n&&r&&!c?O.O6.editors[e]:!n||r||c?n&&c&&!r?O.O6.viewAndAdd[e]:!c||r||n?!r||c||n?i?C[e]:null:O.O6.editOnly[e]:O.O6.addOnly[e]:O.O6.viewers[e]};function T(t,e,n,r){return r?t.apply(void 0,(0,o.Z)(n)):e.apply(void 0,(0,o.Z)(n))}var F=function(t,e,n){return T(p.O.getRule,d.h.getMatcher,[t,e],n)},S=function(t,e){return T(p.O.createRule,d.h.createMatcher,[t],e)},W=function(t,e){return T(p.O.getAllOfRuleUrlAll,d.h.getAllOfMatcherUrlAll,[t],e)},N=function(t,e,n){return T(p.O.setAllOfRuleUrl,d.h.setAllOfMatcherUrl,[t,e],n)},I=function(t,e,n){return T(p.O.addAllOfRuleUrl,d.h.addAllOfMatcherUrl,[t,e],n)},L=function(t,e,n){return T(p.O.removeAllOfRuleUrl,d.h.removeAllOfMatcherUrl,[t,e],n)},z=function(t,e){return T(p.O.getAllowModes,d.h.getAllowModes,[t],e)},D=function(t,e,n){return T(p.O.setAllowModes,d.h.setAllowModes,[t,e],n)};function _(t,e){return t?E(t.read||e.read,t.write||e.write,t.append||e.append):e}function Y(t){return(0,A.zA)(t.apply.read,t.apply.write,t.apply.append,t.access.read&&t.access.write)}function q(t,e,n){var r,c,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=null!==(r=t[e])&&void 0!==r?r:{webId:e};return n&&(a.type=n),a.inherited=i,a.acp=null!==(c=a.acp)&&void 0!==c?c:{apply:E(),access:E()},a}function G(t,e){var n=d.h.getPolicy(t,e);if(n)return{policy:n,dataset:t};var r=d.h.createPolicy(e);return{policy:r,dataset:d.h.setPolicy(t,r)}}function B(t,e,n,r){var c=t.map((function(t){return F(n,t,r)})).filter((function(t){return!!t}));if(0===c.length){var i="".concat((0,Z.j5)(e)).concat(r?"Rule":"Matcher");return{existing:!1,matchers:[S(i,r)]}}return{existing:!0,matchers:c}}function j(t,e,n,r,c){var i=B(W(t,c),t,e,c),a=i.existing,s=function(t,e){return t.find((function(t){return d.h.getAgentAll(t).find((function(t){return t===e}))}))||t[0]}(i.matchers,n),u=d.h.getAgentAll(s).indexOf(n),o=s;r&&-1===u&&(o=d.h.addAgent(s,n)),r||-1===u||(o=d.h.removeAgent(s,n));var l=(0,Z.lY)(e,o);return{policy:a?N(t,o,c):I(t,o,c),dataset:l}}function H(t,e,n,r){var c=B(W(e,r),e,t,r),i=c.existing,a=c.matchers.map((function(t){return n?d.h.setPublic(t):d.h.removePublic(t)})),s=a.map((function(e){return(0,Z.lY)(t,e)})),o=(0,u.Z)(s,1)[0],l=i?a.map((function(t){return N(e,t,r)})):a.map((function(t){return I(e,t,r)}));return{policy:(0,u.Z)(l,1)[0],dataset:o}}function V(t,e,n,r){var c=B(W(e,r),e,t,r),i=c.existing,a=c.matchers.map((function(t){return n?d.h.setAuthenticated(t):d.h.removeAuthenticated(t)})),s=a.map((function(e){return(0,Z.lY)(t,e)})),o=(0,u.Z)(s,1)[0],l=i?a.map((function(t){return N(e,t,r)})):a.map((function(t){return I(e,t,r)}));return{policy:(0,u.Z)(l,1)[0],dataset:o}}function X(t,e,n){var r=d.h.getPolicy(e,t);if(!r)return{modes:{},agents:[]};var c=z(r,n),i=W(r,n).map((function(t){return F(e,t,n)})).filter((function(t){return null!==t})),a=i.reduce((function(t,e){return t.concat(d.h.getAgentAll(e))}),[]),s=i.map((function(t){return d.h.hasAuthenticated(t)}));(0,u.Z)(s,1)[0]&&a.unshift(P.Ux);var o=i.map((function(t){return d.h.hasPublic(t)}));return(0,u.Z)(o,1)[0]&&a.unshift(b.fL),{policyUrl:t,modes:c,agents:a}}function J(t){return t===b.fL?b.Ir:t===P.Ux?P.Hb:"agent"}function K(t,e,n){return t.map((function(t){return d.h.getPolicy(e,t)})).filter((function(t){return!!t})).map((function(t){return{modes:z(t,n),agents:W(t,n).map((function(t){return F(e,t,n)})).reduce((function(t,e){return t.concat(d.h.getAgentAll(e))}),[])}}))}function Q(t,e,n){return function(t,e){return T(p.O.getRuleAll,d.h.getMatcherAll,[t],e)}(e,n).reduce((function(e,n){var r=d.h.removeAgent(n,t);return(0,Z.lY)(e,r)}),e)}function $(t,e,n,r,c,i){return(0,x.tS)(G(t,e),(function(t){var e=t.policy,n=t.dataset;return{policy:D(e,c,i),dataset:n}}),(function(t){return j(t.policy,t.dataset,n,r,i)}),(function(t){var e=t.policy,n=t.dataset;return d.h.setPolicy(n,e)}))}function tt(t,e){return"".concat(t,"#").concat(e,"AccessPolicy")}function et(t,e){return"".concat(t,"#").concat(e,"ApplyPolicy")}function nt(t,e){return"".concat(t,"#").concat(e,"Policy")}function rt(t,e,n){return d.h.getPolicyUrlAll(e).includes(t)?{changed:n,acr:e}:{changed:!0,acr:d.h.addAcrPolicyUrl(e,t)}}function ct(t,e,n,r){var c=function(t,e){return T(p.O.getMemberPolicyUrlAll,d.h.getMemberPolicyUrlAll,[t],e)}(e,r),i=c.find((function(e){return t===e}));if(i)return{changed:n,acr:e};var a=function(t,e,n){return T(p.O.addMemberPolicyUrl,d.h.addMemberPolicyUrl,[t,e],n)}(e,t,r);return{changed:n||!i,acr:a}}function it(t,e,n,r){var c=(r?p.O.getPolicyUrlAll(e):d.h.getPolicyUrlAll(e)).find((function(e){return t===e}));return c?{changed:n,acr:e}:{changed:n||!c,acr:r?p.O.addPolicyUrl(e,t):d.h.addPolicyUrl(e,t)}}function at(t,e,n){return(n?p.O.getPolicyUrlAll(t):d.h.getPolicyUrlAll(t)).filter((function(t){return t.startsWith(e)}))}function st(t,e,n,r){return ut.apply(this,arguments)}function ut(){return ut=(0,s.Z)(f().mark((function t(e,n,r,c){var i,a;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((i=at(e,n,c)).length){t.next=3;break}return t.abrupt("return",[]);case 3:return t.prev=3,t.next=6,Promise.all(i.map(function(){var t=(0,s.Z)(f().mark((function t(e){var n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,v.OE)(e,{fetch:r});case 2:return n=t.sent,t.abrupt("return",X(e,n,c));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 6:return a=t.sent,t.abrupt("return",a.reduce((function(t,r){var i=r.policyUrl,a=r.modes,s=r.agents;return t.concat(s.map((function(t){var r=Y({apply:_(E(),a),access:E()}),s=U(r,"name"),u=(0,k.o4)(e,n,s,c),o=c?nt(u,s):i;return{type:J(t),acl:r,alias:s,webId:t,inherited:i!==o}})))}),[]));case 10:if(t.prev=10,t.t0=t.catch(3),!(0,w.ky)(t.t0.message,403)&&!(0,w.ky)(t.t0.message,404)){t.next=14;break}return t.abrupt("return",[]);case 14:throw t.t0;case 15:case"end":return t.stop()}}),t,null,[[3,10]])}))),ut.apply(this,arguments)}function ot(t){return(t||[]).map((function(t){return t.webId}))}function lt(t){return ot((t||[]).filter((function(t){return t.inherited})))}function ht(t,e){return ft.apply(this,arguments)}function ft(){return(ft=(0,s.Z)(f().mark((function t(e,n){var r,c,i;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.h.getSolidDatasetWithAcr(e,{fetch:n});case 3:if(r=t.sent,i=(c={acr:r,changed:!1}).acr,!c.changed){t.next=8;break}return t.next=8,d.h.saveAcrFor(i,{fetch:n});case 8:t.next=14;break;case 10:if(t.prev=10,t.t0=t.catch(0),(0,w.ky)(t.t0.message,404)){t.next=14;break}throw t.t0;case 14:case"end":return t.stop()}}),t,null,[[0,10]])})))).apply(this,arguments)}var pt=new WeakMap,dt=new WeakMap,Zt=new WeakMap,vt=new WeakMap,yt=new WeakMap,gt=function(){function t(e,n,c,i){(0,r.Z)(this,t),pt.set(this,{writable:!0,value:void 0}),dt.set(this,{writable:!0,value:void 0}),Zt.set(this,{writable:!0,value:void 0}),vt.set(this,{writable:!0,value:void 0}),yt.set(this,{writable:!0,value:void 0}),(0,l.Z)(this,"setRulePublic",this.setMatcherPublic),(0,l.Z)(this,"setRuleAuthenticated",this.setMatcherAuthenticated),(0,a.Z)(this,pt,e),(0,a.Z)(this,dt,(0,k.D5)(e,n,i)),(0,a.Z)(this,Zt,n),(0,a.Z)(this,vt,c),(0,a.Z)(this,yt,i)}return(0,c.Z)(t,[{key:"getAllPermissionsForResource",value:function(){var t=(0,s.Z)(f().mark((function t(){var e;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,st((0,i.Z)(this,pt),(0,i.Z)(this,Zt),(0,i.Z)(this,vt),(0,i.Z)(this,yt));case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getPermissionsForPolicy",value:function(){var t=(0,s.Z)(f().mark((function t(e){var n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,st((0,i.Z)(this,pt),(0,i.Z)(this,Zt),(0,i.Z)(this,vt),(0,i.Z)(this,yt));case 2:return n=t.sent,t.abrupt("return",n.filter((function(t){return t.alias===e})));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getPermissions",value:function(){var t=(0,s.Z)(f().mark((function t(){var e,n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={},t.prev=1,t.next=4,(0,v.OE)((0,i.Z)(this,dt),{fetch:(0,i.Z)(this,vt)});case 4:return n=t.sent,K([et((0,i.Z)(this,dt),"read"),et((0,i.Z)(this,dt),"write"),et((0,i.Z)(this,dt),"append")],n,(0,i.Z)(this,yt)).forEach((function(t){var n=t.modes;return t.agents.forEach((function(t){var r=q(e,t);r.acp.apply=_(r.acp.apply,n),e[t]=r}))})),K([tt((0,i.Z)(this,dt),"control")],n,(0,i.Z)(this,yt)).forEach((function(t){var n=t.modes;return t.agents.forEach((function(t){var r=q(e,t);r.acp.access=_(r.acp.access,n),e[t]=r}))})),t.abrupt("return",Object.values(e).map((function(t){var e=t.acp,n=t.webId,r=Y(e);return{acl:r,alias:(0,A.V_)(r),webId:n}})));case 10:if(t.prev=10,t.t0=t.catch(1),!(0,w.ky)(t.t0.message,403)&&!(0,w.ky)(t.t0.message,404)){t.next=14;break}return t.abrupt("return",[]);case 14:throw t.t0;case 15:case"end":return t.stop()}}),t,this,[[1,10]])})));return function(){return t.apply(this,arguments)}}()},{key:"saveApplyPolicyForOriginalResource",value:function(t,e,n,r,c){var a=this,s=et((0,i.Z)(this,dt),r);return(0,x.tS)(t,(function(t){return $(t,s,e,n[r],c,(0,i.Z)(a,yt))}))}},{key:"saveAccessPolicyForOriginalResource",value:function(t,e,n){var r=this,c=tt((0,i.Z)(this,dt),"control"),a=E(!0,!0);return(0,x.tS)(t,(function(t){return $(t,c,e,n.control,a,(0,i.Z)(r,yt))}))}},{key:"saveApplyPolicyForPolicyResource",value:function(t,e,n){var r=this,c=et((0,i.Z)(this,dt),"control"),a=E(!0,!0);return(0,x.tS)(t,(function(t){return $(t,c,e,n.control,a,(0,i.Z)(r,yt))}))}},{key:"updatePermissionsForAgent",value:function(t,e,n){var r=this;return(0,x.tS)(n,(function(n){return r.saveApplyPolicyForOriginalResource(n,t,e,"read",E(!0))}),(function(n){return r.saveApplyPolicyForOriginalResource(n,t,e,"write",E(!1,!0))}),(function(n){return r.saveApplyPolicyForOriginalResource(n,t,e,"append",E(!1,!1,!0))}),(function(n){return r.saveAccessPolicyForOriginalResource(n,t,e)}),(function(n){return r.saveApplyPolicyForPolicyResource(n,t,e)}))}},{key:"linkPoliciesToAcr",value:function(){var t=(0,s.Z)(f().mark((function t(e,n){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=8;break}return t.t0=a.Z,t.t1=this,t.t2=pt,t.next=6,d.h.saveAcrFor(n,{fetch:(0,i.Z)(this,vt)});case 6:t.t3=t.sent,(0,t.t0)(t.t1,t.t2,t.t3);case 8:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"ensureAccessControlAllNamedPolicies",value:function(){var t=(0,s.Z)(f().mark((function t(){var e,n,r,c,a,s,u,o=this;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=(0,k.o4)((0,i.Z)(this,pt),(0,i.Z)(this,Zt),"editors",(0,i.Z)(this,yt)),n=(0,i.Z)(this,yt)?nt(e,"editors"):"".concat((0,i.Z)(this,dt),"editors"),r=(0,k.o4)((0,i.Z)(this,pt),(0,i.Z)(this,Zt),"viewers",(0,i.Z)(this,yt)),c=(0,i.Z)(this,yt)?nt(r,"viewers"):"".concat((0,i.Z)(this,dt),"viewers"),a=(0,x.tS)({acr:(0,i.Z)(this,pt),changed:!1},(function(t){var e=t.acr,r=t.changed;return it(n,e,r,(0,i.Z)(o,yt))}),(function(t){var e=t.acr,n=t.changed;return it(c,e,n,(0,i.Z)(o,yt))}),(function(t){var e=t.acr,r=t.changed;return ct(n,e,r,(0,i.Z)(o,yt))}),(function(t){var e=t.acr,n=t.changed;return ct(c,e,n,(0,i.Z)(o,yt))})),s=a.acr,u=a.changed,!(0,i.Z)(this,yt)){t.next=14;break}return t.next=8,ht(e,(0,i.Z)(this,vt));case 8:return t.next=10,ht(r,(0,i.Z)(this,vt));case 10:return t.next=12,this.linkPoliciesToAcr(u,s);case 12:t.next=20;break;case 14:return t.next=16,this.linkPoliciesToAcr(u,s);case 16:return t.next=18,ht(e,(0,i.Z)(this,vt));case 18:return t.next=20,ht(r,(0,i.Z)(this,vt));case 20:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"ensureAccessControlAllCustomPolicies",value:function(){var t=(0,s.Z)(f().mark((function t(){var e,n,r,c,a,s,u,o,l,h=this;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=(0,k.o4)((0,i.Z)(this,pt),(0,i.Z)(this,Zt),"viewAndAdd",(0,i.Z)(this,yt)),n=(0,i.Z)(this,yt)?nt(e,"viewAndAdd"):"".concat((0,i.Z)(this,dt),"viewAndAdd"),r=(0,k.o4)((0,i.Z)(this,pt),(0,i.Z)(this,Zt),"editOnly",(0,i.Z)(this,yt)),c=(0,i.Z)(this,yt)?nt(r,"editOnly"):"".concat((0,i.Z)(this,dt),"editOnly"),a=(0,k.o4)((0,i.Z)(this,pt),(0,i.Z)(this,Zt),"addOnly",(0,i.Z)(this,yt)),s=(0,i.Z)(this,yt)?nt(a,"addOnly"):"".concat((0,i.Z)(this,dt),"addOnly"),u=(0,x.tS)({acr:(0,i.Z)(this,pt),changed:!1},(function(t){var e=t.acr,r=t.changed;return it(n,e,r,(0,i.Z)(h,yt))}),(function(t){var e=t.acr,n=t.changed;return it(c,e,n,(0,i.Z)(h,yt))}),(function(t){var e=t.acr,n=t.changed;return it(s,e,n,(0,i.Z)(h,yt))}),(function(t){var e=t.acr,r=t.changed;return ct(n,e,r,(0,i.Z)(h,yt))}),(function(t){var e=t.acr,n=t.changed;return ct(c,e,n,(0,i.Z)(h,yt))}),(function(t){var e=t.acr,n=t.changed;return ct(s,e,n,(0,i.Z)(h,yt))})),o=u.acr,l=u.changed,!(0,i.Z)(this,yt)){t.next=18;break}return t.next=10,ht(e,(0,i.Z)(this,vt));case 10:return t.next=12,ht(r,(0,i.Z)(this,vt));case 12:return t.next=14,ht(a,(0,i.Z)(this,vt));case 14:return t.next=16,this.linkPoliciesToAcr(l,o);case 16:t.next=26;break;case 18:return t.next=20,this.linkPoliciesToAcr(l,o);case 20:return t.next=22,ht(e,(0,i.Z)(this,vt));case 22:return t.next=24,ht(r,(0,i.Z)(this,vt));case 24:return t.next=26,ht(a,(0,i.Z)(this,vt));case 26:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"ensureAccessControlPolicyAll",value:function(){var t=(0,s.Z)(f().mark((function t(e){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,k.Te)(e)?this.ensureAccessControlAllCustomPolicies():this.ensureAccessControlAllNamedPolicies());case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"ensureAccessControlAll",value:function(){var t=(0,s.Z)(f().mark((function t(){var e,n,r,c,a,s,u,o,l,h,p,Z=this;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=et((0,i.Z)(this,dt),"read"),n=et((0,i.Z)(this,dt),"write"),r=et((0,i.Z)(this,dt),"append"),c=tt((0,i.Z)(this,dt),"control"),a=(0,x.tS)({acr:(0,i.Z)(this,pt),changed:!1},(function(t){var n=t.acr,r=t.changed;return it(e,n,r,(0,i.Z)(Z,yt))}),(function(t){var e=t.acr,r=t.changed;return it(n,e,r,(0,i.Z)(Z,yt))}),(function(t){var e=t.acr,n=t.changed;return it(r,e,n,(0,i.Z)(Z,yt))}),(function(t){var e=t.acr,n=t.changed;return rt(c,e,n)})),s=a.acr,u=a.changed,(0,i.Z)(this,yt)){t.next=8;break}return t.next=8,this.linkPoliciesToAcr(u,s);case 8:return t.next=10,d.h.getSolidDatasetWithAcr((0,i.Z)(this,dt),{fetch:(0,i.Z)(this,vt)});case 10:if(o=t.sent,l=et((0,i.Z)(this,dt),"control"),h=(0,x.tS)({acr:o,changed:!1},(function(t){var e=t.acr,n=t.changed;return it(l,e,n,(0,i.Z)(Z,yt))})),p=h.acr,!h.changed){t.next=21;break}return t.prev=14,t.next=17,d.h.saveAcrFor(p,{fetch:(0,i.Z)(this,vt)});case 17:t.next=21;break;case 19:t.prev=19,t.t0=t.catch(14);case 21:if(!(0,i.Z)(this,yt)){t.next=24;break}return t.next=24,this.linkPoliciesToAcr(u,s);case 24:case"end":return t.stop()}}),t,this,[[14,19]])})));return function(){return t.apply(this,arguments)}}()},{key:"setMatcherPublic",value:function(){var t=(0,s.Z)(f().mark((function t(e,n){var r,c,a,s,u,o,l,h,p,Z,y=this;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(0,k.o4)((0,i.Z)(this,pt),(0,i.Z)(this,Zt),e,(0,i.Z)(this,yt)),c=(0,x.Ct)(),a=c.respond,s=c.error,t.next=4,(0,m.zc)(r,(0,i.Z)(this,vt));case 4:if(u=t.sent,o=u.response,!(l=u.error)){t.next=9;break}return t.abrupt("return",s(l));case 9:if(h=(0,i.Z)(this,yt)?nt(r,e):"".concat((0,i.Z)(this,dt)).concat(e),p=R[e],Z=(0,x.tS)(G(o,h),(function(t){var e=t.policy,n=t.dataset;return{policy:D(e,p,(0,i.Z)(y,yt)),dataset:n}}),(function(t){var e=t.policy;return H(t.dataset,e,n,(0,i.Z)(y,yt))}),(function(t){var e=t.policy,n=t.dataset;return d.h.setPolicy(n,e)})),!(0,i.Z)(this,yt)){t.next=19;break}return t.next=15,(0,v.ek)(r,Z,{fetch:(0,i.Z)(this,vt)});case 15:return t.next=17,this.ensureAccessControlPolicyAll(e);case 17:t.next=23;break;case 19:return t.next=21,this.ensureAccessControlPolicyAll(e);case 21:return t.next=23,(0,v.ek)(r,Z,{fetch:(0,i.Z)(this,vt)});case 23:return t.abrupt("return",a((0,i.Z)(this,pt)));case 24:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"setMatcherAuthenticated",value:function(){var t=(0,s.Z)(f().mark((function t(e,n){var r,c,a,s,u,o,l,h,p,Z,y=this;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(0,k.o4)((0,i.Z)(this,pt),(0,i.Z)(this,Zt),e,(0,i.Z)(this,yt)),c=(0,x.Ct)(),a=c.respond,s=c.error,t.next=4,(0,m.zc)(r,(0,i.Z)(this,vt));case 4:if(u=t.sent,o=u.response,!(l=u.error)){t.next=9;break}return t.abrupt("return",s(l));case 9:if(h=(0,i.Z)(this,yt)?nt(r,e):"".concat((0,i.Z)(this,dt)).concat(e),p=R[e],Z=(0,x.tS)(G(o,h),(function(t){var e=t.policy,n=t.dataset;return{policy:D(e,p,(0,i.Z)(y,yt)),dataset:n}}),(function(t){var e=t.policy;return V(t.dataset,e,n,(0,i.Z)(y,yt))}),(function(t){var e=t.policy,n=t.dataset;return d.h.setPolicy(n,e)})),!(0,i.Z)(this,yt)){t.next=19;break}return t.next=15,(0,v.ek)(r,Z,{fetch:(0,i.Z)(this,vt)});case 15:return t.next=17,this.ensureAccessControlPolicyAll(e);case 17:t.next=23;break;case 19:return t.next=21,this.ensureAccessControlPolicyAll(e);case 21:return t.next=23,(0,v.ek)(r,Z,{fetch:(0,i.Z)(this,vt)});case 23:return t.abrupt("return",a((0,i.Z)(this,pt)));case 24:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"addAgentToPolicy",value:function(){var t=(0,s.Z)(f().mark((function t(e,n){var r,c,a,s,u,o,l,h,p,Z,y=this;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(0,k.o4)((0,i.Z)(this,pt),(0,i.Z)(this,Zt),n,(0,i.Z)(this,yt)),c=(0,x.Ct)(),a=c.respond,s=c.error,t.next=4,(0,m.zc)(r,(0,i.Z)(this,vt));case 4:if(u=t.sent,o=u.response,!(l=u.error)){t.next=9;break}return t.abrupt("return",s(l));case 9:if(h=(0,i.Z)(this,yt)?nt(r,n):"".concat((0,i.Z)(this,dt)).concat(n),p=R[n],Z=(0,x.tS)(G(o,h),(function(t){var e=t.policy,n=t.dataset;return{policy:D(e,p,(0,i.Z)(y,yt)),dataset:n}}),(function(t){return j(t.policy,t.dataset,e,!0,(0,i.Z)(y,yt))}),(function(t){var e=t.policy,n=t.dataset;return d.h.setPolicy(n,e)})),!(0,i.Z)(this,yt)){t.next=19;break}return t.next=15,(0,v.ek)(r,Z,{fetch:(0,i.Z)(this,vt)});case 15:return t.next=17,this.ensureAccessControlPolicyAll(n);case 17:t.next=23;break;case 19:return t.next=21,this.ensureAccessControlPolicyAll(n);case 21:return t.next=23,(0,v.ek)(r,Z,{fetch:(0,i.Z)(this,vt)});case 23:return t.abrupt("return",a((0,i.Z)(this,pt)));case 24:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"removeAgentFromPolicy",value:function(){var t=(0,s.Z)(f().mark((function t(e,n){var r,c,a,s,o,l,h,p,A,w,b,P,O,C,E,R,M,U,T=this;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(0,k.o4)((0,i.Z)(this,pt),(0,i.Z)(this,Zt),n,(0,i.Z)(this,yt)),c=(0,x.Ct)(),a=c.respond,s=c.error,t.next=4,(0,m.zc)(r,(0,i.Z)(this,vt));case 4:if(o=t.sent,l=o.response,!(h=o.error)){t.next=9;break}return t.abrupt("return",s(h));case 9:if(p=(0,i.Z)(this,yt)?nt(r,n):"".concat((0,i.Z)(this,dt)).concat(n),A=d.h.getPolicy(l,p)){t.next=13;break}return t.abrupt("return",a((0,i.Z)(this,pt)));case 13:if(w=W(A,(0,i.Z)(this,yt)),b=w.map((function(t){var n=F(l,t,(0,i.Z)(T,yt)),r=d.h.removeAgent(n,e);return(0,Z.lY)(l,r)})),P=(0,u.Z)(b,1),O=P[0],C=X(p,O,(0,i.Z)(this,yt)),E=C.agents,!!E.length){t.next=24;break}if(R=w.map((function(t){return L(A,t,(0,i.Z)(T,yt))})),M=(0,u.Z)(R,1),U=M[0],W(U,(0,i.Z)(this,yt)).length||!(0,i.Z)(this,yt)){t.next=24;break}return t.next=23,(0,y._I)(p,{fetch:(0,i.Z)(this,vt)});case 23:r&&(0,g.Nm)(r)&&(0,k.mm)(r,fetch);case 24:if(!(0,i.Z)(this,yt)){t.next=31;break}return t.next=27,(0,v.ek)(r,O,{fetch:(0,i.Z)(this,vt)});case 27:return t.next=29,this.ensureAccessControlPolicyAll(n);case 29:t.next=35;break;case 31:return t.next=33,this.ensureAccessControlPolicyAll(n);case 33:return t.next=35,(0,v.ek)(r,O,{fetch:(0,i.Z)(this,vt)});case 35:return t.abrupt("return",a((0,i.Z)(this,pt)));case 36:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"removeAgentFromCustomPolicy",value:function(){var t=(0,s.Z)(f().mark((function t(e,n){var r,c,a,s,o,l,h,p,A,w,b,P,O,C,E,R,M,U;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(0,k.o4)((0,i.Z)(this,pt),(0,i.Z)(this,Zt),n,(0,i.Z)(this,yt)),c=(0,x.Ct)(),a=c.respond,s=c.error,t.next=4,(0,m.zc)(r,(0,i.Z)(this,vt));case 4:if(o=t.sent,l=o.response,!(h=o.error)){t.next=9;break}return t.abrupt("return",s(h));case 9:if(p=(0,i.Z)(this,yt)?nt(r,n):"".concat((0,i.Z)(this,dt)).concat(n),A=d.h.getPolicy(l,p),w=d.h.getAllOfMatcherUrlAll(A),b=w.map((function(t){var n=d.h.getMatcher(l,t),r=d.h.removeAgent(n,e);return(0,Z.lY)(l,r)})),P=(0,u.Z)(b,1),O=P[0],C=X(p,O,(0,i.Z)(this,yt)),E=C.agents,!!E.length){t.next=22;break}if(R=w.map((function(t){return d.h.removeAllOfMatcherUrl(A,t)})),M=(0,u.Z)(R,1),U=M[0],d.h.getAllOfMatcherUrlAll(U).length){t.next=22;break}return t.next=21,(0,y._I)(p,{fetch:(0,i.Z)(this,vt)});case 21:r&&(0,g.Nm)(r)&&(0,k.mm)(r,fetch);case 22:if(!(0,i.Z)(this,yt)){t.next=29;break}return t.next=25,(0,v.ek)(r,O,{fetch:(0,i.Z)(this,vt)});case 25:return t.next=27,this.ensureAccessControlPolicyAll(n);case 27:t.next=33;break;case 29:return t.next=31,this.ensureAccessControlPolicyAll(n);case 31:return t.next=33,(0,v.ek)(r,O,{fetch:(0,i.Z)(this,vt)});case 33:return t.abrupt("return",a((0,i.Z)(this,pt)));case 34:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"savePermissionsForAgent",value:function(){var t=(0,s.Z)(f().mark((function t(e,n){var r,c,a,s,u,o,l;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(0,x.Ct)(),c=r.respond,a=r.error,t.next=3,(0,m.zc)((0,i.Z)(this,dt),(0,i.Z)(this,vt));case 3:if(s=t.sent,u=s.response,!(o=s.error)){t.next=8;break}return t.abrupt("return",a(o));case 8:if(l=(0,A.qf)(n)?Q(e,u,(0,i.Z)(this,yt)):this.updatePermissionsForAgent(e,n,u),!(0,i.Z)(this,yt)){t.next=16;break}return t.next=12,(0,v.ek)((0,i.Z)(this,dt),l,{fetch:(0,i.Z)(this,vt)});case 12:return t.next=14,this.ensureAccessControlAll();case 14:t.next=20;break;case 16:return t.next=18,this.ensureAccessControlAll();case 18:return t.next=20,(0,v.ek)((0,i.Z)(this,dt),l,{fetch:(0,i.Z)(this,vt)});case 20:return t.abrupt("return",c((0,i.Z)(this,pt)));case 21:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()}],[{key:"init",value:function(){var e=(0,s.Z)(f().mark((function e(n,r,c,i){var a,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,g.LH)(n),e.next=3,d.h.getResourceInfoWithAcr(a,{fetch:c});case 3:if(s=e.sent,d.h.hasAccessibleAcr(s)){e.next=6;break}throw new Error("No access to Access Control Resource for this resource");case 6:return e.abrupt("return",new t(s,r,c,i));case 7:case"end":return e.stop()}}),e)})));return function(t,n,r,c){return e.apply(this,arguments)}}()}]),t}()},23934:function(t,e,n){n.d(e,{KW:function(){return p},U2:function(){return d}});var r=n(50029),c=n(87794),i=n.n(c),a=n(67294),s=n(11163),u=n(40478),o="LOGGED_IN",l="LOGGED_OUT";function h(t,e,n,r){return f.apply(this,arguments)}function f(){return(f=(0,r.Z)(i().mark((function t(e,n,r,c){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=2;break}return t.abrupt("return");case 2:if(!e||r!==o){t.next=5;break}return t.next=5,s.default.push(c);case 5:if(e||r!==l){t.next=8;break}return t.next=8,s.default.push(c);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/login",e=(0,u.useSession)(),n=e.session,r=e.sessionRequestInProgress;(0,a.useEffect)((function(){n.info.isLoggedIn||h(n.info.isLoggedIn,r,l,t)}))}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",e=(0,u.useSession)(),n=e.session,r=e.sessionRequestInProgress,c=(0,s.useRouter)();(0,a.useEffect)((function(){n.info.isLoggedIn&&!c.asPath.includes("login")||r||h(n.info.isLoggedIn,r,o,t)}),[n,c,t,r])}},35878:function(t,e,n){n.d(e,{Ux:function(){return u},wO:function(){return o},Hb:function(){return l},bm:function(){return h},SV:function(){return f}});var r=n(35863),c=n(95287),i=n(36163),a=n(80480),s=n(15259),u="http://www.w3.org/ns/solid/acp#AuthenticatedAgent",o="Anyone signed in",l="authenticated",h={isOfType:function(t){return t&&(0,r.Gr)(t,"http://www.w3.org/ns/solid/acp#agent")===u},getName:function(t){return(0,r.oX)(t,a.ay.name)},getAvatarProps:function(){return{icon:"user-lock",src:null,variant:"authenticated"}}},f=function(t){var e=(0,s.tS)((0,c.Lx)(),(function(t){return(0,i.qg)(t,"http://www.w3.org/ns/solid/acp#agent","http://www.w3.org/ns/solid/acp#AuthenticatedAgent")}),(function(t){return(0,i.go)(t,a.ay.name,"Anyone signed in")}));return{thing:e,dataset:(0,c.lY)(t,e),type:h}}},70766:function(t,e,n){n.d(e,{ZJ:function(){return u},Ir:function(){return o},fL:function(){return l},Wp:function(){return h},Aq:function(){return f}});var r=n(35863),c=n(95287),i=n(36163),a=n(80480),s=n(15259),u="Anyone",o="public",l="http://www.w3.org/ns/solid/acp#PublicAgent",h={isOfType:function(t){return t&&(0,r.Gr)(t,"http://www.w3.org/ns/solid/acp#agent")===l},getName:function(t){return(0,r.oX)(t,a.ay.name)},getAvatarProps:function(){return{icon:"globe",src:null,variant:"public"}}},f=function(t){var e=(0,s.tS)((0,c.Lx)(),(function(t){return(0,i.qg)(t,"http://www.w3.org/ns/solid/acp#agent","http://www.w3.org/ns/solid/acp#PublicAgent")}),(function(t){return(0,i.go)(t,a.ay.name,"Anyone")}));return{thing:e,dataset:(0,c.lY)(t,e),type:h}}},69873:function(t,e,n){n.d(e,{c9:function(){return c},V_:function(){return a},zA:function(){return s},qf:function(){return u}});var r=n(59499),c={NONE:{key:"none",alias:"No access",acl:{read:!1,write:!1,append:!1,control:!1}},READ:{key:"read",alias:"View",acl:{read:!0,write:!1,append:!1,control:!1}},WRITE:{key:"write",alias:"Edit",acl:{read:!0,write:!0,append:!0,control:!1}},APPEND:{key:"append",alias:"Append",acl:{read:!0,write:!1,append:!0,control:!1}},CONTROL:{key:"control",alias:"Control",acl:{read:!0,write:!0,append:!0,control:!0}}};function i(t){return"read:".concat(t.read,",write:").concat(t.write,",append:").concat(t.append,",control:").concat(t.control)}function a(t){var e=Object.values(c).find((function(e){var n,r=e.acl;return n=r,i(t)===i(n)}));return e?e.alias:"Custom"}function s(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t={},(0,r.Z)(t,c.READ.key,e),(0,r.Z)(t,c.WRITE.key,n),(0,r.Z)(t,c.APPEND.key,i),(0,r.Z)(t,c.CONTROL.key,a),t}function u(t){return Object.values(t).reduce((function(t,e){return t&&!e}),!0)}}}]);
//# sourceMappingURL=385-68603fd49812af47.js.map