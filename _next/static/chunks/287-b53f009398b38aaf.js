"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[287],{2824:function(e,r,t){t.d(r,{ZP:function(){return E},GC:function(){return y},wP:function(){return x}});var n=t(50029),a=t(87794),u=t.n(a),c=t(67294),s=t(11719),i=t(10150),o=t(54303),f=t(11163),l=t(86010),p=t(68504),b=t(84549),h=t(82349),d=t(84923),v=t(69795);var k=t(99146),Z=t(15259);function m(e){var r=e.iri,t=e.bem,n=(0,Z.sr)(r)?"icon-folder":"icon-file";return c.createElement("i",{className:(0,l.Z)(t(n),t("resource-icon"))})}function x(e){return(0,Z.sr)(e)?"Container":"Resource"}var w=(0,s.Z)((function(e){return(0,i.Z)(function(e){return(0,o.createStyles)(e,["icons","table"],{spinnerContainer:{display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"center"},"resource-icon":e.icons.iconColor(e.palette.text.secondary)})}(e))}));function y(e,r,t){var a=b.kj.DETAILS;return function(){var c=(0,n.Z)(u().mark((function n(c){var s;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("keydown"!==c.type||"Enter"===c.key){n.next=2;break}return n.abrupt("return");case 2:if(!(s=c.target)||"A"!==s.tagName){n.next=5;break}return n.abrupt("return");case 5:if(!s||"I"!==s.tagName){n.next=7;break}return n.abrupt("return");case 7:return n.next=9,(0,k.R4)(a,e,r,t);case 9:case"end":return n.stop()}}),n)})));return function(e){return c.apply(this,arguments)}}()}function E(e){var r=e.resource,t=e.container,a=e.preselected,s=w(),i=(0,o.useBem)(s),Z=r.name,E=r.iri,C=(0,f.useRouter)(),L=(0,c.useContext)(h.Z).currentUri,_=C.query.resourceIri===E,N=(0,c.useState)(a),g=N[0],P=N[1];return(0,c.useEffect)((function(){!(0,p.Nm)(E)&&a&&P(!0)}),[a,E,P]),(0,c.useEffect)((function(){g&&(!function(e,r,t){var a=b.kj.DETAILS;(0,n.Z)(u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,k.R4)(a,e,r,t);case 2:case"end":return n.stop()}}),n)})))()}(E,t,C),P(!1))}),[g,P,t,E,C,a,r]),c.createElement("tr",{tabIndex:"0",className:(0,l.Z)(i("table__body-row","selectable",_?"selected":null)),onClick:y(E,L,C),onKeyDown:y(E,L,C)},c.createElement("td",{className:i("table__body-cell","align-center","width-preview")},c.createElement(v.Z,{iri:E})),c.createElement("td",{className:i("table__body-cell","align-center","width-preview")},c.createElement(m,{iri:E,bem:i})),c.createElement("td",{className:i("table__body-cell")},(0,p.Nm)(E)?c.createElement(d.Z,{containerIri:E,resourceIri:E,className:i("table__link")},Z):Z),c.createElement("td",{key:"".concat(E,"-type"),className:i("table__body-cell")},x(E)))}E.defaultProps={resource:{name:"",iri:""},preselected:!1}},96361:function(e,r,t){t.d(r,{Rx:function(){return C},Cz:function(){return y},W9:function(){return E}});var n=t(50029),a=t(87794),u=t.n(a),c=t(92777),s=t(82262),i=t(76078),o=t(82227),f=t(76403),l=t(68504),p=t(11847),b=t(62036),h=t(15259),d=t(69873),v=t(70936);var k=new WeakMap,Z=new WeakMap,m=function(){function e(r,t){(0,c.Z)(this,e),k.set(this,{writable:!0,value:void 0}),Z.set(this,{writable:!0,value:void 0}),(0,o.Z)(this,k,r),(0,o.Z)(this,Z,t)}return(0,s.Z)(e,[{key:"deleteFile",value:function(){var e=(0,n.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f._I)((0,l.LH)((0,i.Z)(this,k)),{fetch:(0,i.Z)(this,Z)}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getPermissions",value:function(){var e=(0,n.Z)(u().mark((function e(){var r,t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,p.ke)((0,i.Z)(this,k))){e.next=3;break}return r=(0,b.BU)((0,i.Z)(this,k)),e.abrupt("return",this.normalizePermissions(r));case 3:if(!(0,p.gE)((0,i.Z)(this,k))){e.next=7;break}return t=(0,p.OP)((0,i.Z)(this,k)),n=(0,b.YZ)(t),e.abrupt("return",this.normalizePermissions(n));case 7:throw new Error("No access to ACL for ".concat((0,l.LH)((0,i.Z)(this,k))));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"normalizePermissions",value:function(e){return Object.keys(e).filter(v.CB).map((function(r){var t=e[r];return{acl:t,alias:(0,d.V_)(t),webId:r}}))}},{key:"savePermissionsForAgent",value:function(){var e=(0,n.Z)(u().mark((function e(r,t){var n,a,c,s,f,d,v;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(0,h.Ct)(),a=n.respond,c=n.error,(0,p.gE)((0,i.Z)(this,k))){e.next=3;break}return e.abrupt("return",c("dataset does not have accessible ACL"));case 3:if(!(0,p.ke)((0,i.Z)(this,k))){e.next=7;break}s=(0,p.Rq)((0,i.Z)(this,k)),e.next=12;break;case 7:if(!(0,p.vd)((0,i.Z)(this,k))){e.next=11;break}s=(0,p.zL)((0,i.Z)(this,k)),e.next=12;break;case 11:return e.abrupt("return",c("unable to access ACL"));case 12:if(s){e.next=14;break}return e.abrupt("return",c("aclDataset is empty"));case 14:if(f=(0,l.LH)((0,i.Z)(this,k)),d=(0,h.tS)((0,b._r)(s,r,t),(function(e){return(0,h.sr)(f)?(0,b.T3)(e,r,t):e})),d){e.next=18;break}return e.abrupt("return",c("updatedAcl is empty"));case 18:return e.next=20,(0,p.tL)((0,i.Z)(this,k),d,{fetch:(0,i.Z)(this,Z)});case 20:if(e.sent){e.next=23;break}return e.abrupt("return",c("response is empty"));case 23:return e.next=25,(0,p.kL)((0,l.LH)((0,i.Z)(this,k)),{fetch:(0,i.Z)(this,Z)});case 25:if(v=e.sent){e.next=28;break}return e.abrupt("return",c("dataset is empty"));case 28:return(0,o.Z)(this,k,v),e.abrupt("return",a(v));case 30:case"end":return e.stop()}}),e,this)})));return function(r,t){return e.apply(this,arguments)}}()}],[{key:"init",value:function(){var r=(0,n.Z)(u().mark((function r(t,n){var a;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,p.kL)((0,l.LH)(t),{fetch:n});case 2:if(a=r.sent,"object"===typeof a.internal_acl&&((0,p.ke)(a)||(0,p.vd)(a))){r.next=5;break}throw new Error("No available ACL resource for this resource");case 5:return r.abrupt("return",new e(a,n));case 6:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()}]),e}(),x=t(14179),w="No available access policy for this resource";function y(e){return"acp"===e}function E(e){return"wac"===e}function C(e,r,t,n,a){return L.apply(this,arguments)}function L(){return(L=(0,n.Z)(u().mark((function e(r,t,n,a,c){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!E(c)){e.next=2;break}return e.abrupt("return",m.init(r,n));case 2:if(!y(c)){e.next=4;break}return e.abrupt("return",x.ZP.init(r,t,n,null!==a&&void 0!==a&&a));case 4:throw new Error(w);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},84549:function(e,r,t){t.d(r,{kj:function(){return a},g9:function(){return s}});var n=t(67294),a={DETAILS:"details"},u={menuOpen:!1,setMenuOpen:function(e){return e}},c=(0,n.createContext)(u);function s(e){var r=e.children,t=(0,n.useState)(!1),a=t[0],u=t[1];return n.createElement(c.Provider,{value:{menuOpen:a,setMenuOpen:u}},r)}s.defaultProps={children:null},r.ZP=c},58112:function(e,r,t){t.d(r,{Z:function(){return k}});var n=t(50029),a=t(87794),u=t.n(a),c=t(40478),s=t(68504),i=t(67294),o=t(96361),f=t(87407),l=t(28141),p=t(31958),b=t(11847),h=t(35345);function d(e,r){return v.apply(this,arguments)}function v(){return(v=(0,n.Z)(u().mark((function e(r,t){var n,a,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,s.LH)(r),e.next=3,p.O.isAcpControlled(n,{fetch:t});case 3:if(a=e.sent,c=!a&&(0,b.gE)(r),!a){e.next=7;break}return e.abrupt("return","acp");case 7:if(!c){e.next=9;break}return e.abrupt("return","wac");case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){var r=(0,c.useSession)().session.fetch,t=(0,i.useState)(),a=t[0],p=t[1],b=(0,i.useState)(),v=b[0],k=b[1],Z=e&&(0,s.LH)(e),m=(0,f.Z)(Z),x=(0,l.Z)(e).data,w=function(e){var r=(0,c.useSession)().fetch;return(0,h.ZP)(["useAccessControlType",e],(0,n.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",null);case 2:return t.abrupt("return",d(e,r));case 3:case"end":return t.stop()}}),t)}))),{revalidateOnFocus:!1})}(e),y=w.data,E=w.isValidating;return(0,i.useEffect)((function(){(0,n.Z)(u().mark((function t(){var n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!E&&e&&m&&void 0!==y){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,(0,o.Rx)(e,m,r,x,y);case 5:n=t.sent,p({accessControl:n,accessControlType:y}),k(null),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),k(t.t0),p(null);case 14:case"end":return t.stop()}}),t,null,[[2,10]])})))()}),[y,x,E,e,m,r]),{data:a,error:v,isValidating:!a&&!v}}},28141:function(e,r,t){t.d(r,{Z:function(){return f}});var n=t(50029),a=t(87794),u=t.n(a),c=t(35345),s=t(31958),i=t(40478),o=t(27937);function f(e){var r=(0,i.useSession)().fetch;return(0,c.ZP)([e?s.O.getLinkedAcrUrl(e):null,r],function(){var e=(0,n.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.O)(t,r);case 2:return e.abrupt("return",!e.sent);case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}())}},87407:function(e,r,t){t.d(r,{Z:function(){return o}});var n=t(31958),a=t(67294),u=t(6578),c=t(827),s=t(28141),i=t(82708);function o(e){var r=(0,i.Z)(e).data,t=(0,a.useState)(),o=t[0],f=t[1],l=(0,u.Z)(e),p=(0,s.Z)(r).data;return(0,a.useEffect)((function(){var t;e&&f(void 0!==p?p?l?(0,c.mx)(l):null:void 0!==r&&null!==r&&null!==(t=n.O.getLinkedAcrUrl(r))&&void 0!==t?t:null:null)}),[p,r,e,l]),o}}}]);
//# sourceMappingURL=287-b53f009398b38aaf.js.map