"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[153],{76153:function(e,t,r){r.d(t,{Z:function(){return ue}});var n=r(67294),a=r(29773),o=r(11719),l=r(35117),i=r(54303),u=r(11163),s=r(59499);var c=r(23934),p=r(41664);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var g=r(21015),f=r(36864),v=r(50029),E=r(4730),b=r(87794),h=r.n(b),x=r(40478),y=r(58928),_=r(22374),k=r(38775),Z=(0,n.createContext)(null),C=Z;function w(e){var t=e.children,r=(0,k.Z)();return n.createElement(Z.Provider,{value:r},t)}w.defaultProps={children:null};var O=r(16677),N=(0,n.createContext)(null),P=N;function D(e){var t=e.children,r=(0,O.Z)([y.Wz]);return n.createElement(N.Provider,{value:r},t)}D.defaultProps={children:null};var G=r(59245),j=r(35345);var S=(0,n.createContext)(null),F=S;function I(e){var t=e.children,r=(0,n.useContext)(P).data,a=null===r||void 0===r?void 0:r.sort((function(e,t){return(0,_.kF)(e)<(0,_.kF)(t)?-1:1})),o=function(e){var t=(0,x.useSession)().fetch;return(0,j.ZP)(["group",e],(0,v.Z)(h().mark((function r(){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=2;break}return r.abrupt("return",null);case 2:return r.abrupt("return",(0,_.ex)(e,t));case 3:case"end":return r.stop()}}),r)}))),{errorRetryCount:0})}((0,u.useRouter)().query.iri||(a&&a[0]?(0,_.ZI)(a[0]):null));return n.createElement(S.Provider,{value:o},t)}var R=["children"];function B(e){var t=e.children,r=(0,E.Z)(e,R),o=(0,n.useContext)(C),l=o.data,i=o.error,s=o.mutate,c=(0,n.useContext)(P),p=c.data,d=c.error,m=c.mutate,b=(0,n.useContext)(F).mutate,k=(0,x.useSession)().fetch,Z=(0,u.useRouter)(),w=(0,n.useState)(!1),O=w[0],N=w[1],D=function(){var e=(0,v.Z)(h().mark((function e(t){var r,n,a,o,i,u,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),N(!0),r="Group ".concat(p.length+1),e.next=5,(0,y.ZF)(l,r,k);case 5:return n=e.sent,a=n.addressBook,o=n.group,i=n.groupIndex,u=(0,G.RY)(i),e.next=12,Promise.all([s(a),m(u),b(o)]);case 12:return c=(0,_.ZI)(o),e.next=15,Z.push("/groups/".concat(encodeURIComponent(c),"?created"));case 15:N(!1);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return!p&&!d||!l&&!i?null:O?n.createElement(g.Z,null):n.createElement(a.zx,(0,f.Z)({},r,{"data-testid":"create-group-button",onClick:D}),t)}var z=r(25476);var L=(0,o.Z)((function(e){return(0,l.Z)(function(e){return{"group-list-empty":{color:e.palette.grey[600],margin:e.spacing(2,0),textAlign:"center"}}}(e))}));function q(){var e=(0,i.useBem)(L());return n.createElement("div",{className:e("group-list-empty"),"data-testid":"group-list-empty"},"No groups")}var V=(0,o.Z)((function(e){return(0,l.Z)(function(e){var t="#633DCC";return{"group-list-header":(0,s.Z)({alignItems:"center",display:"flex",marginBottom:e.spacing(1)},e.breakpoints.up("sm"),{padding:e.spacing(1.6,2.4,1.2,2.4)}),"group-list-header__title":m(m({},e.typography.h5),{},{flexGrow:1}),"group-list":{listStyle:"none",margin:0,padding:0},"group-list__item":{},"group-list__link":(0,s.Z)({color:e.palette.text.primary,display:"flex",gap:e.spacing(1.4),alignItems:"center",borderLeft:"solid 3px transparent",textDecoration:"none",padding:e.spacing(1.6,0)},e.breakpoints.up("sm"),{padding:e.spacing(1.6,2.4)}),"group-list__link--selected":(0,s.Z)({},e.breakpoints.up("sm"),{background:"#F1EDFF",borderColor:t,color:t,fontFamily:e.typography.body1.fontFamily,fontWeight:e.typography.fontWeightBold}),"group-list__icon":{fontSize:"0.8125rem"},"group-list__icon--selected":(0,s.Z)({},e.breakpoints.up("sm"),e.icons.iconColor(e.palette.primary.main)),"group-list__text":{wordBreak:"break-all"}}}(e))}));function W(){var e=(0,n.useContext)(P),t=e.data,r=e.error,o=(0,i.useBem)(V()),l=(0,u.useRouter)().query.iri,s=null===t||void 0===t?void 0:t.sort((function(e,t){return(0,_.kF)(e)<(0,_.kF)(t)?-1:1})),c=!t&&!r;return n.createElement("div",{"data-testid":"group-list"},n.createElement("div",{className:o("group-list-header")},n.createElement("div",{className:o("group-list-header__title")},"Groups"),n.createElement(B,{iconBefore:"add",variant:"small"},"New Group")),c&&n.createElement(g.Z,null),r&&n.createElement(z.Z,{error:r}),!r&&t&&0===t.length&&n.createElement(q,null),!r&&t&&t.length>0&&n.createElement("ul",{className:o("group-list")},s.map((function(e,t){var r=(0,_.ZI)(e),i=(0,_.kF)(e),u=l?l===r:0===t;return n.createElement("li",{className:o("group-list__item"),key:r,"data-testid":"group-list-item"},n.createElement(p.default,{href:"/groups/".concat(encodeURIComponent(r))},n.createElement("a",{className:o("group-list__link",{selected:u}),"data-testid":"group-list-link"},n.createElement(a.PJ,{name:"users",className:o("group-list__icon",{selected:u})}),n.createElement("span",{className:o("group-list__text")},i))))}))))}function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var A=(0,o.Z)((function(e){return(0,l.Z)(function(e){return{"group-view-empty":{marginTop:e.spacing(7),textAlign:"center"},"icon-large":Y(Y({},e.icons.iconColor("#0D6796")),{},{fontSize:64})}}(e))}));function U(){var e=(0,i.useBem)(A());return n.createElement("div",{className:e("group-view-empty"),"data-testid":"group-view-empty"},n.createElement(a.PJ,{name:"users",className:e("icon-large")}),n.createElement("h2",null,"You don't have any groups yet!"),n.createElement("p",null,"Create a new group to easily share files with."),n.createElement(B,null,"Create New Group"))}var K=r(55517),J=r(39402),M="GroupDetailsTitle";function Q(e){var t=e.handleClose,r=e.open,o=(0,n.useContext)(F),l=o.data,i=o.error,u=o.mutate,c=o.isValidating,p=(0,n.useContext)(C),d=p.data,m=p.error,f=p.isValidating,E=(0,n.useContext)(P),b=E.error,k=E.mutate,Z=E.isValidating,w=(0,x.useSession)().fetch,O=(0,n.useState)(!1),N=O[0],D=O[1],j=(0,n.useState)(""),S=j[0],I=j[1],R=(0,n.useState)(""),B=R[0],L=R[1];(0,n.useEffect)((function(){l&&(I((0,_.kF)(l)),L((0,_.ys)(l)))}),[l]);var q=function(){var e=(0,v.Z)(h().mark((function e(r){var n,a,o,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),S){e.next=3;break}return e.abrupt("return");case 3:return D(!0),e.next=6,(0,y.hz)(d,l,S,w,(0,s.Z)({},J.w_.note,B));case 6:return n=e.sent,a=n.group,o=n.groupIndex,i=(0,G.RY)(o),e.next=12,Promise.all([u(a),k(i)]);case 12:D(!1),t();case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(N||c||f||Z)return n.createElement(g.Z,null);var V=m||i||b;return V?n.createElement(z.Z,{error:V}):n.createElement(a.u_,{open:r,onClose:t,"data-testid":"group-details-modal","aria-labelledby":M},n.createElement(a.F0,null,n.createElement(a.r6,{id:M},"Edit Group Details"),n.createElement(a.fe,null,n.createElement(a.l0,{onSubmit:q},n.createElement(a.II,{id:"GroupName",label:"Group Name",value:S,invalidMessage:S?null:"Name is required",onChange:function(e){return I(e.target.value)},"data-testid":"group-details-modal-name-field",required:!0,maxLength:50,autoFocus:!0}),n.createElement(a.gx,{id:"GroupDescription",label:"Group Description (Optional)",value:B,onChange:function(e){return L(e.target.value)},"data-testid":"group-details-modal-description-field",maxLength:250}))),n.createElement(a.go,null,n.createElement(a.zx,{"data-testid":"group-details-modal-cancel-button",variant:"secondary",onClick:function(){return t()}},"Cancel"),n.createElement(a.zx,{"data-testid":"group-details-modal-save-button",onClick:q},"Save"))))}var H="GroupDeleteModalTitle";function X(e){var t=e.handleClose,r=e.open,o=(0,n.useContext)(C).data,l=(0,n.useContext)(P).mutate,i=(0,n.useContext)(F).data,s=(0,x.useSession)().fetch,c=(0,u.useRouter)(),p=(0,n.useState)(!1),d=p[0],m=p[1],f=(0,_.kF)(i),E=function(){var e=(0,v.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,(0,y.iE)(o,i,s);case 3:return e.next=5,l();case 5:return e.next=7,c.push("/groups");case 7:m(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return n.createElement(a.u_,{open:r,onClose:t,"data-testid":"group-delete-modal","aria-labelledby":H},n.createElement(a.F0,null,d&&n.createElement(g.Z,null),!d&&n.createElement(n.Fragment,null,n.createElement(a.r6,{id:H,"data-testid":"group-delete-modal-title"},"Delete\xa0",f),n.createElement(a.fe,{"data-testid":"group-delete-modal-body"},n.createElement(a.VY,null,n.createElement("p",null,"Everyone in the group will lose access to anything shared with this group."))),n.createElement(a.go,null,n.createElement(a.zx,{variant:"secondary",onClick:t,"data-testid":"group-delete-modal-cancel-button"},"Cancel"),n.createElement(a.zx,{onClick:E,"data-testid":"group-delete-modal-save-button"},"Delete Group")))))}var $="edit",ee="delete";function te(e){var t=(0,n.useState)(null),r=t[0],o=t[1],l=function(e){return o(e)},i=function(){return o(null)};return n.createElement("div",e,n.createElement(a.Kk,null,n.createElement(a.zx,{onClick:function(){return l($)},"data-testid":"group-details-action-button-edit-action",variant:"in-menu"},"Edit Group Details"),n.createElement(K.Z,null),n.createElement(a.zx,{onClick:function(){return l(ee)},"data-testid":"group-details-action-button-delete-action",variant:"in-menu-danger",iconBefore:"delete"},"Delete Group")),n.createElement(Q,{handleClose:i,open:r===$}),n.createElement(X,{handleClose:i,open:r===ee}))}var re="group-details-description",ne=(0,o.Z)((function(e){return(0,l.Z)(function(e){return{"group-details":{display:"flex"},"group-details__main-content":{flexGrow:1},"group-details__back-link":(0,s.Z)({paddingLeft:0},e.breakpoints.up("sm"),{display:"none"}),"group-details__action-button":{},"group-details__title":{marginTop:0},"group-details__description":{"&&":{color:"black",fontSize:"0.8125rem"}},"group-details__description--fallback":{"&&":{color:e.palette.text.primary}}}}(e))}));function ae(){var e=(0,n.useContext)(F),t=e.data,r=e.isValidating,o=(0,n.useContext)(P).isValidating,l=(0,i.useBem)(ne());if(r||o)return n.createElement(g.Z,null);var u=(0,_.ys)(t);return n.createElement("div",{"data-testid":"group-details",className:l("group-details")},n.createElement("div",{className:l("group-details__main-content")},n.createElement(p.default,{href:"/groups"},n.createElement(a.Qj,{variant:"text",iconBefore:"caret-left",className:l("group-details__back-link"),"data-testid":"group-details-back-link"},"All Groups")),n.createElement(a.VY,null,n.createElement("h1",{className:l("group-details__title"),"data-testid":"group-details-name"},(0,_.kF)(t)),u?n.createElement("p",{className:l("group-details__description"),"data-testid":re},u):n.createElement("p",{className:l("group-details__description","fallback"),"data-testid":re},"(Optional) Add a group description"))),n.createElement(te,{className:l("group-details__action-button")}))}var oe=(0,o.Z)((function(e){return(0,l.Z)(function(e){return{"group-view":(0,s.Z)({},e.breakpoints.up("sm"),{padding:e.spacing(2.4)})}}(e))}));function le(){var e=(0,i.useBem)(oe()),t=(0,n.useContext)(P),r=t.data,a=t.error,o=(0,u.useRouter)().query.iri,l=(0,n.useContext)(F),s=l.data,c=l.error,p=!r&&!a||o&&!s&&!c,d=a||c;return n.createElement("div",{className:e("group-view"),"data-testid":"group-view"},p&&n.createElement(g.Z,null),d&&n.createElement(z.Z,{error:d}),!p&&!d&&s&&n.createElement(ae,null),!p&&!d&&!s&&n.createElement(U,null))}var ie=(0,o.Z)((function(e){return(0,l.Z)(function(e){return{"groups-container":(0,s.Z)({flexGrow:1,margin:e.spacing(1,0)},e.breakpoints.up("sm"),{display:"flex",gap:"1rem"}),"groups-container__content":(0,s.Z)({display:"none"},e.breakpoints.up("sm"),{border:"solid 1px",borderColor:e.palette.grey[200],borderRadius:8,boxShadow:"0 4px 12px 1px rgba(208,208,208,0.22)",display:"block"}),"groups-container__content--focus":{display:"block"},"groups-container__content--list":(0,s.Z)({},e.breakpoints.up("sm"),{maxWidth:360,width:"50%"}),"groups-container__content--main":(0,s.Z)({},e.breakpoints.up("sm"),{flexGrow:1})}}(e))}));function ue(){(0,c.KW)();var e=(0,i.useBem)(ie()),t=!!(0,u.useRouter)().query.iri;return n.createElement(w,null,n.createElement(D,null,n.createElement(I,null,n.createElement(a.mr,{title:"Groups"}),n.createElement(a.W2,{className:e("groups-container")},n.createElement("div",{className:e("groups-container__content","list",{focus:!t})},n.createElement(W,null)),n.createElement("div",{className:e("groups-container__content","main",{focus:t})},n.createElement(le,null))))))}},23934:function(e,t,r){r.d(t,{KW:function(){return m},U2:function(){return g}});var n=r(50029),a=r(87794),o=r.n(a),l=r(67294),i=r(11163),u=r(40478),s="LOGGED_IN",c="LOGGED_OUT";function p(e,t,r,n){return d.apply(this,arguments)}function d(){return(d=(0,n.Z)(o().mark((function e(t,r,n,a){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=2;break}return e.abrupt("return");case 2:if(!t||n!==s){e.next=5;break}return e.next=5,i.default.push(a);case 5:if(t||n!==c){e.next=8;break}return e.next=8,i.default.push(a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/login",t=(0,u.useSession)(),r=t.session,n=t.sessionRequestInProgress;(0,l.useEffect)((function(){r.info.isLoggedIn||p(r.info.isLoggedIn,n,c,e)}))}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=(0,u.useSession)(),r=t.session,n=t.sessionRequestInProgress,a=(0,i.useRouter)();(0,l.useEffect)((function(){r.info.isLoggedIn&&!a.asPath.includes("login")||n||p(r.info.isLoggedIn,n,s,e)}),[r,a,e,n])}}}]);
//# sourceMappingURL=153-476f78c4ca2a8fa0.js.map